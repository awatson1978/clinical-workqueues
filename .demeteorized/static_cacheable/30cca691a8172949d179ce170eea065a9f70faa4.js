(function(){(function(){var e=this,t=e._,n={},r=Array.prototype,o=Object.prototype,i=Function.prototype,a=r.push,s=r.slice,l=r.concat,u=(r.unshift,o.toString),c=o.hasOwnProperty,d=r.forEach,f=r.map,p=r.reduce,h=r.reduceRight,g=r.filter,m=r.every,v=r.some,_=r.indexOf,y=r.lastIndexOf,b=Array.isArray,w=Object.keys,S=i.bind,T=function(e){return e instanceof T?e:this instanceof T?(this._wrapped=e,void 0):new T(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=T),exports._=T):e._=T,T.VERSION="1.4.2";var M=T.each=T.forEach=function(e,t,r){if(null!=e)if(d&&e.forEach===d)e.forEach(t,r);else if(e.length===+e.length){for(var o=0,i=e.length;i>o;o++)if(t.call(r,e[o],o,e)===n)return}else for(var a in e)if(T.has(e,a)&&t.call(r,e[a],a,e)===n)return};T.map=T.collect=function(e,t,n){var r=[];return null==e?r:f&&e.map===f?e.map(t,n):(M(e,function(e,o,i){r[r.length]=t.call(n,e,o,i)}),r)},T.reduce=T.foldl=T.inject=function(e,t,n,r){var o=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=T.bind(t,r)),o?e.reduce(t,n):e.reduce(t);if(M(e,function(e,i,a){o?n=t.call(r,n,e,i,a):(n=e,o=!0)}),!o)throw new TypeError("Reduce of empty array with no initial value");return n},T.reduceRight=T.foldr=function(e,t,n,r){var o=arguments.length>2;if(null==e&&(e=[]),h&&e.reduceRight===h)return r&&(t=T.bind(t,r)),arguments.length>2?e.reduceRight(t,n):e.reduceRight(t);var i=e.length;if(i!==+i){var a=T.keys(e);i=a.length}if(M(e,function(s,l,u){l=a?a[--i]:--i,o?n=t.call(r,n,e[l],l,u):(n=e[l],o=!0)}),!o)throw new TypeError("Reduce of empty array with no initial value");return n},T.find=T.detect=function(e,t,n){var r;return k(e,function(e,o,i){return t.call(n,e,o,i)?(r=e,!0):void 0}),r},T.filter=T.select=function(e,t,n){var r=[];return null==e?r:g&&e.filter===g?e.filter(t,n):(M(e,function(e,o,i){t.call(n,e,o,i)&&(r[r.length]=e)}),r)},T.reject=function(e,t,n){var r=[];return null==e?r:(M(e,function(e,o,i){t.call(n,e,o,i)||(r[r.length]=e)}),r)},T.every=T.all=function(e,t,r){t||(t=T.identity);var o=!0;return null==e?o:m&&e.every===m?e.every(t,r):(M(e,function(e,i,a){return(o=o&&t.call(r,e,i,a))?void 0:n}),!!o)};var k=T.some=T.any=function(e,t,r){t||(t=T.identity);var o=!1;return null==e?o:v&&e.some===v?e.some(t,r):(M(e,function(e,i,a){return o||(o=t.call(r,e,i,a))?n:void 0}),!!o)};T.contains=T.include=function(e,t){var n=!1;return null==e?n:_&&e.indexOf===_?-1!=e.indexOf(t):n=k(e,function(e){return e===t})},T.invoke=function(e,t){var n=s.call(arguments,2);return T.map(e,function(e){return(T.isFunction(t)?t:e[t]).apply(e,n)})},T.pluck=function(e,t){return T.map(e,function(e){return e[t]})},T.where=function(e,t){return T.isEmpty(t)?[]:T.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},T.max=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&T.isEmpty(e))return-1/0;var r={computed:-1/0};return M(e,function(e,o,i){var a=t?t.call(n,e,o,i):e;a>=r.computed&&(r={value:e,computed:a})}),r.value},T.min=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&T.isEmpty(e))return 1/0;var r={computed:1/0};return M(e,function(e,o,i){var a=t?t.call(n,e,o,i):e;r.computed>a&&(r={value:e,computed:a})}),r.value},T.shuffle=function(e){var t,n=0,r=[];return M(e,function(e){t=T.random(n++),r[n-1]=r[t],r[t]=e}),r};var E=function(e){return T.isFunction(e)?e:function(t){return t[e]}};T.sortBy=function(e,t,n){var r=E(t);return T.pluck(T.map(e,function(e,t,o){return{value:e,index:t,criteria:r.call(n,e,t,o)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var x=function(e,t,n,r){var o={},i=E(t);return M(e,function(t,a){var s=i.call(n,t,a,e);r(o,s,t)}),o};T.groupBy=function(e,t,n){return x(e,t,n,function(e,t,n){(T.has(e,t)?e[t]:e[t]=[]).push(n)})},T.countBy=function(e,t,n){return x(e,t,n,function(e,t){T.has(e,t)||(e[t]=0),e[t]++})},T.sortedIndex=function(e,t,n,r){n=null==n?T.identity:E(n);for(var o=n.call(r,t),i=0,a=e.length;a>i;){var s=i+a>>>1;o>n.call(r,e[s])?i=s+1:a=s}return i},T.toArray=function(e){return e?e.length===+e.length?s.call(e):T.values(e):[]},T.size=function(e){return e.length===+e.length?e.length:T.keys(e).length},T.first=T.head=T.take=function(e,t,n){return null==t||n?e[0]:s.call(e,0,t)},T.initial=function(e,t,n){return s.call(e,0,e.length-(null==t||n?1:t))},T.last=function(e,t,n){return null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},T.rest=T.tail=T.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},T.compact=function(e){return T.filter(e,function(e){return!!e})};var C=function(e,t,n){return M(e,function(e){T.isArray(e)?t?a.apply(n,e):C(e,t,n):n.push(e)}),n};T.flatten=function(e,t){return C(e,t,[])},T.without=function(e){return T.difference(e,s.call(arguments,1))},T.uniq=T.unique=function(e,t,n,r){var o=n?T.map(e,n,r):e,i=[],a=[];return M(o,function(n,r){(t?r&&a[a.length-1]===n:T.contains(a,n))||(a.push(n),i.push(e[r]))}),i},T.union=function(){return T.uniq(l.apply(r,arguments))},T.intersection=function(e){var t=s.call(arguments,1);return T.filter(T.uniq(e),function(e){return T.every(t,function(t){return T.indexOf(t,e)>=0})})},T.difference=function(e){var t=l.apply(r,s.call(arguments,1));return T.filter(e,function(e){return!T.contains(t,e)})},T.zip=function(){for(var e=s.call(arguments),t=T.max(T.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=T.pluck(e,""+r);return n},T.object=function(e,t){for(var n={},r=0,o=e.length;o>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},T.indexOf=function(e,t,n){if(null==e)return-1;var r=0,o=e.length;if(n){if("number"!=typeof n)return r=T.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,o+n):n}if(_&&e.indexOf===_)return e.indexOf(t,n);for(;o>r;r++)if(e[r]===t)return r;return-1},T.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(y&&e.lastIndexOf===y)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var o=r?n:e.length;o--;)if(e[o]===t)return o;return-1},T.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),o=0,i=Array(r);r>o;)i[o++]=e,e+=n;return i};var A=function(){};T.bind=function(e,t){var n,r;if(e.bind===S&&S)return S.apply(e,s.call(arguments,1));if(!T.isFunction(e))throw new TypeError;return r=s.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,r.concat(s.call(arguments)));A.prototype=e.prototype;var o=new A,i=e.apply(o,r.concat(s.call(arguments)));return Object(i)===i?i:o}},T.bindAll=function(e){var t=s.call(arguments,1);return 0==t.length&&(t=T.functions(e)),M(t,function(t){e[t]=T.bind(e[t],e)}),e},T.memoize=function(e,t){var n={};return t||(t=T.identity),function(){var r=t.apply(this,arguments);return T.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},T.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},T.defer=function(e){return T.delay.apply(T,[e,1].concat(s.call(arguments,1)))},T.throttle=function(e,t){var n,r,o,i,a,s,l=T.debounce(function(){a=i=!1},t);return function(){n=this,r=arguments;var u=function(){o=null,a&&(s=e.apply(n,r)),l()};return o||(o=setTimeout(u,t)),i?a=!0:(i=!0,s=e.apply(n,r)),l(),s}},T.debounce=function(e,t,n){var r,o;return function(){var i=this,a=arguments,s=function(){r=null,n||(o=e.apply(i,a))},l=n&&!r;return clearTimeout(r),r=setTimeout(s,t),l&&(o=e.apply(i,a)),o}},T.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},T.wrap=function(e,t){return function(){var n=[e];return a.apply(n,arguments),t.apply(this,n)}},T.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},T.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},T.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)T.has(e,n)&&(t[t.length]=n);return t},T.values=function(e){var t=[];for(var n in e)T.has(e,n)&&t.push(e[n]);return t},T.pairs=function(e){var t=[];for(var n in e)T.has(e,n)&&t.push([n,e[n]]);return t},T.invert=function(e){var t={};for(var n in e)T.has(e,n)&&(t[e[n]]=n);return t},T.functions=T.methods=function(e){var t=[];for(var n in e)T.isFunction(e[n])&&t.push(n);return t.sort()},T.extend=function(e){return M(s.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},T.pick=function(e){var t={},n=l.apply(r,s.call(arguments,1));return M(n,function(n){n in e&&(t[n]=e[n])}),t},T.omit=function(e){var t={},n=l.apply(r,s.call(arguments,1));for(var o in e)T.contains(n,o)||(t[o]=e[o]);return t},T.defaults=function(e){return M(s.call(arguments,1),function(t){for(var n in t)null==e[n]&&(e[n]=t[n])}),e},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e};var N=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof T&&(e=e._wrapped),t instanceof T&&(t=t._wrapped);var o=u.call(e);if(o!=u.call(t))return!1;switch(o){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var i=n.length;i--;)if(n[i]==e)return r[i]==t;n.push(e),r.push(t);var a=0,s=!0;if("[object Array]"==o){if(a=e.length,s=a==t.length)for(;a--&&(s=N(e[a],t[a],n,r)););}else{var l=e.constructor,c=t.constructor;if(l!==c&&!(T.isFunction(l)&&l instanceof l&&T.isFunction(c)&&c instanceof c))return!1;for(var d in e)if(T.has(e,d)&&(a++,!(s=T.has(t,d)&&N(e[d],t[d],n,r))))break;if(s){for(d in t)if(T.has(t,d)&&!a--)break;s=!a}}return n.pop(),r.pop(),s};T.isEqual=function(e,t){return N(e,t,[],[])},T.isEmpty=function(e){if(null==e)return!0;if(T.isArray(e)||T.isString(e))return 0===e.length;for(var t in e)if(T.has(e,t))return!1;return!0},T.isElement=function(e){return!(!e||1!==e.nodeType)},T.isArray=b||function(e){return"[object Array]"==u.call(e)},T.isObject=function(e){return e===Object(e)},M(["Arguments","Function","String","Number","Date","RegExp"],function(e){T["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}}),T.isArguments(arguments)||(T.isArguments=function(e){return!(!e||!T.has(e,"callee"))}),T.isFunction=function(e){return"function"==typeof e},T.isFinite=function(e){return T.isNumber(e)&&isFinite(e)},T.isNaN=function(e){return T.isNumber(e)&&e!=+e},T.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==u.call(e)},T.isNull=function(e){return null===e},T.isUndefined=function(e){return void 0===e},T.has=function(e,t){return c.call(e,t)},T.noConflict=function(){return e._=t,this},T.identity=function(e){return e},T.times=function(e,t,n){for(var r=0;e>r;r++)t.call(n,r)},T.random=function(e,t){return null==t&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var O={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};O.unescape=T.invert(O.escape);var D={escape:RegExp("["+T.keys(O.escape).join("")+"]","g"),unescape:RegExp("("+T.keys(O.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(e){T[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return O[e][t]})}}),T.result=function(e,t){if(null==e)return null;var n=e[t];return T.isFunction(n)?n.call(e):n},T.mixin=function(e){M(T.functions(e),function(t){var n=T[t]=e[t];T.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),B.call(this,n.apply(T,e))}})};var I=0;T.uniqueId=function(e){var t=I++;return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(e,t,n){n=T.defaults({},n,T.templateSettings);var r=RegExp([(n.escape||L).source,(n.interpolate||L).source,(n.evaluate||L).source].join("|")+"|$","g"),o=0,i="__p+='";e.replace(r,function(t,n,r,a,s){i+=e.slice(o,s).replace(P,function(e){return"\\"+R[e]}),i+=n?"'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?"'+\n((__t=("+r+"))==null?'':__t)+\n'":a?"';\n"+a+"\n__p+='":"",o=s+t.length}),i+="';\n",n.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=Function(n.variable||"obj","_",i)}catch(s){throw s.source=i,s}if(t)return a(t,T);var l=function(e){return a.call(this,e,T)};return l.source="function("+(n.variable||"obj")+"){\n"+i+"}",l},T.chain=function(e){return T(e).chain()};var B=function(e){return this._chain?T(e).chain():e};T.mixin(T),M(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];T.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],B.call(this,n)}}),M(["concat","join","slice"],function(e){var t=r[e];T.prototype[e]=function(){return B.call(this,t.apply(this._wrapped,arguments))}}),T.extend(T.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}).call(this),function(){Meteor={isClient:!0,isServer:!1},"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__&&__meteor_runtime_config__.PUBLIC_SETTINGS&&(Meteor.settings={"public":__meteor_runtime_config__.PUBLIC_SETTINGS})}.call(this),function(){__meteor_runtime_config__.meteorRelease&&(Meteor.release=__meteor_runtime_config__.meteorRelease),_.extend(Meteor,{_get:function(e){for(var t=1;arguments.length>t;t++){if(!(arguments[t]in e))return void 0;e=e[arguments[t]]}return e},_ensure:function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];n in e||(e[n]={}),e=e[n]}return e},_delete:function(e){for(var t=[e],n=!0,r=1;arguments.length-1>r;r++){var o=arguments[r];if(!(o in e)){n=!1;break}if(e=e[o],"object"!=typeof e)break;t.push(e)}for(var r=t.length-1;r>=0;r--){var o=arguments[r+1];if(n)n=!1;else for(var i in t[r][o])return;delete t[r][o]}}})}.call(this),function(){_.extend(Meteor,{setTimeout:function(e,t){if(Meteor._CurrentInvocation){if(Meteor._CurrentInvocation.get()&&Meteor._CurrentInvocation.get().isSimulation)throw Error("Can't set timers inside simulations");var n=e;e=function(){Meteor._CurrentInvocation.withValue(null,n)}}return setTimeout(Meteor.bindEnvironment(e,function(e){Meteor._debug("Exception from setTimeout callback:",e.stack)}),t)},setInterval:function(e,t){if(Meteor._CurrentInvocation){if(Meteor._CurrentInvocation.get()&&Meteor._CurrentInvocation.get().isSimulation)throw Error("Can't set timers inside simulations");var n=e;e=function(){Meteor._CurrentInvocation.withValue(null,n)}}return setInterval(Meteor.bindEnvironment(e,function(e){Meteor._debug("Exception from setInterval callback:",e)}),t)},clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)},defer:function(e){Meteor.setTimeout(function(){e()},0)}})}.call(this),function(){var e=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};Meteor.makeErrorType=function(t,n){var r=function(){var e=this;if(Error.captureStackTrace)Error.captureStackTrace(e,r);else{var o=Error();o.__proto__=r.prototype,o instanceof r&&(e=o)}return n.apply(e,arguments),e.errorType=t,e};return e(r,Error),r}}.call(this),function(){var e=0,t=[];Meteor.EnvironmentVariable=function(){this.slot=e++},_.extend(Meteor.EnvironmentVariable.prototype,{get:function(){return t[this.slot]},withValue:function(e,n){var r=t[this.slot];try{t[this.slot]=e;var o=n()}finally{t[this.slot]=r}return o}}),Meteor.bindEnvironment=function(e,n,r){var o=_.clone(t);if(!n)throw Error("onException must be supplied");return function(){var i=t;try{t=o;var a=e.apply(r,_.toArray(arguments))}catch(s){n(s)}finally{t=i}return a}}}.call(this),function(){Meteor.absoluteUrl=function(e,t){t||"object"!=typeof e||(t=e,e=void 0),t=_.extend({},Meteor.absoluteUrl.defaultOptions,t||{});var n=t.rootUrl;if(!n)throw Error("Must pass options.rootUrl or set ROOT_URL in the server environment");return/^http[s]?:\/\//i.test(n)||(n="http://"+n),/\/$/.test(n)||(n+="/"),e&&(n+=e),t.secure&&/^http:/.test(n)&&!/http:\/\/localhost[:\/]/.test(n)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(n)&&(n=n.replace(/^http:/,"https:")),t.replaceLocalhost&&(n=n.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1")),n},Meteor.absoluteUrl.defaultOptions={},__meteor_runtime_config__&&__meteor_runtime_config__.ROOT_URL&&(Meteor.absoluteUrl.defaultOptions.rootUrl=__meteor_runtime_config__.ROOT_URL)}.call(this),function(){Deps={},Deps.active=!1,Deps.currentComputation=null;var e=function(e){Deps.currentComputation=e,Deps.active=!!e},t=function(){return"undefined"!=typeof Meteor?Meteor._debug:"undefined"!=typeof console&&console.log?console.log:function(){}},n=1,r=[],o=!1,i=!1,a=!1,s=[],l=function(){o||(setTimeout(Deps.flush,0),o=!0)},u=!1;Deps.Computation=function(e,t){if(!u)throw Error("Deps.Computation constructor is private; use Deps.autorun");u=!1;var r=this;r.stopped=!1,r.invalidated=!1,r.firstRun=!0,r._id=n++,r._onInvalidateCallbacks=[],r._parent=t,r._func=e,r._recomputing=!1;var o=!0;try{r._compute(),o=!1}finally{r.firstRun=!1,o&&r.stop()}},_.extend(Deps.Computation.prototype,{onInvalidate:function(e){var t=this;if("function"!=typeof e)throw Error("onInvalidate requires a function");var n=function(){Deps.nonreactive(function(){e(t)})};t.invalidated?n():t._onInvalidateCallbacks.push(n)},invalidate:function(){var e=this;if(!e.invalidated){e._recomputing||e.stopped||(l(),r.push(this)),e.invalidated=!0;for(var t,n=0;t=e._onInvalidateCallbacks[n];n++)t();e._onInvalidateCallbacks=[]}},stop:function(){this.stopped||(this.stopped=!0,this.invalidate())},_compute:function(){var t=this;t.invalidated=!1;var n=Deps.currentComputation;e(t),a=!0;try{t._func(t)}finally{e(n),a=!1}},_recompute:function(){var e=this;for(e._recomputing=!0;e.invalidated&&!e.stopped;)try{e._compute()}catch(n){t()("Exception from Deps recompute:",n.stack||n.message)}e._recomputing=!1}}),Deps.Dependency=function(){this._dependentsById={}},_.extend(Deps.Dependency.prototype,{depend:function(e){if(!e){if(!Deps.active)return!1;e=Deps.currentComputation}var t=this,n=e._id;return n in t._dependentsById?!1:(t._dependentsById[n]=e,e.onInvalidate(function(){delete t._dependentsById[n]}),!0)},changed:function(){var e=this;for(var t in e._dependentsById)e._dependentsById[t].invalidate()},hasDependents:function(){var e=this;for(var t in e._dependentsById)return!0;return!1}}),_.extend(Deps,{flush:function(){if(i)throw Error("Can't call Deps.flush while flushing");if(a)throw Error("Can't flush inside Deps.autorun");for(i=!0,o=!0;r.length||s.length;){var e=r;r=[];for(var n,l=0;n=e[l];l++)n._recompute();if(s.length){var u=s.shift();try{u()}catch(c){t()("Exception from Deps afterFlush function:",c.stack||c.message)}}}i=!1,o=!1},autorun:function(e){if("function"!=typeof e)throw Error("Deps.autorun requires a function argument");u=!0;var t=new Deps.Computation(e,Deps.currentComputation);return Deps.active&&Deps.onInvalidate(function(){t.stop()}),t},nonreactive:function(t){var n=Deps.currentComputation;e(null);try{return t()}finally{e(n)}},_makeNonreactive:function(e){if(e.$isNonreactive)return e;var t=function(){var t,n=this,r=_.toArray(arguments);return Deps.nonreactive(function(){t=e.apply(n,r)}),t};return t.$isNonreactive=!0,t},onInvalidate:function(e){if(!Deps.active)throw Error("Deps.onInvalidate requires a currentComputation");Deps.currentComputation.onInvalidate(e)},afterFlush:function(e){s.push(e),l()}})}.call(this),function(){var e=function(e){return void 0===e?"undefined":EJSON.stringify(e)},t=function(e){return void 0===e||"undefined"===e?void 0:EJSON.parse(e)};ReactiveDict=function(e){this.keys=e||{},this.keyDeps={},this.keyValueDeps={}},_.extend(ReactiveDict.prototype,{set:function(t,n){var r=this;n=e(n);var o="undefined";if(_.has(r.keys,t)&&(o=r.keys[t]),n!==o){r.keys[t]=n;var i=function(e){e&&e.changed()};i(r.keyDeps[t]),r.keyValueDeps[t]&&(i(r.keyValueDeps[t][o]),i(r.keyValueDeps[t][n]))}},setDefault:function(e,t){var n=this;void 0===n.keys[e]&&n.set(e,t)},get:function(e){var n=this;return n._ensureKey(e),n.keyDeps[e].depend(),t(n.keys[e])},equals:function(n,r){var o=this;if(!("string"==typeof r||"number"==typeof r||"boolean"==typeof r||void 0===r||r instanceof Date||Meteor.Collection!==void 0&&r instanceof Meteor.Collection.ObjectID||null===r))throw Error("ReactiveDict.equals: value must be scalar");var i=e(r);if(Deps.active){o._ensureKey(n),_.has(o.keyValueDeps[n],i)||(o.keyValueDeps[n][i]=new Deps.Dependency);var a=o.keyValueDeps[n][i].depend();a&&Deps.onInvalidate(function(){o.keyValueDeps[n][i].hasDependents()||delete o.keyValueDeps[n][i]})}var s=void 0;return _.has(o.keys,n)&&(s=t(o.keys[n])),EJSON.equals(s,r)},_ensureKey:function(e){var t=this;e in t.keyDeps||(t.keyDeps[e]=new Deps.Dependency,t.keyValueDeps[e]={})},getMigrationData:function(){return this.keys}})}.call(this),function(){var e=0;Meteor._debug=function(){if(e)return e--,void 0;if("undefined"!=typeof console&&console.log!==void 0)if(0==arguments.length)console.log("");else if("function"==typeof console.log.apply){for(var t=!0,n=0;arguments.length>n;n++)"string"!=typeof arguments[n]&&(t=!1);t?console.log.apply(console,[Array.prototype.join.call(arguments," ")]):console.log.apply(console,arguments)}else if("function"==typeof Function.prototype.bind){var r=Function.prototype.bind.call(console.log,console);r.apply(console,arguments)}else Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},Meteor._suppress_log=function(t){e+=t}}.call(this),function(){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,a,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(i=l.length,n=0;i>n;n+=1)a[n]=str(n,l)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,l),o&&a.push(quote(r)+(gap?": ":":")+o));else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(o=str(r,l),o&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()}.call(this),function(){Meteor._reload={};var e,t="Meteor_Reload",n=3e4,r={};"undefined"!=typeof sessionStorage&&sessionStorage&&(e=sessionStorage.getItem(t),sessionStorage.removeItem(t)),e||(e="{}");var o={};try{o=JSON.parse(e),"object"!=typeof o&&(Meteor._debug("Got bad data on reload. Ignoring."),o={})}catch(i){Meteor._debug("Got invalid JSON on reload. Ignoring.")}o.reload&&"object"==typeof o.data&&o.time+n>(new Date).getTime()&&(r=o.data);var a=[];Meteor._reload.onMigrate=function(e,t){t||(t=e,e=void 0),a.push({name:e,callback:t})},Meteor._reload.migrationData=function(e){return r[e]};var s=!1;Meteor._reload.reload=function(){if(!s){s=!0;var e=function(){_.defer(function(){for(var n={},r=_.clone(a);r.length;){var o=r.shift(),i=o.callback(e);if(!i[0])return;i.length>1&&o.name&&(n[o.name]=i[1])}try{var s=JSON.stringify({time:(new Date).getTime(),data:n,reload:!0})}catch(l){throw Meteor._debug("Couldn't serialize data for migration",n),l}"undefined"!=typeof sessionStorage&&sessionStorage?sessionStorage.setItem(t,s):Meteor._debug("Browser does not support sessionStorage. Not saving migration state."),window.location.reload()})};e()}}}.call(this),function(){var e={};if(Meteor._reload){var t=Meteor._reload.migrationData("session");t&&t.keys&&(e=t.keys)}Session=new ReactiveDict(e),Meteor._reload&&Meteor._reload.onMigrate("session",function(){return[!0,{keys:Session.keys}]})}.call(this),function(){Random={},Random._Alea=function(){function e(){var e=4022871197,t=function(t){t=""+t;for(var n=0;t.length>n;n++){e+=t.charCodeAt(n);var r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}return function(t){var n=0,r=0,o=0,i=1;0==t.length&&(t=[+new Date]);var a=e();n=a(" "),r=a(" "),o=a(" ");for(var s=0;t.length>s;s++)n-=a(t[s]),0>n&&(n+=1),r-=a(t[s]),0>r&&(r+=1),o-=a(t[s]),0>o&&(o+=1);a=null;var l=function(){var e=2091639*n+2.3283064365386963e-10*i;return n=r,r=o,o=e-(i=0|e)};return l.uint32=function(){return 4294967296*l()},l.fract53=function(){return l()+1.1102230246251565e-16*(0|2097152*l())},l.version="Alea 0.9",l.args=t,l}(Array.prototype.slice.call(arguments))};var e="undefined"!=typeof window&&window.innerHeight||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientHeight||"undefined"!=typeof document&&document.body&&document.body.clientHeight||1,t="undefined"!=typeof window&&window.innerWidth||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientWidth||"undefined"!=typeof document&&document.body&&document.body.clientWidth||1,n="undefined"!=typeof navigator&&navigator.userAgent||"",r="undefined"!=typeof process&&process.pid||1;Random.fraction=new Random._Alea([new Date,e,t,n,r,Math.random()]),Random.choice=function(e){var t=Math.floor(Random.fraction()*e.length);return"string"==typeof e?e.substr(t,1):e[t]};var o="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz";Random.id=function(){for(var e=[],t=0;17>t;t++)e[t]=Random.choice(o);return e.join("")},Random.hexString=function(e){for(var t=[],n=0;e>n;++n)t.push(Random.choice("0123456789abcdef"));return t.join("")}}.call(this),function(){EJSON={};var e={};EJSON.addType=function(t,n){if(_.has(e,t))throw Error("Type "+t+" already present");e[t]=n};var t=[{matchJSONValue:function(e){return _.has(e,"$date")&&1===_.size(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return _.has(e,"$binary")&&1===_.size(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&_.has(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:EJSON._base64Encode(e)}},fromJSONValue:function(e){return EJSON._base64Decode(e.$binary)}},{matchJSONValue:function(e){return _.has(e,"$escape")&&1===_.size(e)},matchObject:function(e){return _.isEmpty(e)||_.size(e)>2?!1:_.any(t,function(t){return t.matchJSONValue(e)})},toJSONValue:function(e){var t={};return _.each(e,function(e,n){t[n]=EJSON.toJSONValue(e)}),{$escape:t}},fromJSONValue:function(e){var t={};return _.each(e.$escape,function(e,n){t[n]=EJSON.fromJSONValue(e)}),t}},{matchJSONValue:function(e){return _.has(e,"$type")&&_.has(e,"$value")&&2===_.size(e)},matchObject:function(e){return EJSON._isCustomType(e)},toJSONValue:function(e){return{$type:e.typeName(),$value:e.toJSONValue()}},fromJSONValue:function(t){var n=t.$type,r=e[n];return r(t.$value)}}];EJSON._isCustomType=function(t){return t&&"function"==typeof t.toJSONValue&&"function"==typeof t.typeName&&_.has(e,t.typeName())};var n=EJSON._adjustTypesToJSONValue=function(e){if(null===e)return null;var t=r(e);return void 0!==t?t:(_.each(e,function(t,o){if("object"==typeof t||void 0===t){var i=r(t);return i?(e[o]=i,void 0):(n(t),void 0)}}),e)},r=function(e){for(var n=0;t.length>n;n++){var r=t[n];if(r.matchObject(e))return r.toJSONValue(e)}return void 0};EJSON.toJSONValue=function(e){var t=r(e);return void 0!==t?t:("object"==typeof e&&(e=EJSON.clone(e),n(e)),e)};var o=EJSON._adjustTypesFromJSONValue=function(e){if(null===e)return null;var t=i(e);return t!==e?t:(_.each(e,function(t,n){if("object"==typeof t){var r=i(t);if(t!==r)return e[n]=r,void 0;o(t)}}),e)},i=function(e){if("object"==typeof e&&null!==e&&2>=_.size(e)&&_.all(e,function(e,t){return"string"==typeof t&&"$"===t.substr(0,1)}))for(var n=0;t.length>n;n++){var r=t[n];if(r.matchJSONValue(e))return r.fromJSONValue(e)}return e};EJSON.fromJSONValue=function(e){var t=i(e);return t===e&&"object"==typeof e?(e=EJSON.clone(e),o(e),e):t},EJSON.stringify=function(e){return JSON.stringify(EJSON.toJSONValue(e))},EJSON.parse=function(e){return EJSON.fromJSONValue(JSON.parse(e))},EJSON.isBinary=function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill},EJSON.equals=function(e,t,n){var r,o=!(!n||!n.keyOrderSensitive);if(e===t)return!0;if(!e||!t)return!1;if("object"!=typeof e||"object"!=typeof t)return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(EJSON.isBinary(e)&&EJSON.isBinary(t)){if(e.length!==t.length)return!1;for(r=0;e.length>r;r++)if(e[r]!==t[r])return!1;return!0}if("function"==typeof e.equals)return e.equals(t,n);if(e instanceof Array){if(!(t instanceof Array))return!1;if(e.length!==t.length)return!1;for(r=0;e.length>r;r++)if(!EJSON.equals(e[r],t[r],n))return!1;return!0}var i;if(o){var a=[];return _.each(t,function(e,t){a.push(t)}),r=0,i=_.all(e,function(e,o){return r>=a.length?!1:o!==a[r]?!1:EJSON.equals(e,t[a[r]],n)?(r++,!0):!1}),i&&r===a.length}return r=0,i=_.all(e,function(e,o){return _.has(t,o)?EJSON.equals(e,t[o],n)?(r++,!0):!1:!1}),i&&_.size(t)===r},EJSON.clone=function(e){var t;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(EJSON.isBinary(e)){for(t=EJSON.newBinary(e.length),n=0;e.length>n;n++)t[n]=e[n];return t}if(_.isArray(e)){t=e.slice(0);for(var n=0;e.length>n;n++)t[n]=EJSON.clone(t[n]);return t}return"function"==typeof e.clone?e.clone():(t={},_.each(e,function(e,n){t[n]=EJSON.clone(e)}),t)}}.call(this),function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={},n=0;e.length>n;n++)t[e.charAt(n)]=n;
EJSON._base64Encode=function(e){for(var t=[],n=null,o=null,i=null,a=null,s=0;e.length>s;s++)switch(s%3){case 0:n=63&e[s]>>2,o=(3&e[s])<<4;break;case 1:o|=15&e[s]>>4,i=(15&e[s])<<2;break;case 2:i|=3&e[s]>>6,a=63&e[s],t.push(r(n)),t.push(r(o)),t.push(r(i)),t.push(r(a)),n=null,o=null,i=null,a=null}return null!=n&&(t.push(r(n)),t.push(r(o)),null==i?t.push("="):t.push(r(i)),null==a&&t.push("=")),t.join("")};var r=function(t){return e.charAt(t)},o=function(e){return"="===e?-1:t[e]};EJSON.newBinary=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;e>n;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},EJSON._base64Decode=function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var n=EJSON.newBinary(t),r=null,i=null,a=null,s=0,l=0;e.length>l;l++){var u=e.charAt(l),c=o(u);switch(l%4){case 0:if(0>c)throw Error("invalid base64 string");r=c<<2;break;case 1:if(0>c)throw Error("invalid base64 string");r|=c>>4,n[s++]=r,i=(15&c)<<4;break;case 2:c>0&&(i|=c>>2,n[s++]=i,a=(3&c)<<6);break;case 3:c>0&&(n[s++]=a|c)}}return n}}.call(this),function(){var JSON;JSON||(JSON={}),function(){function str(e,t){var n,r,o,i,a,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(i=l.length,n=0;i>n;n+=1)a[n]=str(n,l)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,l),o&&a.push(quote(r)+(gap?": ":":")+o));else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(o=str(r,l),o&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function f(e){return 10>e?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),SockJS=function(){var e=document,t=window,n={},r=function(){};r.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];-1===n.arrIndexOf(r,t)&&r.push(t)},r.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var r=this._listeners[e],o=n.arrIndexOf(r,t);return-1!==o?(r.length>1?this._listeners[e]=r.slice(0,o).concat(r.slice(o+1)):delete this._listeners[e],void 0):void 0}},r.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),this._listeners&&t in this._listeners)for(var r=0;this._listeners[t].length>r;r++)this._listeners[t][r].apply(this,n)};var o=function(e,t){if(this.type=e,t!==void 0)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};o.prototype.toString=function(){var e=[];for(var t in this)if(this.hasOwnProperty(t)){var n=this[t];"function"==typeof n&&(n="[function]"),e.push(t+"="+n)}return"SimpleEvent("+e.join(", ")+")"};var i=function(e){var t=this;t._events=e||[],t._listeners={}};i.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var r=0;t._listeners[e].length>r;r++)t._listeners[e][r].apply(t,n)}},i.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},i.prototype._verifyType=function(e){var t=this;-1===n.arrIndexOf(t._events,e)&&n.log("Event "+JSON.stringify(e)+" not listed "+JSON.stringify(t._events)+" in "+t)},i.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;e._events.length>t;t++)delete e[e._events[t]];e._listeners={}};var a="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(e,t){t=t||a.length;var n,r=[];for(n=0;e>n;n++)r.push(a.substr(Math.floor(Math.random()*t),1));return r.join("")},n.random_number=function(e){return Math.floor(Math.random()*e)},n.random_number_string=function(e){var t=(""+(e-1)).length,r=Array(t+1).join("0");return(r+n.random_number(e)).slice(-t)},n.getOrigin=function(e){e+="/";var t=e.split("/").slice(0,3);return t.join("/")},n.isSameOriginUrl=function(e,n){return n||(n=t.location.href),e.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.isSameOriginScheme=function(e,n){return n||(n=t.location.href),e.split(":")[0]===n.split(":")[0]},n.getParentDomain=function(e){if(/^[0-9.]*$/.test(e))return e;if(/^\[/.test(e))return e;if(!/[.]/.test(e))return e;var t=e.split(".").slice(1);return t.join(".")},n.objectExtend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var s="_jp";n.polluteGlobalNamespace=function(){s in t||(t[s]={})},n.closeFrame=function(e,t){return"c"+JSON.stringify([e,t])},n.userSetCode=function(e){return 1e3===e||e>=3e3&&4999>=e},n.countRTO=function(e){var t;return t=e>100?3*e:e+200},n.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},n.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},n.amendUrl=function(t){var r=e.location;if(!t)throw Error("Wrong url for SockJS");if(!n.flatUrl(t))throw Error("Only basic urls are supported in SockJS");return 0===t.indexOf("//")&&(t=r.protocol+t),0===t.indexOf("/")&&(t=r.protocol+"//"+r.host+t),t=t.replace(/[/]+$/,"")},n.arrIndexOf=function(e,t){for(var n=0;e.length>n;n++)if(e[n]===t)return n;return-1},n.arrSkip=function(e,t){var r=n.arrIndexOf(e,t);if(-1===r)return e.slice();var o=e.slice(0,r);return o.concat(e.slice(r+1))},n.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},n.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var l,u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\0":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","Â€":"\\u0080","Â":"\\u0081","Â‚":"\\u0082","Âƒ":"\\u0083","Â„":"\\u0084","Â…":"\\u0085","Â†":"\\u0086","Â‡":"\\u0087","Âˆ":"\\u0088","Â‰":"\\u0089","ÂŠ":"\\u008a","Â‹":"\\u008b","ÂŒ":"\\u008c","Â":"\\u008d","ÂŽ":"\\u008e","Â":"\\u008f","Â":"\\u0090","Â‘":"\\u0091","Â’":"\\u0092","Â“":"\\u0093","Â”":"\\u0094","Â•":"\\u0095","Â–":"\\u0096","Â—":"\\u0097","Â˜":"\\u0098","Â™":"\\u0099","Âš":"\\u009a","Â›":"\\u009b","Âœ":"\\u009c","Â":"\\u009d","Âž":"\\u009e","ÂŸ":"\\u009f","Â­":"\\u00ad","Ø€":"\\u0600","Ø":"\\u0601","Ø‚":"\\u0602","Øƒ":"\\u0603","Ø„":"\\u0604","Ü":"\\u070f","áž´":"\\u17b4","ážµ":"\\u17b5","â€Œ":"\\u200c","â€":"\\u200d","â€Ž":"\\u200e","â€":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","â€ª":"\\u202a","â€«":"\\u202b","â€¬":"\\u202c","â€­":"\\u202d","â€®":"\\u202e","â€¯":"\\u202f","â ":"\\u2060","â¡":"\\u2061","â¢":"\\u2062","â£":"\\u2063","â¤":"\\u2064","â¥":"\\u2065","â¦":"\\u2066","â§":"\\u2067","â¨":"\\u2068","â©":"\\u2069","âª":"\\u206a","â«":"\\u206b","â¬":"\\u206c","â­":"\\u206d","â®":"\\u206e","â¯":"\\u206f","ï»¿":"\\ufeff","ï¿°":"\\ufff0","ï¿±":"\\ufff1","ï¿²":"\\ufff2","ï¿³":"\\ufff3","ï¿´":"\\ufff4","ï¿µ":"\\ufff5","ï¿¶":"\\ufff6","ï¿·":"\\ufff7","ï¿¸":"\\ufff8","ï¿¹":"\\ufff9","ï¿º":"\\ufffa","ï¿»":"\\ufffb","ï¿¼":"\\ufffc","ï¿½":"\\ufffd","ï¿¾":"\\ufffe","ï¿¿":"\\uffff"},d=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,f=JSON&&JSON.stringify||function(e){return u.lastIndex=0,u.test(e)&&(e=e.replace(u,function(e){return c[e]})),'"'+e+'"'},p=function(e){var t,n={},r=[];for(t=0;65536>t;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};n.quote=function(e){var t=f(e);return d.lastIndex=0,d.test(t)?(l||(l=p(d)),t.replace(d,function(e){return l[e]})):t};var h=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var e={},t=0;h.length>t;t++){var n=h[t];e[n]=M[n]&&M[n].enabled()}return e},n.detectProtocols=function(e,t,n){var r={},o=[];t||(t=h);for(var i=0;t.length>i;i++){var a=t[i];r[a]=e[a]}var s=function(e){var t=e.shift();r[t]?o.push(t):e.length>0&&s(e)};return n.websocket!==!1&&s(["websocket"]),r["xhr-streaming"]&&!n.null_origin?o.push("xhr-streaming"):!r["xdr-streaming"]||n.cookie_needed||n.null_origin?s(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),r["xhr-polling"]&&!n.null_origin?o.push("xhr-polling"):!r["xdr-polling"]||n.cookie_needed||n.null_origin?s(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var g="_sockjs_global";n.createHook=function(){var e="a"+n.random_string(8);if(!(g in t)){var r={};t[g]=function(e){return e in r||(r[e]={id:e,del:function(){delete r[e]}}),r[e]}}return t[g](e)},n.attachMessage=function(e){n.attachEvent("message",e)},n.attachEvent=function(n,r){t.addEventListener!==void 0?t.addEventListener(n,r,!1):(e.attachEvent("on"+n,r),t.attachEvent("on"+n,r))},n.detachMessage=function(e){n.detachEvent("message",e)},n.detachEvent=function(n,r){t.addEventListener!==void 0?t.removeEventListener(n,r,!1):(e.detachEvent("on"+n,r),t.detachEvent("on"+n,r))};var m={},v=!1,_=function(){for(var e in m)m[e](),delete m[e]},y=function(){v||(v=!0,_())};n.attachEvent("unload",y),n.unload_add=function(e){var t=n.random_string(8);return m[t]=e,v&&n.delay(_),t},n.unload_del=function(e){e in m&&delete m[e]},n.createIframe=function(t,r){var o,i,a=e.createElement("iframe"),s=function(){clearTimeout(o);try{a.onload=null}catch(e){}a.onerror=null},l=function(){a&&(s(),setTimeout(function(){a&&a.parentNode.removeChild(a),a=null},0),n.unload_del(i))},u=function(e){a&&(l(),r(e))},c=function(e,t){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(n){}};return a.src=t,a.style.display="none",a.style.position="absolute",a.onerror=function(){u("onerror")},a.onload=function(){clearTimeout(o),o=setTimeout(function(){u("onload timeout")},2e3)},e.body.appendChild(a),o=setTimeout(function(){u("timeout")},15e3),i=n.unload_add(l),{post:c,cleanup:l,loaded:s}},n.createHtmlfile=function(e,r){var o,i,a,l=new ActiveXObject("htmlfile"),u=function(){clearTimeout(o)},c=function(){l&&(u(),n.unload_del(i),a.parentNode.removeChild(a),a=l=null,CollectGarbage())},d=function(e){l&&(c(),r(e))},f=function(e,t){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(n){}};l.open(),l.write('<html><script>document.domain="'+document.domain+'";'+"</s"+"cript></html>"),l.close(),l.parentWindow[s]=t[s];var p=l.createElement("div");return l.body.appendChild(p),a=l.createElement("iframe"),p.appendChild(a),a.src=e,o=setTimeout(function(){d("timeout")},15e3),i=n.unload_add(c),{post:f,cleanup:c,loaded:u}};var b=function(){};b.prototype=new i(["chunk","finish"]),b.prototype._start=function(e,r,o,i){var a=this;try{a.xhr=new XMLHttpRequest}catch(s){}if(!a.xhr)try{a.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(s){}(t.ActiveXObject||t.XDomainRequest)&&(r+=(-1===r.indexOf("?")?"?":"&")+"t="+ +new Date),a.unload_ref=n.unload_add(function(){a._cleanup(!0)});try{a.xhr.open(e,r,!0)}catch(l){return a.emit("finish",0,""),a._cleanup(),void 0}if(i&&i.no_credentials||(a.xhr.withCredentials="true"),i&&i.headers)for(var u in i.headers)a.xhr.setRequestHeader(u,i.headers[u]);a.xhr.onreadystatechange=function(){if(a.xhr){var e=a.xhr;switch(e.readyState){case 3:try{var t=e.status,n=e.responseText}catch(e){}1223===t&&(t=204),n&&n.length>0&&a.emit("chunk",t,n);break;case 4:var t=e.status;1223===t&&(t=204),a.emit("finish",t,e.responseText),a._cleanup(!1)}}},a.xhr.send(o)},b.prototype._cleanup=function(e){var t=this;if(t.xhr){if(n.unload_del(t.unload_ref),t.xhr.onreadystatechange=function(){},e)try{t.xhr.abort()}catch(r){}t.unload_ref=t.xhr=null}},b.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)};var w=n.XHRCorsObject=function(){var e=this,t=arguments;n.delay(function(){e._start.apply(e,t)})};w.prototype=new b;var S=n.XHRLocalObject=function(e,t,r){var o=this;n.delay(function(){o._start(e,t,r,{no_credentials:!0})})};S.prototype=new b;var T=n.XDRObject=function(e,t,r){var o=this;n.delay(function(){o._start(e,t,r)})};T.prototype=new i(["chunk","finish"]),T.prototype._start=function(e,t,r){var o=this,i=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var a=i.ontimeout=i.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};i.onprogress=function(){o.emit("chunk",200,i.responseText)},i.onload=function(){o.emit("finish",200,i.responseText),o._cleanup(!1)},o.xdr=i,o.unload_ref=n.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(e,t),o.xdr.send(r)}catch(s){a()}},T.prototype._cleanup=function(e){var t=this;if(t.xdr){if(n.unload_del(t.unload_ref),t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null,e)try{t.xdr.abort()}catch(r){}t.unload_ref=t.xdr=null}},T.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)},n.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:B.enabled()?3:4};var M=function(e,r,o){if(this===t)return new M(e,r,o);var i,a=this;a._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},o&&n.objectExtend(a._options,o),a._base_url=n.amendUrl(e),a._server=a._options.server||n.random_number_string(1e3),a._options.protocols_whitelist&&a._options.protocols_whitelist.length?i=a._options.protocols_whitelist:(i="string"==typeof r&&r.length>0?[r]:n.isArray(r)?r:null,i&&a._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),a._protocols=[],a.protocol=null,a.readyState=M.CONNECTING,a._ir=V(a._base_url),a._ir.onfinish=function(e,t){a._ir=null,e?(a._options.info&&(e=n.objectExtend(e,a._options.info)),a._options.rtt&&(t=a._options.rtt),a._applyInfo(e,t,i),a._didClose()):a._didClose(1002,"Can't connect to server",!0)}};M.prototype=new r,M.version="0.3.4",M.CONNECTING=0,M.OPEN=1,M.CLOSING=2,M.CLOSED=3,M.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},M.prototype._dispatchOpen=function(){var e=this;e.readyState===M.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=M.OPEN,e.dispatchEvent(new o("open"))):e._didClose(1006,"Server lost session")},M.prototype._dispatchMessage=function(e){var t=this;t.readyState===M.OPEN&&t.dispatchEvent(new o("message",{data:e}))},M.prototype._dispatchHeartbeat=function(){var e=this;e.readyState===M.OPEN&&e.dispatchEvent(new o("heartbeat",{}))},M.prototype._didClose=function(e,t,r){var i=this;if(i.readyState!==M.CONNECTING&&i.readyState!==M.OPEN&&i.readyState!==M.CLOSING)throw Error("INVALID_STATE_ERR");i._ir&&(i._ir.nuke(),i._ir=null),i._transport&&(i._transport.doCleanup(),i._transport=null);var a=new o("close",{code:e,reason:t,wasClean:n.userSetCode(e)});if(!n.userSetCode(e)&&i.readyState===M.CONNECTING&&!r){if(i._try_next_protocol(a))return;a=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:a})}i.readyState=M.CLOSED,n.delay(function(){i.dispatchEvent(a)})},M.prototype._didMessage=function(e){var t=this,n=e.slice(0,1);switch(n){case"o":t._dispatchOpen();break;case"a":for(var r=JSON.parse(e.slice(1)||"[]"),o=0;r.length>o;o++)t._dispatchMessage(r[o]);break;case"m":var r=JSON.parse(e.slice(1)||"null");t._dispatchMessage(r);break;case"c":var r=JSON.parse(e.slice(1)||"[]");t._didClose(r[0],r[1]);break;case"h":t._dispatchHeartbeat()}},M.prototype._try_next_protocol=function(t){var r=this;for(r.protocol&&(r._debug("Closed transport:",r.protocol,""+t),r.protocol=null),r._transport_tref&&(clearTimeout(r._transport_tref),r._transport_tref=null);;){var o=r.protocol=r._protocols.shift();if(!o)return!1;if(M[o]&&M[o].need_body===!0&&(!e.body||e.readyState!==void 0&&"complete"!==e.readyState))return r._protocols.unshift(o),r.protocol="waiting-for-load",n.attachEvent("load",function(){r._try_next_protocol()}),!0;if(M[o]&&M[o].enabled(r._options)){var i=M[o].roundTrips||1,a=(r._options.rto||0)*i||5e3;r._transport_tref=n.delay(a,function(){r.readyState===M.CONNECTING&&r._didClose(2007,"Transport timeouted")});var s=n.random_string(8),l=r._base_url+"/"+r._server+"/"+s;return r._debug("Opening transport:",o," url:"+l," RTO:"+r._options.rto),r._transport=new M[o](r,l,r._base_url),!0}r._debug("Skipping transport:",o)}},M.prototype.close=function(e,t){var r=this;if(e&&!n.userSetCode(e))throw Error("INVALID_ACCESS_ERR");return r.readyState!==M.CONNECTING&&r.readyState!==M.OPEN?!1:(r.readyState=M.CLOSING,r._didClose(e||1e3,t||"Normal closure"),!0)},M.prototype.send=function(e){var t=this;if(t.readyState===M.CONNECTING)throw Error("INVALID_STATE_ERR");return t.readyState===M.OPEN&&t._transport.doSend(n.quote(""+e)),!0},M.prototype._applyInfo=function(t,r,o){var i=this;i._options.info=t,i._options.rtt=r,i._options.rto=n.countRTO(r),i._options.info.null_origin=!e.domain;var a=n.probeProtocols();i._protocols=n.detectProtocols(a,o,t),n.isSameOriginScheme(i._base_url)||2!==n.isXHRCorsCapable()||(i._protocols=["jsonp-polling"])};var k=M.websocket=function(e,r){var o=this,i=r+"/websocket";i="https"===i.slice(0,5)?"wss"+i.slice(5):"ws"+i.slice(4),o.ri=e,o.url=i;var a=t.WebSocket||t.MozWebSocket;o.ws=new a(o.url),o.ws.onmessage=function(e){o.ri._didMessage(e.data)},o.unload_ref=n.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};k.prototype.doSend=function(e){this.ws.send("["+e+"]")},k.prototype.doCleanup=function(){var e=this,t=e.ws;t&&(t.onmessage=t.onclose=null,t.close(),n.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},k.enabled=function(){return!(!t.WebSocket&&!t.MozWebSocket)},k.roundTrips=2;var E=function(){};E.prototype.send_constructor=function(e){var t=this;t.send_buffer=[],t.sender=e},E.prototype.doSend=function(e){var t=this;t.send_buffer.push(e),t.send_stop||t.send_schedule()},E.prototype.send_schedule_wait=function(){var e,t=this;t.send_stop=function(){t.send_stop=null,clearTimeout(e)},e=n.delay(25,function(){t.send_stop=null,t.send_schedule()})},E.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,function(t,n){e.send_stop=null,t===!1?e.ri._didClose(1006,"Sending error "+n):e.send_schedule_wait()}),e.send_buffer=[]}},E.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null};var x=function(t,r,o){var i=this;if(!("_send_form"in i)){var a=i._send_form=e.createElement("form"),s=i._send_area=e.createElement("textarea");s.name="d",a.style.display="none",a.style.position="absolute",a.method="POST",a.enctype="application/x-www-form-urlencoded",a.acceptCharset="UTF-8",a.appendChild(s),e.body.appendChild(a)}var a=i._send_form,s=i._send_area,l="a"+n.random_string(8);a.target=l,a.action=t+"/jsonp_send?i="+l;var u;try{u=e.createElement('<iframe name="'+l+'">')}catch(c){u=e.createElement("iframe"),u.name=l}u.id=l,a.appendChild(u),u.style.display="none";try{s.value=r}catch(d){n.log("Your browser is seriously broken. Go home! "+d.message)}a.submit();var f=function(){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,n.delay(500,function(){u.parentNode.removeChild(u),u=null}),s.value="",o(!0))};return u.onerror=u.onload=f,u.onreadystatechange=function(){"complete"==u.readyState&&f()},f},C=function(e){return function(t,n,r){var o=new e("POST",t+"/xhr_send",n);return o.onfinish=function(e){r(200===e||204===e,"http status "+e)},function(e){r(!1,e)}}},A=function(t,r){var o,i,a=e.createElement("script"),s=function(e){i&&(i.parentNode.removeChild(i),i=null),a&&(clearTimeout(o),a.parentNode.removeChild(a),a.onreadystatechange=a.onerror=a.onload=a.onclick=null,a=null,r(e),r=null)},l=!1,u=null;if(a.id="a"+n.random_string(8),a.src=t,a.type="text/javascript",a.charset="UTF-8",a.onerror=function(){u||(u=setTimeout(function(){l||s(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},a.onload=function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},a.onreadystatechange=function(){if(/loaded|closed/.test(a.readyState)){if(a&&a.htmlFor&&a.onclick){l=!0;try{a.onclick()}catch(e){}}a&&s(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},a.async===void 0&&e.attachEvent)if(/opera/i.test(navigator.userAgent))i=e.createElement("script"),i.text="try{var a = document.getElementById('"+a.id+"'); if(a)a.onerror();}catch(x){};",a.async=i.async=!1;else{try{a.htmlFor=a.id,a.event="onclick"}catch(c){}a.async=!0}a.async!==void 0&&(a.async=!0),o=setTimeout(function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var d=e.getElementsByTagName("head")[0];return d.insertBefore(a,d.firstChild),i&&d.insertBefore(i,d.firstChild),s},N=M["jsonp-polling"]=function(e,t){n.polluteGlobalNamespace();var r=this;r.ri=e,r.trans_url=t,r.send_constructor(x),r._schedule_recv()};N.prototype=new E,N.prototype._schedule_recv=function(){var e=this,t=function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()};e._recv_stop=O(e.trans_url+"/jsonp",A,t)},N.enabled=function(){return!0},N.need_body=!0,N.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()};var O=function(e,r,o){var i="a"+n.random_string(6),a=e+"?c="+escape(s+"."+i),l=0,u=function(e){switch(l){case 0:delete t[s][i],o(e);break;case 1:o(e),l=2;break;case 2:delete t[s][i]}},c=r(a,u);t[s][i]=c;var d=function(){t[s][i]&&(l=1,t[s][i](n.closeFrame(1e3,"JSONP user aborted read")))};return d},D=function(){};D.prototype=new E,D.prototype.run=function(e,t,n,r,o){var i=this;i.ri=e,i.trans_url=t,i.send_constructor(C(o)),i.poll=new Q(e,r,t+n,o)},D.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)};var I=M["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",rt,n.XHRCorsObject)};I.prototype=new D,I.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},I.roundTrips=2,I.need_body=!0;var L=M["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",rt,n.XDRObject)};L.prototype=new D,L.enabled=function(){return!!t.XDomainRequest},L.roundTrips=2;var R=M["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",rt,n.XHRCorsObject)};R.prototype=new D,R.enabled=I.enabled,R.roundTrips=2;var P=M["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",rt,n.XDRObject)};P.prototype=new D,P.enabled=L.enabled,P.roundTrips=2;var B=function(){};B.prototype.i_constructor=function(e,t,r){var o=this;o.ri=e,o.origin=n.getOrigin(r),o.base_url=r,o.trans_url=t;var i=r+"/iframe.html";o.ri._options.devel&&(i+="?t="+ +new Date),o.window_id=n.random_string(8),i+="#"+o.window_id,o.iframeObj=n.createIframe(i,function(e){o.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),o.onmessage_cb=n.bind(o.onmessage,o),n.attachMessage(o.onmessage_cb)},B.prototype.doCleanup=function(){var e=this;if(e.iframeObj){n.detachMessage(e.onmessage_cb);try{e.iframeObj.iframe.contentWindow&&e.postMessage("c")}catch(t){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},B.prototype.onmessage=function(e){var t=this;if(e.origin===t.origin){var n=e.data.slice(0,8),r=e.data.slice(8,9),o=e.data.slice(9);if(n===t.window_id)switch(r){case"s":t.iframeObj.loaded(),t.postMessage("s",JSON.stringify([M.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(o)}}},B.prototype.postMessage=function(e,t){var n=this;n.iframeObj.post(n.window_id+e+(t||""),n.origin)},B.prototype.doSend=function(e){this.postMessage("m",e)},B.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!e};var F,j=function(e,r){parent!==t?parent.postMessage(F+e+(r||""),"*"):n.log("Can't postMessage, no parent window.",e,r)},H=function(){};H.prototype._didClose=function(e,t){j("t",n.closeFrame(e,t))},H.prototype._didMessage=function(e){j("t",e)},H.prototype._doSend=function(e){this._transport.doSend(e)},H.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,M.bootstrap_iframe=function(){var r;F=e.location.hash.slice(1);var o=function(e){if(e.source===parent&&(n.parent_origin===void 0&&(n.parent_origin=e.origin),e.origin===n.parent_origin)){var o=e.data.slice(0,8),i=e.data.slice(8,9),a=e.data.slice(9);if(o===F)switch(i){case"s":var s=JSON.parse(a),l=s[0],u=s[1],c=s[2],d=s[3];if(l!==M.version&&n.log('Incompatibile SockJS! Main site uses: "'+l+'", the iframe:'+' "'+M.version+'".'),!n.flatUrl(c)||!n.flatUrl(d))return n.log("Only basic urls are supported in SockJS"),void 0;if(!n.isSameOriginUrl(c)||!n.isSameOriginUrl(d))return n.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([t.location.href,c,d])+")"),void 0;r=new H,r._transport=new H[u](r,c,d);break;case"m":r._doSend(a);break;case"c":r&&r._doCleanup(),r=null}}};n.attachMessage(o),j("s")};var U=function(e,t){var r=this;n.delay(function(){r.doXhr(e,t)})};U.prototype=new i(["finish"]),U.prototype.doXhr=function(e,t){var r=this,o=(new Date).getTime(),i=new t("GET",e+"/info"),a=n.delay(8e3,function(){i.ontimeout()});i.onfinish=function(e,t){if(clearTimeout(a),a=null,200===e){var n=(new Date).getTime()-o,i=JSON.parse(t);"object"!=typeof i&&(i={}),r.emit("finish",i,n)}else r.emit("finish")},i.ontimeout=function(){i.close(),r.emit("finish")}};var q=function(t){var r=this,o=function(){var e=new B;e.protocol="w-iframe-info-receiver";var n=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var n=JSON.parse(t.substr(1)),o=n[0],i=n[1];r.emit("finish",o,i)}else r.emit("finish");e.doCleanup(),e=null},o={_options:{},_didClose:n,_didMessage:n};e.i_constructor(o,t,t)};e.body?o():n.attachEvent("load",o)};q.prototype=new i(["finish"]);var $=function(){var e=this;n.delay(function(){e.emit("finish",{},2e3)})};$.prototype=new i(["finish"]);var V=function(e){if(n.isSameOriginUrl(e))return new U(e,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new U(e,n.XHRLocalObject);case 2:return n.isSameOriginScheme(e)?new U(e,n.XDRObject):new $;case 3:return new q(e);default:return new $}},z=H["w-iframe-info-receiver"]=function(e,t,r){var o=new U(r,n.XHRLocalObject);o.onfinish=function(t,n){e._didMessage("m"+JSON.stringify([t,n])),e._didClose()}};z.prototype.doCleanup=function(){};var W=M["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};W.prototype=new B,W.enabled=function(){return"EventSource"in t&&B.enabled()},W.need_body=!0,W.roundTrips=3;var J=H["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",Z,n.XHRLocalObject)};J.prototype=new D;var G=M["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};G.prototype=new B,G.enabled=function(){return t.XMLHttpRequest&&B.enabled()},G.need_body=!0,G.roundTrips=3;var X=H["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",rt,n.XHRLocalObject)};X.prototype=new D;var Y=M["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};Y.prototype=new B,Y.enabled=function(){return B.enabled()},Y.need_body=!0,Y.roundTrips=3;var K=H["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",nt,n.XHRLocalObject)};K.prototype=new D;var Q=function(e,t,n,r){var o=this;o.ri=e,o.Receiver=t,o.recv_url=n,o.AjaxObject=r,o._scheduleRecv()};Q.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject),n=0;t.onmessage=function(t){n+=1,e.ri._didMessage(t.data)},t.onclose=function(n){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===n.reason?e.ri._didClose(1006,"Polling error ("+n.reason+")"):e._scheduleRecv())}},Q.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()};var Z=function(e){var t=this,r=new EventSource(e);r.onmessage=function(e){t.dispatchEvent(new o("message",{data:unescape(e.data)}))},t.es_close=r.onerror=function(e,i){var a=i?"user":2!==r.readyState?"network":"permanent";t.es_close=r.onmessage=r.onerror=null,r.close(),r=null,n.delay(200,function(){t.dispatchEvent(new o("close",{reason:a}))})}};Z.prototype=new r,Z.prototype.abort=function(){var e=this;e.es_close&&e.es_close({},!0)};var et,tt=function(){if(void 0===et)if("ActiveXObject"in t)try{et=!!new ActiveXObject("htmlfile")}catch(e){}else et=!1;
return et},nt=function(e){var r=this;n.polluteGlobalNamespace(),r.id="a"+n.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape(s+"."+r.id);var i,a=tt()?n.createHtmlfile:n.createIframe;t[s][r.id]={start:function(){i.loaded()},message:function(e){r.dispatchEvent(new o("message",{data:e}))},stop:function(){r.iframe_close({},"network")}},r.iframe_close=function(e,n){i.cleanup(),r.iframe_close=i=null,delete t[s][r.id],r.dispatchEvent(new o("close",{reason:n}))},i=a(e,function(){r.iframe_close({},"permanent")})};nt.prototype=new r,nt.prototype.abort=function(){var e=this;e.iframe_close&&e.iframe_close({},"user")};var rt=function(e,t){var n=this,r=0;n.xo=new t("POST",e,null),n.xo.onchunk=function(e,t){if(200===e)for(;;){var i=t.slice(r),a=i.indexOf("\n");if(-1===a)break;r+=a+1;var s=i.slice(0,a);n.dispatchEvent(new o("message",{data:s}))}},n.xo.onfinish=function(e,t){n.xo.onchunk(e,t),n.xo=null;var r=200===e?"network":"permanent";n.dispatchEvent(new o("close",{reason:r}))}};return rt.prototype=new r,rt.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new o("close",{reason:"user"})),e.xo=null)},M.getUtils=function(){return n},M.getIframeTransport=function(){return B},M}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return SockJS})}.call(this),function(){Meteor._DdpClientStream=function(e){var t=this;t._initCommon(),t.HEARTBEAT_TIMEOUT=6e4,t.rawUrl=e,t.socket=null,t.sent_update_available=!1,t.heartbeatTimer=null,t._launchConnection()},_.extend(Meteor._DdpClientStream.prototype,{send:function(e){var t=this;t.currentStatus.connected&&t.socket.send(e)},_connected:function(e){var t=this;if(t.connectionTimer&&(clearTimeout(t.connectionTimer),t.connectionTimer=null),!t.currentStatus.connected){try{var n=JSON.parse(e)}catch(r){Meteor._debug("DEBUG: malformed welcome packet",e)}n&&n.server_id?__meteor_runtime_config__.serverId&&__meteor_runtime_config__.serverId!==n.server_id&&!t.sent_update_available&&(t.sent_update_available=!0,_.each(t.eventCallbacks.update_available,function(e){e()})):Meteor._debug("DEBUG: invalid welcome packet",n),t.currentStatus.status="connected",t.currentStatus.connected=!0,t.currentStatus.retryCount=0,t.statusChanged(),_.each(t.eventCallbacks.reset,function(e){e()})}},_cleanup:function(){var e=this;e._clearConnectionAndHeartbeatTimers(),e.socket&&(e.socket.onmessage=e.socket.onclose=e.socket.onerror=function(){},e.socket.close(),e.socket=null)},_clearConnectionAndHeartbeatTimers:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.heartbeatTimer&&(clearTimeout(e.heartbeatTimer),e.heartbeatTimer=null)},_heartbeat_timeout:function(){var e=this;Meteor._debug("Connection timeout. No heartbeat received."),e._lostConnection()},_heartbeat_received:function(){var e=this;e._forcedToDisconnect||(e.heartbeatTimer&&clearTimeout(e.heartbeatTimer),e.heartbeatTimer=setTimeout(_.bind(e._heartbeat_timeout,e),e.HEARTBEAT_TIMEOUT))},_launchConnection:function(){var e=this;e._cleanup(),e.socket=new SockJS(Meteor._DdpClientStream._toSockjsUrl(e.rawUrl),void 0,{debug:!1,protocols_whitelist:["xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"]}),e.socket.onmessage=function(t){e._heartbeat_received(),"connecting"===e.currentStatus.status?e._connected(t.data):e.currentStatus.connected&&_.each(e.eventCallbacks.message,function(e){e(t.data)})},e.socket.onclose=function(){e._lostConnection()},e.socket.onerror=function(){Meteor._debug("stream error",_.toArray(arguments),(new Date).toDateString())},e.socket.onheartbeat=function(){e._heartbeat_received()},e.connectionTimer&&clearTimeout(e.connectionTimer),e.connectionTimer=setTimeout(_.bind(e._lostConnection,e),e.CONNECT_TIMEOUT)}})}.call(this),function(){var e=function(e,t){return e.length>=t.length&&e.substring(0,t.length)===t},t=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t},n=function(n,r,o){r||(r="http");var i,a=n.match(/^ddp(i?)\+sockjs:\/\//),s=n.match(/^http(s?):\/\//);if(a){var l=n.substr(a[0].length);i="i"===a[1]?r:r+"s";var u=l.indexOf("/"),c=-1===u?l:l.substr(0,u),d=-1===u?"":l.substr(u);return c=c.replace(/\*/g,function(){return Math.floor(10*Random.fraction())}),i+"://"+c+d}if(s){i=s[1]?r+"s":r;var f=n.substr(s[0].length);n=i+"://"+f}return-1!==n.indexOf("://")||e(n,"/")||(n=r+"://"+n),t(n,"/")?n+o:n+"/"+o};_.extend(Meteor._DdpClientStream.prototype,{on:function(e,t){var n=this;if("message"!==e&&"reset"!==e&&"update_available"!==e)throw Error("unknown event type: "+e);n.eventCallbacks[e]||(n.eventCallbacks[e]=[]),n.eventCallbacks[e].push(t)},_initCommon:function(){var e=this;e.CONNECT_TIMEOUT=1e4,e.RETRY_BASE_TIMEOUT=1e3,e.RETRY_EXPONENT=2.2,e.RETRY_MAX_TIMEOUT=18e5,e.RETRY_MIN_TIMEOUT=10,e.RETRY_MIN_COUNT=2,e.RETRY_FUZZ=.5,e.eventCallbacks={},e._forcedToDisconnect=!1,e.currentStatus={status:"connecting",connected:!1,retryCount:0},e.statusListeners="undefined"!=typeof Deps&&new Deps.Dependency,e.statusChanged=function(){e.statusListeners&&e.statusListeners.changed()},e.retryTimer=null,e.connectionTimer=null},reconnect:function(e){var t=this;return t.currentStatus.connected?(e&&e._force&&t._lostConnection(),void 0):("connecting"===t.currentStatus.status&&t._lostConnection(),t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,t.currentStatus.retryCount-=1,t._retryNow(),void 0)},forceDisconnect:function(e){var t=this;t._forcedToDisconnect=!0,t._cleanup(),t.retryTimer&&(clearTimeout(t.retryTimer),t.retryTimer=null),t.currentStatus={status:"failed",connected:!1,retryCount:0},e&&(t.currentStatus.reason=e),t.statusChanged()},_lostConnection:function(){var e=this;e._cleanup(),e._retryLater()},_retryTimeout:function(e){var t=this;if(t.RETRY_MIN_COUNT>e)return t.RETRY_MIN_TIMEOUT;var n=Math.min(t.RETRY_MAX_TIMEOUT,t.RETRY_BASE_TIMEOUT*Math.pow(t.RETRY_EXPONENT,e));return n*=Random.fraction()*t.RETRY_FUZZ+(1-t.RETRY_FUZZ/2)},_retryLater:function(){var e=this,t=e._retryTimeout(e.currentStatus.retryCount);e.retryTimer&&clearTimeout(e.retryTimer),e.retryTimer=setTimeout(_.bind(e._retryNow,e),t),e.currentStatus.status="waiting",e.currentStatus.connected=!1,e.currentStatus.retryTime=(new Date).getTime()+t,e.statusChanged()},_retryNow:function(){var e=this;e._forcedToDisconnect||(e.currentStatus.retryCount+=1,e.currentStatus.status="connecting",e.currentStatus.connected=!1,delete e.currentStatus.retryTime,e.statusChanged(),e._launchConnection())},status:function(){var e=this;return e.statusListeners&&e.statusListeners.depend(),e.currentStatus}}),_.extend(Meteor._DdpClientStream,{_toSockjsUrl:function(e){return n(e,"http","sockjs")},_toWebsocketUrl:function(e){var t=n(e,"ws","websocket");return t}})}.call(this),function(){var e=function(e,t,n,r){return{key:e,value:t,next:n,prev:r}};OrderedDict=function(){var e=this;e._dict={},e._first=null,e._last=null,e._size=0;var t=_.toArray(arguments);e._stringify=function(e){return e},"function"==typeof t[0]&&(e._stringify=t.shift()),_.each(t,function(t){e.putBefore(t[0],t[1],null)})},_.extend(OrderedDict.prototype,{_k:function(e){return" "+this._stringify(e)},empty:function(){var e=this;return!e._first},size:function(){var e=this;return e._size},_linkEltIn:function(e){var t=this;e.next?(e.prev=e.next.prev,e.next.prev=e,e.prev&&(e.prev.next=e)):(e.prev=t._last,t._last&&(t._last.next=e),t._last=e),(null===t._first||t._first===e.next)&&(t._first=e)},_linkEltOut:function(e){var t=this;e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===t._last&&(t._last=e.prev),e===t._first&&(t._first=e.next)},putBefore:function(t,n,r){var o=this;if(o._dict[o._k(t)])throw Error("Item "+t+" already present in OrderedDict");var i=r?e(t,n,o._dict[o._k(r)]):e(t,n,null);if(void 0===i.next)throw Error("could not find item to put this one before");o._linkEltIn(i),o._dict[o._k(t)]=i,o._size++},append:function(e,t){var n=this;n.putBefore(e,t,null)},remove:function(e){var t=this,n=t._dict[t._k(e)];if(void 0===n)throw Error("Item "+e+" not present in OrderedDict");return t._linkEltOut(n),t._size--,delete t._dict[t._k(e)],n.value},get:function(e){var t=this;return t.has(e)?t._dict[t._k(e)].value:void 0},has:function(e){var t=this;return _.has(t._dict,t._k(e))},forEach:function(e){for(var t=this,n=0,r=t._first;null!==r;){var o=e(r.value,r.key,n);if(o===OrderedDict.BREAK)return;r=r.next,n++}},first:function(){var e=this;return e.empty()?void 0:e._first.key},firstValue:function(){var e=this;return e.empty()?void 0:e._first.value},last:function(){var e=this;return e.empty()?void 0:e._last.key},lastValue:function(){var e=this;return e.empty()?void 0:e._last.value},prev:function(e){var t=this;if(t.has(e)){var n=t.get(e);if(n.prev)return n.prev.key}return null},next:function(e){var t=this;if(t.has(e)){var n=t.get(e);if(n.next)return n.next.key}return null},moveBefore:function(e,t){var n=this,r=n._dict[n._k(e)],o=t?n._dict[n._k(t)]:null;if(void 0===r)throw Error("Item to move is not present");if(void 0===o)throw Error("Could not find element to move this one before");o!==r.next&&(n._linkEltOut(r),r.next=o,n._linkEltIn(r))},indexOf:function(e){var t=this,n=null;return t.forEach(function(r,o,i){return t._k(o)===t._k(e)?(n=i,OrderedDict.BREAK):void 0}),n},_checkRep:function(){var e=this;_.each(e._dict,function(e,t){if(t.next===t)throw Error("Next is a loop");if(t.prev===t)throw Error("Prev is a loop")})}}),OrderedDict.BREAK={"break":!0}}.call(this),function(){LocalCollection=function(){this.docs={},this.next_qid=1,this.queries={},this._savedOriginals=null,this.paused=!1},LocalCollection._applyChanges=function(e,t){_.each(t,function(t,n){void 0===t?delete e[n]:e[n]=t})},LocalCollection.MinimongoError=function(e){var t=this;t.name="MinimongoError",t.details=e},LocalCollection.MinimongoError.prototype=Error(),LocalCollection.prototype.find=function(e,t){return 0===arguments.length&&(e={}),new LocalCollection.Cursor(this,e,t)},LocalCollection.Cursor=function(e,t,n){var r=this;n||(n={}),this.collection=e,LocalCollection._selectorIsId(t)?(r.selector_id=LocalCollection._idStringify(t),r.selector_f=LocalCollection._compileSelector(t),r.sort_f=void 0):(r.selector_id=void 0,r.selector_f=LocalCollection._compileSelector(t),r.sort_f=n.sort?LocalCollection._compileSort(n.sort):null),r.skip=n.skip,r.limit=n.limit,r._transform=n.transform&&"undefined"!=typeof Deps?Deps._makeNonreactive(n.transform):n.transform,r.db_objects=null,r.cursor_pos=0,"undefined"!=typeof Deps&&(r.reactive=void 0===n.reactive?!0:n.reactive)},LocalCollection.Cursor.prototype.rewind=function(){var e=this;e.db_objects=null,e.cursor_pos=0},LocalCollection.prototype.findOne=function(e,t){return 0===arguments.length&&(e={}),t=t||{},t.limit=1,this.find(e,t).fetch()[0]},LocalCollection.Cursor.prototype.forEach=function(e){var t=this;for(null===t.db_objects&&(t.db_objects=t._getRawObjects(!0)),t.reactive&&t._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0});t.cursor_pos<t.db_objects.length;){var n=EJSON.clone(t.db_objects[t.cursor_pos++]);t._transform&&(n=t._transform(n)),e(n)}},LocalCollection.Cursor.prototype.getTransform=function(){var e=this;return e._transform},LocalCollection.Cursor.prototype.map=function(e){var t=this,n=[];return t.forEach(function(t){n.push(e(t))}),n},LocalCollection.Cursor.prototype.fetch=function(){var e=this,t=[];return e.forEach(function(e){t.push(e)}),t},LocalCollection.Cursor.prototype.count=function(){var e=this;return e.reactive&&e._depend({added:!0,removed:!0}),null===e.db_objects&&(e.db_objects=e._getRawObjects(!0)),e.db_objects.length},LocalCollection._isOrderedChanges=function(e){if(e.added&&e.addedBefore)throw Error("Please specify only one of added() and addedBefore()");return"function"==typeof e.addedBefore||"function"==typeof e.movedBefore},LocalCollection.LiveResultsSet=function(){},_.extend(LocalCollection.Cursor.prototype,{observe:function(e){var t=this;return LocalCollection._observeFromObserveChanges(t,e)},observeChanges:function(e){var t=this,n=LocalCollection._isOrderedChanges(e);if(!n&&(t.skip||t.limit))throw Error("must use ordered observe with skip or limit");var r,o={selector_f:t.selector_f,sort_f:n&&t.sort_f,results_snapshot:null,ordered:n,cursor:this,observeChanges:e.observeChanges};t.reactive&&(r=t.collection.next_qid++,t.collection.queries[r]=o),o.results=t._getRawObjects(n),t.collection.paused&&(o.results_snapshot=n?[]:{});var i=function(e){return e?function(){t.collection.paused||e.apply(this,arguments)}:function(){}};o.added=i(e.added),o.changed=i(e.changed),o.removed=i(e.removed),n&&(o.moved=i(e.moved),o.addedBefore=i(e.addedBefore),o.movedBefore=i(e.movedBefore)),e._suppress_initial||t.collection.paused||_.each(o.results,function(e){var t=EJSON.clone(e);delete t._id,n&&o.addedBefore(e._id,t,null),o.added(e._id,t)});var a=new LocalCollection.LiveResultsSet;return _.extend(a,{collection:t.collection,stop:function(){t.reactive&&delete t.collection.queries[r]}}),t.reactive&&Deps.active&&Deps.onInvalidate(function(){a.stop()}),a}}),LocalCollection.Cursor.prototype._getRawObjects=function(e){var t=this,n=e?[]:{};if(t.selector_id){if(t.skip)return n;if(_.has(t.collection.docs,t.selector_id)){var r=t.collection.docs[t.selector_id];e?n.push(r):n[t.selector_id]=r}return n}for(var o in t.collection.docs){var i=t.collection.docs[o];if(t.selector_f(i)&&(e?n.push(i):n[o]=i),t.limit&&!t.skip&&!t.sort_f&&n.length===t.limit)return n}if(!e)return n;t.sort_f&&n.sort(t.sort_f);var a=t.skip||0,s=t.limit?t.limit+a:n.length;return n.slice(a,s)},LocalCollection.Cursor.prototype._depend=function(e){var t=this;if(Deps.active){var n=new Deps.Dependency;n.depend();var r=_.bind(n.changed,n),o={_suppress_initial:!0};_.each(["added","changed","removed","addedBefore","movedBefore"],function(t){e[t]&&(o[t]=r)}),t.observeChanges(o)}},LocalCollection.prototype.insert=function(e){var t=this;e=EJSON.clone(e),_.has(e,"_id")||(e._id=LocalCollection._useOID?new LocalCollection._ObjectID:Random.id());var n=LocalCollection._idStringify(e._id);if(_.has(t.docs,e._id))throw new LocalCollection.MinimongoError("Duplicate _id '"+e._id+"'");t._saveOriginal(n,void 0),t.docs[n]=e;var r=[];for(var o in t.queries){var i=t.queries[o];i.selector_f(e)&&(i.cursor.skip||i.cursor.limit?r.push(o):LocalCollection._insertInResults(i,e))}return _.each(r,function(e){t.queries[e]&&LocalCollection._recomputeResults(t.queries[e])}),e._id},LocalCollection.prototype.remove=function(e){var t=this,n=[],r=[],o=LocalCollection._compileSelector(e),i=LocalCollection._idsMatchedBySelector(e);if(i)_.each(i,function(e){var r=LocalCollection._idStringify(e);_.has(t.docs,r)&&o(t.docs[r])&&n.push(r)});else for(var a in t.docs){var s=t.docs[a];o(s)&&n.push(a)}for(var l=[],u=0;n.length>u;u++){var c=n[u],d=t.docs[c];_.each(t.queries,function(e,t){e.selector_f(d)&&(e.cursor.skip||e.cursor.limit?r.push(t):l.push({qid:t,doc:d}))}),t._saveOriginal(c,d),delete t.docs[c]}_.each(l,function(e){var n=t.queries[e.qid];n&&LocalCollection._removeFromResults(n,e.doc)}),_.each(r,function(e){var n=t.queries[e];n&&LocalCollection._recomputeResults(n)})},LocalCollection.prototype.update=function(e,t,n){var r=this;if(n||(n={}),n.upsert)throw Error("upsert not yet implemented");var o=LocalCollection._compileSelector(e),i={};_.each(r.queries,function(e,t){!e.cursor.skip&&!e.cursor.limit||e.paused||(i[t]=EJSON.clone(e.results))});var a={};for(var s in r.docs){var l=r.docs[s];if(o(l)&&(r._saveOriginal(s,l),r._modifyAndNotify(l,t,a),!n.multi))break}_.each(a,function(e,t){var n=r.queries[t];n&&LocalCollection._recomputeResults(n,i[t])})},LocalCollection.prototype._modifyAndNotify=function(e,t,n){var r=this,o={};for(var i in r.queries){var a=r.queries[i];o[i]=a.ordered?a.selector_f(e):_.has(a.results,LocalCollection._idStringify(e._id))}var s=EJSON.clone(e);LocalCollection._modify(e,t);for(i in r.queries){a=r.queries[i];var l=o[i],u=a.selector_f(e);a.cursor.skip||a.cursor.limit?(l||u)&&(n[i]=!0):l&&!u?LocalCollection._removeFromResults(a,e):!l&&u?LocalCollection._insertInResults(a,e):l&&u&&LocalCollection._updateInResults(a,e,s)}},LocalCollection._insertInResults=function(e,t){var n=EJSON.clone(t);if(delete n._id,e.ordered){if(e.sort_f){var r=LocalCollection._insertInSortedList(e.sort_f,e.results,t),o=e.results[r+1];o=o?o._id:null,e.addedBefore(t._id,n,o)}else e.addedBefore(t._id,n,null),e.results.push(t);e.added(t._id,n)}else e.added(t._id,n),e.results[LocalCollection._idStringify(t._id)]=t},LocalCollection._removeFromResults=function(e,t){if(e.ordered){var n=LocalCollection._findInOrderedResults(e,t);e.removed(t._id),e.results.splice(n,1)}else{var r=LocalCollection._idStringify(t._id);e.removed(t._id),delete e.results[r]}},LocalCollection._updateInResults=function(e,t,n){if(!EJSON.equals(t._id,n._id))throw Error("Can't change a doc's _id while updating");var r=LocalCollection._makeChangedFields(t,n);if(!e.ordered)return _.isEmpty(r)||(e.changed(t._id,r),e.results[LocalCollection._idStringify(t._id)]=t),void 0;var o=LocalCollection._findInOrderedResults(e,t);if(_.isEmpty(r)||e.changed(t._id,r),e.sort_f){e.results.splice(o,1);var i=LocalCollection._insertInSortedList(e.sort_f,e.results,t);if(o!==i){var a=e.results[i+1];a=a?a._id:null,e.movedBefore&&e.movedBefore(t._id,a)}}},LocalCollection._recomputeResults=function(e,t){t||(t=e.results),e.results=e.cursor._getRawObjects(e.ordered),e.paused||LocalCollection._diffQueryChanges(e.ordered,t,e.results,e)},LocalCollection._findInOrderedResults=function(e,t){if(!e.ordered)throw Error("Can't call _findInOrderedResults on unordered query");for(var n=0;e.results.length>n;n++)if(e.results[n]===t)return n;throw Error("object missing from query")},LocalCollection._insertInSortedList=function(e,t,n){if(0===t.length)return t.push(n),0;for(var r=0;t.length>r;r++)if(0>e(n,t[r]))return t.splice(r,0,n),r;return t.push(n),t.length-1},LocalCollection.prototype.saveOriginals=function(){var e=this;if(e._savedOriginals)throw Error("Called saveOriginals twice without retrieveOriginals");e._savedOriginals={}},LocalCollection.prototype.retrieveOriginals=function(){var e=this;if(!e._savedOriginals)throw Error("Called retrieveOriginals without saveOriginals");var t=e._savedOriginals;return e._savedOriginals=null,t},LocalCollection.prototype._saveOriginal=function(e,t){var n=this;n._savedOriginals&&(_.has(n._savedOriginals,e)||(n._savedOriginals[e]=EJSON.clone(t)))},LocalCollection.prototype.pauseObservers=function(){if(!this.paused){this.paused=!0;for(var e in this.queries){var t=this.queries[e];t.results_snapshot=EJSON.clone(t.results)}}},LocalCollection.prototype.resumeObservers=function(){if(this.paused){this.paused=!1;for(var e in this.queries){var t=this.queries[e];LocalCollection._diffQueryChanges(t.ordered,t.results_snapshot,t.results,t),t.results_snapshot=null}}},LocalCollection._idStringify=function(e){if(e instanceof LocalCollection._ObjectID)return e.valueOf();if("string"==typeof e)return""===e?e:"-"===e.substr(0,1)||"~"===e.substr(0,1)||LocalCollection._looksLikeObjectID(e)||"{"===e.substr(0,1)?"-"+e:e;if(void 0===e)return"-";if("object"==typeof e)throw Error("Meteor does not currently support objects other than ObjectID as ids");return"~"+JSON.stringify(e)},LocalCollection._idParse=function(e){return""===e?e:"-"===e?void 0:"-"===e.substr(0,1)?e.substr(1):"~"===e.substr(0,1)?JSON.parse(e.substr(1)):LocalCollection._looksLikeObjectID(e)?new LocalCollection._ObjectID(e):e},"undefined"!=typeof Meteor&&(Meteor.idParse=LocalCollection._idParse,Meteor.idStringify=LocalCollection._idStringify),LocalCollection._makeChangedFields=function(e,t){var n={};return LocalCollection._diffObjects(t,e,{leftOnly:function(e){n[e]=void 0},rightOnly:function(e,t){n[e]=t},both:function(e,t,r){EJSON.equals(t,r)||(n[e]=r)}}),n},LocalCollection._observeFromObserveChanges=function(e,t){var n=e.getTransform();if(n||(n=function(e){return e}),t.addedAt&&t.added)throw Error("Please specify only one of added() and addedAt()");if(t.changedAt&&t.changed)throw Error("Please specify only one of changed() and changedAt()");if(t.removed&&t.removedAt)throw Error("Please specify only one of removed() and removedAt()");return t.addedAt||t.movedTo||t.changedAt||t.removedAt?LocalCollection._observeOrderedFromObserveChanges(e,t,n):LocalCollection._observeUnorderedFromObserveChanges(e,t,n)},LocalCollection._observeUnorderedFromObserveChanges=function(e,t,n){var r={},o=!!t._suppress_initial,i=e.observeChanges({added:function(e,i){var a=LocalCollection._idStringify(e),s=EJSON.clone(i);s._id=e,r[a]=s,o||t.added&&t.added(n(s))},changed:function(e,i){var a=LocalCollection._idStringify(e),s=r[a],l=EJSON.clone(s);LocalCollection._applyChanges(s,i),o||t.changed&&t.changed(n(s),n(l))},removed:function(e){var i=LocalCollection._idStringify(e),a=r[i];delete r[i],o||t.removed&&t.removed(n(a))}});return o=!1,i},LocalCollection._observeOrderedFromObserveChanges=function(e,t,n){var r=new OrderedDict(LocalCollection._idStringify),o=!!t._suppress_initial,i=e.observeChanges({addedBefore:function(e,i,a){var s=EJSON.clone(i);if(s._id=e,r.putBefore(e,s,a?a:null),!o)if(t.addedAt){var l=r.indexOf(e);t.addedAt(n(EJSON.clone(s)),l,a)}else t.added&&t.added(n(EJSON.clone(s)))},changed:function(e,o){var i=r.get(e);if(!i)throw Error("Unknown id for changed: "+e);var a=EJSON.clone(i);if(LocalCollection._applyChanges(i,o),t.changedAt){var s=r.indexOf(e);t.changedAt(n(EJSON.clone(i)),n(a),s)}else t.changed&&t.changed(n(EJSON.clone(i)),n(a))},movedBefore:function(e,o){var i,a=r.get(e);if(t.movedTo&&(i=r.indexOf(e)),r.moveBefore(e,o?o:null),t.movedTo){var s=r.indexOf(e);t.movedTo(n(EJSON.clone(a)),i,s)}else t.moved&&t.moved(n(EJSON.clone(a)))},removed:function(e){var o,i=r.get(e);t.removedAt&&(o=r.indexOf(e)),r.remove(e),t.removedAt&&t.removedAt(n(i),o),t.removed&&t.removed(n(i))}});return o=!1,i}}.call(this),function(){var e=function(e){return _.isArray(e)&&!EJSON.isBinary(e)},t=function(t,n){return e(t)?_.any(t,n):n(t)},n=function(t,n){return n(t)?!0:e(t)&&_.any(t,n)},r=function(e){var t=void 0;for(var n in e){var r="$"===n.substr(0,1);if(void 0===t)t=r;else if(t!==r)throw Error("Inconsistent selector: "+e)}return!!t},o=function(o){if(null==o)return function(e){return t(e,function(e){return null==e})};if(!_.isObject(o))return function(e){return t(e,function(e){return e===o})};if(o instanceof RegExp)return function(e){return void 0===e?!1:t(e,function(e){return o.test(e)})};if(e(o))return function(t){return e(t)?n(t,function(e){return LocalCollection._f._equal(o,e)}):!1};if(r(o)){var i=[];return _.each(o,function(e,t){if(!_.has(a,t))throw Error("Unrecognized operator: "+t);i.push(a[t](e,o.$options))}),function(e){return _.all(i,function(t){return t(e)})}}return function(e){return t(e,function(e){return LocalCollection._f._equal(o,e)})}},i={$and:function(t){if(!e(t)||_.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");var n=_.map(t,s);return function(e){return _.all(n,function(t){return t(e)})}},$or:function(t){if(!e(t)||_.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");var n=_.map(t,s);return function(e){return _.any(n,function(t){return t(e)})}},$nor:function(t){if(!e(t)||_.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");var n=_.map(t,s);return function(e){return _.all(n,function(t){return!t(e)})}},$where:function(e){return e instanceof Function||(e=Function("return "+e)),function(t){return e.call(t)}}},a={$in:function(t){if(!e(t))throw Error("Argument to $in must be array");return function(e){return n(e,function(e){return _.any(t,function(t){return LocalCollection._f._equal(t,e)})})}},$all:function(t){if(!e(t))throw Error("Argument to $all must be array");return function(n){return e(n)?_.all(t,function(e){return _.any(n,function(t){return LocalCollection._f._equal(e,t)})}):!1}},$lt:function(e){return function(n){return t(n,function(t){return 0>LocalCollection._f._cmp(t,e)})}},$lte:function(e){return function(n){return t(n,function(t){return 0>=LocalCollection._f._cmp(t,e)})}},$gt:function(e){return function(n){return t(n,function(t){return LocalCollection._f._cmp(t,e)>0})}},$gte:function(e){return function(n){return t(n,function(t){return LocalCollection._f._cmp(t,e)>=0})}},$ne:function(e){return function(t){return!n(t,function(t){return LocalCollection._f._equal(t,e)})}},$nin:function(t){if(!e(t))throw Error("Argument to $nin must be array");var n=a.$in(t);return function(e){return void 0===e?!0:!n(e)}},$exists:function(e){return function(t){return e===(void 0!==t)}},$mod:function(e){var n=e[0],r=e[1];return function(e){return t(e,function(e){return e%n===r})}},$size:function(t){return function(n){return e(n)&&t===n.length}},$type:function(e){return function(n){return void 0===n?!1:t(n,function(t){return LocalCollection._f._type(t)===e})}},$regex:function(e,n){if(void 0!==n){if(/[^gim]/.test(n))throw Error("Only the i, m, and g regexp options are supported");var r=e instanceof RegExp?e.source:e;e=RegExp(r,n)}else e instanceof RegExp||(e=RegExp(e));return function(n){return void 0===n?!1:t(n,function(t){return e.test(t)})}},$options:function(){return function(){return!0}},$elemMatch:function(t){var n=s(t);return function(t){return e(t)?_.any(t,function(e){return n(e)}):!1}},$not:function(e){var t=o(e);return function(e){return!t(e)}}};LocalCollection._f={_type:function(t){return"number"==typeof t?1:"string"==typeof t?2:"boolean"==typeof t?8:e(t)?4:null===t?10:t instanceof RegExp?11:"function"==typeof t?13:t instanceof Date?9:EJSON.isBinary(t)?5:t instanceof Meteor.Collection.ObjectID?7:3},_equal:function(e,t){return EJSON.equals(e,t,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(e,t){if(void 0===e)return void 0===t?0:-1;if(void 0===t)return 1;var n=LocalCollection._f._type(e),r=LocalCollection._f._type(t),o=LocalCollection._f._typeorder(n),i=LocalCollection._f._typeorder(r);if(o!==i)return i>o?-1:1;if(n!==r)throw Error("Missing type coercion logic in _cmp");if(7===n&&(n=r=2,e=e.toHexString(),t=t.toHexString()),9===n&&(n=r=1,e=e.getTime(),t=t.getTime()),1===n)return e-t;if(2===r)return t>e?-1:e===t?0:1;if(3===n){var a=function(e){var t=[];for(var n in e)t.push(n),t.push(e[n]);return t};return LocalCollection._f._cmp(a(e),a(t))}if(4===n)for(var s=0;;s++){if(s===e.length)return s===t.length?0:-1;if(s===t.length)return 1;var l=LocalCollection._f._cmp(e[s],t[s]);if(0!==l)return l}if(5===n){if(e.length!==t.length)return e.length-t.length;for(s=0;e.length>s;s++){if(e[s]<t[s])return-1;if(e[s]>t[s])return 1}return 0}if(8===n)return e?t?0:1:t?-1:0;if(10===n)return 0;if(11===n)throw Error("Sorting not supported on regular expression");if(13===n)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},LocalCollection._matches=function(e,t){return LocalCollection._compileSelector(e)(t)},LocalCollection._makeLookupFunction=function(t){var n,r,o,i=t.indexOf(".");if(-1===i)n=t;else{n=t.substr(0,i);var a=t.substr(i+1);r=LocalCollection._makeLookupFunction(a),o=/^\d+(\.|$)/.test(a)}return function(t){if(null==t)return[void 0];var i=t[n];return r?e(i)&&0===i.length?[void 0]:((!e(i)||o)&&(i=[i]),Array.prototype.concat.apply([],_.map(i,r))):[i]}};var s=function(e){var t=[];return _.each(e,function(e,n){if("$"===n.substr(0,1)){if(!_.has(i,n))throw Error("Unrecognized logical operator: "+n);t.push(i[n](e))}else{var r=LocalCollection._makeLookupFunction(n),a=o(e);t.push(function(e){var t=r(e);return _.any(t,a)})}}),function(e){return _.all(t,function(t){return t(e)})}};LocalCollection._compileSelector=function(t){if(t instanceof Function)return function(e){return t.call(e)};if(LocalCollection._selectorIsId(t))return function(e){return EJSON.equals(e._id,t)};if(!t||"_id"in t&&!t._id)return function(){return!1};if("boolean"==typeof t||e(t)||EJSON.isBinary(t))throw Error("Invalid selector: "+t);return s(t)},LocalCollection._compileSort=function(t){var n=[];if(t instanceof Array)for(var r=0;t.length>r;r++)"string"==typeof t[r]?n.push({lookup:LocalCollection._makeLookupFunction(t[r]),ascending:!0}):n.push({lookup:LocalCollection._makeLookupFunction(t[r][0]),ascending:"desc"!==t[r][1]});else{if("object"!=typeof t)throw Error("Bad sort specification: ",JSON.stringify(t));for(var o in t)n.push({lookup:LocalCollection._makeLookupFunction(o),ascending:t[o]>=0})}if(0===n.length)return function(){return 0};var i=function(t,n){var r,o=!0;return _.each(t,function(t){e(t)||(t=[t]),e(t)&&0===t.length&&(t=[void 0]),_.each(t,function(e){if(o)r=e,o=!1;else{var t=LocalCollection._f._cmp(r,e);(n&&t>0||!n&&0>t)&&(r=e)}})}),r};return function(e,t){for(var r=0;n.length>r;++r){var o=n[r],a=i(o.lookup(e),o.ascending),s=i(o.lookup(t),o.ascending),l=LocalCollection._f._cmp(a,s);if(0!==l)return o.ascending?l:-l}return 0}}}.call(this),function(){LocalCollection._modify=function(e,t){var n=!1;for(var r in t){n="$"===r.substr(0,1);break}var o;if(n){var o=EJSON.clone(e);for(var i in t){var a=LocalCollection._modifiers[i];if(!a)throw Error("Invalid modifier specified "+i);for(var s in t[i]){if(s.length&&"."===s[s.length-1])throw Error("Invalid mod field name, may not end in a period");var l=t[i][s],u=s.split("."),c=!!LocalCollection._noCreateModifiers[i],d="$rename"===i,f=LocalCollection._findModTarget(o,u,c,d),p=u.pop();a(f,p,l,s,o)}}}else{if(t._id&&!EJSON.equals(e._id,t._id))throw Error("Cannot change the _id of a document");for(var r in t){if("$"===r.substr(0,1))throw Error("When replacing document, field name may not start with '$'");if(/\./.test(r))throw Error("When replacing document, field name may not contain '.'")}o=t}_.each(_.keys(e),function(t){"_id"!==t&&delete e[t]});for(var r in o)e[r]=o[r]},LocalCollection._findModTarget=function(e,t,n,r){for(var o=0;t.length>o;o++){var i=o===t.length-1,a=t[o],s=/^[0-9]+$/.test(a);if(!(!n||"object"==typeof e&&a in e))return void 0;if(e instanceof Array){if(r)return null;if(!s)throw Error("can't append to array using string field name ["+a+"]");for(a=parseInt(a),i&&(t[o]=a);a>e.length;)e.push(null);if(!i)if(e.length===a)e.push({});else if("object"!=typeof e[a])throw Error("can't modify field '"+t[o+1]+"' of list value "+JSON.stringify(e[a]))}else i||a in e||(e[a]={});if(i)return e;e=e[a]}},LocalCollection._noCreateModifiers={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},LocalCollection._modifiers={$inc:function(e,t,n){if("number"!=typeof n)throw Error("Modifier $inc allowed for numbers only");if(t in e){if("number"!=typeof e[t])throw Error("Cannot apply $inc modifier to non-number");e[t]+=n}else e[t]=n},$set:function(e,t,n){if("_id"===t&&!EJSON.equals(n,e._id))throw Error("Cannot change the _id of a document");e[t]=EJSON.clone(n)},$unset:function(e,t){void 0!==e&&(e instanceof Array?t in e&&(e[t]=null):delete e[t])},$push:function(e,t,n){var r=e[t];if(void 0===r)e[t]=[n];else{if(!(r instanceof Array))throw Error("Cannot apply $push modifier to non-array");r.push(EJSON.clone(n))}},$pushAll:function(e,t,n){if(!("object"==typeof n&&n instanceof Array))throw Error("Modifier $pushAll/pullAll allowed for arrays only");var r=e[t];if(void 0===r)e[t]=n;else{if(!(r instanceof Array))throw Error("Cannot apply $pushAll modifier to non-array");for(var o=0;n.length>o;o++)r.push(n[o])}},$addToSet:function(e,t,n){var r=e[t];if(void 0===r)e[t]=[n];else{if(!(r instanceof Array))throw Error("Cannot apply $addToSet modifier to non-array");var o=!1;if("object"==typeof n)for(var i in n){"$each"===i&&(o=!0);break}var a=o?n.$each:[n];_.each(a,function(e){for(var t=0;r.length>t;t++)if(LocalCollection._f._equal(e,r[t]))return;r.push(e)})}},$pop:function(e,t,n){if(void 0!==e){var r=e[t];if(void 0!==r){if(!(r instanceof Array))throw Error("Cannot apply $pop modifier to non-array");"number"==typeof n&&0>n?r.splice(0,1):r.pop()}}},$pull:function(e,t,n){if(void 0!==e){var r=e[t];if(void 0!==r){if(!(r instanceof Array))throw Error("Cannot apply $pull/pullAll modifier to non-array");var o=[];if("object"!=typeof n||n instanceof Array)for(var i=0;r.length>i;i++)LocalCollection._f._equal(r[i],n)||o.push(r[i]);
else for(var a=LocalCollection._compileSelector(n),i=0;r.length>i;i++)a(r[i])||o.push(r[i]);e[t]=o}}},$pullAll:function(e,t,n){if(!("object"==typeof n&&n instanceof Array))throw Error("Modifier $pushAll/pullAll allowed for arrays only");if(void 0!==e){var r=e[t];if(void 0!==r){if(!(r instanceof Array))throw Error("Cannot apply $pull/pullAll modifier to non-array");for(var o=[],i=0;r.length>i;i++){for(var a=!1,s=0;n.length>s;s++)if(LocalCollection._f._equal(r[i],n[s])){a=!0;break}a||o.push(r[i])}e[t]=o}}},$rename:function(e,t,n,r,o){if(r===n)throw Error("$rename source must differ from target");if(null===e)throw Error("$rename source field invalid");if("string"!=typeof n)throw Error("$rename target must be a string");if(void 0!==e){var i=e[t];delete e[t];var a=n.split("."),s=LocalCollection._findModTarget(o,a,!1,!0);if(null===s)throw Error("$rename target field invalid");var l=a.pop();s[l]=i}},$bit:function(){throw Error("$bit is not supported")}}}.call(this),function(){LocalCollection._diffQueryChanges=function(e,t,n,r){e?LocalCollection._diffQueryOrderedChanges(t,n,r):LocalCollection._diffQueryUnorderedChanges(t,n,r)},LocalCollection._diffQueryUnorderedChanges=function(e,t,n){if(n.moved)throw Error("_diffQueryUnordered called with a moved observer!");_.each(t,function(t){if(_.has(e,t._id)){var r=e[t._id];n.changed&&!EJSON.equals(r,t)&&n.changed(t._id,LocalCollection._makeChangedFields(t,r))}else{var o=EJSON.clone(t);delete o._id,n.added&&n.added(t._id,o)}}),n.removed&&_.each(e,function(e){_.has(t,e._id)||n.removed(e._id)})},LocalCollection._diffQueryOrderedChanges=function(e,t,n){var r={};_.each(t,function(e){r[e._id]&&Meteor._debug("Duplicate _id in new_results"),r[e._id]=!0});var o={};_.each(e,function(e,t){e._id in o&&Meteor._debug("Duplicate _id in old_results"),o[e._id]=t});for(var i=[],a=0,s=t.length,l=Array(s),u=Array(s),c=function(e){return o[t[e]._id]},d=0;s>d;d++)if(void 0!==o[t[d]._id]){for(var f=a;f>0&&!(c(l[f-1])<c(d));)f--;u[d]=0===f?-1:l[f-1],l[f]=d,f+1>a&&(a=f+1)}for(var p=0===a?-1:l[a-1];p>=0;)i.push(p),p=u[p];i.reverse(),i.push(t.length),_.each(e,function(e){r[e._id]||n.removed&&n.removed(e._id)});var h=0;_.each(i,function(r){for(var i,a,s,l=t[r]?t[r]._id:null,u=h;r>u;u++)a=t[u],_.has(o,a._id)?(i=e[o[a._id]],s=LocalCollection._makeChangedFields(a,i),_.isEmpty(s)||n.changed&&n.changed(a._id,s),n.movedBefore&&n.movedBefore(a._id,l)):(s=EJSON.clone(a),delete s._id,n.addedBefore&&n.addedBefore(a._id,s,l),n.added&&n.added(a._id,s));l&&(a=t[r],i=e[o[a._id]],s=LocalCollection._makeChangedFields(a,i),_.isEmpty(s)||n.changed&&n.changed(a._id,s)),h=r+1})},LocalCollection._diffObjects=function(e,t,n){_.each(e,function(e,r){_.has(t,r)?n.both&&n.both(r,e,t[r]):n.leftOnly&&n.leftOnly(r,e)}),n.rightOnly&&_.each(t,function(t,r){_.has(e,r)||n.rightOnly(r,t)})}}.call(this),function(){LocalCollection._looksLikeObjectID=function(e){return 24===e.length&&e.match(/^[0-9a-f]*$/)},LocalCollection._ObjectID=function(e){var t=this;if(e){if(e=e.toLowerCase(),!LocalCollection._looksLikeObjectID(e))throw Error("Invalid hexadecimal string for creating an ObjectID");t._str=e}else t._str=Random.hexString(24)},LocalCollection._ObjectID.prototype.toString=function(){var e=this;return'ObjectID("'+e._str+'")'},LocalCollection._ObjectID.prototype.equals=function(e){var t=this;return e instanceof LocalCollection._ObjectID&&t.valueOf()===e.valueOf()},LocalCollection._ObjectID.prototype.clone=function(){var e=this;return new LocalCollection._ObjectID(e._str)},LocalCollection._ObjectID.prototype.typeName=function(){return"oid"},LocalCollection._ObjectID.prototype.getTimestamp=function(){var e=this;return parseInt(e._str.substr(0,8),16)},LocalCollection._ObjectID.prototype.valueOf=LocalCollection._ObjectID.prototype.toJSONValue=LocalCollection._ObjectID.prototype.toHexString=function(){return this._str},LocalCollection._selectorIsId=function(e){return"string"==typeof e||"number"==typeof e||e instanceof LocalCollection._ObjectID},LocalCollection._selectorIsIdPerhapsAsObject=function(e){return LocalCollection._selectorIsId(e)||e&&"object"==typeof e&&e._id&&LocalCollection._selectorIsId(e._id)&&1===_.size(e)},LocalCollection._idsMatchedBySelector=function(e){if(LocalCollection._selectorIsId(e))return[e];if(!e)return null;if(_.has(e,"_id"))return LocalCollection._selectorIsId(e._id)?[e._id]:e._id&&e._id.$in&&_.isArray(e._id.$in)&&!_.isEmpty(e._id.$in)&&_.all(e._id.$in,LocalCollection._selectorIsId)?e._id.$in:null;if(e.$and&&_.isArray(e.$and))for(var t=0;e.$and.length>t;++t){var n=LocalCollection._idsMatchedBySelector(e.$and[t]);if(n)return n}return null},EJSON.addType("oid",function(e){return new LocalCollection._ObjectID(e)})}.call(this),function(){Meteor._SUPPORTED_DDP_VERSIONS=["pre1"],Meteor._MethodInvocation=function(e){this.isSimulation=e.isSimulation,this.is_simulation=this.isSimulation,this._unblock=e.unblock||function(){},this._calledUnblock=!1,this.userId=e.userId,this._setUserId=e.setUserId||function(){},this._sessionData=e.sessionData},_.extend(Meteor._MethodInvocation.prototype,{unblock:function(){var e=this;e._calledUnblock=!0,e._unblock()},setUserId:function(e){var t=this;if(t._calledUnblock)throw Error("Can't call setUserId in a method after calling unblock");t.userId=e,t._setUserId(e)}}),Meteor._parseDDP=function(e){try{var t=JSON.parse(e)}catch(n){return Meteor._debug("Discarding message with invalid JSON",e),null}return null===t||"object"!=typeof t?(Meteor._debug("Discarding non-object DDP message",e),null):(_.has(t,"cleared")&&(_.has(t,"fields")||(t.fields={}),_.each(t.cleared,function(e){t.fields[e]=void 0}),delete t.cleared),_.each(["fields","params","result"],function(e){_.has(t,e)&&(t[e]=EJSON._adjustTypesFromJSONValue(t[e]))}),t)},Meteor._stringifyDDP=function(e){var t=EJSON.clone(e);if(_.has(e,"fields")){var n=[];_.each(e.fields,function(e,r){void 0===e&&(n.push(r),delete t.fields[r])}),_.isEmpty(n)||(t.cleared=n),_.isEmpty(t.fields)&&delete t.fields}if(_.each(["fields","params","result"],function(e){_.has(t,e)&&(t[e]=EJSON._adjustTypesToJSONValue(t[e]))}),e.id&&"string"!=typeof e.id)throw Error("Message id is not a string");return JSON.stringify(t)},Meteor._CurrentInvocation=new Meteor.EnvironmentVariable,Meteor.Error=Meteor.makeErrorType("Meteor.Error",function(e,t,n){var r=this;r.error=e,r.reason=t,r.details=n,r.message=r.reason?r.reason+" ["+r.error+"]":"["+r.error+"]"})}.call(this),function(){if(Meteor.isServer){var e=Npm.require("path");Npm.require("fibers");var t=Npm.require(e.join("fibers","future"))}Meteor._LivedataConnection=function(e,t){var n=this;t=_.extend({reloadOnUpdate:!1,reloadWithOutstanding:!1,supportedDDPVersions:Meteor._SUPPORTED_DDP_VERSIONS,onConnectionFailure:function(e){Meteor._debug("Failed DDP connection: "+e)},onConnected:function(){}},t),n.onReconnect=null,n._stream="object"==typeof e?e:new Meteor._DdpClientStream(e),n._lastSessionId=null,n._versionSuggestion=null,n._version=null,n._stores={},n._methodHandlers={},n._nextMethodId=1,n._supportedDDPVersions=t.supportedDDPVersions,n._methodInvokers={},n._outstandingMethodBlocks=[],n._documentsWrittenByStub={},n._serverDocuments={},n._afterUpdateCallbacks=[],n._messagesBufferedUntilQuiescence=[],n._methodsBlockingQuiescence={},n._subsBeingRevived={},n._resetStores=!1,n._updatesForUnknownStores={},n._retryMigrate=null,n._subscriptions={},n._sessionData={},n._userId=null,n._userIdDeps="undefined"!=typeof Deps&&new Deps.Dependency,Meteor._reload&&!t.reloadWithOutstanding&&Meteor._reload.onMigrate(function(e){if(n._readyToMigrate())return[!0];if(n._retryMigrate)throw Error("Two migrations in progress?");return n._retryMigrate=e,!1});var r=function(e){try{var r=Meteor._parseDDP(e)}catch(o){return Meteor._debug("Exception while parsing DDP",o),void 0}if(null===r||!r.msg)return Meteor._debug("discarding invalid livedata message",r),void 0;if("connected"===r.msg)n._version=n._versionSuggestion,t.onConnected(),n._livedata_connected(r);else if("failed"==r.msg)if(_.contains(n._supportedDDPVersions,r.version))n._versionSuggestion=r.version,n._stream.reconnect({_force:!0});else{var i="Version negotiation failed; server requested version "+r.version;n._stream.forceDisconnect(i),t.onConnectionFailure(i)}else _.include(["added","changed","removed","ready","updated"],r.msg)?n._livedata_data(r):"nosub"===r.msg?n._livedata_nosub(r):"result"===r.msg?n._livedata_result(r):"error"===r.msg?n._livedata_error(r):Meteor._debug("discarding unknown livedata message type",r)},o=function(){var e={msg:"connect"};n._lastSessionId&&(e.session=n._lastSessionId),e.version=n._versionSuggestion||n._supportedDDPVersions[0],n._versionSuggestion=e.version,e.support=n._supportedDDPVersions,n._send(e),!_.isEmpty(n._outstandingMethodBlocks)&&_.isEmpty(n._outstandingMethodBlocks[0].methods)&&n._outstandingMethodBlocks.shift(),_.each(n._methodInvokers,function(e){e.sentMessage=!1}),n.onReconnect?n._callOnReconnectAndSendAppropriateOutstandingMethods():n._sendOutstandingMethods(),_.each(n._subscriptions,function(e,t){n._send({msg:"sub",id:t,name:e.name,params:e.params})})};Meteor.isServer?(n._stream.on("message",Meteor.bindEnvironment(r,Meteor._debug)),n._stream.on("reset",Meteor.bindEnvironment(o,Meteor._debug))):(n._stream.on("message",r),n._stream.on("reset",o)),Meteor._reload&&t.reloadOnUpdate&&n._stream.on("update_available",function(){Meteor._reload.reload()})};var n=function(e){var t=this;t.methodId=e.methodId,t.sentMessage=!1,t._callback=e.callback,t._connection=e.connection,t._message=e.message,t._onResultReceived=e.onResultReceived||function(){},t._wait=e.wait,t._methodResult=null,t._dataVisible=!1,t._connection._methodInvokers[t.methodId]=t};_.extend(n.prototype,{sendMessage:function(){var e=this;if(e.gotResult())throw Error("sendingMethod is called on method with result");e._dataVisible=!1,e.sentMessage=!0,e._wait&&(e._connection._methodsBlockingQuiescence[e.methodId]=!0),e._connection._send(e._message)},_maybeInvokeCallback:function(){var e=this;e._methodResult&&e._dataVisible&&(e._callback(e._methodResult[0],e._methodResult[1]),delete e._connection._methodInvokers[e.methodId],e._connection._outstandingMethodFinished())},receiveResult:function(e,t){var n=this;if(n.gotResult())throw Error("Methods should only receive results once");n._methodResult=[e,t],n._onResultReceived(e,t),n._maybeInvokeCallback()},dataVisible:function(){var e=this;e._dataVisible=!0,e._maybeInvokeCallback()},gotResult:function(){var e=this;return!!e._methodResult}}),_.extend(Meteor._LivedataConnection.prototype,{registerStore:function(e,t){var n=this;if(e in n._stores)return!1;var r={};_.each(["update","beginUpdate","endUpdate","saveOriginals","retrieveOriginals"],function(e){r[e]=function(){return t[e]?t[e].apply(t,arguments):void 0}}),n._stores[e]=r;var o=n._updatesForUnknownStores[e];return o&&(r.beginUpdate(o.length,!1),_.each(o,function(e){r.update(e)}),r.endUpdate(),delete n._updatesForUnknownStores[e]),!0},subscribe:function(e){var t=this,n=Array.prototype.slice.call(arguments,1),r={};if(n.length){var o=n[n.length-1];"function"==typeof o?r.onReady=n.pop():!o||"function"!=typeof o.onReady&&"function"!=typeof o.onError||(r=n.pop())}var i,a=_.find(t._subscriptions,function(t){return t.inactive&&t.name===e&&EJSON.equals(t.params,n)});a?(i=a.id,a.inactive=!1,r.onReady&&(a.ready||(a.readyCallback=r.onReady)),r.onError&&(a.errorCallback=r.onError)):(i=Random.id(),t._subscriptions[i]={id:i,name:e,params:n,inactive:!1,ready:!1,readyDeps:"undefined"!=typeof Deps&&new Deps.Dependency,readyCallback:r.onReady,errorCallback:r.onError},t._send({msg:"sub",id:i,name:e,params:n}));var s={stop:function(){_.has(t._subscriptions,i)&&(t._send({msg:"unsub",id:i}),delete t._subscriptions[i])},ready:function(){if(!_.has(t._subscriptions,i))return!1;var e=t._subscriptions[i];return e.readyDeps&&e.readyDeps.depend(),e.ready}};return Deps.active&&Deps.onInvalidate(function(){_.has(t._subscriptions,i)&&(t._subscriptions[i].inactive=!0),Deps.afterFlush(function(){_.has(t._subscriptions,i)&&t._subscriptions[i].inactive&&s.stop()})}),s},methods:function(e){var t=this;_.each(e,function(e,n){if(t._methodHandlers[n])throw Error("A method named '"+n+"' is already defined");t._methodHandlers[n]=e})},call:function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length&&"function"==typeof t[t.length-1])var n=t.pop();return this.apply(e,t,n)},apply:function(e,r,o,i){var a=this;i||"function"!=typeof o||(i=o,o={}),o=o||{},i&&(i=Meteor.bindEnvironment(i,function(t){Meteor._debug("Exception while delivering result of invoking '"+e+"'",t,t.stack)}));var s=function(){var e;return function(){return void 0===e&&(e=""+a._nextMethodId++),e}}(),l=Meteor._CurrentInvocation.get(),u=l&&l.isSimulation,c=a._methodHandlers[e];if(c){var d=function(e){a.setUserId(e)},f=new Meteor._MethodInvocation({isSimulation:!0,userId:a.userId(),setUserId:d,sessionData:a._sessionData});u||a._saveOriginals();try{var p=Meteor._CurrentInvocation.withValue(f,function(){return Meteor.isServer?Meteor._noYieldsAllowed(function(){return c.apply(f,EJSON.clone(r))}):c.apply(f,EJSON.clone(r))})}catch(h){var g=h}u||a._retrieveAndStoreOriginals(s())}if(u){if(i)return i(g,p),void 0;if(g)throw g;return p}if(g&&!g.expected&&Meteor._debug("Exception while simulating the effect of invoking '"+e+"'",g,g.stack),!i)if(Meteor.isClient)i=function(){};else{var m=new t;i=function(e,t){e?m["throw"](e):m["return"](t)}}var v=new n({methodId:s(),callback:i,connection:a,onResultReceived:o.onResultReceived,wait:!!o.wait,message:{msg:"method",method:e,params:r,id:s()}});return o.wait?a._outstandingMethodBlocks.push({wait:!0,methods:[v]}):((_.isEmpty(a._outstandingMethodBlocks)||_.last(a._outstandingMethodBlocks).wait)&&a._outstandingMethodBlocks.push({wait:!1,methods:[]}),_.last(a._outstandingMethodBlocks).methods.push(v)),1===a._outstandingMethodBlocks.length&&v.sendMessage(),m?m.wait():void 0},_saveOriginals:function(){var e=this;_.each(e._stores,function(e){e.saveOriginals()})},_retrieveAndStoreOriginals:function(e){var t=this;if(t._documentsWrittenByStub[e])throw Error("Duplicate methodId in _retrieveAndStoreOriginals");var n=[];_.each(t._stores,function(r,o){var i=r.retrieveOriginals();_.each(i,function(r,i){if("string"!=typeof i)throw Error("id is not a string");n.push({collection:o,id:i});var a=Meteor._ensure(t._serverDocuments,o,i);a.writtenByStubs?a.writtenByStubs[e]=!0:(a.document=r,a.flushCallbacks=[],a.writtenByStubs={},a.writtenByStubs[e]=!0)})}),_.isEmpty(n)||(t._documentsWrittenByStub[e]=n)},_unsubscribeAll:function(){var e=this;_.each(_.clone(e._subscriptions),function(t,n){e._send({msg:"unsub",id:n}),delete e._subscriptions[n]})},_send:function(e){var t=this;t._stream.send(Meteor._stringifyDDP(e))},status:function(){var e=this;return e._stream.status.apply(e._stream,arguments)},reconnect:function(){var e=this;return e._stream.reconnect.apply(e._stream,arguments)},userId:function(){var e=this;return e._userIdDeps&&e._userIdDeps.depend(),e._userId},setUserId:function(e){var t=this;t._userId!==e&&(t._userId=e,t._userIdDeps&&t._userIdDeps.changed())},_waitingForQuiescence:function(){var e=this;return!_.isEmpty(e._subsBeingRevived)||!_.isEmpty(e._methodsBlockingQuiescence)},_anyMethodsAreOutstanding:function(){var e=this;return _.any(_.pluck(e._methodInvokers,"sentMessage"))},_livedata_connected:function(e){var t=this;if(t._lastSessionId&&(t._resetStores=!0),"string"==typeof e.session){var n=t._lastSessionId===e.session;t._lastSessionId=e.session}n||(t._updatesForUnknownStores={},t._resetStores&&(t._documentsWrittenByStub={},t._serverDocuments={}),t._afterUpdateCallbacks=[],t._subsBeingRevived={},_.each(t._subscriptions,function(e,n){e.ready&&(t._subsBeingRevived[n]=!0)}),t._methodsBlockingQuiescence={},t._resetStores&&_.each(t._methodInvokers,function(e){e.gotResult()?t._afterUpdateCallbacks.push(_.bind(e.dataVisible,e)):e.sentMessage&&(t._methodsBlockingQuiescence[e.methodId]=!0)}),t._messagesBufferedUntilQuiescence=[],t._waitingForQuiescence()||(t._resetStores&&(_.each(t._stores,function(e){e.beginUpdate(0,!0),e.endUpdate()}),t._resetStores=!1),t._runAfterUpdateCallbacks()))},_processOneDataMessage:function(e,t){var n=this;n["_process_"+e.msg](e,t)},_livedata_data:function(e){var t=this,n={};if(t._waitingForQuiescence()){if(t._messagesBufferedUntilQuiescence.push(e),_.each(e.subs||[],function(e){delete t._subsBeingRevived[e]}),_.each(e.methods||[],function(e){delete t._methodsBlockingQuiescence[e]}),t._waitingForQuiescence())return;_.each(t._messagesBufferedUntilQuiescence,function(e){t._processOneDataMessage(e,n)}),t._messagesBufferedUntilQuiescence=[]}else t._processOneDataMessage(e,n);(t._resetStores||!_.isEmpty(n))&&(_.each(t._stores,function(e,r){e.beginUpdate(_.has(n,r)?n[r].length:0,t._resetStores)}),t._resetStores=!1,_.each(n,function(e,n){var r=t._stores[n];r?_.each(e,function(e){r.update(e)}):(_.has(t._updatesForUnknownStores,n)||(t._updatesForUnknownStores[n]=[]),Array.prototype.push.apply(t._updatesForUnknownStores[n],e))}),_.each(t._stores,function(e){e.endUpdate()})),t._runAfterUpdateCallbacks()},_runAfterUpdateCallbacks:function(){var e=this,t=e._afterUpdateCallbacks;e._afterUpdateCallbacks=[],_.each(t,function(e){e()})},_pushUpdate:function(e,t,n){_.has(e,t)||(e[t]=[]),e[t].push(n)},_process_added:function(e,t){var n=this,r=Meteor._get(n._serverDocuments,e.collection,e.id);if(r){if(void 0!==r.document)throw Error("It doesn't make sense to be adding something we know exists: "+e.id);r.document=e.fields||{},r.document._id=Meteor.idParse(e.id)}else n._pushUpdate(t,e.collection,e)},_process_changed:function(e,t){var n=this,r=Meteor._get(n._serverDocuments,e.collection,e.id);if(r){if(void 0===r.document)throw Error("It doesn't make sense to be changing something we don't think exists: "+e.id);LocalCollection._applyChanges(r.document,e.fields)}else n._pushUpdate(t,e.collection,e)},_process_removed:function(e,t){var n=this,r=Meteor._get(n._serverDocuments,e.collection,e.id);if(r){if(void 0===r.document)throw Error("It doesn't make sense to be deleting something we don't know exists: "+e.id);r.document=void 0}else n._pushUpdate(t,e.collection,{msg:"removed",collection:e.collection,id:e.id})},_process_updated:function(e,t){var n=this;_.each(e.methods,function(e){_.each(n._documentsWrittenByStub[e],function(r){var o=Meteor._get(n._serverDocuments,r.collection,r.id);if(!o)throw Error("Lost serverDoc for "+JSON.stringify(r));if(!o.writtenByStubs[e])throw Error("Doc "+JSON.stringify(r)+" not written by  method "+e);delete o.writtenByStubs[e],_.isEmpty(o.writtenByStubs)&&(n._pushUpdate(t,r.collection,{msg:"replace",id:r.id,replace:o.document}),_.each(o.flushCallbacks,function(e){e()}),delete n._serverDocuments[r.collection][r.id])}),delete n._documentsWrittenByStub[e];var r=n._methodInvokers[e];if(!r)throw Error("No callback invoker for method "+e);n._runWhenAllServerDocsAreFlushed(_.bind(r.dataVisible,r))})},_process_ready:function(e){var t=this;_.each(e.subs,function(e){t._runWhenAllServerDocsAreFlushed(function(){var n=t._subscriptions[e];n&&(n.ready||(n.readyCallback&&n.readyCallback(),n.ready=!0,n.readyDeps&&n.readyDeps.changed()))})})},_runWhenAllServerDocsAreFlushed:function(e){var t=this,n=function(){t._afterUpdateCallbacks.push(e)},r=0,o=function(){--r,0===r&&n()};_.each(t._serverDocuments,function(e){_.each(e,function(e){var n=_.any(e.writtenByStubs,function(e,n){var r=t._methodInvokers[n];return r&&r.sentMessage});n&&(++r,e.flushCallbacks.push(o))})}),0===r&&n()},_livedata_nosub:function(e){var t=this;if(_.has(t._subscriptions,e.id)){var n=t._subscriptions[e.id].errorCallback;delete t._subscriptions[e.id],n&&e.error&&n(new Meteor.Error(e.error.error,e.error.reason,e.error.details))}},_livedata_result:function(e){var t=this;if(_.isEmpty(t._outstandingMethodBlocks))return Meteor._debug("Received method result but no methods outstanding"),void 0;for(var n,r=t._outstandingMethodBlocks[0].methods,o=0;r.length>o&&(n=r[o],n.methodId!==e.id);o++);return n?(r.splice(o,1),_.has(e,"error")?n.receiveResult(new Meteor.Error(e.error.error,e.error.reason,e.error.details)):n.receiveResult(void 0,e.result),void 0):(Meteor._debug("Can't match method response to original method call",e),void 0)},_outstandingMethodFinished:function(){var e=this;if(!e._anyMethodsAreOutstanding()){if(!_.isEmpty(e._outstandingMethodBlocks)){var t=e._outstandingMethodBlocks.shift();if(!_.isEmpty(t.methods))throw Error("No methods outstanding but nonempty block: "+JSON.stringify(t));_.isEmpty(e._outstandingMethodBlocks)||e._sendOutstandingMethods()}e._maybeMigrate()}},_sendOutstandingMethods:function(){var e=this;_.isEmpty(e._outstandingMethodBlocks)||_.each(e._outstandingMethodBlocks[0].methods,function(e){e.sendMessage()})},_livedata_error:function(e){Meteor._debug("Received error from server: ",e.reason),e.offendingMessage&&Meteor._debug("For: ",e.offendingMessage)},_callOnReconnectAndSendAppropriateOutstandingMethods:function(){var e=this,t=e._outstandingMethodBlocks;if(e._outstandingMethodBlocks=[],e.onReconnect(),!_.isEmpty(t)){if(_.isEmpty(e._outstandingMethodBlocks))return e._outstandingMethodBlocks=t,e._sendOutstandingMethods(),void 0;_.last(e._outstandingMethodBlocks).wait||t[0].wait||(_.each(t[0].methods,function(t){_.last(e._outstandingMethodBlocks).methods.push(t),1===e._outstandingMethodBlocks.length&&t.sendMessage()}),t.shift()),_.each(t,function(t){e._outstandingMethodBlocks.push(t)})}},_readyToMigrate:function(){var e=this;return _.isEmpty(e._methodInvokers)},_maybeMigrate:function(){var e=this;e._retryMigrate&&e._readyToMigrate()&&(e._retryMigrate(),e._retryMigrate=null)}}),_.extend(Meteor,{connect:function(e,t){var n=new Meteor._LivedataConnection(e,{reloadOnUpdate:t});return Meteor._LivedataConnection._allConnections.push(n),n}}),Meteor._LivedataConnection._allConnections=[],Meteor._LivedataConnection._allSubscriptionsReady=function(){return _.all(Meteor._LivedataConnection._allConnections,function(e){return _.all(e._subscriptions,function(e){return e.ready})})}}.call(this),function(){if(_.extend(Meteor,{default_connection:null,refresh:function(){}}),Meteor.isClient){var e="/";"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL&&(e=__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL),Meteor.default_connection=Meteor.connect(e,!0),_.each(["subscribe","methods","call","apply","status","reconnect"],function(e){Meteor[e]=_.bind(Meteor.default_connection[e],Meteor.default_connection)})}}.call(this),function(){Meteor._LocalCollectionDriver=function(){var e=this;e.collections={}},_.extend(Meteor._LocalCollectionDriver.prototype,{open:function(e){var t=this;return e?(e in t.collections||(t.collections[e]=new LocalCollection),t.collections[e]):new LocalCollection}}),Meteor._LocalCollectionDriver=new Meteor._LocalCollectionDriver}.call(this),function(){Meteor.Collection=function(e,t){var n=this;switch(t&&t.methods&&(t={manager:t}),t=_.extend({manager:void 0,idGeneration:"STRING",transform:null,_driver:void 0,_preventAutopublish:!1},t),t.idGeneration){case"MONGO":n._makeNewID=function(){return new Meteor.Collection.ObjectID};break;case"STRING":default:n._makeNewID=function(){return Random.id()}}if(n._transform=t.transform?Deps._makeNonreactive(t.transform):null,e||null===e||Meteor._debug("Warning: creating anonymous collection. It will not be saved or synchronized over the network. (Pass null for the collection name to turn off this warning.)"),n._manager=e&&(t.manager||(Meteor.isClient?Meteor.default_connection:Meteor.default_server)),t._driver||(t._driver=e&&n._manager===Meteor.default_server&&Meteor._RemoteCollectionDriver?Meteor._RemoteCollectionDriver:Meteor._LocalCollectionDriver),n._collection=t._driver.open(e),n._name=e,e&&n._manager.registerStore){var r=n._manager.registerStore(e,{beginUpdate:function(e,t){(e>1||t)&&n._collection.pauseObservers(),t&&n._collection.remove({})},update:function(e){var t=Meteor.idParse(e.id),r=n._collection.findOne(t);if("replace"===e.msg){var o=e.replace;return o?r?n._collection.update(t,o):n._collection.insert(o):r&&n._collection.remove(t),void 0}if("added"===e.msg){if(r)throw Error("Expected not to find a document already present for an add");n._collection.insert(_.extend({_id:t},e.fields))}else if("removed"===e.msg){if(!r)throw Error("Expected to find a document already present for removed");n._collection.remove(t)}else{if("changed"!==e.msg)throw Error("I don't know how to deal with this message");if(!r)throw Error("Expected to find a document to change");if(!_.isEmpty(e.fields)){var i={};_.each(e.fields,function(e,t){void 0===e?(i.$unset||(i.$unset={}),i.$unset[t]=1):(i.$set||(i.$set={}),i.$set[t]=e)}),n._collection.update(t,i)}}},endUpdate:function(){n._collection.resumeObservers()},saveOriginals:function(){n._collection.saveOriginals()},retrieveOriginals:function(){return n._collection.retrieveOriginals()}});if(!r)throw Error("There is already a collection named '"+e+"'")}n._defineMutationMethods(),!t._preventAutopublish&&n._manager&&n._manager.onAutopublish&&n._manager.onAutopublish(function(){var e=function(){return n.find()};n._manager.publish(null,e,{is_auto:!0})})},_.extend(Meteor.Collection.prototype,{_getFindSelector:function(e){return 0==e.length?{}:e[0]},_getFindOptions:function(e){var t=this;return 2>e.length?{transform:t._transform}:_.extend({transform:t._transform},e[1])},find:function(){var e=this,t=_.toArray(arguments);return e._collection.find(e._getFindSelector(t),e._getFindOptions(t))},findOne:function(){var e=this,t=_.toArray(arguments);return e._collection.findOne(e._getFindSelector(t),e._getFindOptions(t))}}),Meteor.Collection._rewriteSelector=function(e){if(LocalCollection._selectorIsId(e)&&(e={_id:e}),!e||"_id"in e&&!e._id)return{_id:Random.id()};var t={};return _.each(e,function(e,n){if(e instanceof RegExp){t[n]={$regex:e.source};var r="";e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),r&&(t[n].$options=r)}else t[n]=e}),t};var e=function(e,t){if(!LocalCollection._selectorIsIdPerhapsAsObject(e))throw new Meteor.Error(403,"Not permitted. Untrusted code may only "+t+" documents by ID.")};_.each(["insert","update","remove"],function(t){Meteor.Collection.prototype[t]=function(){var n,r,o=this,i=_.toArray(arguments);if(i.length&&i[i.length-1]instanceof Function&&(n=i.pop()),Meteor.isClient&&!n&&(n=function(e){e&&Meteor._debug(t+" failed: "+(e.reason||e.stack))}),"insert"===t){if(!i.length)throw Error("insert requires an argument");if(i[0]=_.extend({},i[0]),"_id"in i[0]){if(r=i[0]._id,!("string"==typeof r||r instanceof Meteor.Collection.ObjectID))throw Error("Meteor requires document _id fields to be strings or ObjectIDs")}else r=i[0]._id=o._makeNewID()}else i[0]=Meteor.Collection._rewriteSelector(i[0]);if(o._manager&&o._manager!==Meteor.default_server){var a=Meteor._CurrentInvocation.get(),s=a&&a.isSimulation;s||"insert"===t||e(i[0],t),n?o._manager.apply(o._prefix+t,i,function(e){n(e,!e&&r)}):o._manager.apply(o._prefix+t,i)}else{try{o._collection[t].apply(o._collection,i)}catch(l){if(n)return n(l),null;throw l}n&&n(null,r)}return r}}),Meteor.Collection.prototype._ensureIndex=function(e,t){var n=this;if(!n._collection._ensureIndex)throw Error("Can only call _ensureIndex on server collections");n._collection._ensureIndex(e,t)},Meteor.Collection.prototype._dropIndex=function(e){var t=this;if(!t._collection._dropIndex)throw Error("Can only call _dropIndex on server collections");t._collection._dropIndex(e)},Meteor.Collection.ObjectID=LocalCollection._ObjectID,function(){var e=function(e,t){var n=["insert","update","remove","fetch","transform"];_.each(_.keys(t),function(t){if(!_.contains(n,t))throw Error(e+": Invalid key: "+t)});var r=this;if(r._restricted=!0,_.each(["insert","update","remove"],function(n){if(t[n]){if(!(t[n]instanceof Function))throw Error(e+": Value for `"+n+"` must be a function");r._transform&&(t[n].transform=r._transform),t.transform&&(t[n].transform=Deps._makeNonreactive(t.transform)),r._validators[n][e].push(t[n])}}),t.update||t.remove||t.fetch){if(t.fetch&&!(t.fetch instanceof Array))throw Error(e+": Value for `fetch` must be an array");r._updateFetch(t.fetch)}};Meteor.Collection.prototype.allow=function(t){e.call(this,"allow",t)},Meteor.Collection.prototype.deny=function(t){e.call(this,"deny",t)}}(),Meteor.Collection.prototype._defineMutationMethods=function(){var t=this;if(t._restricted=!1,t._insecure=void 0,t._validators={insert:{allow:[],deny:[]},update:{allow:[],deny:[]},remove:{allow:[],deny:[]},fetch:[],fetchAllFields:!1},t._name&&(t._prefix="/"+t._name+"/",t._manager)){var n={};_.each(["insert","update","remove"],function(r){n[t._prefix+r]=function(){try{if(this.isSimulation)return t._collection[r].apply(t._collection,_.toArray(arguments)),void 0;if("insert"!==r&&e(arguments[0],r),t._restricted){if(0===t._validators[r].allow.length)throw new Meteor.Error(403,"Access denied. No allow validators set on restricted collection for method '"+r+"'.");var n="_validated"+r.charAt(0).toUpperCase()+r.slice(1),o=[this.userId].concat(_.toArray(arguments));t[n].apply(t,o)}else{if(!t._isInsecure())throw new Meteor.Error(403,"Access denied");t._collection[r].apply(t._collection,_.toArray(arguments))}}catch(i){throw"MongoError"===i.name||"MinimongoError"===i.name?new Meteor.Error(409,""+i):i}}}),t._manager.methods(n)}},Meteor.Collection.prototype._updateFetch=function(e){var t=this;t._validators.fetchAllFields||(e?t._validators.fetch=_.union(t._validators.fetch,e):(t._validators.fetchAllFields=!0,t._validators.fetch=null))},Meteor.Collection.prototype._isInsecure=function(){var e=this;return void 0===e._insecure?Meteor.Collection.insecure:e._insecure};var t=function(e,t){var n=t;return e.transform&&(n=e.transform(EJSON.clone(t))),n};Meteor.Collection.prototype._validatedInsert=function(e,n){var r=this;if(_.any(r._validators.insert.deny,function(r){return r(e,t(r,n))}))throw new Meteor.Error(403,"Access denied");if(_.all(r._validators.insert.allow,function(r){return!r(e,t(r,n))}))throw new Meteor.Error(403,"Access denied");r._collection.insert.call(r._collection,n)};var n=function(e,t){return e.transform?e.transform(t):t};Meteor.Collection.prototype._validatedUpdate=function(e,t,o,i){var a=this;if(!LocalCollection._selectorIsIdPerhapsAsObject(t))throw Error("validated update should be of a single ID");var s=[];_.each(o,function(e,t){if("$"!==t.charAt(0))throw new Meteor.Error(403,"Access denied. In a restricted collection you can only update documents, not replace them. Use a Mongo update operator, such as '$set'.");if(!_.has(r,t))throw new Meteor.Error(403,"Access denied. Operator "+t+" not allowed in a restricted collection.");_.each(_.keys(e),function(e){-1!==e.indexOf(".")&&(e=e.substring(0,e.indexOf("."))),_.contains(s,e)||s.push(e)})});var l={transform:null};a._validators.fetchAllFields||(l.fields={},_.each(a._validators.fetch,function(e){l.fields[e]=1}));var u=a._collection.findOne(t,l);if(u){var c;if(_.any(a._validators.update.deny,function(t){return c||(c=n(t,u)),t(e,c,s,o)}))throw new Meteor.Error(403,"Access denied");if(_.all(a._validators.update.allow,function(t){return c||(c=n(t,u)),!t(e,c,s,o)}))throw new Meteor.Error(403,"Access denied");a._collection.update.call(a._collection,t,o,i)}};var r={$inc:1,$set:1,$unset:1,$addToSet:1,$pop:1,$pullAll:1,$pull:1,$pushAll:1,$push:1,$bit:1};Meteor.Collection.prototype._validatedRemove=function(e,t){var r=this,o={transform:null};r._validators.fetchAllFields||(o.fields={},_.each(r._validators.fetch,function(e){o.fields[e]=1}));var i=r._collection.findOne(t,o);if(i){if(_.any(r._validators.remove.deny,function(t){return t(e,n(t,i))}))throw new Meteor.Error(403,"Access denied");if(_.all(r._validators.remove.allow,function(t){return!t(e,n(t,i))}))throw new Meteor.Error(403,"Access denied");r._collection.remove.call(r._collection,t)}}}.call(this),function(){(function(e,t){function n(e){var t=ht[e]={};return Q.each(e.split(tt),function(e,n){t[n]=!0}),t}function r(e,n,r){if(r===t&&1===e.nodeType){var o="data-"+n.replace(mt,"-$1").toLowerCase();
if(r=e.getAttribute(o),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:gt.test(r)?Q.parseJSON(r):r}catch(i){}Q.data(e,n,r)}else r=t}return r}function o(e){var t;for(t in e)if(("data"!==t||!Q.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function i(){return!1}function a(){return!0}function s(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function l(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function u(e,t,n){if(t=t||0,Q.isFunction(t))return Q.grep(e,function(e,r){var o=!!t.call(e,r,e);return o===n});if(t.nodeType)return Q.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=Q.grep(e,function(e){return 1===e.nodeType});if(Pt.test(t))return Q.filter(t,r,!n);t=Q.filter(t,r)}return Q.grep(e,function(e){return Q.inArray(e,t)>=0===n})}function c(e){var t=jt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function d(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function f(e,t){if(1===t.nodeType&&Q.hasData(e)){var n,r,o,i=Q._data(e),a=Q._data(t,i),s=i.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,o=s[n].length;o>r;r++)Q.event.add(t,n,s[n][r])}a.data&&(a.data=Q.extend({},a.data))}}function p(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),Q.support.html5Clone&&e.innerHTML&&!Q.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Xt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(Q.expando))}function h(e){return e.getElementsByTagName!==t?e.getElementsByTagName("*"):e.querySelectorAll!==t?e.querySelectorAll("*"):[]}function g(e){Xt.test(e.type)&&(e.defaultChecked=e.checked)}function m(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,o=_n.length;o--;)if(t=_n[o]+n,t in e)return t;return r}function v(e,t){return e=t||e,"none"===Q.css(e,"display")||!Q.contains(e.ownerDocument,e)}function _(e,t){for(var n,r,o=[],i=0,a=e.length;a>i;i++)n=e[i],n.style&&(o[i]=Q._data(n,"olddisplay"),t?(o[i]||"none"!==n.style.display||(n.style.display=""),""===n.style.display&&v(n)&&(o[i]=Q._data(n,"olddisplay",S(n.nodeName)))):(r=nn(n,"display"),o[i]||"none"===r||Q._data(n,"olddisplay",r)));for(i=0;a>i;i++)n=e[i],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[i]||"":"none"));return e}function y(e,t,n){var r=dn.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function b(e,t,n,r){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,i=0;4>o;o+=2)"margin"===n&&(i+=Q.css(e,n+vn[o],!0)),r?("content"===n&&(i-=parseFloat(nn(e,"padding"+vn[o]))||0),"margin"!==n&&(i-=parseFloat(nn(e,"border"+vn[o]+"Width"))||0)):(i+=parseFloat(nn(e,"padding"+vn[o]))||0,"padding"!==n&&(i+=parseFloat(nn(e,"border"+vn[o]+"Width"))||0));return i}function w(e,t,n){var r="width"===t?e.offsetWidth:e.offsetHeight,o=!0,i=Q.support.boxSizing&&"border-box"===Q.css(e,"boxSizing");if(0>=r||null==r){if(r=nn(e,t),(0>r||null==r)&&(r=e.style[t]),fn.test(r))return r;o=i&&(Q.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+b(e,t,n||(i?"border":"content"),o)+"px"}function S(e){if(hn[e])return hn[e];var t=Q("<"+e+">").appendTo(U.body),n=t.css("display");return t.remove(),("none"===n||""===n)&&(rn=U.body.appendChild(rn||Q.extend(U.createElement("iframe"),{frameBorder:0,width:0,height:0})),on&&rn.createElement||(on=(rn.contentWindow||rn.contentDocument).document,on.write("<!doctype html><html><body>"),on.close()),t=on.body.appendChild(on.createElement(e)),n=nn(t,"display"),U.body.removeChild(rn)),hn[e]=n,n}function T(e,t,n,r){var o;if(Q.isArray(t))Q.each(t,function(t,o){n||wn.test(e)?r(e,o):T(e+"["+("object"==typeof o?t:"")+"]",o,n,r)});else if(n||"object"!==Q.type(t))r(e,t);else for(o in t)T(e+"["+o+"]",t[o],n,r)}function M(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o,i,a=t.toLowerCase().split(tt),s=0,l=a.length;if(Q.isFunction(n))for(;l>s;s++)r=a[s],i=/^\+/.test(r),i&&(r=r.substr(1)||"*"),o=e[r]=e[r]||[],o[i?"unshift":"push"](n)}}function k(e,n,r,o,i,a){i=i||n.dataTypes[0],a=a||{},a[i]=!0;for(var s,l=e[i],u=0,c=l?l.length:0,d=e===Bn;c>u&&(d||!s);u++)s=l[u](n,r,o),"string"==typeof s&&(!d||a[s]?s=t:(n.dataTypes.unshift(s),s=k(e,n,r,o,s,a)));return!d&&s||a["*"]||(s=k(e,n,r,o,"*",a)),s}function E(e,n){var r,o,i=Q.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((i[r]?e:o||(o={}))[r]=n[r]);o&&Q.extend(!0,e,o)}function x(e,n,r){var o,i,a,s,l=e.contents,u=e.dataTypes,c=e.responseFields;for(i in c)i in r&&(n[c[i]]=r[i]);for(;"*"===u[0];)u.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("content-type"));if(o)for(i in l)if(l[i]&&l[i].test(o)){u.unshift(i);break}if(u[0]in r)a=u[0];else{for(i in r){if(!u[0]||e.converters[i+" "+u[0]]){a=i;break}s||(s=i)}a=a||s}return a?(a!==u[0]&&u.unshift(a),r[a]):t}function C(e,t){var n,r,o,i,a=e.dataTypes.slice(),s=a[0],l={},u=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(n in e.converters)l[n.toLowerCase()]=e.converters[n];for(;o=a[++u];)if("*"!==o){if("*"!==s&&s!==o){if(n=l[s+" "+o]||l["* "+o],!n)for(r in l)if(i=r.split(" "),i[1]===o&&(n=l[s+" "+i[0]]||l["* "+i[0]])){n===!0?n=l[r]:l[r]!==!0&&(o=i[0],a.splice(u--,0,o));break}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(c){return{state:"parsererror",error:n?c:"No conversion from "+s+" to "+o}}}s=o}return{state:"success",data:t}}function A(){try{return new e.XMLHttpRequest}catch(t){}}function N(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function O(){return setTimeout(function(){Gn=t},0),Gn=Q.now()}function D(e,t){Q.each(t,function(t,n){for(var r=(er[t]||[]).concat(er["*"]),o=0,i=r.length;i>o;o++)if(r[o].call(e,t,n))return})}function I(e,t,n){var r,o=0,i=Zn.length,a=Q.Deferred().always(function(){delete s.elem}),s=function(){for(var t=Gn||O(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,i=l.tweens.length;i>o;o++)l.tweens[o].run(r);return a.notifyWith(e,[l,r,n]),1>r&&i?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:Q.extend({},t),opts:Q.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Gn||O(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Q.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){for(var n=0,r=t?l.tweens.length:0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),u=l.props;for(L(u,l.opts.specialEasing);i>o;o++)if(r=Zn[o].call(l,e,u,l.opts))return r;return D(l,u),Q.isFunction(l.opts.start)&&l.opts.start.call(e,l),Q.fx.timer(Q.extend(s,{anim:l,queue:l.opts.queue,elem:e})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function L(e,t){var n,r,o,i,a;for(n in e)if(r=Q.camelCase(n),o=t[r],i=e[n],Q.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),a=Q.cssHooks[r],a&&"expand"in a){i=a.expand(i),delete e[r];for(n in i)n in e||(e[n]=i[n],t[n]=o)}else t[r]=o}function R(e,t,n){var r,o,i,a,s,l,u,c,d=this,f=e.style,p={},h=[],g=e.nodeType&&v(e);n.queue||(u=Q._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,c=u.empty.fire,u.empty.fire=function(){u.unqueued||c()}),u.unqueued++,d.always(function(){d.always(function(){u.unqueued--,Q.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===Q.css(e,"display")&&"none"===Q.css(e,"float")&&(Q.support.inlineBlockNeedsLayout&&"inline"!==S(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",Q.support.shrinkWrapBlocks||d.done(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Yn.exec(i)){if(delete t[r],i===(g?"hide":"show"))continue;h.push(r)}if(a=h.length)for(s=Q._data(e,"fxshow")||Q._data(e,"fxshow",{}),g?Q(e).show():d.done(function(){Q(e).hide()}),d.done(function(){var t;Q.removeData(e,"fxshow",!0);for(t in p)Q.style(e,t,p[t])}),r=0;a>r;r++)o=h[r],l=d.createTween(o,g?s[o]:0),p[o]=s[o]||Q.style(e,o),o in s||(s[o]=l.start,g&&(l.end=l.start,l.start="width"===o||"height"===o?1:0))}function P(e,t,n,r,o){return new P.prototype.init(e,t,n,r,o)}function B(e,t){var n,r={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)n=vn[o],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function F(e){return Q.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var j,H,U=e.document,q=e.location,$=e.navigator,V=e.jQuery,z=e.$,W=Array.prototype.push,J=Array.prototype.slice,G=Array.prototype.indexOf,X=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,K=String.prototype.trim,Q=function(e,t){return new Q.fn.init(e,t,j)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,nt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ot=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,it=/^[\],:{}\s]*$/,at=/(?:^|:|,)(?:\s*\[)+/g,st=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,lt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ut=/^-ms-/,ct=/-([\da-z])/gi,dt=function(e,t){return(t+"").toUpperCase()},ft=function(){U.addEventListener?(U.removeEventListener("DOMContentLoaded",ft,!1),Q.ready()):"complete"===U.readyState&&(U.detachEvent("onreadystatechange",ft),Q.ready())},pt={};Q.fn=Q.prototype={constructor:Q,init:function(e,n,r){var o,i,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:rt.exec(e),!o||!o[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(o[1])return n=n instanceof Q?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:U,e=Q.parseHTML(o[1],a,!0),ot.test(o[1])&&Q.isPlainObject(n)&&this.attr.call(e,n,!0),Q.merge(this,e);if(i=U.getElementById(o[2]),i&&i.parentNode){if(i.id!==o[2])return r.find(e);this.length=1,this[0]=i}return this.context=U,this.selector=e,this}return Q.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Q.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return J.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=Q.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,"find"===t?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return Q.each(this,e,t)},ready:function(e){return Q.ready.promise().done(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(J.apply(this,arguments),"slice",J.call(arguments).join(","))},map:function(e){return this.pushStack(Q.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:[].sort,splice:[].splice},Q.fn.init.prototype=Q.fn,Q.extend=Q.fn.extend=function(){var e,n,r,o,i,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||Q.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(e=arguments[l]))for(n in e)r=s[n],o=e[n],s!==o&&(c&&o&&(Q.isPlainObject(o)||(i=Q.isArray(o)))?(i?(i=!1,a=r&&Q.isArray(r)?r:[]):a=r&&Q.isPlainObject(r)?r:{},s[n]=Q.extend(c,a,o)):o!==t&&(s[n]=o));return s},Q.extend({noConflict:function(t){return e.$===Q&&(e.$=z),t&&e.jQuery===Q&&(e.jQuery=V),Q},isReady:!1,readyWait:1,holdReady:function(e){e?Q.readyWait++:Q.ready(!0)},ready:function(e){if(e===!0?!--Q.readyWait:!Q.isReady){if(!U.body)return setTimeout(Q.ready,1);Q.isReady=!0,e!==!0&&--Q.readyWait>0||(H.resolveWith(U,[Q]),Q.fn.trigger&&Q(U).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===Q.type(e)},isArray:Array.isArray||function(e){return"array"===Q.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":pt[X.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==Q.type(e)||e.nodeType||Q.isWindow(e))return!1;try{if(e.constructor&&!Y.call(e,"constructor")&&!Y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||Y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){var r;return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||U,(r=ot.exec(e))?[t.createElement(r[1])]:(r=Q.buildFragment([e],t,n?null:[]),Q.merge([],(r.cacheable?Q.clone(r.fragment):r.fragment).childNodes))):null},parseJSON:function(n){return n&&"string"==typeof n?(n=Q.trim(n),e.JSON&&e.JSON.parse?e.JSON.parse(n):it.test(n.replace(st,"@").replace(lt,"]").replace(at,""))?Function("return "+n)():(Q.error("Invalid JSON: "+n),t)):null},parseXML:function(n){var r,o;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(o=new DOMParser,r=o.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(i){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||Q.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ut,"ms-").replace(ct,dt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var o,i=0,a=e.length,s=a===t||Q.isFunction(e);if(r)if(s){for(o in e)if(n.apply(e[o],r)===!1)break}else for(;a>i&&n.apply(e[i++],r)!==!1;);else if(s){for(o in e)if(n.call(e[o],o,e[o])===!1)break}else for(;a>i&&n.call(e[i],i,e[i++])!==!1;);return e},trim:K&&!K.call("ï»¿Â ")?function(e){return null==e?"":K.call(e)}:function(e){return null==e?"":(e+"").replace(nt,"")},makeArray:function(e,t){var n,r=t||[];return null!=e&&(n=Q.type(e),null==e.length||"string"===n||"function"===n||"regexp"===n||Q.isWindow(e)?W.call(r,e):Q.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(G)return G.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,o=e.length,i=0;if("number"==typeof r)for(;r>i;i++)e[o++]=n[i];else for(;n[i]!==t;)e[o++]=n[i++];return e.length=o,e},grep:function(e,t,n){var r,o=[],i=0,a=e.length;for(n=!!n;a>i;i++)r=!!t(e[i],i),n!==r&&o.push(e[i]);return o},map:function(e,n,r){var o,i,a=[],s=0,l=e.length,u=e instanceof Q||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||Q.isArray(e));if(u)for(;l>s;s++)o=n(e[s],s,r),null!=o&&(a[a.length]=o);else for(i in e)o=n(e[i],i,r),null!=o&&(a[a.length]=o);return a.concat.apply([],a)},guid:1,proxy:function(e,n){var r,o,i;return"string"==typeof n&&(r=e[n],n=e,e=r),Q.isFunction(e)?(o=J.call(arguments,2),i=function(){return e.apply(n,o.concat(J.call(arguments)))},i.guid=e.guid=e.guid||Q.guid++,i):t},access:function(e,n,r,o,i,a,s){var l,u=null==r,c=0,d=e.length;if(r&&"object"==typeof r){for(c in r)Q.access(e,n,c,r[c],1,a,o);i=1}else if(o!==t){if(l=s===t&&Q.isFunction(o),u&&(l?(l=n,n=function(e,t,n){return l.call(Q(e),n)}):(n.call(e,o),n=null)),n)for(;d>c;c++)n(e[c],r,l?o.call(e[c],c,n(e[c],r)):o,s);i=1}return i?e:u?n.call(e):d?n(e[0],r):a},now:function(){return(new Date).getTime()}}),Q.ready.promise=function(t){if(!H)if(H=Q.Deferred(),"complete"===U.readyState)setTimeout(Q.ready,1);else if(U.addEventListener)U.addEventListener("DOMContentLoaded",ft,!1),e.addEventListener("load",Q.ready,!1);else{U.attachEvent("onreadystatechange",ft),e.attachEvent("onload",Q.ready);var n=!1;try{n=null==e.frameElement&&U.documentElement}catch(r){}n&&n.doScroll&&function o(){if(!Q.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}Q.ready()}}()}return H.promise(t)},Q.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){pt["[object "+t+"]"]=t.toLowerCase()}),j=Q(U);var ht={};Q.Callbacks=function(e){e="string"==typeof e?ht[e]||n(e):Q.extend({},e);var r,o,i,a,s,l,u=[],c=!e.once&&[],d=function(t){for(r=e.memory&&t,o=!0,l=a||0,a=0,s=u.length,i=!0;u&&s>l;l++)if(u[l].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}i=!1,u&&(c?c.length&&d(c.shift()):r?u=[]:f.disable())},f={add:function(){if(u){var t=u.length;(function n(t){Q.each(t,function(t,r){var o=Q.type(r);"function"!==o||e.unique&&f.has(r)?r&&r.length&&"string"!==o&&n(r):u.push(r)})})(arguments),i?s=u.length:r&&(a=t,d(r))}return this},remove:function(){return u&&Q.each(arguments,function(e,t){for(var n;(n=Q.inArray(t,u,n))>-1;)u.splice(n,1),i&&(s>=n&&s--,l>=n&&l--)}),this},has:function(e){return Q.inArray(e,u)>-1},empty:function(){return u=[],this},disable:function(){return u=c=r=t,this},disabled:function(){return!u},lock:function(){return c=t,r||f.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||o&&!c||(i?c.push(t):d(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},Q.extend({Deferred:function(e){var t=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Q.Deferred(function(n){Q.each(t,function(t,r){var i=r[0],a=e[t];o[r[1]](Q.isFunction(a)?function(){var e=a.apply(this,arguments);e&&Q.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[i+"With"](this===o?n:this,[e])}:n[i])}),e=null}).promise()},promise:function(e){return null!=e?Q.extend(e,r):r}},o={};return r.pipe=r.then,Q.each(t,function(e,i){var a=i[2],s=i[3];r[i[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[i[0]]=a.fire,o[i[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,r,o=0,i=J.call(arguments),a=i.length,s=1!==a||e&&Q.isFunction(e.promise)?a:0,l=1===s?e:Q.Deferred(),u=function(e,n,r){return function(o){n[e]=this,r[e]=arguments.length>1?J.call(arguments):o,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(t=Array(a),n=Array(a),r=Array(a);a>o;o++)i[o]&&Q.isFunction(i[o].promise)?i[o].promise().done(u(o,r,i)).fail(l.reject).progress(u(o,n,t)):--s;return s||l.resolveWith(r,i),l.promise()}}),Q.support=function(){var n,r,o,i,a,s,l,u,c,d,f,p=U.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=p.getElementsByTagName("*"),o=p.getElementsByTagName("a")[0],o.style.cssText="top:1px;float:left;opacity:.5",!r||!r.length)return{};i=U.createElement("select"),a=i.appendChild(U.createElement("option")),s=p.getElementsByTagName("input")[0],n={leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(o.getAttribute("style")),hrefNormalized:"/a"===o.getAttribute("href"),opacity:/^0.5/.test(o.style.opacity),cssFloat:!!o.style.cssFloat,checkOn:"on"===s.value,optSelected:a.selected,getSetAttribute:"t"!==p.className,enctype:!!U.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==U.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===U.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},s.checked=!0,n.noCloneChecked=s.cloneNode(!0).checked,i.disabled=!0,n.optDisabled=!a.disabled;try{delete p.test}catch(h){n.deleteExpando=!1}if(!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",f=function(){n.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",f)),s=U.createElement("input"),s.value="t",s.setAttribute("type","radio"),n.radioValue="t"===s.value,s.setAttribute("checked","checked"),s.setAttribute("name","t"),p.appendChild(s),l=U.createDocumentFragment(),l.appendChild(p.lastChild),n.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,n.appendChecked=s.checked,l.removeChild(s),l.appendChild(p),p.attachEvent)for(c in{submit:!0,change:!0,focusin:!0})u="on"+c,d=u in p,d||(p.setAttribute(u,"return;"),d="function"==typeof p[u]),n[c+"Bubbles"]=d;return Q(function(){var r,o,i,a,s="padding:0;margin:0;border:0;display:block;overflow:hidden;",l=U.getElementsByTagName("body")[0];l&&(r=U.createElement("div"),r.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",l.insertBefore(r,l.firstChild),o=U.createElement("div"),r.appendChild(o),o.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=o.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===i[0].offsetHeight,i[0].style.display="",i[1].style.display="none",n.reliableHiddenOffsets=d&&0===i[0].offsetHeight,o.innerHTML="",o.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",n.boxSizing=4===o.offsetWidth,n.doesNotIncludeMarginInBodyOffset=1!==l.offsetTop,e.getComputedStyle&&(n.pixelPosition="1%"!==(e.getComputedStyle(o,null)||{}).top,n.boxSizingReliable="4px"===(e.getComputedStyle(o,null)||{width:"4px"}).width,a=U.createElement("div"),a.style.cssText=o.style.cssText=s,a.style.marginRight=a.style.width="0",o.style.width="1px",o.appendChild(a),n.reliableMarginRight=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight)),o.style.zoom!==t&&(o.innerHTML="",o.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",n.inlineBlockNeedsLayout=3===o.offsetWidth,o.style.display="block",o.style.overflow="visible",o.innerHTML="<div></div>",o.firstChild.style.width="5px",n.shrinkWrapBlocks=3!==o.offsetWidth,r.style.zoom=1),l.removeChild(r),r=o=i=a=null)}),l.removeChild(p),r=o=i=a=s=l=p=null,n}();var gt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,mt=/([A-Z])/g;Q.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Q.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?Q.cache[e[Q.expando]]:e[Q.expando],!!e&&!o(e)},data:function(e,n,r,o){if(Q.acceptData(e)){var i,a,s=Q.expando,l="string"==typeof n,u=e.nodeType,c=u?Q.cache:e,d=u?e[s]:e[s]&&s;if(d&&c[d]&&(o||c[d].data)||!l||r!==t)return d||(u?e[s]=d=Q.deletedIds.pop()||Q.guid++:d=s),c[d]||(c[d]={},u||(c[d].toJSON=Q.noop)),("object"==typeof n||"function"==typeof n)&&(o?c[d]=Q.extend(c[d],n):c[d].data=Q.extend(c[d].data,n)),i=c[d],o||(i.data||(i.data={}),i=i.data),r!==t&&(i[Q.camelCase(n)]=r),l?(a=i[n],null==a&&(a=i[Q.camelCase(n)])):a=i,a}},removeData:function(e,t,n){if(Q.acceptData(e)){var r,i,a,s=e.nodeType,l=s?Q.cache:e,u=s?e[Q.expando]:Q.expando;if(l[u]){if(t&&(r=n?l[u]:l[u].data)){Q.isArray(t)||(t in r?t=[t]:(t=Q.camelCase(t),t=t in r?[t]:t.split(" ")));for(i=0,a=t.length;a>i;i++)delete r[t[i]];if(!(n?o:Q.isEmptyObject)(r))return}(n||(delete l[u].data,o(l[u])))&&(s?Q.cleanData([e],!0):Q.support.deleteExpando||l!=l.window?delete l[u]:l[u]=null)}}},_data:function(e,t,n){return Q.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&Q.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),Q.fn.extend({data:function(e,n){var o,i,a,s,l,u=this[0],c=0,d=null;if(e===t){if(this.length&&(d=Q.data(u),1===u.nodeType&&!Q._data(u,"parsedAttrs"))){for(a=u.attributes,l=a.length;l>c;c++)s=a[c].name,s.indexOf("data-")||(s=Q.camelCase(s.substring(5)),r(u,s,d[s]));Q._data(u,"parsedAttrs",!0)}return d}return"object"==typeof e?this.each(function(){Q.data(this,e)}):(o=e.split(".",2),o[1]=o[1]?"."+o[1]:"",i=o[1]+"!",Q.access(this,function(n){return n===t?(d=this.triggerHandler("getData"+i,[o[0]]),d===t&&u&&(d=Q.data(u,e),d=r(u,e,d)),d===t&&o[1]?this.data(o[0]):d):(o[1]=n,this.each(function(){var t=Q(this);t.triggerHandler("setData"+i,o),Q.data(this,e,n),t.triggerHandler("changeData"+i,o)}),t)},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){Q.removeData(this,e)})}}),Q.extend({queue:function(e,n,r){var o;return e?(n=(n||"fx")+"queue",o=Q._data(e,n),r&&(!o||Q.isArray(r)?o=Q._data(e,n,Q.makeArray(r)):o.push(r)),o||[]):t},dequeue:function(e,t){t=t||"fx";var n=Q.queue(e,t),r=n.length,o=n.shift(),i=Q._queueHooks(e,t),a=function(){Q.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,a,i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q._data(e,n)||Q._data(e,n,{empty:Q.Callbacks("once memory").add(function(){Q.removeData(e,t+"queue",!0),Q.removeData(e,n,!0)})})}}),Q.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?Q.queue(this[0],e):n===t?this:this.each(function(){var t=Q.queue(this,e,n);Q._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&Q.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Q.dequeue(this,e)})},delay:function(e,t){return e=Q.fx?Q.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,o=1,i=Q.Deferred(),a=this,s=this.length,l=function(){--o||i.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)r=Q._data(a[s],e+"queueHooks"),r&&r.empty&&(o++,r.empty.add(l));return l(),i.promise(n)}});var vt,_t,yt,bt=/[\t\r\n]/g,wt=/\r/g,St=/^(?:button|input)$/i,Tt=/^(?:button|input|object|select|textarea)$/i,Mt=/^a(?:rea|)$/i,kt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Et=Q.support.getSetAttribute;Q.fn.extend({attr:function(e,t){return Q.access(this,Q.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Q.removeAttr(this,e)})},prop:function(e,t){return Q.access(this,Q.prop,e,t,arguments.length>1)},removeProp:function(e){return e=Q.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,o,i,a,s;if(Q.isFunction(e))return this.each(function(t){Q(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(tt),n=0,r=this.length;r>n;n++)if(o=this[n],1===o.nodeType)if(o.className||1!==t.length){for(i=" "+o.className+" ",a=0,s=t.length;s>a;a++)0>i.indexOf(" "+t[a]+" ")&&(i+=t[a]+" ");o.className=Q.trim(i)}else o.className=e;return this},removeClass:function(e){var n,r,o,i,a,s,l;if(Q.isFunction(e))return this.each(function(t){Q(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(tt),s=0,l=this.length;l>s;s++)if(o=this[s],1===o.nodeType&&o.className){for(r=(" "+o.className+" ").replace(bt," "),i=0,a=n.length;a>i;i++)for(;r.indexOf(" "+n[i]+" ")>=0;)r=r.replace(" "+n[i]+" "," ");o.className=e?Q.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return Q.isFunction(e)?this.each(function(n){Q(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var o,i=0,a=Q(this),s=t,l=e.split(tt);o=l[i++];)s=r?s:!a.hasClass(o),a[s?"addClass":"removeClass"](o);else("undefined"===n||"boolean"===n)&&(this.className&&Q._data(this,"__className__",this.className),this.className=this.className||e===!1?"":Q._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(bt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,o,i=this[0];{if(arguments.length)return o=Q.isFunction(e),this.each(function(r){var i,a=Q(this);1===this.nodeType&&(i=o?e.call(this,r,a.val()):e,null==i?i="":"number"==typeof i?i+="":Q.isArray(i)&&(i=Q.map(i,function(e){return null==e?"":e+""})),n=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,i,"value")!==t||(this.value=i))});if(i)return n=Q.valHooks[i.type]||Q.valHooks[i.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(i,"value"))!==t?r:(r=i.value,"string"==typeof r?r.replace(wt,""):null==r?"":r)}}}),Q.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,o,i=e.selectedIndex,a=[],s=e.options,l="select-one"===e.type;if(0>i)return null;for(n=l?i:0,r=l?i+1:s.length;r>n;n++)if(o=s[n],!(!o.selected||(Q.support.optDisabled?o.disabled:null!==o.getAttribute("disabled"))||o.parentNode.disabled&&Q.nodeName(o.parentNode,"optgroup"))){if(t=Q(o).val(),l)return t;a.push(t)}return l&&!a.length&&s.length?Q(s[i]).val():a},set:function(e,t){var n=Q.makeArray(t);return Q(e).find("option").each(function(){this.selected=Q.inArray(Q(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,o){var i,a,s,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return o&&Q.isFunction(Q.fn[n])?Q(e)[n](r):e.getAttribute===t?Q.prop(e,n,r):(s=1!==l||!Q.isXMLDoc(e),s&&(n=n.toLowerCase(),a=Q.attrHooks[n]||(kt.test(n)?_t:vt)),r!==t?null===r?(Q.removeAttr(e,n),t):a&&"set"in a&&s&&(i=a.set(e,r,n))!==t?i:(e.setAttribute(n,r+""),r):a&&"get"in a&&s&&null!==(i=a.get(e,n))?i:(i=e.getAttribute(n),null===i?t:i))},removeAttr:function(e,t){var n,r,o,i,a=0;if(t&&1===e.nodeType)for(r=t.split(tt);r.length>a;a++)o=r[a],o&&(n=Q.propFix[o]||o,i=kt.test(o),i||Q.attr(e,o,""),e.removeAttribute(Et?o:n),i&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(St.test(e.nodeName)&&e.parentNode)Q.error("type property can't be changed");else if(!Q.support.radioValue&&"radio"===t&&Q.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return vt&&Q.nodeName(e,"button")?vt.get(e,t):t in e?e.value:null},set:function(e,n,r){return vt&&Q.nodeName(e,"button")?vt.set(e,n,r):(e.value=n,t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var o,i,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!Q.isXMLDoc(e),a&&(n=Q.propFix[n]||n,i=Q.propHooks[n]),r!==t?i&&"set"in i&&(o=i.set(e,r,n))!==t?o:e[n]=r:i&&"get"in i&&null!==(o=i.get(e,n))?o:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Tt.test(e.nodeName)||Mt.test(e.nodeName)&&e.href?0:t}}}}),_t={get:function(e,n){var r,o=Q.prop(e,n);return o===!0||"boolean"!=typeof o&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?Q.removeAttr(e,n):(r=Q.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},Et||(yt={name:!0,id:!0,coords:!0},vt=Q.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(yt[n]?""!==r.value:r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=U.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},Q.each(["width","height"],function(e,n){Q.attrHooks[n]=Q.extend(Q.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})}),Q.attrHooks.contenteditable={get:vt.get,set:function(e,t,n){""===t&&(t="false"),vt.set(e,t,n)}}),Q.support.hrefNormalized||Q.each(["href","src","width","height"],function(e,n){Q.attrHooks[n]=Q.extend(Q.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null===r?t:r
}})}),Q.support.style||(Q.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),Q.support.optSelected||(Q.propHooks.selected=Q.extend(Q.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),Q.support.enctype||(Q.propFix.enctype="encoding"),Q.support.checkOn||Q.each(["radio","checkbox"],function(){Q.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]=Q.extend(Q.valHooks[this],{set:function(e,n){return Q.isArray(n)?e.checked=Q.inArray(Q(e).val(),n)>=0:t}})});var xt=/^(?:textarea|input|select)$/i,Ct=/^([^\.]*|)(?:\.(.+)|)$/,At=/(?:^|\s)hover(\.\S+|)\b/,Nt=/^key/,Ot=/^(?:mouse|contextmenu)|click/,Dt=/^(?:focusinfocus|focusoutblur)$/,It=function(e){return Q.event.special.hover?e:e.replace(At,"mouseenter$1 mouseleave$1")};Q.event={add:function(e,n,r,o,i){var a,s,l,u,c,d,f,p,h,g,m;if(3!==e.nodeType&&8!==e.nodeType&&n&&r&&(a=Q._data(e))){for(r.handler&&(h=r,r=h.handler,i=h.selector),r.guid||(r.guid=Q.guid++),l=a.events,l||(a.events=l={}),s=a.handle,s||(a.handle=s=function(e){return Q===t||e&&Q.event.triggered===e.type?t:Q.event.dispatch.apply(s.elem,arguments)},s.elem=e),n=Q.trim(It(n)).split(" "),u=0;n.length>u;u++)c=Ct.exec(n[u])||[],d=c[1],f=(c[2]||"").split(".").sort(),m=Q.event.special[d]||{},d=(i?m.delegateType:m.bindType)||d,m=Q.event.special[d]||{},p=Q.extend({type:d,origType:c[1],data:o,handler:r,guid:r.guid,selector:i,needsContext:i&&Q.expr.match.needsContext.test(i),namespace:f.join(".")},h),g=l[d],g||(g=l[d]=[],g.delegateCount=0,m.setup&&m.setup.call(e,o,f,s)!==!1||(e.addEventListener?e.addEventListener(d,s,!1):e.attachEvent&&e.attachEvent("on"+d,s))),m.add&&(m.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),i?g.splice(g.delegateCount++,0,p):g.push(p),Q.event.global[d]=!0;e=null}},global:{},remove:function(e,t,n,r,o){var i,a,s,l,u,c,d,f,p,h,g,m=Q.hasData(e)&&Q._data(e);if(m&&(f=m.events)){for(t=Q.trim(It(t||"")).split(" "),i=0;t.length>i;i++)if(a=Ct.exec(t[i])||[],s=l=a[1],u=a[2],s){for(p=Q.event.special[s]||{},s=(r?p.delegateType:p.bindType)||s,h=f[s]||[],c=h.length,u=u?RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d=0;h.length>d;d++)g=h[d],!o&&l!==g.origType||n&&n.guid!==g.guid||u&&!u.test(g.namespace)||r&&r!==g.selector&&("**"!==r||!g.selector)||(h.splice(d--,1),g.selector&&h.delegateCount--,p.remove&&p.remove.call(e,g));0===h.length&&c!==h.length&&(p.teardown&&p.teardown.call(e,u,m.handle)!==!1||Q.removeEvent(e,s,m.handle),delete f[s])}else for(s in f)Q.event.remove(e,s+t[i],n,r,!0);Q.isEmptyObject(f)&&(delete m.handle,Q.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,o,i){if(!o||3!==o.nodeType&&8!==o.nodeType){var a,s,l,u,c,d,f,p,h,g,m=n.type||n,v=[];if(!Dt.test(m+Q.event.triggered)&&(m.indexOf("!")>=0&&(m=m.slice(0,-1),s=!0),m.indexOf(".")>=0&&(v=m.split("."),m=v.shift(),v.sort()),o&&!Q.event.customEvent[m]||Q.event.global[m]))if(n="object"==typeof n?n[Q.expando]?n:new Q.Event(m,n):new Q.Event(m),n.type=m,n.isTrigger=!0,n.exclusive=s,n.namespace=v.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d=0>m.indexOf(":")?"on"+m:"",o){if(n.result=t,n.target||(n.target=o),r=null!=r?Q.makeArray(r):[],r.unshift(n),f=Q.event.special[m]||{},!f.trigger||f.trigger.apply(o,r)!==!1){if(h=[[o,f.bindType||m]],!i&&!f.noBubble&&!Q.isWindow(o)){for(g=f.delegateType||m,u=Dt.test(g+m)?o:o.parentNode,c=o;u;u=u.parentNode)h.push([u,g]),c=u;c===(o.ownerDocument||U)&&h.push([c.defaultView||c.parentWindow||e,g])}for(l=0;h.length>l&&!n.isPropagationStopped();l++)u=h[l][0],n.type=h[l][1],p=(Q._data(u,"events")||{})[n.type]&&Q._data(u,"handle"),p&&p.apply(u,r),p=d&&u[d],p&&Q.acceptData(u)&&p.apply&&p.apply(u,r)===!1&&n.preventDefault();return n.type=m,i||n.isDefaultPrevented()||f._default&&f._default.apply(o.ownerDocument,r)!==!1||"click"===m&&Q.nodeName(o,"a")||!Q.acceptData(o)||d&&o[m]&&("focus"!==m&&"blur"!==m||0!==n.target.offsetWidth)&&!Q.isWindow(o)&&(c=o[d],c&&(o[d]=null),Q.event.triggered=m,o[m](),Q.event.triggered=t,c&&(o[d]=c)),n.result}}else{a=Q.cache;for(l in a)a[l].events&&a[l].events[m]&&Q.event.trigger(n,r,a[l].handle.elem,!0)}}},dispatch:function(n){n=Q.event.fix(n||e.event);var r,o,i,a,s,l,u,c,d,f=(Q._data(this,"events")||{})[n.type]||[],p=f.delegateCount,h=J.call(arguments),g=!n.exclusive&&!n.namespace,m=Q.event.special[n.type]||{},v=[];if(h[0]=n,n.delegateTarget=this,!m.preDispatch||m.preDispatch.call(this,n)!==!1){if(p&&(!n.button||"click"!==n.type))for(i=n.target;i!=this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==n.type){for(s={},u=[],r=0;p>r;r++)c=f[r],d=c.selector,s[d]===t&&(s[d]=c.needsContext?Q(d,this).index(i)>=0:Q.find(d,this,null,[i]).length),s[d]&&u.push(c);u.length&&v.push({elem:i,matches:u})}for(f.length>p&&v.push({elem:this,matches:f.slice(p)}),r=0;v.length>r&&!n.isPropagationStopped();r++)for(l=v[r],n.currentTarget=l.elem,o=0;l.matches.length>o&&!n.isImmediatePropagationStopped();o++)c=l.matches[o],(g||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))&&(n.data=c.data,n.handleObj=c,a=((Q.event.special[c.origType]||{}).handle||c.handler).apply(l.elem,h),a!==t&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())));return m.postDispatch&&m.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,o,i,a=n.button,s=n.fromElement;return null==e.pageX&&null!=n.clientX&&(r=e.target.ownerDocument||U,o=r.documentElement,i=r.body,e.pageX=n.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?n.toElement:s),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[Q.expando])return e;var t,n,r=e,o=Q.event.fixHooks[e.type]||{},i=o.props?this.props.concat(o.props):this.props;for(e=Q.Event(r),t=i.length;t;)n=i[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||U),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){Q.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var o=Q.extend(new Q.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Q.event.trigger(o,null,t):Q.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},Q.event.handle=Q.event.dispatch,Q.removeEvent=U.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,n,r){var o="on"+n;e.detachEvent&&(e[o]===t&&(e[o]=null),e.detachEvent(o,r))},Q.Event=function(e,n){return this instanceof Q.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?a:i):this.type=e,n&&Q.extend(this,n),this.timeStamp=e&&e.timeStamp||Q.now(),this[Q.expando]=!0,t):new Q.Event(e,n)},Q.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:i,isPropagationStopped:i,isImmediatePropagationStopped:i},Q.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){Q.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,i=e.handleObj;return i.selector,(!o||o!==r&&!Q.contains(r,o))&&(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),Q.support.submitBubbles||(Q.event.special.submit={setup:function(){return Q.nodeName(this,"form")?!1:(Q.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=Q.nodeName(n,"input")||Q.nodeName(n,"button")?n.form:t;r&&!Q._data(r,"_submit_attached")&&(Q.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),Q._data(r,"_submit_attached",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Q.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return Q.nodeName(this,"form")?!1:(Q.event.remove(this,"._submit"),t)}}),Q.support.changeBubbles||(Q.event.special.change={setup:function(){return xt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(Q.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),Q.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Q.event.simulate("change",this,e,!0)})),!1):(Q.event.add(this,"beforeactivate._change",function(e){var t=e.target;xt.test(t.nodeName)&&!Q._data(t,"_change_attached")&&(Q.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||Q.event.simulate("change",this.parentNode,e,!0)}),Q._data(t,"_change_attached",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return Q.event.remove(this,"._change"),!xt.test(this.nodeName)}}),Q.support.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){Q.event.simulate(t,e.target,Q.event.fix(e),!0)};Q.event.special[t]={setup:function(){0===n++&&U.addEventListener(e,r,!0)},teardown:function(){0===--n&&U.removeEventListener(e,r,!0)}}}),Q.fn.extend({on:function(e,n,r,o,a){var s,l;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(l in e)this.on(l,n,r,e[l],a);return this}if(null==r&&null==o?(o=n,r=n=t):null==o&&("string"==typeof n?(o=r,r=t):(o=r,r=n,n=t)),o===!1)o=i;else if(!o)return this;return 1===a&&(s=o,o=function(e){return Q().off(e),s.apply(this,arguments)},o.guid=s.guid||(s.guid=Q.guid++)),this.each(function(){Q.event.add(this,e,o,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var o,a;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,Q(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(a in e)this.off(a,n,e[a]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=i),this.each(function(){Q.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return Q(this.context).on(e,this.selector,t,n),this},die:function(e,t){return Q(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){Q.event.trigger(e,t,this)})},triggerHandler:function(e,n){return this[0]?Q.event.trigger(e,n,this[0],!0):t},toggle:function(e){var t=arguments,n=e.guid||Q.guid++,r=0,o=function(n){var o=(Q._data(this,"lastToggle"+e.guid)||0)%r;return Q._data(this,"lastToggle"+e.guid,o+1),n.preventDefault(),t[o].apply(this,arguments)||!1};for(o.guid=n;t.length>r;)t[r++].guid=n;return this.click(o)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Q.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Nt.test(t)&&(Q.event.fixHooks[t]=Q.event.keyHooks),Ot.test(t)&&(Q.event.fixHooks[t]=Q.event.mouseHooks)}),function(e,t){function n(e,t,n,r){n=n||[],t=t||O;var o,i,a,s,l=t.nodeType;if(!e||"string"!=typeof e)return n;if(1!==l&&9!==l)return[];if(a=w(t),!a&&!r&&(o=nt.exec(e)))if(s=o[1]){if(9===l){if(i=t.getElementById(s),!i||!i.parentNode)return n;if(i.id===s)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(s))&&S(t,i)&&i.id===s)return n.push(i),n}else{if(o[2])return P.apply(n,B.call(t.getElementsByTagName(e),0)),n;if((s=o[3])&&ft&&t.getElementsByClassName)return P.apply(n,B.call(t.getElementsByClassName(s),0)),n}return g(e.replace(K,"$1"),t,n,r,a)}function r(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function o(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function i(e){return j(function(t){return t=+t,j(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function a(e,t,n){if(e===t)return n;for(var r=e.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}function s(e,t){var r,o,i,a,s,l,u,c=q[A][e];if(c)return t?0:c.slice(0);for(s=e,l=[],u=y.preFilter;s;){(!r||(o=Z.exec(s)))&&(o&&(s=s.slice(o[0].length)),l.push(i=[])),r=!1,(o=et.exec(s))&&(i.push(r=new N(o.shift())),s=s.slice(r.length),r.type=o[0].replace(K," "));for(a in y.filter)!(o=st[a].exec(s))||u[a]&&!(o=u[a](o,O,!0))||(i.push(r=new N(o.shift())),s=s.slice(r.length),r.type=a,r.matches=o);if(!r)break}return t?s.length:s?n.error(e):q(e,l).slice(0)}function l(e,t,n){var r=t.dir,o=n&&"parentNode"===t.dir,i=L++;return t.first?function(t,n,i){for(;t=t[r];)if(o||1===t.nodeType)return e(t,n,i)}:function(t,n,a){if(a){for(;t=t[r];)if((o||1===t.nodeType)&&e(t,n,a))return t}else for(var s,l=I+" "+i+" ",u=l+v;t=t[r];)if(o||1===t.nodeType){if((s=t[A])===u)return t.sizset;if("string"==typeof s&&0===s.indexOf(l)){if(t.sizset)return t}else{if(t[A]=u,e(t,n,a))return t.sizset=!0,t;t.sizset=!1}}}}function u(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function c(e,t,n,r,o){for(var i,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(i=e[s])&&(!n||n(i,r,o))&&(a.push(i),u&&t.push(s));return a}function d(e,t,n,r,o,i){return r&&!r[A]&&(r=d(r)),o&&!o[A]&&(o=d(o,i)),j(function(i,a,s,l){if(!i||!o){var u,d,f,p=[],g=[],m=a.length,v=i||h(t||"*",s.nodeType?[s]:s,[],i),_=!e||!i&&t?v:c(v,p,e,s,l),y=n?o||(i?e:m||r)?[]:a:_;if(n&&n(_,y,s,l),r)for(f=c(y,g),r(f,[],s,l),u=f.length;u--;)(d=f[u])&&(y[g[u]]=!(_[g[u]]=d));if(i)for(u=e&&y.length;u--;)(d=y[u])&&(i[p[u]]=!(a[p[u]]=d));else y=c(y===a?y.splice(m,y.length):y),o?o(null,a,y,l):P.apply(a,y)}})}function f(e){for(var t,n,r,o=e.length,i=y.relative[e[0].type],a=i||y.relative[" "],s=i?1:0,c=l(function(e){return e===t},a,!0),p=l(function(e){return F.call(t,e)>-1},a,!0),h=[function(e,n,r){return!i&&(r||n!==E)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];o>s;s++)if(n=y.relative[e[s].type])h=[l(u(h),n)];else{if(n=y.filter[e[s].type].apply(null,e[s].matches),n[A]){for(r=++s;o>r&&!y.relative[e[r].type];r++);return d(s>1&&u(h),s>1&&e.slice(0,s-1).join("").replace(K,"$1"),n,r>s&&f(e.slice(s,r)),o>r&&f(e=e.slice(r)),o>r&&e.join(""))}h.push(n)}return u(h)}function p(e,t){var r=t.length>0,o=e.length>0,i=function(a,s,l,u,d){var f,p,h,g=[],m=0,_="0",b=a&&[],w=null!=d,S=E,T=a||o&&y.find.TAG("*",d&&s.parentNode||s),M=I+=null==S?1:Math.E;for(w&&(E=s!==O&&s,v=i.el);null!=(f=T[_]);_++){if(o&&f){for(p=0;h=e[p];p++)if(h(f,s,l)){u.push(f);break}w&&(I=M,v=++i.el)}r&&((f=!h&&f)&&m--,a&&b.push(f))}if(m+=_,r&&_!==m){for(p=0;h=t[p];p++)h(b,g,s,l);if(a){if(m>0)for(;_--;)b[_]||g[_]||(g[_]=R.call(u));g=c(g)}P.apply(u,g),w&&!a&&g.length>0&&m+t.length>1&&n.uniqueSort(u)}return w&&(I=M,E=S),b};return i.el=0,r?j(i):i}function h(e,t,r,o){for(var i=0,a=t.length;a>i;i++)n(e,t[i],r,o);return r}function g(e,t,n,r,o){var i,a,l,u,c,d=s(e);if(d.length,!r&&1===d.length){if(a=d[0]=d[0].slice(0),a.length>2&&"ID"===(l=a[0]).type&&9===t.nodeType&&!o&&y.relative[a[1].type]){if(t=y.find.ID(l.matches[0].replace(at,""),t,o)[0],!t)return n;e=e.slice(a.shift().length)}for(i=st.POS.test(e)?-1:a.length-1;i>=0&&(l=a[i],!y.relative[u=l.type]);i--)if((c=y.find[u])&&(r=c(l.matches[0].replace(at,""),rt.test(a[0].type)&&t.parentNode||t,o))){if(a.splice(i,1),e=r.length&&a.join(""),!e)return P.apply(n,B.call(r,0)),n;break}}return T(e,d)(r,t,o,n,rt.test(e)),n}function m(){}var v,_,y,b,w,S,T,M,k,E,x=!0,C="undefined",A=("sizcache"+Math.random()).replace(".",""),N=String,O=e.document,D=O.documentElement,I=0,L=0,R=[].pop,P=[].push,B=[].slice,F=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},j=function(e,t){return e[A]=null==t||t,e},H=function(){var e={},t=[];return j(function(n,r){return t.push(n)>y.cacheLength&&delete e[t.shift()],e[n]=r},e)},U=H(),q=H(),$=H(),V="[\\x20\\t\\r\\n\\f]",z="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",W=z.replace("w","w#"),J="([*^$|!~]?=)",G="\\["+V+"*("+z+")"+V+"*(?:"+J+V+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+W+")|)|)"+V+"*\\]",X=":("+z+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+G+")|[^:]|\\\\.)*|.*))\\)|)",Y=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+V+"*((?:-\\d)?\\d*)"+V+"*\\)|)(?=[^-]|$)",K=RegExp("^"+V+"+|((?:^|[^\\\\])(?:\\\\.)*)"+V+"+$","g"),Z=RegExp("^"+V+"*,"+V+"*"),et=RegExp("^"+V+"*([\\x20\\t\\r\\n\\f>+~])"+V+"*"),tt=RegExp(X),nt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rt=/[\x20\t\r\n\f]*[+~]/,ot=/h\d/i,it=/input|select|textarea|button/i,at=/\\(?!\\)/g,st={ID:RegExp("^#("+z+")"),CLASS:RegExp("^\\.("+z+")"),NAME:RegExp("^\\[name=['\"]?("+z+")['\"]?\\]"),TAG:RegExp("^("+z.replace("w","w*")+")"),ATTR:RegExp("^"+G),PSEUDO:RegExp("^"+X),POS:RegExp(Y,"i"),CHILD:RegExp("^:(only|nth|first|last)-child(?:\\("+V+"*(even|odd|(([+-]|)(\\d*)n|)"+V+"*(?:([+-]|)"+V+"*(\\d+)|))"+V+"*\\)|)","i"),needsContext:RegExp("^"+V+"*[>+~]|"+Y,"i")},lt=function(e){var t=O.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},ut=lt(function(e){return e.appendChild(O.createComment("")),!e.getElementsByTagName("*").length}),ct=lt(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==C&&"#"===e.firstChild.getAttribute("href")}),dt=lt(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),ft=lt(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),pt=lt(function(e){e.id=A+0,e.innerHTML="<a name='"+A+"'></a><div name='"+A+"'></div>",D.insertBefore(e,D.firstChild);var t=O.getElementsByName&&O.getElementsByName(A).length===2+O.getElementsByName(A+0).length;return _=!O.getElementById(A),D.removeChild(e),t});try{B.call(D.childNodes,0)[0].nodeType}catch(ht){B=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){return n(t,null,null,[e]).length>0},b=n.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=b(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r];r++)n+=b(t);return n},w=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},S=n.contains=D.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&1===r.nodeType&&n.contains&&n.contains(r))}:D.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},n.attr=function(e,t){var n,r=w(e);return r||(t=t.toLowerCase()),(n=y.attrHandle[t])?n(e):r||dt?e.getAttribute(t):(n=e.getAttributeNode(t),n?"boolean"==typeof e[t]?e[t]?t:null:n.specified?n.value:null:null)},y=n.selectors={cacheLength:50,createPseudo:j,match:st,attrHandle:ct?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:_?function(e,t,n){if(typeof t.getElementById!==C&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==C&&!r){var o=n.getElementById(e);return o?o.id===e||typeof o.getAttributeNode!==C&&o.getAttributeNode("id").value===e?[o]:t:[]}},TAG:ut?function(e,n){return typeof n.getElementsByTagName!==C?n.getElementsByTagName(e):t}:function(e,t){var n=t.getElementsByTagName(e);if("*"===e){for(var r,o=[],i=0;r=n[i];i++)1===r.nodeType&&o.push(r);return o}return n},NAME:pt&&function(e,n){return typeof n.getElementsByName!==C?n.getElementsByName(name):t},CLASS:ft&&function(e,n,r){return typeof n.getElementsByClassName===C||r?t:n.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(at,""),e[3]=(e[4]||e[5]||"").replace(at,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||n.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&n.error(e[0]),e},PSEUDO:function(e){var t,n;return st.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(tt.test(t)&&(n=s(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t),e.slice(0,3))}},filter:{ID:_?function(e){return e=e.replace(at,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(at,""),function(t){var n=typeof t.getAttributeNode!==C&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(at,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=U[A][e];return t||(t=U(e,RegExp("(^|"+V+")"+e+"("+V+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==C&&e.getAttribute("class")||"")}},ATTR:function(e,t,r){return function(o){var i=n.attr(o,e);return null==i?"!="===t:t?(i+="","="===t?i===r:"!="===t?i!==r:"^="===t?r&&0===i.indexOf(r):"*="===t?r&&i.indexOf(r)>-1:"$="===t?r&&i.substr(i.length-r.length)===r:"~="===t?(" "+i+" ").indexOf(r)>-1:"|="===t?i===r||i.substr(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r){return"nth"===e?function(e){var t,o,i=e.parentNode;if(1===n&&0===r)return!0;if(i)for(o=0,t=i.firstChild;t&&(1!==t.nodeType||(o++,e!==t));t=t.nextSibling);return o-=r,o===n||0===o%n&&o/n>=0}:function(t){var n=t;switch(e){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;if("first"===e)return!0;n=t;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var r,o=y.pseudos[e]||y.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return o[A]?o(t):o.length>1?(r=[e,e,"",t],y.setFilters.hasOwnProperty(e.toLowerCase())?j(function(e,n){for(var r,i=o(e,t),a=i.length;a--;)r=F.call(e,i[a]),e[r]=!(n[r]=i[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:j(function(e){var t=[],n=[],r=T(e.replace(K,"$1"));return r[A]?j(function(e,t,n,o){for(var i,a=r(e,null,o,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,o,i){return t[0]=e,r(t,null,i,n),!n.pop()}}),has:j(function(e){return function(t){return n(e,t).length>0}}),contains:j(function(e){return function(t){return(t.textContent||t.innerText||b(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!y.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return ot.test(e.nodeName)},text:function(e){var t,n;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(n=e.getAttribute("type"))||n.toLowerCase()===t)},radio:r("radio"),checkbox:r("checkbox"),file:r("file"),password:r("password"),image:r("image"),submit:o("submit"),reset:o("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return it.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return!(e!==t.activeElement||t.hasFocus&&!t.hasFocus()||!e.type&&!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:i(function(){return[0]}),last:i(function(e,t){return[t-1]}),eq:i(function(e,t,n){return[0>n?n+t:n]}),even:i(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:i(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:i(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:i(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}},M=D.compareDocumentPosition?function(e,t){return e===t?(k=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return k=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,o=[],i=[],s=e.parentNode,l=t.parentNode,u=s;if(s===l)return a(e,t);if(!s)return-1;if(!l)return 1;for(;u;)o.unshift(u),u=u.parentNode;for(u=l;u;)i.unshift(u),u=u.parentNode;n=o.length,r=i.length;for(var c=0;n>c&&r>c;c++)if(o[c]!==i[c])return a(o[c],i[c]);return c===n?a(e,i[c],-1):a(o[c],t,1)},[0,0].sort(M),x=!k,n.uniqueSort=function(e){var t,n=1;if(k=x,e.sort(M),k)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},n.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},T=n.compile=function(e,t){var n,r=[],o=[],i=$[A][e];if(!i){for(t||(t=s(e)),n=t.length;n--;)i=f(t[n]),i[A]?r.push(i):o.push(i);i=$(e,p(o,r))}return i},O.querySelectorAll&&function(){var e,t=g,r=/'|\\/g,o=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],a=[":active",":focus"],l=D.matchesSelector||D.mozMatchesSelector||D.webkitMatchesSelector||D.oMatchesSelector||D.msMatchesSelector;lt(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+V+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),lt(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+V+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=RegExp(i.join("|")),g=function(e,n,o,a,l){if(!(a||l||i&&i.test(e))){var u,c,d=!0,f=A,p=n,h=9===n.nodeType&&e;if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){for(u=s(e),(d=n.getAttribute("id"))?f=d.replace(r,"\\$&"):n.setAttribute("id",f),f="[id='"+f+"'] ",c=u.length;c--;)u[c]=f+u[c].join("");p=rt.test(e)&&n.parentNode||n,h=u.join(",")}if(h)try{return P.apply(o,B.call(p.querySelectorAll(h),0)),o}catch(g){}finally{d||n.removeAttribute("id")}}return t(e,n,o,a,l)},l&&(lt(function(t){e=l.call(t,"div");try{l.call(t,"[test!='']:sizzle"),a.push("!=",X)}catch(n){}}),a=RegExp(a.join("|")),n.matchesSelector=function(t,r){if(r=r.replace(o,"='$1']"),!(w(t)||a.test(r)||i&&i.test(r)))try{var s=l.call(t,r);if(s||e||t.document&&11!==t.document.nodeType)return s}catch(u){}return n(r,null,null,[t]).length>0})}(),y.pseudos.nth=y.pseudos.eq,y.filters=m.prototype=y.pseudos,y.setFilters=new m,n.attr=Q.attr,Q.find=n,Q.expr=n.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=n.uniqueSort,Q.text=n.getText,Q.isXMLDoc=n.isXML,Q.contains=n.contains}(e);var Lt=/Until$/,Rt=/^(?:parents|prev(?:Until|All))/,Pt=/^.[^:#\[\.,]*$/,Bt=Q.expr.match.needsContext,Ft={children:!0,contents:!0,next:!0,prev:!0};Q.fn.extend({find:function(e){var t,n,r,o,i,a,s=this;if("string"!=typeof e)return Q(e).filter(function(){for(t=0,n=s.length;n>t;t++)if(Q.contains(s[t],this))return!0});for(a=this.pushStack("","find",e),t=0,n=this.length;n>t;t++)if(r=a.length,Q.find(e,this[t],a),t>0)for(o=r;a.length>o;o++)for(i=0;r>i;i++)if(a[i]===a[o]){a.splice(o--,1);break}return a},has:function(e){var t,n=Q(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(Q.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(u(this,e,!1),"not",e)},filter:function(e){return this.pushStack(u(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?Bt.test(e)?Q(e,this.context).index(this[0])>=0:Q.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,r=0,o=this.length,i=[],a=Bt.test(e)||"string"!=typeof e?Q(e,t||this.context):0;o>r;r++)for(n=this[r];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(a?a.index(n)>-1:Q.find.matchesSelector(n,e)){i.push(n);break}n=n.parentNode}return i=i.length>1?Q.unique(i):i,this.pushStack(i,"closest",e)},index:function(e){return e?"string"==typeof e?Q.inArray(this[0],Q(e)):Q.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?Q(e,t):Q.makeArray(e&&e.nodeType?[e]:e),r=Q.merge(this.get(),n);return this.pushStack(s(n[0])||s(r[0])?r:Q.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Q.fn.andSelf=Q.fn.addBack,Q.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Q.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Q.dir(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return Q.dir(e,"nextSibling")},prevAll:function(e){return Q.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Q.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Q.dir(e,"previousSibling",n)},siblings:function(e){return Q.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Q.sibling(e.firstChild)},contents:function(e){return Q.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Q.merge([],e.childNodes)}},function(e,t){Q.fn[e]=function(n,r){var o=Q.map(this,t,n);return Lt.test(e)||(r=n),r&&"string"==typeof r&&(o=Q.filter(r,o)),o=this.length>1&&!Ft[e]?Q.unique(o):o,this.length>1&&Rt.test(e)&&(o=o.reverse()),this.pushStack(o,e,J.call(arguments).join(","))}}),Q.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?Q.find.matchesSelector(t[0],e)?[t[0]]:[]:Q.find.matches(e,t)},dir:function(e,n,r){for(var o=[],i=e[n];i&&9!==i.nodeType&&(r===t||1!==i.nodeType||!Q(i).is(r));)1===i.nodeType&&o.push(i),i=i[n];return o},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var jt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ht=/ jQuery\d+="(?:null|\d+)"/g,Ut=/^\s+/,qt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$t=/<([\w:]+)/,Vt=/<tbody/i,zt=/<|&#?\w+;/,Wt=/<(?:script|style|link)/i,Jt=/<(?:script|object|embed|option|style)/i,Gt=RegExp("<(?:"+jt+")[\\s/>]","i"),Xt=/^(?:checkbox|radio)$/,Yt=/checked\s*(?:[^=]|=\s*.checked.)/i,Kt=/\/(java|ecma)script/i,Qt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},en=c(U),tn=en.appendChild(U.createElement("div"));
Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,Q.support.htmlSerialize||(Zt._default=[1,"X<div>","</div>"]),Q.fn.extend({text:function(e){return Q.access(this,function(e){return e===t?Q.text(this):this.empty().append((this[0]&&this[0].ownerDocument||U).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(Q.isFunction(e))return this.each(function(t){Q(this).wrapAll(e.call(this,t))});if(this[0]){var t=Q(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return Q.isFunction(e)?this.each(function(t){Q(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Q(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Q.isFunction(e);return this.each(function(n){Q(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!s(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=Q.clean(arguments);return this.pushStack(Q.merge(e,this),"before",this.selector)}},after:function(){if(!s(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=Q.clean(arguments);return this.pushStack(Q.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var n,r=0;null!=(n=this[r]);r++)(!e||Q.filter(e,[n]).length)&&(t||1!==n.nodeType||(Q.cleanData(n.getElementsByTagName("*")),Q.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&Q.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Q.clone(this,e,t)})},html:function(e){return Q.access(this,function(e){var n=this[0]||{},r=0,o=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Ht,""):t;if(!("string"!=typeof e||Wt.test(e)||!Q.support.htmlSerialize&&Gt.test(e)||!Q.support.leadingWhitespace&&Ut.test(e)||Zt[($t.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(qt,"<$1></$2>");try{for(;o>r;r++)n=this[r]||{},1===n.nodeType&&(Q.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(i){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return s(this[0])?this.length?this.pushStack(Q(Q.isFunction(e)?e():e),"replaceWith",e):this:Q.isFunction(e)?this.each(function(t){var n=Q(this),r=n.html();n.replaceWith(e.call(this,t,r))}):("string"!=typeof e&&(e=Q(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;Q(this).remove(),t?Q(t).before(e):Q(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var o,i,a,s,l=0,u=e[0],c=[],f=this.length;if(!Q.support.checkClone&&f>1&&"string"==typeof u&&Yt.test(u))return this.each(function(){Q(this).domManip(e,n,r)});if(Q.isFunction(u))return this.each(function(o){var i=Q(this);e[0]=u.call(this,o,n?i.html():t),i.domManip(e,n,r)});if(this[0]){if(o=Q.buildFragment(e,this,c),a=o.fragment,i=a.firstChild,1===a.childNodes.length&&(a=i),i)for(n=n&&Q.nodeName(i,"tr"),s=o.cacheable||f-1;f>l;l++)r.call(n&&Q.nodeName(this[l],"table")?d(this[l],"tbody"):this[l],l===s?a:Q.clone(a,!0,!0));a=i=null,c.length&&Q.each(c,function(e,t){t.src?Q.ajax?Q.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):Q.error("no ajax"):Q.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Qt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),Q.buildFragment=function(e,n,r){var o,i,a,s=e[0];return n=n||U,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,!(1===e.length&&"string"==typeof s&&512>s.length&&n===U&&"<"===s.charAt(0))||Jt.test(s)||!Q.support.checkClone&&Yt.test(s)||!Q.support.html5Clone&&Gt.test(s)||(i=!0,o=Q.fragments[s],a=o!==t),o||(o=n.createDocumentFragment(),Q.clean(e,n,o,r),i&&(Q.fragments[s]=a&&o)),{fragment:o,cacheable:i}},Q.fragments={},Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Q.fn[e]=function(n){var r,o=0,i=[],a=Q(n),s=a.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===s)return a[t](this[0]),this;for(;s>o;o++)r=(o>0?this.clone(!0):this).get(),Q(a[o])[t](r),i=i.concat(r);return this.pushStack(i,e,a.selector)}}),Q.extend({clone:function(e,t,n){var r,o,i,a;if(Q.support.html5Clone||Q.isXMLDoc(e)||!Gt.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(tn.innerHTML=e.outerHTML,tn.removeChild(a=tn.firstChild)),!(Q.support.noCloneEvent&&Q.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Q.isXMLDoc(e)))for(p(e,a),r=h(e),o=h(a),i=0;r[i];++i)o[i]&&p(r[i],o[i]);if(t&&(f(e,a),n))for(r=h(e),o=h(a),i=0;r[i];++i)f(r[i],o[i]);return r=o=null,a},clean:function(e,n,r,o){var i,a,s,l,u,d,f,p,h,m,v,_=n===U&&en,y=[];for(n&&n.createDocumentFragment!==t||(n=U),i=0;null!=(s=e[i]);i++)if("number"==typeof s&&(s+=""),s){if("string"==typeof s)if(zt.test(s)){for(_=_||c(n),f=n.createElement("div"),_.appendChild(f),s=s.replace(qt,"<$1></$2>"),l=($t.exec(s)||["",""])[1].toLowerCase(),u=Zt[l]||Zt._default,d=u[0],f.innerHTML=u[1]+s+u[2];d--;)f=f.lastChild;if(!Q.support.tbody)for(p=Vt.test(s),h="table"!==l||p?"<table>"!==u[1]||p?[]:f.childNodes:f.firstChild&&f.firstChild.childNodes,a=h.length-1;a>=0;--a)Q.nodeName(h[a],"tbody")&&!h[a].childNodes.length&&h[a].parentNode.removeChild(h[a]);!Q.support.leadingWhitespace&&Ut.test(s)&&f.insertBefore(n.createTextNode(Ut.exec(s)[0]),f.firstChild),s=f.childNodes,f.parentNode.removeChild(f)}else s=n.createTextNode(s);s.nodeType?y.push(s):Q.merge(y,s)}if(f&&(s=f=_=null),!Q.support.appendChecked)for(i=0;null!=(s=y[i]);i++)Q.nodeName(s,"input")?g(s):s.getElementsByTagName!==t&&Q.grep(s.getElementsByTagName("input"),g);if(r)for(m=function(e){return!e.type||Kt.test(e.type)?o?o.push(e.parentNode?e.parentNode.removeChild(e):e):r.appendChild(e):t},i=0;null!=(s=y[i]);i++)Q.nodeName(s,"script")&&m(s)||(r.appendChild(s),s.getElementsByTagName!==t&&(v=Q.grep(Q.merge([],s.getElementsByTagName("script")),m),y.splice.apply(y,[i+1,0].concat(v)),i+=v.length));return y},cleanData:function(e,t){for(var n,r,o,i,a=0,s=Q.expando,l=Q.cache,u=Q.support.deleteExpando,c=Q.event.special;null!=(o=e[a]);a++)if((t||Q.acceptData(o))&&(r=o[s],n=r&&l[r])){if(n.events)for(i in n.events)c[i]?Q.event.remove(o,i):Q.removeEvent(o,i,n.handle);l[r]&&(delete l[r],u?delete o[s]:o.removeAttribute?o.removeAttribute(s):o[s]=null,Q.deletedIds.push(r))}}}),function(){var e,t;Q.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=Q.uaMatch($.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),Q.browser=t,Q.sub=function(){function e(t,n){return new e.fn.init(t,n)}Q.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,r){return r&&r instanceof Q&&!(r instanceof e)&&(r=e(r)),Q.fn.init.call(this,n,r,t)},e.fn.init.prototype=e.fn;var t=e(U);return e}}();var nn,rn,on,an=/alpha\([^)]*\)/i,sn=/opacity=([^)]*)/,ln=/^(top|right|bottom|left)$/,un=/^(none|table(?!-c[ea]).+)/,cn=/^margin/,dn=RegExp("^("+Z+")(.*)$","i"),fn=RegExp("^("+Z+")(?!px)[a-z%]+$","i"),pn=RegExp("^([-+])=("+Z+")","i"),hn={},gn={position:"absolute",visibility:"hidden",display:"block"},mn={letterSpacing:0,fontWeight:400},vn=["Top","Right","Bottom","Left"],_n=["Webkit","O","Moz","ms"],yn=Q.fn.toggle;Q.fn.extend({css:function(e,n){return Q.access(this,function(e,n,r){return r!==t?Q.style(e,n,r):Q.css(e,n)},e,n,arguments.length>1)},show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(e,t){var n="boolean"==typeof e;return Q.isFunction(e)&&Q.isFunction(t)?yn.apply(this,arguments):this.each(function(){(n?e:v(this))?Q(this).show():Q(this).hide()})}}),Q.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Q.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,s,l=Q.camelCase(n),u=e.style;if(n=Q.cssProps[l]||(Q.cssProps[l]=m(u,l)),s=Q.cssHooks[n]||Q.cssHooks[l],r===t)return s&&"get"in s&&(i=s.get(e,!1,o))!==t?i:u[n];if(a=typeof r,"string"===a&&(i=pn.exec(r))&&(r=(i[1]+1)*i[2]+parseFloat(Q.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||Q.cssNumber[l]||(r+="px"),s&&"set"in s&&(r=s.set(e,r,o))===t)))try{u[n]=r}catch(c){}}},css:function(e,n,r,o){var i,a,s,l=Q.camelCase(n);return n=Q.cssProps[l]||(Q.cssProps[l]=m(e.style,l)),s=Q.cssHooks[n]||Q.cssHooks[l],s&&"get"in s&&(i=s.get(e,!0,o)),i===t&&(i=nn(e,n)),"normal"===i&&n in mn&&(i=mn[n]),r||o!==t?(a=parseFloat(i),r||Q.isNumeric(a)?a||0:i):i},swap:function(e,t,n){var r,o,i={};for(o in t)i[o]=e.style[o],e.style[o]=t[o];r=n.call(e);for(o in t)e.style[o]=i[o];return r}}),e.getComputedStyle?nn=function(t,n){var r,o,i,a,s=e.getComputedStyle(t,null),l=t.style;return s&&(r=s[n],""!==r||Q.contains(t.ownerDocument,t)||(r=Q.style(t,n)),fn.test(r)&&cn.test(n)&&(o=l.width,i=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=r,r=s.width,l.width=o,l.minWidth=i,l.maxWidth=a)),r}:U.documentElement.currentStyle&&(nn=function(e,t){var n,r,o=e.currentStyle&&e.currentStyle[t],i=e.style;return null==o&&i&&i[t]&&(o=i[t]),fn.test(o)&&!ln.test(t)&&(n=i.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),i.left="fontSize"===t?"1em":o,o=i.pixelLeft+"px",i.left=n,r&&(e.runtimeStyle.left=r)),""===o?"auto":o}),Q.each(["height","width"],function(e,n){Q.cssHooks[n]={get:function(e,r,o){return r?0===e.offsetWidth&&un.test(nn(e,"display"))?Q.swap(e,gn,function(){return w(e,n,o)}):w(e,n,o):t},set:function(e,t,r){return y(e,t,r?b(e,n,r,Q.support.boxSizing&&"border-box"===Q.css(e,"boxSizing")):0)}}}),Q.support.opacity||(Q.cssHooks.opacity={get:function(e,t){return sn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,o=Q.isNumeric(t)?"alpha(opacity="+100*t+")":"",i=r&&r.filter||n.filter||"";n.zoom=1,t>=1&&""===Q.trim(i.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),r&&!r.filter)||(n.filter=an.test(i)?i.replace(an,o):i+" "+o)}}),Q(function(){Q.support.reliableMarginRight||(Q.cssHooks.marginRight={get:function(e,n){return Q.swap(e,{display:"inline-block"},function(){return n?nn(e,"marginRight"):t})}}),!Q.support.pixelPosition&&Q.fn.position&&Q.each(["top","left"],function(e,t){Q.cssHooks[t]={get:function(e,n){if(n){var r=nn(e,t);return fn.test(r)?Q(e).position()[t]+"px":r}}}})}),Q.expr&&Q.expr.filters&&(Q.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!Q.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||nn(e,"display"))},Q.expr.filters.visible=function(e){return!Q.expr.filters.hidden(e)}),Q.each({margin:"",padding:"",border:"Width"},function(e,t){Q.cssHooks[e+t]={expand:function(n){var r,o="string"==typeof n?n.split(" "):[n],i={};for(r=0;4>r;r++)i[e+vn[r]+t]=o[r]||o[r-2]||o[0];return i}},cn.test(e)||(Q.cssHooks[e+t].set=y)});var bn=/%20/g,wn=/\[\]$/,Sn=/\r?\n/g,Tn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Mn=/^(?:select|textarea)/i;Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Q.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Mn.test(this.nodeName)||Tn.test(this.type))}).map(function(e,t){var n=Q(this).val();return null==n?null:Q.isArray(n)?Q.map(n,function(e){return{name:t.name,value:e.replace(Sn,"\r\n")}}):{name:t.name,value:n.replace(Sn,"\r\n")}}).get()}}),Q.param=function(e,n){var r,o=[],i=function(e,t){t=Q.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(e)||e.jquery&&!Q.isPlainObject(e))Q.each(e,function(){i(this.name,this.value)});else for(r in e)T(r,e[r],n,i);return o.join("&").replace(bn,"+")};var kn,En,xn=/#.*$/,Cn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,An=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Nn=/^(?:GET|HEAD)$/,On=/^\/\//,Dn=/\?/,In=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ln=/([?&])_=[^&]*/,Rn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pn=Q.fn.load,Bn={},Fn={},jn=["*/"]+["*"];try{En=q.href}catch(Hn){En=U.createElement("a"),En.href="",En=En.href}kn=Rn.exec(En.toLowerCase())||[],Q.fn.load=function(e,n,r){if("string"!=typeof e&&Pn)return Pn.apply(this,arguments);if(!this.length)return this;var o,i,a,s=this,l=e.indexOf(" ");return l>=0&&(o=e.slice(l,e.length),e=e.slice(0,l)),Q.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(i="POST"),Q.ajax({url:e,type:i,dataType:"html",data:n,complete:function(e,t){r&&s.each(r,a||[e.responseText,t,e])}}).done(function(e){a=arguments,s.html(o?Q("<div>").append(e.replace(In,"")).find(o):e)}),this},Q.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){Q.fn[t]=function(e){return this.on(t,e)}}),Q.each(["get","post"],function(e,n){Q[n]=function(e,r,o,i){return Q.isFunction(r)&&(i=i||o,o=r,r=t),Q.ajax({type:n,url:e,data:r,success:o,dataType:i})}}),Q.extend({getScript:function(e,n){return Q.get(e,t,n,"script")},getJSON:function(e,t,n){return Q.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?E(e,Q.ajaxSettings):(t=e,e=Q.ajaxSettings),E(e,t),e},ajaxSettings:{url:En,isLocal:An.test(kn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":jn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:M(Bn),ajaxTransport:M(Fn),ajax:function(e,n){function r(e,n,r,a){var u,d,_,y,w,T=n;2!==b&&(b=2,l&&clearTimeout(l),s=t,i=a||"",S.readyState=e>0?4:0,r&&(y=x(f,S,r)),e>=200&&300>e||304===e?(f.ifModified&&(w=S.getResponseHeader("Last-Modified"),w&&(Q.lastModified[o]=w),w=S.getResponseHeader("Etag"),w&&(Q.etag[o]=w)),304===e?(T="notmodified",u=!0):(u=C(f,y),T=u.state,d=u.data,_=u.error,u=!_)):(_=T,(!T||e)&&(T="error",0>e&&(e=0))),S.status=e,S.statusText=(n||T)+"",u?g.resolveWith(p,[d,T,S]):g.rejectWith(p,[S,T,_]),S.statusCode(v),v=t,c&&h.trigger("ajax"+(u?"Success":"Error"),[S,f,u?d:_]),m.fireWith(p,[S,T]),c&&(h.trigger("ajaxComplete",[S,f]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var o,i,a,s,l,u,c,d,f=Q.ajaxSetup({},n),p=f.context||f,h=p!==f&&(p.nodeType||p instanceof Q)?Q(p):Q.event,g=Q.Deferred(),m=Q.Callbacks("once memory"),v=f.statusCode||{},_={},y={},b=0,w="canceled",S={readyState:0,setRequestHeader:function(e,t){if(!b){var n=e.toLowerCase();e=y[n]=y[n]||e,_[e]=t}return this},getAllResponseHeaders:function(){return 2===b?i:null},getResponseHeader:function(e){var n;if(2===b){if(!a)for(a={};n=Cn.exec(i);)a[n[1].toLowerCase()]=n[2];n=a[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return b||(f.mimeType=e),this},abort:function(e){return e=e||w,s&&s.abort(e),r(0,e),this}};if(g.promise(S),S.success=S.done,S.error=S.fail,S.complete=m.add,S.statusCode=function(e){if(e){var t;if(2>b)for(t in e)v[t]=[v[t],e[t]];else t=e[S.status],S.always(t)}return this},f.url=((e||f.url)+"").replace(xn,"").replace(On,kn[1]+"//"),f.dataTypes=Q.trim(f.dataType||"*").toLowerCase().split(tt),null==f.crossDomain&&(u=Rn.exec(f.url.toLowerCase())||!1,f.crossDomain=u&&u.join(":")+(u[3]?"":"http:"===u[1]?80:443)!==kn.join(":")+(kn[3]?"":"http:"===kn[1]?80:443)),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=Q.param(f.data,f.traditional)),k(Bn,f,n,S),2===b)return S;if(c=f.global,f.type=f.type.toUpperCase(),f.hasContent=!Nn.test(f.type),c&&0===Q.active++&&Q.event.trigger("ajaxStart"),!f.hasContent&&(f.data&&(f.url+=(Dn.test(f.url)?"&":"?")+f.data,delete f.data),o=f.url,f.cache===!1)){var T=Q.now(),M=f.url.replace(Ln,"$1_="+T);f.url=M+(M===f.url?(Dn.test(f.url)?"&":"?")+"_="+T:"")}(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",f.contentType),f.ifModified&&(o=o||f.url,Q.lastModified[o]&&S.setRequestHeader("If-Modified-Since",Q.lastModified[o]),Q.etag[o]&&S.setRequestHeader("If-None-Match",Q.etag[o])),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+jn+"; q=0.01":""):f.accepts["*"]);for(d in f.headers)S.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(f.beforeSend.call(p,S,f)===!1||2===b))return S.abort();w="abort";for(d in{success:1,error:1,complete:1})S[d](f[d]);if(s=k(Fn,f,n,S)){S.readyState=1,c&&h.trigger("ajaxSend",[S,f]),f.async&&f.timeout>0&&(l=setTimeout(function(){S.abort("timeout")},f.timeout));try{b=1,s.send(_,r)}catch(E){if(!(2>b))throw E;r(-1,E)}}else r(-1,"No Transport");return S},active:0,lastModified:{},etag:{}});var Un=[],qn=/\?/,$n=/(=)\?(?=&|$)|\?\?/,Vn=Q.now();Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Un.pop()||Q.expando+"_"+Vn++;return this[e]=!0,e}}),Q.ajaxPrefilter("json jsonp",function(n,r,o){var i,a,s,l=n.data,u=n.url,c=n.jsonp!==!1,d=c&&$n.test(u),f=c&&!d&&"string"==typeof l&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&$n.test(l);return"jsonp"===n.dataTypes[0]||d||f?(i=n.jsonpCallback=Q.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a=e[i],d?n.url=u.replace($n,"$1"+i):f?n.data=l.replace($n,"$1"+i):c&&(n.url+=(qn.test(u)?"&":"?")+n.jsonp+"="+i),n.converters["script json"]=function(){return s||Q.error(i+" was not called"),s[0]},n.dataTypes[0]="json",e[i]=function(){s=arguments},o.always(function(){e[i]=a,n[i]&&(n.jsonpCallback=r.jsonpCallback,Un.push(i)),s&&Q.isFunction(a)&&a(s[0]),s=a=t}),"script"):t}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return Q.globalEval(e),e}}}),Q.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Q.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=U.head||U.getElementsByTagName("head")[0]||U.documentElement;return{send:function(o,i){n=U.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,o){(o||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,o||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var zn,Wn=e.ActiveXObject?function(){for(var e in zn)zn[e](0,1)}:!1,Jn=0;Q.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&A()||N()}:A,function(e){Q.extend(Q.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(Q.ajaxSettings.xhr()),Q.support.ajax&&Q.ajaxTransport(function(n){if(!n.crossDomain||Q.support.cors){var r;return{send:function(o,i){var a,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(s in o)l.setRequestHeader(s,o[s])}catch(u){}l.send(n.hasContent&&n.data||null),r=function(e,o){var s,u,c,d,f;try{if(r&&(o||4===l.readyState))if(r=t,a&&(l.onreadystatechange=Q.noop,Wn&&delete zn[a]),o)4!==l.readyState&&l.abort();else{s=l.status,c=l.getAllResponseHeaders(),d={},f=l.responseXML,f&&f.documentElement&&(d.xml=f);try{d.text=l.responseText}catch(e){}try{u=l.statusText}catch(p){u=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=d.text?200:404}}catch(h){o||i(-1,h)}d&&i(s,u,d,c)},n.async?4===l.readyState?setTimeout(r,0):(a=++Jn,Wn&&(zn||(zn={},Q(e).unload(Wn)),zn[a]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var Gn,Xn,Yn=/^(?:toggle|show|hide)$/,Kn=RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Qn=/queueHooks$/,Zn=[R],er={"*":[function(e,t){var n,r,o=this.createTween(e,t),i=Kn.exec(t),a=o.cur(),s=+a||0,l=1,u=20;if(i){if(n=+i[2],r=i[3]||(Q.cssNumber[e]?"":"px"),"px"!==r&&s){s=Q.css(o.elem,e,!0)||n||1;do l=l||".5",s/=l,Q.style(o.elem,e,s+r);while(l!==(l=o.cur()/a)&&1!==l&&--u)}o.unit=r,o.start=s,o.end=i[1]?s+(i[1]+1)*n:n}return o}]};Q.Animation=Q.extend(I,{tweener:function(e,t){Q.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,o=e.length;o>r;r++)n=e[r],er[n]=er[n]||[],er[n].unshift(t)},prefilter:function(e,t){t?Zn.unshift(e):Zn.push(e)}}),Q.Tween=P,P.prototype={constructor:P,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(Q.cssNumber[n]?"":"px")},cur:function(){var e=P.propHooks[this.prop];return e&&e.get?e.get(this):P.propHooks._default.get(this)},run:function(e){var t,n=P.propHooks[this.prop];return this.pos=t=this.options.duration?Q.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):P.propHooks._default.set(this),this}},P.prototype.init.prototype=P.prototype,P.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Q.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Q.fx.step[e.prop]?Q.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Q.cssProps[e.prop]]||Q.cssHooks[e.prop])?Q.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},P.propHooks.scrollTop=P.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Q.each(["toggle","show","hide"],function(e,t){var n=Q.fn[t];Q.fn[t]=function(r,o,i){return null==r||"boolean"==typeof r||!e&&Q.isFunction(r)&&Q.isFunction(o)?n.apply(this,arguments):this.animate(B(t,!0),r,o,i)}}),Q.fn.extend({fadeTo:function(e,t,n,r){return this.filter(v).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=Q.isEmptyObject(e),i=Q.speed(t,n,r),a=function(){var t=I(this,Q.extend({},e),i);o&&t.stop(!0)};return o||i.queue===!1?this.each(a):this.queue(i.queue,a)},stop:function(e,n,r){var o=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",i=Q.timers,a=Q._data(this);if(n)a[n]&&a[n].stop&&o(a[n]);else for(n in a)a[n]&&a[n].stop&&Qn.test(n)&&o(a[n]);for(n=i.length;n--;)i[n].elem!==this||null!=e&&i[n].queue!==e||(i[n].anim.stop(r),t=!1,i.splice(n,1));(t||!r)&&Q.dequeue(this,e)})}}),Q.each({slideDown:B("show"),slideUp:B("hide"),slideToggle:B("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Q.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Q.speed=function(e,t,n){var r=e&&"object"==typeof e?Q.extend({},e):{complete:n||!n&&t||Q.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Q.isFunction(t)&&t};return r.duration=Q.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Q.fx.speeds?Q.fx.speeds[r.duration]:Q.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Q.isFunction(r.old)&&r.old.call(this),r.queue&&Q.dequeue(this,r.queue)},r},Q.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Q.timers=[],Q.fx=P.prototype.init,Q.fx.tick=function(){for(var e,t=Q.timers,n=0;t.length>n;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||Q.fx.stop()},Q.fx.timer=function(e){e()&&Q.timers.push(e)&&!Xn&&(Xn=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.interval=13,Q.fx.stop=function(){clearInterval(Xn),Xn=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fx.step={},Q.expr&&Q.expr.filters&&(Q.expr.filters.animated=function(e){return Q.grep(Q.timers,function(t){return e===t.elem}).length});var tr=/^(?:body|html)$/i;Q.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){Q.offset.setOffset(this,e,t)});var n,r,o,i,a,s,l,u={top:0,left:0},c=this[0],d=c&&c.ownerDocument;if(d)return(r=d.body)===c?Q.offset.bodyOffset(c):(n=d.documentElement,Q.contains(n,c)?(c.getBoundingClientRect!==t&&(u=c.getBoundingClientRect()),o=F(d),i=n.clientTop||r.clientTop||0,a=n.clientLeft||r.clientLeft||0,s=o.pageYOffset||n.scrollTop,l=o.pageXOffset||n.scrollLeft,{top:u.top+s-i,left:u.left+l-a}):u)},Q.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return Q.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(Q.css(e,"marginTop"))||0,n+=parseFloat(Q.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=Q.css(e,"position");"static"===r&&(e.style.position="relative");var o,i,a=Q(e),s=a.offset(),l=Q.css(e,"top"),u=Q.css(e,"left"),c=("absolute"===r||"fixed"===r)&&Q.inArray("auto",[l,u])>-1,d={},f={};c?(f=a.position(),o=f.top,i=f.left):(o=parseFloat(l)||0,i=parseFloat(u)||0),Q.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):a.css(d)}},Q.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),n=this.offset(),r=tr.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(Q.css(e,"marginTop"))||0,n.left-=parseFloat(Q.css(e,"marginLeft"))||0,r.top+=parseFloat(Q.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(Q.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||U.body;e&&!tr.test(e.nodeName)&&"static"===Q.css(e,"position");)e=e.offsetParent;return e||U.body})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);Q.fn[e]=function(o){return Q.access(this,function(e,o,i){var a=F(e);return i===t?a?n in a?a[n]:a.document.documentElement[o]:e[o]:(a?a.scrollTo(r?Q(a).scrollLeft():i,r?i:Q(a).scrollTop()):e[o]=i,t)},e,o,arguments.length,null)}}),Q.each({Height:"height",Width:"width"},function(e,n){Q.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,o){Q.fn[o]=function(o,i){var a=arguments.length&&(r||"boolean"!=typeof o),s=r||(o===!0||i===!0?"margin":"border");return Q.access(this,function(n,r,o){var i;return Q.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(i=n.documentElement,Math.max(n.body["scroll"+e],i["scroll"+e],n.body["offset"+e],i["offset"+e],i["client"+e])):o===t?Q.css(n,r,o,s):Q.style(n,r,o,s)},n,a?o:t,a,null)}})}),e.jQuery=e.$=Q,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Q})})(window)}.call(this),function(){DomUtils={};var e=function(e,t){if(!document.querySelectorAll)throw Error("This browser doesn't support querySelectorAll.");var n=t;return f(t,"DomUtils_findAllBySelector_scope",function(t){var r=_.map(e.split(","),function(e){return t+" "+e}).join(",");return n.querySelectorAll(r)})},t=window.Sizzle||window.jQuery&&window.jQuery.find||e,n=document.createElement("div");n.innerHTML="   <link/><table></table><select><!----></select>";var r=document.createElement("div");r.innerHTML="<select><option selected>Foo</option></select>",r.firstChild.setAttribute("name","myname");var o={leadingWhitespaceKilled:3!==n.firstChild.nodeType,tbodyInsertion:n.getElementsByTagName("tbody").length>0,tagsLost:0===n.getElementsByTagName("link").length,commentsLost:!n.getElementsByTagName("select")[0].firstChild,selectValueMustBeFromAttribute:"Foo"!==r.firstChild.value,mustSetNameInCreateElement:r.firstChild.outerHTML&&-1===r.firstChild.outerHTML.indexOf("myname")},i={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};_.extend(i,{optgroup:i.option,tbody:i.thead,tfoot:i.thead,colgroup:i.thead,caption:i.thead,th:i.td}),o.tagsLost&&(i._default=[1,"div<div>","</div>"]);var a=/^\s+/,s=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,l=/<([\w:]+)/,u=/<tbody/i,c=/<|&#?\w+;/;DomUtils.htmlToFragment=function(e){var t=document,n=t.createDocumentFragment();if(e.length)if(c.test(e)){e=e.replace(s,"<$1></$2>");var r=l.exec(e),d=r?r[1].toLowerCase():"",f=i[d]||i._default,p=f[1]+e+f[2];o.commentsLost&&(p=p.replace(/<\s*(select|option)\b/gi,'<ins domutilsrealtagname="$1"'),p=p.replace(/<\/\s*(select|option)\b/gi,"</ins"));var h=t.createElement("div");h.innerHTML=p;for(var g=f[0];g--;)h=h.lastChild;if(o.tbodyInsertion&&!u.test(e)){var m=h.getElementsByTagName("tbody");_.each(m,function(e){e.firstChild||e.parentNode.removeChild(e)})}if(o.leadingWhitespaceKilled){var v=a.exec(e);v&&h.insertBefore(t.createTextNode(v[0]),h.firstChild)}if(o.commentsLost){var y=[];_.each(h.getElementsByTagName("ins"),function(e){e.getAttribute("domutilsrealtagname")&&y.push(e)}),_.each(y,function(e){var t=e.getAttribute("domutilsrealtagname");o.mustSetNameInCreateElement&&e.getAttribute("name")&&(t="<"+t+" name='"+_.escape(e.getAttribute("name"))+"'/>");var n=document.createElement(t);e.removeAttribute("domutilsrealtagname");for(var r=e.attributes,i=0;r.length>i;++i){var a=r.item(i);if(a.specified){var s=a.name.toLowerCase(),l=a.value+"";"selected"===s&&""===l&&(l="selected"),n.setAttribute(s,l)}}for(;e.firstChild;)n.appendChild(e.firstChild);e.parentNode.replaceChild(n,e)})}for(;h.firstChild;)n.appendChild(h.firstChild)}else n.appendChild(t.createTextNode(e));else;return n},DomUtils.fragmentToHtml=function(e){return e=e.cloneNode(!0),DomUtils.fragmentToContainer(e).innerHTML},DomUtils.fragmentToContainer=function(e){for(var t=document,n=e.firstChild;n&&1!==n.nodeType;)n=n.nextSibling;var r=t.createElement("div");if(n){var o=n.nodeName,a=i[o]||i._default;r.innerHTML=a[1]+a[2];for(var s=a[0];s--;)r=r.lastChild;r.appendChild(e)}else r.appendChild(e);return r},DomUtils.elementContains=function(e,t){return 1!==e.nodeType?!1:e===t?!1:e.compareDocumentPosition?16&e.compareDocumentPosition(t):(t=t.parentNode,t&&1===t.nodeType?e===t?!0:e.contains(t):!1)},DomUtils.findAll=function(e,n){if(11===e.nodeType){for(var r=e,o=DomUtils.fragmentToContainer(r),i=t(n,o);o.firstChild;)r.appendChild(o.firstChild);return i}return t(n,e)},DomUtils.find=function(e,t){var n=DomUtils.findAll(e,t);return n.length?n[0]:null};var d=function(e,t,n){return DomUtils.elementContains(e,t)?!1:0>=DomUtils.compareElementIndex(t,e)&&0>=DomUtils.compareElementIndex(e,n)};DomUtils.findAllClipped=function(e,t,n,r){for(;n!==r&&1!==n.nodeType;)n=n.nextSibling;for(;n!==r&&1!==r.nodeType;)r=r.previousSibling;
if(1!==n.nodeType)return[];var o=DomUtils.findAll(e,t);return _.reject(o,function(e){return!d(e,n,r)})},DomUtils.findClipped=function(e,t,n,r){var o=DomUtils.findAllClipped(e,t,n,r);return o.length?o[0]:null};var f=function(e,t,n){var r=!1;e.getAttribute("id")||(e.setAttribute("id",t),r=!0);try{var o=e.getAttribute("id").replace(/'/g,"\\$&");return n("[id='"+o+"']")}finally{r&&e.removeAttribute("id")}},p=function(e,t,n,r,o){for(var i=n.split(","),a=0,s=i.length;s>a;a++){var l=f(e,"DomUtils_matchesSelector_target",function(i){var a,s=n.match(/\S.*?(?=\s*$)/)[0],l=s+i;return a=r?DomUtils.findClipped(t,l,r,o):DomUtils.find(t,l),a===e});if(l)return!0}return!1};DomUtils.matchesSelector=function(e,t,n){return p(e,t,n)},DomUtils.matchesSelectorClipped=function(e,t,n,r,o){return p(e,t,n,r,o)},DomUtils.compareElementIndex=function(e,t){if(e===t)return 0;if(e.compareDocumentPosition){var n=e.compareDocumentPosition(t);return 24&n?0:4&n?-1:1}return e.contains(t)||t.contains(e)?0:e.sourceIndex<t.sourceIndex?-1:1},DomUtils.wrapFragmentForContainer=function(e,t){if(t&&"TABLE"===t.nodeName&&_.any(e.childNodes,function(e){return"TR"===e.nodeName})){var n=document.createElement("TBODY");n.appendChild(e),e.appendChild(n)}},DomUtils.isInDocument=function(e){return e===document?!0:(1!==e.nodeType&&(e=e.parentNode),e&&1===e.nodeType?e===document.body?!0:DomUtils.elementContains(document.body,e):!1)},DomUtils.rangeToHtml=function(e,t){for(var n=document.createDocumentFragment(),r=e,o=t.nextSibling;r&&r!==o;r=r.nextSibling)n.appendChild(r.cloneNode(!0));return DomUtils.fragmentToHtml(n)},DomUtils.outerHtml=function(e){return DomUtils.rangeToHtml(e,e)},DomUtils.setElementValue=function(e,t){if(e.value=t,e.value!==t&&"SELECT"===e.nodeName)for(var n=DomUtils.findAll(e,"option"),r=0;n.length>r;++r)if(DomUtils.getElementValue(n[r])===t)return n[r].selected=!0,void 0},DomUtils.getElementValue=function(e){if(!o.selectValueMustBeFromAttribute)return e.value;if("OPTION"===e.nodeName){var t=e.attributes.value;return!t||t.specified?e.value:e.text}return"SELECT"===e.nodeName?0>e.selectedIndex?null:DomUtils.getElementValue(e.options[e.selectedIndex]):e.value}}.call(this),function(){var e=function(){var e=document.createTextNode("");try{e.test=123}catch(t){}return 123!==e.test?!1:document.documentMode?!1:!0}(),t=function(t,n){if(e)return[t,n];if(3===t.nodeType){var r=document.createComment("IE");t.parentNode.insertBefore(r,t),t=r}if(3===n.nodeType){var r=document.createComment("IE");n.parentNode.insertBefore(r,n.nextSibling),n=r}return[t,n]};LiveRange=function(e,r,o,i){if(11===r.nodeType)o=r.lastChild,r=r.firstChild;else if(!r.parentNode)throw Error("LiveRange start and end must have a parent");o=o||r,this.tag=e;var a=t(r,o);r=this._ensureTag(a[0]),o=this._ensureTag(a[1]);var s=n(r[e][0],!0,o,r,i),l=n(o[e][1],!1,r,o,i);this._insertEntries(r,0,s,[this]),this._insertEntries(o,1,l,[this])};var n=function(e,t,n,r,o){for(var i,a=t?n.parentNode.lastChild:r,s=t?!o:o,l=0,u=a;e.length>=l;l++){for(var c=e[l],d=c&&(t?c._end:c._start);u!==d&&u!==n;)u=u.previousSibling;if(d===n){if(i=l,s)break}else if(u===n){i=l;break}}return i};LiveRange.prototype._ensureTag=function(e){return this.tag in e||(e[this.tag]=[[],[]]),e};var r=function(){var e=document.createElement("DIV"),t=!1;try{e.test=12,delete e.test,t=!0}catch(n){}return t}();LiveRange._cleanNode=function(e,t,n){var o=t[e];!o||o[0].length+o[1].length&&!n||(r?delete t[e]:t.removeAttribute(e))},LiveRange.prototype.destroy=function(e){var t=this;if(e){if(this.visit(function(e,t){e&&(t._start=null,t._end=null)},function(e,n){if(!e)for(var r=n.firstChild;r;r=r.nextSibling)LiveRange._cleanNode(t.tag,r,!0)}),this._removeEntries(this._start,0,this._startIndex),this._removeEntries(this._end,1,0,this._endIndex+1),this._start!==this._end){for(var n=this._start.nextSibling;n!==this._end;n=n.nextSibling)LiveRange._cleanNode(t.tag,n,!0);this._start[t.tag]&&this._removeEntries(this._start,1),this._end[t.tag]&&this._removeEntries(this._end,0)}this._start=this._end=null}else this._removeEntries(this._start,0,this._startIndex,this._startIndex+1),this._removeEntries(this._end,1,this._endIndex,this._endIndex+1),this._start=this._end=null},LiveRange.prototype.firstNode=function(){return this._start},LiveRange.prototype.lastNode=function(){return this._end},LiveRange.prototype.containerNode=function(){return this._start.parentNode},LiveRange.prototype.visit=function(e,t){e=e||function(){},t=t||function(){};var n=this.tag,r=function(o,i,a){for(var s=a||0,l=i.nextSibling,u=o;u&&u!==l;u=u.nextSibling){var c=u[n]&&u[n][0];if(c&&c.length>s){var d=c[s],f=d._start,p=d._end;e(!0,d)!==!1&&r(f,p,s+1),e(!1,d),u=p}else t(!0,u)!==!1&&u.firstChild&&r(u.firstChild,u.lastChild),t(!1,u);s=0}};r(this._start,this._end,this._startIndex+1)},LiveRange.prototype._removeEntries=function(e,t,n,r){var o=e[this.tag][t];n=n||0,r=r||0===r?r:o.length;for(var i=o.splice(n,r-n),a=n;o.length>a;a++)t?o[a]._endIndex=a:o[a]._startIndex=a;return o.length||LiveRange._cleanNode(this.tag,e),i},LiveRange.prototype._insertEntries=function(e,t,n,r){var o=e[this.tag][t];Array.prototype.splice.apply(o,[n,0].concat(r));for(var i=n;o.length>i;i++)t?(o[i]._end=e,o[i]._endIndex=i):(o[i]._start=e,o[i]._startIndex=i)},LiveRange.prototype.replaceContents=function(e){if(!e.firstChild)throw Error("replaceContents requires non-empty fragment");return this.operate(function(t,n){t.parentNode.insertBefore(e,t);for(var r=t.ownerDocument.createDocumentFragment(),o=t;;){var i=o.nextSibling;if(r.appendChild(o),o===n)break;if(o=i,!o)throw Error("LiveRanges must begin and end on siblings in order")}return r})},LiveRange.prototype.operate=function(e){var n=this._start,r=this._end,o=this._removeEntries(n,0,0,this._startIndex+1),i=this._removeEntries(r,1,this._endIndex),a=n.parentNode,s=n.previousSibling,l=r.nextSibling,u=null;u=e(n,r);var c=s?s.nextSibling:a.firstChild,d=l?l.previousSibling:a.lastChild;if(!c||c===l)throw Error("Ranges must contain at least one element");var f=t(c,d);return c=this._ensureTag(f[0]),d=this._ensureTag(f[1]),this._insertEntries(c,0,0,o),this._insertEntries(d,1,d[this.tag][1].length,i),u},LiveRange.transplantTag=function(e,t,n){if(n[e]){t[e]=n[e],n[e]=null;for(var r=t[e][0],o=t[e][1],i=0;r.length>i;i++)r[i]._start=t;for(var i=0;o.length>i;i++)o[i]._end=t}},LiveRange.transplantRange=function(e,t,n){n._ensureTag(e),t!==e&&n._ensureTag(t),n._insertEntries(e,0,0,n._start[n.tag][0].slice(0,n._startIndex+1)),n._insertEntries(t,1,0,n._end[n.tag][1].slice(n._endIndex))},LiveRange.prototype.insertBefore=function(e){var t=e.firstChild;t&&(this._start.parentNode.insertBefore(e,this._start),this._ensureTag(t),this._insertEntries(t,0,0,this._removeEntries(this._start,0,0,this._startIndex)))},LiveRange.prototype.insertAfter=function(e){var t=e.lastChild;t&&(this._end.parentNode.insertBefore(e,this._end.nextSibling),this._ensureTag(t),this._insertEntries(t,1,t[this.tag][1].length,this._removeEntries(this._end,1,this._endIndex+1)))},LiveRange.prototype.extract=function(){if(this._startIndex>0&&this._start[this.tag][0][this._startIndex-1]._end===this._end)return null;var e=this._start.previousSibling,t=this._end.nextSibling,n=this._start.parentNode;this._startIndex>0&&(this._ensureTag(t),this._insertEntries(t,0,0,this._removeEntries(this._start,0,0,this._startIndex))),this._endIndex<this._end[this.tag][1].length-1&&(this._ensureTag(e),this._insertEntries(e,1,e[this.tag][1].length,this._removeEntries(this._end,1,this._endIndex+1)));for(var r,o=document.createDocumentFragment();r=e?e.nextSibling:n.firstChild,r&&r!==t;)o.appendChild(r);return o},LiveRange.prototype.findParent=function(e){var t=o(this.tag,this._end,this._endIndex);return t?t:e?null:LiveRange.findRange(this.tag,this.containerNode())},LiveRange.findRange=function(e,t){var n=o(e,t);return n?n:t.parentNode?LiveRange.findRange(e,t.parentNode):null};var o=function(e,t,n){if(n===void 0&&(n=-1),t[e]&&t[e][1].length>n+1)return t[e][1][n+1];for(var r=t.nextSibling;r;){var n=0,o=r[e]&&r[e][0];if(o&&o.length){var i=o[0];r=i._end,n=i._endIndex+1}if(r[e]&&r[e][1].length>n)return r[e][1][n];r=r.nextSibling}return null}}.call(this),function(){var e,t=[],n=function(){return!1},r=function(){return!0},o=function(e){var t=e.stopPropagation,o=e.preventDefault;e.isPropagationStopped=n,e.isImmediatePropagationStopped=n,e.isDefaultPrevented=n,e.stopPropagation=function(){e.isPropagationStopped=r,t?t.call(e):e.cancelBubble=!0},e.preventDefault=function(){e.isDefaultPrevented=r,o?o.call(e):e.returnValue=!1},e.stopImmediatePropagation=function(){e.stopPropagation(),e.isImmediatePropagationStopped=r};var i=e.type;if(void 0===e.metaKey&&(e.metaKey=e.ctrlKey),/^key/.test(i))null==e.which&&(e.which=null!=e.charCode?e.charCode:e.keyCode);else if(/^(?:mouse|contextmenu)|click/.test(i)&&(!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),!e.which&&void 0!==e.button)){var a=e.button;e.which=1&a?1:2&a?3:4&a?2:0}return e},i=function(e){e=o(e),_.each(t,function(t){t.types[e.type]&&(!t._checkIECompliance||e.currentTarget["_uevents_test_eventtype_"+e.type])&&t.handler.call(null,e)})},a=function(){return e||(e=document.addEventListener?new UniversalEventListener._impl.w3c(i):new UniversalEventListener._impl.ie(i)),e},s={};UniversalEventListener=function(e,n){this.handler=e,this.types={},this.impl=a(),this._checkIECompliance=n,t.push(this)},_.extend(UniversalEventListener.prototype,{addType:function(e){this.types[e]||(this.types[e]=!0,s[e]=(s[e]||0)+1,1===s[e]&&this.impl.addType(e))},removeType:function(e){this.types[e]&&(delete this.types[e],s[e]--,s[e]||this.impl.removeType(e))},installHandler:function(e,t){1===e.nodeType&&(this.impl.installHandler(e,t),this._checkIECompliance&&(e["_uevents_test_eventtype_"+t]=e,e.firstChild&&_.each(e.getElementsByTagName("*"),function(e){e["_uevents_test_eventtype_"+t]=e})))},destroy:function(){var e=this;t=_.without(t,e),_.each(_.keys(e.types),function(t){e.removeType(t)})}})}.call(this),function(){var e=0,t=1,n=2;UniversalEventListener._impl=UniversalEventListener._impl||{},UniversalEventListener._impl.w3c=function(t){this.deliver=t,this.typeCounts={},this.boundHandler=_.bind(this.handler,this),this.boundCapturer=_.bind(this.capturer,this),this.focusBlurMode="onfocusin"in document.createElement("DIV")?e:n,this.simulateMouseEnterLeave=!window.opera},_.extend(UniversalEventListener._impl.w3c.prototype,{addType:function(e){this._listen(this._expandEventType(e))},removeType:function(e){this._unlisten(this._expandEventType(e))},installHandler:function(){},_expandEventType:function(e){var r=[e];return this.focusBlurMode===t?"focus"===e?r.push("focusin"):"blur"===e&&r.push("focusout"):this.focusBlurMode===n&&("focusin"===e?r.push("focus"):"focusout"===e&&r.push("blur")),this.simulateMouseEnterLeave&&("mouseenter"===e?r.push("mouseover"):"mouseleave"===e&&r.push("mouseout")),r},_listen:function(e){var t=this;_.each(e,function(e){1===(t.typeCounts[e]=(t.typeCounts[e]||0)+1)&&document.addEventListener(e,t.boundCapturer,!0)})},_unlisten:function(e){var t=this;_.each(e,function(e){--t.typeCounts[e]||document.removeEventListener(e,t.boundCapturer,!0)})},capturer:function(e){3===e.target.nodeType&&(e.target=e.target.parentNode);var t=e.type,n=e.bubbles,r=e.target;r.addEventListener(t,this.boundHandler,!1);var o;if(n){o=[];for(var i=r.parentNode;i;i=i.parentNode)i.addEventListener(t,this.boundHandler,!1),o.push(i)}setTimeout(function(){r.removeEventListener(t,this.boundHandler,!1),n&&_.each(o,function(e){e.removeEventListener(t,this.boundHandler,!1)})},0)},handler:function(e){var r=function(e,t,n,r,o){var i=document.createEvent("UIEvents");i.initUIEvent(e,n,r,window,o),i.synthetic=!0,t.dispatchEvent(i)};if(e.currentTarget===e.target&&(this.focusBlurMode===t?"focusin"===e.type?r("focus",e.target,!1):"focusout"===e.type&&r("blur",e.target,!1):this.focusBlurMode===n&&("focus"===e.type?r("focusin",e.target,!0):"blur"===e.type&&r("focusout",e.target,!0))),this.focusBlurMode===t){if(("focus"===e.type||"blur"===e.type)&&!e.synthetic)return}else if(this.focusBlurMode===n&&("focusin"===e.type||"focusout"===e.type)&&!e.synthetic)return;(!this.simulateMouseEnterLeave||"mouseenter"!==e.type&&"mouseleave"!==e.type||e.synthetic)&&(this.deliver(e),!this.simulateMouseEnterLeave||e.relatedTarget&&(e.currentTarget===e.relatedTarget||DomUtils.elementContains(e.currentTarget,e.relatedTarget))||("mouseover"===e.type?r("mouseenter",e.currentTarget,!1):"mouseout"===e.type&&r("mouseleave",e.currentTarget,!1)))}})}.call(this),function(){UniversalEventListener._impl=UniversalEventListener._impl||{},UniversalEventListener._impl.ie=function(e){var t=this;this.deliver=e,this.curriedHandler=function(){t.handler.call(this,t)},document.attachEvent("ondatasetcomplete",function(){var e=window.event,t=e&&e.srcElement;e.synthetic&&t&&"FORM"===t.nodeName&&e.returnValue!==!1&&t.submit()})},_.extend(UniversalEventListener._impl.ie.prototype,{addType:function(){},removeType:function(){},installHandler:function(e,t){var n="on"+t;if(1===e.nodeType){this._install(e,n);for(var r=e.getElementsByTagName("*"),o=0,i=r.length;i>o;o++)this._install(r[o],n)}},_install:function(e,t){var n=[t];"onfocus"===t?n.push("onfocusin"):"onblur"===t?n.push("onfocusout"):"onchange"===t?("INPUT"!==e.nodeName||"checkbox"!==e.type&&"radio"!==e.type||(n=["onpropertychange"]),n.push("oncellchange")):"onsubmit"===t&&n.push(e,"ondatasetcomplete");for(var r=0;n.length>r;r++)e[n[r]]=this.curriedHandler},handler:function(e){var t=function(e,t){var n=document.createEventObject();return n.synthetic=!0,t.fireEvent(e,n),n.returnValue},n=window.event,r=n.type,o=n.srcElement||document;if(n.target=o,1===this.nodeType){n.currentTarget=this;var i=this;if(i!==o||n.synthetic||("focusin"===r?t("onfocus",i):"focusout"===r?t("onblur",i):"change"===r?t("oncellchange",i):"propertychange"===r?"checked"===n.propertyName&&t("oncellchange",i):"submit"===r&&t("ondatasetcomplete",i)),("focus"===r||"blur"===n.type||"change"===n.type||"submit"===n.type)&&!n.synthetic)return"submit"===n.type&&(n.returnValue=!1),void 0;"cellchange"===r&&n.synthetic&&(r=n.type="change"),"datasetcomplete"===r&&n.synthetic&&(r=n.type="submit"),e.deliver(n)}}})}.call(this),function(){Spark={},Spark._currentRenderer=function(){var e=null;return{get:function(){return e},withValue:function(t,n){var r=e;e=t;try{return n()}finally{e=r}}}}(),Spark._TAG="_spark_"+Random.id(),Spark._ANNOTATION_NOTIFY="notify",Spark._ANNOTATION_DATA="data",Spark._ANNOTATION_ISOLATE="isolate",Spark._ANNOTATION_EVENTS="events",Spark._ANNOTATION_WATCH="watch",Spark._ANNOTATION_LABEL="label",Spark._ANNOTATION_LANDMARK="landmark",Spark._ANNOTATION_LIST="list",Spark._ANNOTATION_LIST_ITEM="item",Spark._checkIECompliance=!1,Spark._globalPreserves={};var e=function(e,t,n,r){var o=new LiveRange(Spark._TAG,t,n,r);return o.type=e,o},t=function(e,t){for(var n=LiveRange.findRange(Spark._TAG,t);n&&n.type!==e;)n=n.findParent();return n},n=function(e,t){do t=t.findParent();while(t&&t.type!==e);return t},r=function(e,t){for(var n=new LiveRange(Spark._TAG,e,t,!0),r=n;r;r=r.findParent())r.type===Spark._ANNOTATION_WATCH&&r.notify();n.destroy()},o=!1,i=function(e){var t=o;o=!0;try{return e()}finally{o=t}};Spark._Renderer=function(){this.annotations={},this._branchNotes={},this.currentBranch=this.newLabelStack(),this.landmarkRanges=[],this.pc=new l},_.extend(Spark._Renderer.prototype,{annotate:function(t,n,r){if("function"!=typeof r){var o=r;r=function(e){e&&_.extend(e,o)}}var i=(n||"")+":"+Random.id();return this.annotations[i]=function(t,o){if(!t||!n)return r(null),void 0;var i=e(n,t,o);r(i)},"<$"+i+">"+t+"</$"+i+">"},newLabelStack:function(){var e=[this._branchNotes];return{pushLabel:function(t){var n=e[e.length-1],r="_"+t;e.push(n[r]=n[r]||{})},popLabel:function(){e.pop()},getNotes:function(){var t=e[e.length-1];return t},mark:function(t){for(var n=e.length-1;n>=0&&!e[n][t];n--)e[n][t]=!0}}},materialize:function(e){var t=this,n=Spark._currentRenderer.withValue(t,e);n=t.annotate(n);var r,o={},i=function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;if(8===t.nodeType){var r=o[t.nodeValue];if(r===!1)throw Error("Spark HTML fragments may only be used once. Second use in "+DomUtils.fragmentToHtml(e));r&&(o[t.nodeValue]=!1,DomUtils.wrapFragmentForContainer(r,t.parentNode),t.parentNode.replaceChild(r,t))}else 1===t.nodeType&&i(t);t=n}},a=[[]],l=[],u=/<(\/?)\$([^<>]+)>|<|[^<]+/g;u.lastIndex=0;for(var c;c=u.exec(n);){var d=!c[1],f=c[2],p=t.annotations[f];if(p===!1)throw Error("Spark HTML fragments may be used only once. Second use of: "+DomUtils.fragmentToHtml(o[f]));if(p)if(d)l.push(f),a.push([]);else{var h=l.pop();if(h!==f)throw Error("Range mismatch: "+h+" / "+f);var g=DomUtils.htmlToFragment(a.pop().join(""));if(i(g),g.firstChild||g.appendChild(document.createComment("empty")),p(g.firstChild,g.lastChild),t.annotations[f]=!1,!l.length){r=g;break}o[f]=g,a[a.length-1].push("<!--"+f+"-->")}else a[a.length-1].push(c[0])}return s(r,t.landmarkRanges),t.landmarkRanges=[],_.each(t.annotations,function(e){e&&e()}),t.annotations={},_.each(DomUtils.findAll(r,"[value], textarea, select"),function(e){e._sparkOriginalRenderedValue=[DomUtils.getElementValue(e)]}),_.each(DomUtils.findAll(r,"input[type=checkbox], input[type=radio]"),function(e){e._sparkOriginalRenderedChecked=[!!e.checked]}),r}});var a=function(e){return function(){var t=Spark._currentRenderer.get(),n=_.toArray(arguments);return t?(n.push(t),e.apply(null,n)):n.pop()}},s=function(e,t){var o=new LiveRange(Spark._TAG,e),i=!1;o.finalize=function(){i=!0},Deps.afterFlush(function(){if(!i){if(!DomUtils.isInDocument(o.firstNode())){for(var e=o.firstNode();e.parentNode;)e=e.parentNode;if(!e._protect)return Spark.finalize(e),void 0}_.each(t,function(e){e.isPreservedConstant||e.rendered.call(e.landmark)});for(var a=o;a=n(Spark._ANNOTATION_LANDMARK,a);)a.rendered.call(a.landmark);r(o.firstNode(),o.lastNode()),o.destroy()}})};Spark.render=function(e){var t=new Spark._Renderer,n=t.materialize(e);return n};var l=function(){this.roots=[],this.regionPreservations=[]};_.extend(l.prototype,{addRoot:function(e,t,n,r){var o=this;o.roots.push({context:r,preserve:e,fromRange:t,toRange:n})},addConstantRegion:function(e,t){var n=this;n.regionPreservations.push({type:"region",fromStart:e.firstNode(),fromEnd:e.lastNode(),newRange:t})},computePreservations:function(e,t){var n=this,r=_.clone(n.regionPreservations),o=function(e,t,n,r,o){e=e||t.containerNode();var i=DomUtils.findAllClipped(e,r,t.firstNode(),t.lastNode());_.each(i,function(e){var t=n(e);t&&o(e,t)})};_.each(n.roots,function(e){e.fromNodesByLabel={},_.each(e.preserve,function(t,n){e.fromNodesByLabel[n]={},o(e.context,e.fromRange,t,n,function(t,r){e.fromNodesByLabel[n][r]=t})})});var i=new LiveRange(Spark._TAG,t.firstNode(),t.lastNode()),a=document.createDocumentFragment();a.appendChild(document.createComment(""));var s=i.replaceContents(a),l=new LiveRange(Spark._TAG,s);e.insertBefore(s),_.each(n.roots,function(e){_.each(e.preserve,function(t,n){o(e.context,e.toRange,t,n,function(t,o){var i=e.fromNodesByLabel[n][o];i&&(r.push({type:"node",from:i,to:t}),e.fromNodesByLabel[n][o]=null)})})});var u=l.extract();return l.destroy(),i.replaceContents(u),i.destroy(),r}}),Spark.renderToRange=function(e,t){var n=e.firstNode();if(n&&n.parentNode){var r=new Spark._Renderer,o=function(e,t){var n=r.newLabelStack();e.visit(function(e,r){r.type===Spark._ANNOTATION_LABEL?e?n.pushLabel(r.label):n.popLabel():r.type===Spark._ANNOTATION_LANDMARK&&e&&t(r,n.getNotes())})};o(e,function(e,t){t.originalRange=e});var a=DomUtils.findAllClipped(e.containerNode(),"input[type=radio]",e.firstNode(),e.lastNode());_.each(a,function(e){e._currentChecked=[!!e.checked]});var s=r.materialize(t);DomUtils.wrapFragmentForContainer(s,e.containerNode());var l=new LiveRange(Spark._TAG,s),u=r.pc;o(l,function(e,t){t.originalRange&&(e.constant&&u.addConstantRegion(t.originalRange,e),u.addRoot(e.preserve,t.originalRange,e))});for(var c=e;(c=c.findParent())&&c.firstNode().parentNode;)c.type===Spark._ANNOTATION_LANDMARK,c&&u.addRoot(c.preserve,e,l,c.containerNode());u.addRoot(Spark._globalPreserves,e,l);var d=u.computePreservations(e,l);l.destroy();var f={};i(function(){e.operate(function(e,t){Spark.finalize(e,t),Spark._patch(e.parentNode,s,e.previousSibling,t.nextSibling,d,f)})}),_.each(f.regionPreservations,function(e){e.isPreservedConstant=!0})}},Spark.finalize=function(e,t){if(!e.parentNode&&11!==e.nodeType){var n=document.createDocumentFragment();n.appendChild(e),e=n,t=null}var r=new LiveRange(Spark._TAG,e,t);r.visit(function(e,t){e&&t.finalize&&t.finalize()}),r.destroy(!0)},Spark.setDataContext=a(function(e,t,n){return n.annotate(t,Spark._ANNOTATION_DATA,{data:e})}),Spark.getDataContext=function(e){var n=t(Spark._ANNOTATION_DATA,e);return n&&n.data};var u=null,c=function(){return u||(u=new UniversalEventListener(function(e){if(!o){for(var r=[],i=t(Spark._ANNOTATION_EVENTS,e.currentTarget);i;)r.push(i),i=n(Spark._ANNOTATION_EVENTS,i);_.each(r,function(t){t.handler(e)})}},Spark._checkIECompliance)),u};Spark.attachEvents=a(function(e,t,r){var o=c(),i={};_.each(e,function(e,t){"function"==typeof e&&(e=[e]);var n=t.split(/,\s+/);_.each(n,function(t){var n=t.split(/\s+/);if(0!==n.length){var r=n.shift(),o=n.join(" ");i[r]=i[r]||[],_.each(e,function(e){i[r].push({selector:o,callback:e})})}})});var a=_.keys(i),s=function(e){_.each(a,function(t){for(var n=e.firstNode(),r=e.lastNode().nextSibling;n&&n!==r;n=n.nextSibling)o.installHandler(n,t)})};t=r.annotate(t,Spark._ANNOTATION_WATCH,{notify:function(){s(this)}});var l=!1;return t=r.annotate(t,Spark._ANNOTATION_EVENTS,function(e){e&&(_.each(a,function(e){o.addType(e)}),s(e),e.finalize=function(){l=!0},e.handler=function(t){for(var r=i[t.type]||[],o=0;r.length>o;o++){if(l||t.isImmediatePropagationStopped())return;var a=r[o],s=a.callback,u=a.selector;if(u){if(!DomUtils.matchesSelectorClipped(t.currentTarget,e.containerNode(),u,e.firstNode(),e.lastNode()))continue}else if(t.currentTarget!==t.target)continue;var c=Spark.getDataContext(t.currentTarget)||{},d=n(Spark._ANNOTATION_LANDMARK,e),f=d&&d.landmark,p=s.call(c,t,f);p===!1&&(t.stopImmediatePropagation(),t.preventDefault())}})})}),Spark.isolate=function(e){var t=Spark._currentRenderer.get();if(!t)return e();var n,r,o=!0;return Deps.autorun(function(i){o?(r=t.annotate(e(),Spark._ANNOTATION_ISOLATE,function(e){e?(n=e,n.finalize=function(){i.stop()}):i.stop()}),o=!1):Spark.renderToRange(n,e)}),r};var d,f=function(e,t){_.each(t,function(t,n){void 0===t?delete e[n]:e[n]=t})};d="undefined"!=typeof LocalCollection?function(e){return null===e?e:LocalCollection._idStringify(e)}:function(e){return e},Spark.list=function(t,r,o){o=o||function(){return""};var a={},s={};_.each(["addedBefore","removed","movedBefore","changed"],function(e){s[e]=function(){return a[e].apply(null,arguments)}});var l=new OrderedDict(d);_.extend(a,{addedBefore:function(e,t,n){var r=EJSON.clone(t);r._id=e;var o={doc:r,liveRange:null};l.putBefore(e,o,n)}});var u,c=t.observeChanges(s),p=Spark._currentRenderer.get(),h=p?_.bind(p.annotate,p):function(e){return e},g=function(e){return t.getTransform&&t.getTransform()?t.getTransform()(EJSON.clone(e)):e},m="";l.empty()?m=o():l.forEach(function(e){m+=h(r(g(e.doc)),Spark._ANNOTATION_LIST_ITEM,function(t){e.liveRange=t})});var v=!1,y=function(){c.stop(),v=!0};m=h(m,Spark._ANNOTATION_LIST,function(e){e?(u=e,u.finalize=y):y()}),p||y();var b=function(){for(var e=u;e=n(Spark._ANNOTATION_LANDMARK,e);)e.rendered.call(e.landmark)},w=function(e){Deps.afterFlush(function(){v||i(e)})};return _.extend(a,{addedBefore:function(t,n,o){w(function(){var i=EJSON.clone(n);i._id=t;var a=Spark.render(_.bind(r,null,g(i)));DomUtils.wrapFragmentForContainer(a,u.containerNode());var s=e(Spark._ANNOTATION_LIST_ITEM,a);l.empty()?Spark.finalize(u.replaceContents(a)):null===o?l.lastValue().liveRange.insertAfter(a):l.get(o).liveRange.insertBefore(a),l.putBefore(t,{doc:i,liveRange:s},o)})},removed:function(e){w(function(){if(l.first()===l.last()){var t=Spark.render(o);DomUtils.wrapFragmentForContainer(t,u.containerNode()),Spark.finalize(u.replaceContents(t))}else Spark.finalize(l.get(e).liveRange.extract());l.remove(e),b()})},movedBefore:function(e,t){w(function(){var n=l.get(e).liveRange.extract();null===t?l.lastValue().liveRange.insertAfter(n):l.get(t).liveRange.insertBefore(n),l.moveBefore(e,t),b()})},changed:function(e,t){w(function(){var n=l.get(e);if(!n)throw Error("Unknown id for changed: "+e);f(n.doc,t),Spark.renderToRange(n.liveRange,_.bind(r,null,g(n.doc)))})}}),m};var p=1;Spark.Landmark=function(){this.id=p++,this._range=null},_.extend(Spark.Landmark.prototype,{firstNode:function(){return this._range.firstNode()},lastNode:function(){return this._range.lastNode()},find:function(e){var t=this._range;return DomUtils.findClipped(t.containerNode(),e,t.firstNode(),t.lastNode())},findAll:function(e){var t=this._range;return DomUtils.findAllClipped(t.containerNode(),e,t.firstNode(),t.lastNode())},hasDom:function(){return!!this._range}}),Spark.UNIQUE_LABEL=["UNIQUE_LABEL"],Spark.labelBranch=function(e,t){var n=Spark._currentRenderer.get();if(!n||null===e)return t();e===Spark.UNIQUE_LABEL&&(e=Random.id()),n.currentBranch.pushLabel(e);var r=t(),o=n.currentBranch.getNotes().occupied;return n.currentBranch.popLabel(),o?n.annotate(r,Spark._ANNOTATION_LABEL,{label:e}):r},Spark.createLandmark=function(e,t){var n=Spark._currentRenderer.get();if(!n){var r=new Spark.Landmark;e.created&&e.created.call(r);var o=t(r);return e.destroyed&&e.destroyed.call(r),o}var i={};_.isArray(e.preserve)?_.each(e.preserve,function(e){i[e]=!0}):i=e.preserve||{};for(var a in i)"function"!=typeof i[a]&&(i[a]=function(){return!0});n.currentBranch.mark("occupied");var r,s=n.currentBranch.getNotes();if(s.originalRange){if(s.originalRange.superceded)throw Error("Can't create second landmark in same branch");s.originalRange.superceded=!0,r=s.originalRange.landmark}else r=new Spark.Landmark,e.created&&Deps.nonreactive(function(){e.created.call(r)});s.landmark=r;var o=t(r);return n.annotate(o,Spark._ANNOTATION_LANDMARK,function(t){return t?(_.extend(t,{preserve:i,constant:!!e.constant,rendered:e.rendered||function(){},destroyed:e.destroyed||function(){},landmark:r,finalize:function(){this.superceded||(this.landmark._range=null,this.destroyed.call(this.landmark))}}),r._range=t,n.landmarkRanges.push(t),void 0):(e.destroyed&&e.destroyed.call(r),void 0)})},Spark._getEnclosingLandmark=function(e){var n=t(Spark._ANNOTATION_LANDMARK,e);return n?n.landmark:null}}.call(this),function(){Spark._patch=function(e,t,n,r,o,i){var a=function(e,t){LiveRange.transplantTag(Spark._TAG,e,t)},s=new Spark._Patcher(e,t,n,r),l=function(e,t,n,r){for(var o=t?t.nextSibling:e.firstChild;o&&o!==n;o=o.nextSibling)r(o)!==!1&&o.firstChild&&l(o,null,null,r)};i=i||{};var u=i.regionPreservations=i.regionPreservations||[],c=null;return l(t,null,null,function(e){var t=_.find(o,function(t){return"region"===t.type&&t.newRange.firstNode()===e})||_.find(o,function(t){return"node"===t.type&&t.to===e});if(t){var n="region"===t.type?t.fromStart:t.from;if(!c||0>DomUtils.compareElementIndex(c,n))if("region"===t.type)s.match(t.fromStart,t.newRange.firstNode(),a,!0)&&(s.skipToSiblings(t.fromEnd,t.newRange.lastNode()),LiveRange.transplantRange(t.fromStart,t.fromEnd,t.newRange),u.push(t.newRange));else if("node"===t.type&&s.match(n,e,a))return c=n,(n.firstChild||e.firstChild)&&"TEXTAREA"!==n.nodeName&&"SELECT"!==n.nodeName&&Spark._patch(n,e,null,null,o),!1}return!0}),s.finish(),i},Spark._Patcher=function(e,t,n,r){this.tgtParent=e,this.srcParent=t,this.tgtBefore=n,this.tgtAfter=r,this.lastKeptTgtNode=null,this.lastKeptSrcNode=null},Spark._Patcher.prototype.match=function(e,t,n,r){var o=this.lastKeptTgtNode,i=this.lastKeptSrcNode,a=e,s=t;if(!a!=!s)return!1;var l=!o,u=!a;if(!l){for(;!(o.parentNode===this.tgtParent||a&&DomUtils.elementContains(o.parentNode,a));)this._replaceNodes(o,null,i,null),o=o.parentNode,i=i.parentNode;if(this.lastKeptTgtNode=o,this.lastKeptSrcNode=i,!u&&(DomUtils.elementContains(i,s)||i.parentNode!==this.srcParent&&!DomUtils.elementContains(i.parentNode,s)))return!1}if(u)this._replaceNodes(o,null,i,null,this.tgtParent,this.srcParent);else{if(!r&&a.nodeName!==s.nodeName)return!1;for(var c=a.parentNode,d=s.parentNode;c!==(l?this.tgtParent:o.parentNode);c=c.parentNode,d=d.parentNode){if(d===(l?this.srcParent:i.parentNode))return!1;if(c.nodeName!==d.nodeName)return!1}if(d!==(l?this.srcParent:i.parentNode))return!1;for(var f=!0;;){if(f&&r||(1===a.nodeType&&Spark._Patcher._copyAttributes(a,s),n&&n(a,s)),f=!1,(l?this.tgtParent:o.parentNode)===a.parentNode){this._replaceNodes(o,a,i,s);break}this._replaceNodes(null,a,null,s),a=a.parentNode,s=s.parentNode}}return this.lastKeptTgtNode=e,this.lastKeptSrcNode=t,!0},Spark._Patcher.prototype.skipToSiblings=function(e,t){var n=this.lastKeptTgtNode,r=this.lastKeptSrcNode;return n&&n.parentNode===e.parentNode?r&&r.parentNode===t.parentNode?(this.lastKeptTgtNode=e,this.lastKeptSrcNode=t,!0):!1:!1},Spark._Patcher.prototype.finish=function(){return this.match(null,null)},Spark._Patcher.prototype._replaceNodes=function(e,t,n,r,o,i){var a=o||(e||t).parentNode,s=i||(n||r).parentNode;a===this.tgtParent&&(e=e||this.tgtBefore,t=t||this.tgtAfter),s===this.srcParent&&(n=n||this.srcBefore,r=r||this.srcAfter);for(var l;(l=e?e.nextSibling:a.firstChild)&&l!==t;)a.removeChild(l);for(var u;(u=n?n.nextSibling:s.firstChild)&&u!==r;)a.insertBefore(u,t||null)},Spark._Patcher._copyAttributes=function(e,t){var n=t.attributes,r=e.attributes,o=e===document.activeElement;e.style.cssText&&(e.style.cssText="");var i=!1,a=null;if("INPUT"===e.nodeName&&(i="radio"===e.type,i||"checkbox"===e.type)){var s=!!e._sparkOriginalRenderedChecked&&e._sparkOriginalRenderedChecked[0],l=!!t._sparkOriginalRenderedChecked&&t._sparkOriginalRenderedChecked[0],u=e._currentChecked?e._currentChecked[0]:e.checked;s===l?a=u:(a=l,e._sparkOriginalRenderedChecked=[a])}for(var c=r.length-1;c>=0;c--){var d=r[c];if(d.specified){var f=d.name;if(r[f]&&"id"!==f&&"type"!==f&&(!i||"name"!==f)&&"value"!==f&&"src"!==f){var p=e[f];(!p||"object"!=typeof p&&!/^jQuery/.test(f))&&e.removeAttributeNode(d)}}}if(e.mergeAttributes){var h=t._sparkOriginalRenderedValue;t.removeAttribute("_sparkOriginalRenderedValue"),e.mergeAttributes(t),h&&(t._sparkOriginalRenderedValue=h),t.name&&(e.name=t.name)}else for(var c=0,g=n.length;g>c;c++){var m=n.item(c);if(m.specified){var f=m.name.toLowerCase(),v=m.value+"";if("type"===f);else if("checked"===f);else if("style"===f)e.style.cssText=t.style.cssText;else if("class"===f)e.className=t.className;else if("value"===f);else if("src"===f)t.src!==e.src&&(e.src=t.src);else try{e.setAttribute(f,v)}catch(_){throw Error("Error copying attribute '"+f+"': "+_)}}}var y=function(e){return e._sparkOriginalRenderedValue?e._sparkOriginalRenderedValue[0]:null},b=y(t),w=y(e),S=DomUtils.getElementValue(e);if("SELECT"===e.nodeName){for(;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.insertBefore(t.firstChild,null);DomUtils.setElementValue(e,S)}b===w||S!==b&&o||(S!==b&&DomUtils.setElementValue(e,b),e._sparkOriginalRenderedValue=[b]),null!==a&&(e.checked!==a&&(e.checked=a),e.defaultChecked=a,a?e.setAttribute("checked","checked"):e.removeAttribute("checked"))}}.call(this),function(){Meteor.render=function(e){return Spark.render(function(){return Spark.isolate("function"==typeof e?e:function(){return e+""})})},Meteor.renderList=function(e,t,n){return Spark.render(function(){return Spark.list(e,function(e){return Spark.labelBranch(e._id||null,function(){return Spark.isolate(_.bind(t,null,e))})},function(){return n?Spark.isolate(n):""})})}}.call(this),function(){Spark._labelFromIdOrName=function(e){var t=null;if(1===e.nodeType)if(e.getAttribute("id"))t="#"+e.getAttribute("id");else if(e.getAttribute("name"))for(t=e.getAttribute("name"),"INPUT"!==e.nodeName||"radio"!==e.type&&"checkbox"!==e.type||!e.value||(t=t+":"+e.value);e.parentNode&&1===e.parentNode.nodeType;){if(e=e.parentNode,e.id){t="#"+e.id+"/"+t;
break}e.getAttribute("name")&&(t=e.getAttribute("name")+"/"+t)}return t}}.call(this),function(){Meteor._partials={},Meteor._hook_handlebars=function(){Meteor._hook_handlebars=function(){};var e=Handlebars._default_helpers.each;Handlebars._default_helpers.each=function(t,n){return t&&"observeChanges"in t?Spark.list(t,function(e){return Spark.labelBranch(e&&e._id||Spark.UNIQUE_LABEL,function(){var t=Spark.isolate(_.bind(n.fn,null,e));return Spark.setDataContext(e,t)})},function(){return n.inverse?Spark.isolate(n.inverse):""}):e.call(this,t,n)},_.extend(Handlebars._default_helpers,{isolate:function(e){var t=this;return Spark.isolate(function(){return e.fn(t)})},constant:function(e){var t=this;return Spark.createLandmark({constant:!0},function(){return e.fn(t)})}})};var e={},t=function(t){var n=e[t.id]||(e[t.id]={find:function(e){if(!t.hasDom())throw Error("Template not in DOM");return t.find(e)},findAll:function(e){if(!t.hasDom())throw Error("Template not in DOM");return t.findAll(e)}});return n.firstNode=t.hasDom()?t.firstNode():null,n.lastNode=t.hasDom()?t.lastNode():null,n};Meteor._template_decl_methods={_tmpl_data:null,events:function(e){var t=this._tmpl_data.events=this._tmpl_data.events||{};_.each(e,function(e,n){t[n]=t[n]||[],t[n].push(e)})},preserve:function(e){var t=this._tmpl_data.preserve=this._tmpl_data.preserve||{};_.isArray(e)?_.each(e,function(e){t[e]=!0}):_.extend(t,e)},helpers:function(e){var t=this._tmpl_data.helpers=this._tmpl_data.helpers||{};for(var n in e)t[n]=e[n]}},Meteor._def_template=function(n,r){Meteor._hook_handlebars(),window.Template=window.Template||{};var o=function(i){var a=n&&Template[n]||{},s=a._tmpl_data||{},l=Spark.labelBranch("Template."+n,function(){var l=Spark.createLandmark({preserve:s.preserve||{},created:function(){var e=t(this);e.data=i,a.created&&a.created.call(e)},rendered:function(){var e=t(this);e.data=i,a.rendered&&a.rendered.call(e)},destroyed:function(){a.destroyed&&a.destroyed.call(t(this)),delete e[this.id]}},function(){var e=Spark.isolate(function(){return r(i,{helpers:_.extend({},o,s.helpers||{}),partials:Meteor._partials,name:n})}),l=function(e){var n={};return _.each(e,function(e,r){"function"==typeof e&&(e=[e]),n[r]=_.map(e,function(e){return function(n,r){return e.call(this,n,t(r))}})}),n},u=a.events!==Meteor._template_decl_methods.events?a.events:s.events;return a.events&&(e=Spark.attachEvents(l(u),e)),e});return l=Spark.setDataContext(i,l)});return l};if(_.extend(o,Handlebars.helpers),n){if(Template[n])throw Error("There are multiple templates named '"+n+"'. Each template needs a unique name.");Template[n]=o,_.extend(o,Meteor._template_decl_methods),o._tmpl_data={},Meteor._partials[n]=o}return o}}.call(this),function(){var e=[],t="loaded"===document.readyState||"complete"==document.readyState,n=function(){for(t=!0;e.length;)e.shift()()};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("load",n)),Meteor.startup=function(n){var r=!document.addEventListener&&document.documentElement.doScroll;if(r&&window===top){try{r("left")}catch(o){return setTimeout(function(){Meteor.startup(n)},50),void 0}n()}else t?n():e.push(n)}}.call(this),function(){Handlebars={},Handlebars.json_ast_to_func=function(e){return function(t,n){return Handlebars.evaluate(e,t,n)}},Handlebars._default_helpers={"with":function(e,t){return!e||e instanceof Array&&!e.length?t.inverse(this):t.fn(e)},each:function(e,t){var n=this;return e&&e.length>0?_.map(e,function(e){var n=e&&e._id||("string"==typeof e?e:null)||Spark.UNIQUE_LABEL;return Spark.labelBranch(n,function(){return t.fn(e)})}).join(""):Spark.labelBranch("else",function(){return t.inverse(n)})},"if":function(e,t){return!e||e instanceof Array&&!e.length?t.inverse(this):t.fn(this)},unless:function(e,t){return!e||e instanceof Array&&!e.length?t.fn(this):t.inverse(this)}},Handlebars.registerHelper=function(e,t){if(e in Handlebars._default_helpers)throw Error("There is already a helper '"+e+"'");Handlebars._default_helpers[e]=t},Handlebars._escape=function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","&":"&amp;"},t=function(t){return e[t]};return function(e){return e.replace(/[&<>"'`]/g,t)}}(),Handlebars._defaultThis=function(){return this}(),Handlebars.evaluate=function(e,t,n){n=n||{};var r=_.extend({},Handlebars._default_helpers);_.extend(r,n.helpers||{});var o=n.partials||{},i=function(e,t){if("object"!=typeof t)return t;for(var n=0;t[0]>n;n++){if(!e.parent)throw Error("Too many '..' segments");e=e.parent}if(1===t.length)return e.data;var o=!1;""===t[1]&&(t.splice(1,1),o=!0);var i,a=e.data;if(0===t[0]&&r.hasOwnProperty(t[1])&&!o)i=r[t[1]];else{if(!i instanceof Object&&function(){}[t[1]]!==void 0&&!o)throw Error("Can't call a helper '"+t[1]+"' because "+"it is a built-in function property in JavaScript");i=e.data&&e.data[t[1]]}for(var n=2;t.length>n;n++){if("function"==typeof i&&(i=i.call(a),a=i),void 0===i||null===i){i="";break}i=i[t[n]]}return"function"==typeof i?_.bind(i,a):i},a=function(e,t,n,r){n=n||{},t=t.slice(0);var o=t[t.length-1],a={};"object"!=typeof o||o instanceof Array||_.each(t.pop(),function(t,n){var r=i(e,t);a[n]="function"==typeof r?r():r});for(var s=function(t,n){for(var r=t.slice(1),o=0;r.length>o;o++)"function"==typeof r[o]&&(r[o]=r[o]());return n&&r.push(n),t[0].apply(e.data,r)},l=Array(t.length),u=0;t.length>u;u++)l[u]=i(e,t[u]);if("function"!=typeof l[0])return l[0];if(r&&l.length>1){var c=l[1];"function"==typeof c&&(c=s(l.slice(1),{hash:a})),l=[l[0],c],n.hash={}}else n.hash=a;return s(l,n)},s=function(e,t,n){var r,i=[],l=function(e){return"string"==typeof e?e:null===e?"null":void 0===e?"":""+e},u=function(e,t){return function(n){return(n||Handlebars._defaultThis)===(t||Handlebars._defaultThis)?e(n):Spark.setDataContext(n,e(n))}},c=function(e){return e instanceof Handlebars.SafeString?""+e:Handlebars._escape(l(e))},d=function(){return(n?n+".":"")+r},f=function(e,t){return Spark.labelBranch(e+"@"+d(),t)};return _.each(t,function(t,n){if(r=n,"string"==typeof t)i.push(t);else if("{"===t[0])i.push(f(t[1],function(){return c(a(e,t[1]))}));else if("!"===t[0])i.push(f(t[1],function(){return l(a(e,t[1]||""))}));else if("#"===t[0]){var p=d(),h=u(function(n){return s({parent:e,data:n},t[2],p)},e.data);h.fn=h,h.inverse=u(function(n){return s({parent:e,data:n},t[3]||[],p)},e.data);var g=f(t[1],function(){return l(a(e,t[1],h,!0))});i.push(g)}else{if(">"!==t[0])throw Error("bad element in template");var m=t[1];if(!(m in o))throw Error("No such template '"+m+"'");var g=f(m,function(){return l(o[m](e.data))});i.push(g)}}),i.join("")},l=(n.name||"")+"#";return s({data:t,parent:null},e,l)},Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return""+this.string}}.call(this),function(){Meteor.is_client=Meteor.isClient,Meteor.is_server=Meteor.isServer,Meteor.autosubscribe=Deps.autorun,Meteor.flush=Deps.flush,Meteor.autorun=Deps.autorun,Deps.depend=function(e){return e.depend()},Meteor.uuid=function(){for(var e="0123456789abcdef",t=[],n=0;36>n;n++)t[n]=Random.choice(e);t[14]="4",t[19]=e.substr(8|3&parseInt(t[19],16),1),t[8]=t[13]=t[18]=t[23]="-";var r=t.join("");return r}}.call(this),function(){(function(){var e,t=this,n=t.Backbone,r=Array.prototype.slice,o=Array.prototype.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="0.9.2";var i=t._;i||"undefined"==typeof require||(i=require("underscore"));var a=t.jQuery||t.Zepto||t.ender;e.setDomLibrary=function(e){a=e},e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=/\s+/,l=e.Events={on:function(e,t,n){var r,o,i,a,l;if(!t)return this;for(e=e.split(s),r=this._callbacks||(this._callbacks={});o=e.shift();)l=r[o],i=l?l.tail:{},i.next=a={},i.context=n,i.callback=t,r[o]={tail:a,next:l?l.next:i};return this},off:function(e,t,n){var r,o,a,l,u,c;if(o=this._callbacks){if(!(e||t||n))return delete this._callbacks,this;for(e=e?e.split(s):i.keys(o);r=e.shift();)if(a=o[r],delete o[r],a&&(t||n))for(l=a.tail;(a=a.next)!==l;)u=a.callback,c=a.context,(t&&u!==t||n&&c!==n)&&this.on(r,u,c);return this}},trigger:function(e){var t,n,o,i,a,l,u;if(!(o=this._callbacks))return this;for(l=o.all,e=e.split(s),u=r.call(arguments,1);t=e.shift();){if(n=o[t])for(i=n.tail;(n=n.next)!==i;)n.callback.apply(n.context||this,u);if(n=l)for(i=n.tail,a=[t].concat(u);(n=n.next)!==i;)n.callback.apply(n.context||this,a)}return this}};l.bind=l.on,l.unbind=l.off;var u=e.Model=function(e,t){var n;e||(e={}),t&&t.parse&&(e=this.parse(e)),(n=E(this,"defaults"))&&(e=i.extend({},n,e)),t&&t.collection&&(this.collection=t.collection),this.attributes={},this._escapedAttributes={},this.cid=i.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(e,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=i.clone(this.attributes),this.initialize.apply(this,arguments)};i.extend(u.prototype,l,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.get(e);return this._escapedAttributes[e]=i.escape(null==n?"":""+n)},has:function(e){return null!=this.get(e)},set:function(e,t,n){var r,o,a;if(i.isObject(e)||null==e?(r=e,n=t):(r={},r[e]=t),n||(n={}),!r)return this;if(r instanceof u&&(r=r.attributes),n.unset)for(o in r)r[o]=void 0;if(!this._validate(r,n))return!1;this.idAttribute in r&&(this.id=r[this.idAttribute]);var s=n.changes={},l=this.attributes,c=this._escapedAttributes,d=this._previousAttributes||{};for(o in r)a=r[o],(!i.isEqual(l[o],a)||n.unset&&i.has(l,o))&&(delete c[o],(n.silent?this._silent:s)[o]=!0),n.unset?delete l[o]:l[o]=a,i.isEqual(d[o],a)&&i.has(l,o)==i.has(d,o)?(delete this.changed[o],delete this._pending[o]):(this.changed[o]=a,n.silent||(this._pending[o]=!0));return n.silent||this.change(n),this},unset:function(e,t){return(t||(t={})).unset=!0,this.set(e,null,t)},clear:function(e){return(e||(e={})).unset=!0,this.set(i.clone(this.attributes),e)},fetch:function(t){t=t?i.clone(t):{};var n=this,r=t.success;return t.success=function(e,o,i){return n.set(n.parse(e,i),t)?(r&&r(n,e),void 0):!1},t.error=e.wrapError(t.error,n,t),(this.sync||e.sync).call(this,"read",this,t)},save:function(t,n,r){var o,a;if(i.isObject(t)||null==t?(o=t,r=n):(o={},o[t]=n),r=r?i.clone(r):{},r.wait){if(!this._validate(o,r))return!1;a=i.clone(this.attributes)}var s=i.extend({},r,{silent:!0});if(o&&!this.set(o,r.wait?s:r))return!1;var l=this,u=r.success;r.success=function(e,t,n){var a=l.parse(e,n);return r.wait&&(delete r.wait,a=i.extend(o||{},a)),l.set(a,r)?(u?u(l,e):l.trigger("sync",l,e,r),void 0):!1},r.error=e.wrapError(r.error,l,r);var c=this.isNew()?"create":"update",d=(this.sync||e.sync).call(this,c,this,r);return r.wait&&this.set(a,s),d},destroy:function(t){t=t?i.clone(t):{};var n=this,r=t.success,o=function(){n.trigger("destroy",n,n.collection,t)};if(this.isNew())return o(),!1;t.success=function(e){t.wait&&o(),r?r(n,e):n.trigger("sync",n,e,t)},t.error=e.wrapError(t.error,n,t);var a=(this.sync||e.sync).call(this,"delete",this,t);return t.wait||o(),a},url:function(){var e=E(this,"urlRoot")||E(this.collection,"url")||x();return this.isNew()?e:e+("/"==e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(e){e||(e={});var t=this._changing;this._changing=!0;for(var n in this._silent)this._pending[n]=!0;var r=i.extend({},e.changes,this._silent);this._silent={};for(var n in r)this.trigger("change:"+n,this,this.get(n),e);if(t)return this;for(;!i.isEmpty(this._pending);){this._pending={},this.trigger("change",this,e);for(var n in this.changed)this._pending[n]||this._silent[n]||delete this.changed[n];this._previousAttributes=i.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(e){return arguments.length?i.has(this.changed,e):!i.isEmpty(this.changed)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t,n=!1,r=this._previousAttributes;for(var o in e)i.isEqual(r[o],t=e[o])||((n||(n={}))[o]=t);return n},previous:function(e){return arguments.length&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validate(e,t);return n?(t&&t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}});var c=e.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,{silent:!0,parse:t.parse})};i.extend(c.prototype,l,{model:u,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},add:function(e,t){var n,r,a,s,l,u,c={},d={},f=[];for(t||(t={}),e=i.isArray(e)?e.slice():[e],n=0,a=e.length;a>n;n++){if(!(s=e[n]=this._prepareModel(e[n],t)))throw Error("Can't add an invalid model to a collection");l=s.cid,u=s.id,c[l]||this._byCid[l]||null!=u&&(d[u]||this._byId[u])?f.push(n):c[l]=d[u]=s}for(n=f.length;n--;)e.splice(f[n],1);for(n=0,a=e.length;a>n;n++)(s=e[n]).on("all",this._onModelEvent,this),this._byCid[s.cid]=s,null!=s.id&&(this._byId[s.id]=s);if(this.length+=a,r=null!=t.at?t.at:this.models.length,o.apply(this.models,[r,0].concat(e)),this.comparator&&this.sort({silent:!0}),t.silent)return this;for(n=0,a=this.models.length;a>n;n++)c[(s=this.models[n]).cid]&&(t.index=n,s.trigger("add",s,this,t));return this},remove:function(e,t){var n,r,o,a;for(t||(t={}),e=i.isArray(e)?e.slice():[e],n=0,r=e.length;r>n;n++)a=this.getByCid(e[n])||this.get(e[n]),a&&(delete this._byId[a.id],delete this._byCid[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,t.silent||(t.index=o,a.trigger("remove",a,this,t)),this._removeReference(a));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,t),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,i.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(e){return i.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(e||(e={}),!this.comparator)throw Error("Cannot sort a set without a comparator");var t=i.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return i.map(this.models,function(t){return t.get(e)})},reset:function(e,t){e||(e=[]),t||(t={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return this._reset(),this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var n=this,r=t.success;return t.success=function(e,o,i){n[t.add?"add":"reset"](n.parse(e,i),t),r&&r(n,e)},t.error=e.wrapError(t.error,n,t),(this.sync||e.sync).call(this,"read",this,t)},create:function(e,t){var n=this;if(t=t?i.clone(t):{},e=this._prepareModel(e,t),!e)return!1;t.wait||n.add(e,t);var r=t.success;return t.success=function(o,i){t.wait&&n.add(o,t),r?r(o,i):o.trigger("sync",e,i,t)},e.save(null,t),e},parse:function(e){return e},chain:function(){return i(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(t||(t={}),e instanceof u)e.collection||(e.collection=this);else{var n=e;t.collection=this,e=new this.model(n,t),e._validate(e.attributes,t)||(e=!1)}return e},_removeReference:function(e){this==e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!=e&&"remove"!=e||n==this)&&("destroy"==e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments))}});var d=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];i.each(d,function(e){c.prototype[e]=function(){return i[e].apply(i,[this.models].concat(i.toArray(arguments)))}});var f=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},p=/:\w+/g,h=/\*\w+/g,g=/[-[\]{}()+?.,\\^$|#\s]/g;i.extend(f.prototype,l,{initialize:function(){},route:function(t,n,r){return e.history||(e.history=new m),i.isRegExp(t)||(t=this._routeToRegExp(t)),r||(r=this[n]),e.history.route(t,i.bind(function(o){var i=this._extractParameters(t,o);r&&r.apply(this,i),this.trigger.apply(this,["route:"+n].concat(i)),e.history.trigger("route",this,n,i)},this)),this},navigate:function(t,n){e.history.navigate(t,n)},_bindRoutes:function(){if(this.routes){var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;r>n;n++)this.route(e[n][0],e[n][1],this[e[n][1]])}},_routeToRegExp:function(e){return e=e.replace(g,"\\$&").replace(p,"([^/]+)").replace(h,"(.*?)"),RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var m=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl")},v=/^[#\/]/,_=/msie [\w.]+/;m.started=!1,i.extend(m.prototype,l,{interval:50,getHash:function(e){var t=e?e.location:window.location,n=t.href.match(/#(.*)$/);return n?n[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n)}else e=this.getHash();return e.indexOf(this.options.root)||(e=e.substr(this.options.root.length)),e.replace(v,"")},start:function(e){if(m.started)throw Error("Backbone.history has already been started");if("undefined"==typeof window)throw Error("Backbone.History is client-only, can't start on the server");m.started=!0,this.options=i.extend({},{root:"/"},this.options,e),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),n=document.documentMode,r=_.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);r&&(this.iframe=a('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?a(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?a(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var o=window.location,s=o.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(v,""),window.history.replaceState({},document.title,o.protocol+"//"+o.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){a(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),m.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e==this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e==this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!m.started)return!1;t&&t!==!0||(t={trigger:t});var n=(e||"").replace(v,"");this.fragment!=n&&(this._hasPushState?(0!=n.indexOf(this.options.root)&&(n=this.options.root+n),this.fragment=n,window.history[t.replace?"replaceState":"pushState"]({},document.title,n)):this._wantsHashChange?(this.fragment=n,this._updateHash(window.location,n,t.replace),this.iframe&&n!=this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,n,t.replace))):window.location.assign(this.options.root+e),t.trigger&&this.loadUrl(e))},_updateHash:function(e,t,n){n?e.replace((""+e).replace(/(javascript:|#).*$/,"")+"#"+t):e.hash=t}});var y=e.View=function(e){this.cid=i.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName"];i.extend(y.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(e,t,n){var r=document.createElement(e);return t&&a(r).attr(t),n&&a(r).html(n),r},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof a?e:a(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=E(this,"events"))){this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[e[t]]),!n)throw Error('Method "'+e[t]+'" does not exist');var r=t.match(b),o=r[1],a=r[2];n=i.bind(n,this),o+=".delegateEvents"+this.cid,""===a?this.$el.bind(o,n):this.$el.delegate(a,o,n)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=i.extend({},this.options,e));for(var t=0,n=w.length;n>t;t++){var r=w[t];e[r]&&(this[r]=e[r])}this.options=e},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var e=E(this,"attributes")||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.setElement(this.make(this.tagName,e),!1)}}});var S=function(e,t){var n=k(this,e,t);return n.extend=this.extend,n};u.extend=c.extend=f.extend=y.extend=S;var T={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};e.sync=function(t,n,r){var o=T[t];r||(r={});var s={type:o,dataType:"json"};return r.url||(s.url=E(n,"url")||x()),r.data||!n||"create"!=t&&"update"!=t||(s.contentType="application/json",s.data=JSON.stringify(n.toJSON())),e.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),e.emulateHTTP&&("PUT"===o||"DELETE"===o)&&(e.emulateJSON&&(s.data._method=o),s.type="POST",s.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",o)}),"GET"===s.type||e.emulateJSON||(s.processData=!1),a.ajax(i.extend(s,r))},e.wrapError=function(e,t,n){return function(r,o){o=r===t?o:r,e?e(t,o,n):t.trigger("error",t,o,n)}};var M=function(){},k=function(e,t,n){var r;return r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){e.apply(this,arguments)},i.extend(r,e),M.prototype=e.prototype,r.prototype=new M,t&&i.extend(r.prototype,t),n&&i.extend(r,n),r.prototype.constructor=r,r.__super__=e.prototype,r},E=function(e,t){return e&&e[t]?i.isFunction(e[t])?e[t]():e[t]:null},x=function(){throw Error('A "url" property or function must be specified')}}).call(this)}.call(this),function(){var e="input textarea button select option".split(" "),t=_.map(e,function(e){return e.replace(/^.*$/,"$&[id], $&[name]")}).join(", ");Spark._globalPreserves[t]=Spark._labelFromIdOrName}.call(this),function(){window.localStorage||(window.localStorage=function(){if($.browser.msie){var e=document.createElement("span");e.style.behavior='url("#default#userData")',e.id="localstorage-polyfill-helper",e.style.display="none",document.getElementsByTagName("head")[0].appendChild(e);var t="localStorage";return e.load(t),{setItem:function(n,r){e.setAttribute(n,r),e.save(t)},removeItem:function(n){e.removeAttribute(n),e.save(t)},getItem:function(n){return e.load(t),e.getAttribute(n)}}}return Meteor._debug("You are running a browser with no localStorage or userData support. Logging in from one tab will not cause another tab to be logged in."),{_data:{},setItem:function(e,t){this._data[e]=t},removeItem:function(e){delete this._data[e]},getItem:function(e){return this._data[e]}}}())}.call(this),function(){"undefined"==typeof Accounts&&(Accounts={});var e;e=window.location.hash.match(/^\#\/reset-password\/(.*)$/),e&&(Accounts._preventAutoLogin=!0,Accounts._resetPasswordToken=e[1],window.location.hash=""),e=window.location.hash.match(/^\#\/verify-email\/(.*)$/),e&&(Accounts._preventAutoLogin=!0,Accounts._verifyEmailToken=e[1],window.location.hash=""),e=window.location.hash.match(/^\#\/enroll-account\/(.*)$/),e&&(Accounts._preventAutoLogin=!0,Accounts._enrollAccountToken=e[1],window.location.hash="")}.call(this),function(){"undefined"==typeof Accounts&&(Accounts={}),Accounts._options||(Accounts._options={}),Accounts.config=function(e){var t=["sendVerificationEmail","forbidClientAccountCreation"];_.each(_.keys(e),function(e){if(!_.contains(t,e))throw Error("Accounts.config: Invalid key: "+e)}),_.each(t,function(t){if(t in e){if(t in Accounts._options)throw Error("Can't set `"+t+"` more than once");Accounts._options[t]=e[t]}})},Meteor.users=new Meteor.Collection("users",{_preventAutopublish:!0}),Accounts.loginServiceConfiguration=new Meteor.Collection("meteor_accounts_loginServiceConfiguration",{_preventAutopublish:!0}),Accounts.ConfigError=function(e){this.message=e},Accounts.ConfigError.prototype=Error(),Accounts.ConfigError.prototype.name="Accounts.ConfigError",Accounts.LoginCancelledError=function(e){this.message=e},Accounts.LoginCancelledError.numericError=145546287,Accounts.LoginCancelledError.prototype=Error(),Accounts.LoginCancelledError.prototype.name="Accounts.LoginCancelledError"}.call(this),function(){Meteor.userId=function(){return Meteor.default_connection.userId()};var e=!1,t=new Deps.Dependency;Accounts._setLoggingIn=function(n){e!==n&&(e=n,t.changed())},Meteor.loggingIn=function(){return t.depend(),e},Meteor.user=function(){var e=Meteor.userId();return e?Meteor.users.findOne(e):null},Accounts.callLoginMethod=function(e){e=_.extend({methodName:"login",methodArguments:[],_suppressLoggingIn:!1},e),_.each(["validateResult","userCallback"],function(t){e[t]||(e[t]=function(){})});var t=!1,n=function(n,r){Meteor.default_connection.onReconnect=!n&&r&&r.token?function(){t=!0,Accounts.callLoginMethod({methodArguments:[{resume:r.token}],_suppressLoggingIn:!0,userCallback:function(t){t&&Accounts._makeClientLoggedOut(),e.userCallback(t)}})}:null},r=function(n,r){if(!t){if(Accounts._setLoggingIn(!1),n||!r)return n=n||Error("No result from call to "+e.methodName),e.userCallback(n),void 0;try{e.validateResult(r)}catch(o){return e.userCallback(o),void 0}Accounts._makeClientLoggedIn(r.id,r.token),e.userCallback()}};e._suppressLoggingIn||Accounts._setLoggingIn(!0),Meteor.apply(e.methodName,e.methodArguments,{wait:!0,onResultReceived:n},r)},Accounts._makeClientLoggedOut=function(){Accounts._unstoreLoginToken(),Meteor.default_connection.setUserId(null),Meteor.default_connection.onReconnect=null},Accounts._makeClientLoggedIn=function(e,t){Accounts._storeLoginToken(e,t),Meteor.default_connection.setUserId(e)},Meteor.logout=function(e){Meteor.apply("logout",[],{wait:!0},function(t){t?e&&e(t):(Accounts._makeClientLoggedOut(),e&&e())})};var n=Meteor.subscribe("meteor.loginServiceConfiguration");Accounts.loginServicesConfigured=function(){return n.ready()},"undefined"!=typeof Handlebars&&(Handlebars.registerHelper("currentUser",function(){return Meteor.user()}),Handlebars.registerHelper("loggingIn",function(){return Meteor.loggingIn()}))}.call(this),function(){Meteor.loginWithToken=function(e,t){Accounts.callLoginMethod({methodArguments:[{resume:e}],userCallback:t})},Accounts._enableAutoLogin=function(){Accounts._preventAutoLogin=!1,Accounts._pollStoredLoginToken()};var e="Meteor.loginToken",t="Meteor.userId";if(Accounts._isolateLoginTokenForTest=function(){e+=Random.id(),t+=Random.id()},Accounts._storeLoginToken=function(n,r){localStorage.setItem(t,n),localStorage.setItem(e,r),Accounts._lastLoginTokenWhenPolled=r},Accounts._unstoreLoginToken=function(){localStorage.removeItem(t),localStorage.removeItem(e),Accounts._lastLoginTokenWhenPolled=null},Accounts._storedLoginToken=function(){return localStorage.getItem(e)},Accounts._storedUserId=function(){return localStorage.getItem(t)},!Accounts._preventAutoLogin){var n=Accounts._storedLoginToken();if(n){var r=Accounts._storedUserId();r&&Meteor.default_connection.setUserId(r),Meteor.loginWithToken(n,function(e){e&&(Meteor._debug("Error logging in with token: "+e),Accounts._makeClientLoggedOut())})}}Accounts._lastLoginTokenWhenPolled=n,Accounts._pollStoredLoginToken=function(){if(!Accounts._preventAutoLogin){var e=Accounts._storedLoginToken();Accounts._lastLoginTokenWhenPolled!=e&&(e?Meteor.loginWithToken(e):Meteor.logout()),Accounts._lastLoginTokenWhenPolled=e}},setInterval(Accounts._pollStoredLoginToken,3e3)}.call(this),function(){Meteor._srp===void 0&&(Meteor._srp={}),Meteor._srp.BigInteger=function(){function e(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function t(){return new e(null)}function n(e,t,n,r,o,i){for(var a=16383&t,s=t>>14;--i>=0;){var l=16383&this[e],u=this[e++]>>14,c=s*l+u*a;l=a*l+((16383&c)<<14)+n[r]+o,o=(l>>28)+(c>>14)+s*u,n[r++]=268435455&l}return o}function r(e){return Zt.charAt(e)}function o(e,t){var n=en[e.charCodeAt(t)];return null==n?-1:n}function i(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function a(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+DV:this.t=0}function s(e){var n=t();return n.fromInt(e),n}function l(t,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return this.fromRadix(t,n),void 0;r=2}this.t=0,this.s=0;for(var i=t.length,a=!1,s=0;--i>=0;){var l=8==r?255&t[i]:o(t,i);0>l?"-"==t.charAt(i)&&(a=!0):(a=!1,0==s?this[this.t++]=l:s+r>this.DB?(this[this.t-1]|=(l&(1<<this.DB-s)-1)<<s,this[this.t++]=l>>this.DB-s):this[this.t-1]|=l<<s,s+=r,s>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),a&&e.ZERO.subTo(this,this)}function u(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function c(e){if(0>this.s)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,o=(1<<t)-1,i=!1,a="",s=this.t,l=this.DB-s*this.DB%t;if(s-->0)for(this.DB>l&&(n=this[s]>>l)>0&&(i=!0,a=r(n));s>=0;)t>l?(n=(this[s]&(1<<l)-1)<<t-l,n|=this[--s]>>(l+=this.DB-t)):(n=this[s]>>(l-=t)&o,0>=l&&(l+=this.DB,--s)),n>0&&(i=!0),i&&(a+=r(n));return i?a:"0"}function d(){var n=t();return e.ZERO.subTo(this,n),n}function f(){return 0>this.s?this.negate():this}function p(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function h(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function g(){return 0>=this.t?0:this.DB*(this.t-1)+h(this[this.t-1]^this.s&this.DM)}function m(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function v(e,t){for(var n=e;this.t>n;++n)t[n-e]=this[n];
t.t=Math.max(this.t-e,0),t.s=this.s}function _(e,t){var n,r=e%this.DB,o=this.DB-r,i=(1<<o)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>o|s,s=(this[n]&i)<<r;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function y(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return t.t=0,void 0;var r=e%this.DB,o=this.DB-r,i=(1<<r)-1;t[0]=this[n]>>r;for(var a=n+1;this.t>a;++a)t[a-n-1]|=(this[a]&i)<<o,t[a-n]=this[a]>>r;r>0&&(t[this.t-n-1]|=(this.s&i)<<o),t.t=this.t-n,t.clamp()}function b(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);o>n;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;this.t>n;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;e.t>n;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=0>r?-1:0,-1>r?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()}function w(t,n){var r=this.abs(),o=t.abs(),i=r.t;for(n.t=i+o.t;--i>=0;)n[i]=0;for(i=0;o.t>i;++i)n[i+r.t]=r.am(0,o[i],n,i,0,r.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)}function S(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;t.t-1>n;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function T(n,r,o){var i=n.abs();if(!(0>=i.t)){var a=this.abs();if(a.t<i.t)return null!=r&&r.fromInt(0),null!=o&&this.copyTo(o),void 0;null==o&&(o=t());var s=t(),l=this.s,u=n.s,c=this.DB-h(i[i.t-1]);c>0?(i.lShiftTo(c,s),a.lShiftTo(c,o)):(i.copyTo(s),a.copyTo(o));var d=s.t,f=s[d-1];if(0!=f){var p=f*(1<<this.F1)+(d>1?s[d-2]>>this.F2:0),g=this.FV/p,m=(1<<this.F1)/p,v=1<<this.F2,_=o.t,y=_-d,b=null==r?t():r;for(s.dlShiftTo(y,b),o.compareTo(b)>=0&&(o[o.t++]=1,o.subTo(b,o)),e.ONE.dlShiftTo(d,b),b.subTo(s,s);d>s.t;)s[s.t++]=0;for(;--y>=0;){var w=o[--_]==f?this.DM:Math.floor(o[_]*g+(o[_-1]+v)*m);if(w>(o[_]+=s.am(0,w,o,y,0,d)))for(s.dlShiftTo(y,b),o.subTo(b,o);o[_]<--w;)o.subTo(b,o)}null!=r&&(o.drShiftTo(d,r),l!=u&&e.ZERO.subTo(r,r)),o.t=d,o.clamp(),c>0&&o.rShiftTo(c,o),0>l&&e.ZERO.subTo(o,o)}}}function M(n){var r=t();return this.abs().divRemTo(n,null,r),0>this.s&&r.compareTo(e.ZERO)>0&&n.subTo(r,r),r}function k(e){this.m=e}function E(e){return 0>e.s||e.compareTo(this.m)>=0?e.mod(this.m):e}function x(e){return e}function C(e){e.divRemTo(this.m,null,e)}function A(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function N(e,t){e.squareTo(t),this.reduce(t)}function O(){if(1>this.t)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=15&t*(2-(15&e)*t),t=255&t*(2-(255&e)*t),t=65535&t*(2-(65535&(65535&e)*t)),t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function D(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function I(n){var r=t();return n.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),0>n.s&&r.compareTo(e.ZERO)>0&&this.m.subTo(r,r),r}function L(e){var n=t();return e.copyTo(n),this.reduce(n),n}function R(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;this.m.t>t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function P(e,t){e.squareTo(t),this.reduce(t)}function B(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function F(){return 0==(this.t>0?1&this[0]:this.s)}function j(n,r){if(n>4294967295||1>n)return e.ONE;var o=t(),i=t(),a=r.convert(this),s=h(n)-1;for(a.copyTo(o);--s>=0;)if(r.sqrTo(o,i),(n&1<<s)>0)r.mulTo(i,a,o);else{var l=o;o=i,i=l}return r.revert(o)}function H(e,t){var n;return n=256>e||t.isEven()?new k(t):new D(t),this.exp(e,n)}function U(){var e=t();return this.copyTo(e),e}function q(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function $(){return 0==this.t?this.s:this[0]<<24>>24}function V(){return 0==this.t?this.s:this[0]<<16>>16}function z(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function W(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1}function J(e){if(null==e&&(e=10),0==this.signum()||2>e||e>36)return"0";var n=this.chunkSize(e),r=Math.pow(e,n),o=s(r),i=t(),a=t(),l="";for(this.divRemTo(o,i,a);i.signum()>0;)l=(r+a.intValue()).toString(e).substr(1)+l,i.divRemTo(o,i,a);return a.intValue().toString(e)+l}function G(t,n){this.fromInt(0),null==n&&(n=10);for(var r=this.chunkSize(n),i=Math.pow(n,r),a=!1,s=0,l=0,u=0;t.length>u;++u){var c=o(t,u);0>c?"-"==t.charAt(u)&&0==this.signum()&&(a=!0):(l=n*l+c,++s>=r&&(this.dMultiply(i),this.dAddOffset(l,0),s=0,l=0))}s>0&&(this.dMultiply(Math.pow(n,s)),this.dAddOffset(l,0)),a&&e.ZERO.subTo(this,this)}function X(t,n,r){if("number"==typeof n)if(2>t)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),rt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var o=[],i=7&t;o.length=(t>>3)+1,n.nextBytes(o),i>0?o[0]&=(1<<i)-1:o[0]=0,this.fromString(o,256)}}function Y(){var e=this.t,t=[];t[0]=this.s;var n,r=this.DB-e*this.DB%8,o=0;if(e-->0)for(this.DB>r&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[o++]=n|this.s<<this.DB-r);e>=0;)8>r?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=255&this[e]>>(r-=8),0>=r&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==o&&(128&this.s)!=(128&n)&&++o,(o>0||n!=this.s)&&(t[o++]=n);return t}function K(e){return 0==this.compareTo(e)}function Q(e){return 0>this.compareTo(e)?this:e}function Z(e){return this.compareTo(e)>0?this:e}function et(e,t,n){var r,o,i=Math.min(e.t,this.t);for(r=0;i>r;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(o=e.s&this.DM,r=i;this.t>r;++r)n[r]=t(this[r],o);n.t=this.t}else{for(o=this.s&this.DM,r=i;e.t>r;++r)n[r]=t(o,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function tt(e,t){return e&t}function nt(e){var n=t();return this.bitwiseTo(e,tt,n),n}function rt(e,t){return e|t}function ot(e){var n=t();return this.bitwiseTo(e,rt,n),n}function it(e,t){return e^t}function at(e){var n=t();return this.bitwiseTo(e,it,n),n}function st(e,t){return e&~t}function lt(e){var n=t();return this.bitwiseTo(e,st,n),n}function ut(){for(var e=t(),n=0;this.t>n;++n)e[n]=this.DM&~this[n];return e.t=this.t,e.s=~this.s,e}function ct(e){var n=t();return 0>e?this.rShiftTo(-e,n):this.lShiftTo(e,n),n}function dt(e){var n=t();return 0>e?this.lShiftTo(-e,n):this.rShiftTo(e,n),n}function ft(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function pt(){for(var e=0;this.t>e;++e)if(0!=this[e])return e*this.DB+ft(this[e]);return 0>this.s?this.t*this.DB:-1}function ht(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function gt(){for(var e=0,t=this.s&this.DM,n=0;this.t>n;++n)e+=ht(this[n]^t);return e}function mt(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function vt(t,n){var r=e.ONE.shiftLeft(t);return this.bitwiseTo(r,n,r),r}function _t(e){return this.changeBit(e,rt)}function yt(e){return this.changeBit(e,st)}function bt(e){return this.changeBit(e,it)}function wt(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);o>n;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;this.t>n;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;e.t>n;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=0>r?-1:0,r>0?t[n++]=r:-1>r&&(t[n++]=this.DV+r),t.t=n,t.clamp()}function St(e){var n=t();return this.addTo(e,n),n}function Tt(e){var n=t();return this.subTo(e,n),n}function Mt(e){var n=t();return this.multiplyTo(e,n),n}function kt(e){var n=t();return this.divRemTo(e,n,null),n}function Et(e){var n=t();return this.divRemTo(e,null,n),n}function xt(e){var n=t(),r=t();return this.divRemTo(e,n,r),[n,r]}function Ct(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function At(e,t){for(;t>=this.t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}function Nt(){}function Ot(e){return e}function Dt(e,t,n){e.multiplyTo(t,n)}function It(e,t){e.squareTo(t)}function Lt(e){return this.exp(e,new Nt)}function Rt(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n[--r]=0;var o;for(o=n.t-this.t;o>r;++r)n[r+this.t]=this.am(0,e[r],n,r,0,this.t);for(o=Math.min(e.t,t);o>r;++r)this.am(0,e[r],n,r,0,t-r);n.clamp()}function Pt(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);e.t>r;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function Bt(n){this.r2=t(),this.q3=t(),e.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n),this.m=n}function Ft(e){if(0>e.s||e.t>2*this.m.t)return e.mod(this.m);if(0>e.compareTo(this.m))return e;var n=t();return e.copyTo(n),this.reduce(n),n}function jt(e){return e}function Ht(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>e.compareTo(this.r2);)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Ut(e,t){e.squareTo(t),this.reduce(t)}function qt(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function $t(e,n){var r,o,i=e.bitLength(),a=s(1);if(0>=i)return a;r=18>i?1:48>i?3:144>i?4:768>i?5:6,o=8>i?new k(n):n.isEven()?new Bt(n):new D(n);var l=[],u=3,c=r-1,d=(1<<r)-1;if(l[1]=o.convert(this),r>1){var f=t();for(o.sqrTo(l[1],f);d>=u;)l[u]=t(),o.mulTo(f,l[u-2],l[u]),u+=2}var p,g,m=e.t-1,v=!0,_=t();for(i=h(e[m])-1;m>=0;){for(i>=c?p=e[m]>>i-c&d:(p=(e[m]&(1<<i+1)-1)<<c-i,m>0&&(p|=e[m-1]>>this.DB+i-c)),u=r;0==(1&p);)p>>=1,--u;if(0>(i-=u)&&(i+=this.DB,--m),v)l[p].copyTo(a),v=!1;else{for(;u>1;)o.sqrTo(a,_),o.sqrTo(_,a),u-=2;u>0?o.sqrTo(a,_):(g=a,a=_,_=g),o.mulTo(_,l[p],a)}for(;m>=0&&0==(e[m]&1<<i);)o.sqrTo(a,_),g=a,a=_,_=g,0>--i&&(i=this.DB-1,--m)}return o.revert(a)}function Vt(e){var t=0>this.s?this.negate():this.clone(),n=0>e.s?e.negate():e.clone();if(0>t.compareTo(n)){var r=t;t=n,n=r}var o=t.getLowestSetBit(),i=n.getLowestSetBit();if(0>i)return t;for(i>o&&(i=o),i>0&&(t.rShiftTo(i,t),n.rShiftTo(i,n));t.signum()>0;)(o=t.getLowestSetBit())>0&&t.rShiftTo(o,t),(o=n.getLowestSetBit())>0&&n.rShiftTo(o,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return i>0&&n.lShiftTo(i,n),n}function zt(e){if(0>=e)return 0;var t=this.DV%e,n=0>this.s?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n}function Wt(t){var n=t.isEven();if(this.isEven()&&n||0==t.signum())return e.ZERO;for(var r=t.clone(),o=this.clone(),i=s(1),a=s(0),l=s(0),u=s(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),n?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(t,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;o.isEven();)o.rShiftTo(1,o),n?(l.isEven()&&u.isEven()||(l.addTo(this,l),u.subTo(t,u)),l.rShiftTo(1,l)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(o)>=0?(r.subTo(o,r),n&&i.subTo(l,i),a.subTo(u,a)):(o.subTo(r,o),n&&l.subTo(i,l),u.subTo(a,u))}return 0!=o.compareTo(e.ONE)?e.ZERO:u.compareTo(t)>=0?u.subtract(t):0>u.signum()?(u.addTo(t,u),0>u.signum()?u.add(t):u):u}function Jt(e){var t,n=this.abs();if(1==n.t&&n[0]<=tn[tn.length-1]){for(t=0;tn.length>t;++t)if(n[0]==tn[t])return!0;return!1}if(n.isEven())return!1;for(t=1;tn.length>t;){for(var r=tn[t],o=t+1;tn.length>o&&nn>r;)r*=tn[o++];for(r=n.modInt(r);o>t;)if(0==r%tn[t++])return!1}return n.millerRabin(e)}function Gt(n){var r=this.subtract(e.ONE),o=r.getLowestSetBit();if(0>=o)return!1;var i=r.shiftRight(o);n=n+1>>1,n>tn.length&&(n=tn.length);for(var a=t(),s=0;n>s;++s){a.fromInt(tn[s]);var l=a.modPow(i,this);if(0!=l.compareTo(e.ONE)&&0!=l.compareTo(r)){for(var u=1;o>u++&&0!=l.compareTo(r);)if(l=l.modPowInt(2,this),0==l.compareTo(e.ONE))return!1;if(0!=l.compareTo(r))return!1}}return!0}var Xt;e.prototype.am=n,Xt=28,e.prototype.DB=Xt,e.prototype.DM=(1<<Xt)-1,e.prototype.DV=1<<Xt;var Yt=52;e.prototype.FV=Math.pow(2,Yt),e.prototype.F1=Yt-Xt,e.prototype.F2=2*Xt-Yt;var Kt,Qt,Zt="0123456789abcdefghijklmnopqrstuvwxyz",en=[];for(Kt="0".charCodeAt(0),Qt=0;9>=Qt;++Qt)en[Kt++]=Qt;for(Kt="a".charCodeAt(0),Qt=10;36>Qt;++Qt)en[Kt++]=Qt;for(Kt="A".charCodeAt(0),Qt=10;36>Qt;++Qt)en[Kt++]=Qt;k.prototype.convert=E,k.prototype.revert=x,k.prototype.reduce=C,k.prototype.mulTo=A,k.prototype.sqrTo=N,D.prototype.convert=I,D.prototype.revert=L,D.prototype.reduce=R,D.prototype.mulTo=B,D.prototype.sqrTo=P,e.prototype.copyTo=i,e.prototype.fromInt=a,e.prototype.fromString=l,e.prototype.clamp=u,e.prototype.dlShiftTo=m,e.prototype.drShiftTo=v,e.prototype.lShiftTo=_,e.prototype.rShiftTo=y,e.prototype.subTo=b,e.prototype.multiplyTo=w,e.prototype.squareTo=S,e.prototype.divRemTo=T,e.prototype.invDigit=O,e.prototype.isEven=F,e.prototype.exp=j,e.prototype.toString=c,e.prototype.negate=d,e.prototype.abs=f,e.prototype.compareTo=p,e.prototype.bitLength=g,e.prototype.mod=M,e.prototype.modPowInt=H,e.ZERO=s(0),e.ONE=s(1),Nt.prototype.convert=Ot,Nt.prototype.revert=Ot,Nt.prototype.mulTo=Dt,Nt.prototype.sqrTo=It,Bt.prototype.convert=Ft,Bt.prototype.revert=jt,Bt.prototype.reduce=Ht,Bt.prototype.mulTo=qt,Bt.prototype.sqrTo=Ut;var tn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],nn=(1<<26)/tn[tn.length-1];return e.prototype.chunkSize=z,e.prototype.toRadix=J,e.prototype.fromRadix=G,e.prototype.fromNumber=X,e.prototype.bitwiseTo=et,e.prototype.changeBit=vt,e.prototype.addTo=wt,e.prototype.dMultiply=Ct,e.prototype.dAddOffset=At,e.prototype.multiplyLowerTo=Rt,e.prototype.multiplyUpperTo=Pt,e.prototype.modInt=zt,e.prototype.millerRabin=Gt,e.prototype.clone=U,e.prototype.intValue=q,e.prototype.byteValue=$,e.prototype.shortValue=V,e.prototype.signum=W,e.prototype.toByteArray=Y,e.prototype.equals=K,e.prototype.min=Q,e.prototype.max=Z,e.prototype.and=nt,e.prototype.or=ot,e.prototype.xor=at,e.prototype.andNot=lt,e.prototype.not=ut,e.prototype.shiftLeft=ct,e.prototype.shiftRight=dt,e.prototype.getLowestSetBit=pt,e.prototype.bitCount=gt,e.prototype.testBit=mt,e.prototype.setBit=_t,e.prototype.clearBit=yt,e.prototype.flipBit=bt,e.prototype.add=St,e.prototype.subtract=Tt,e.prototype.multiply=Mt,e.prototype.divide=kt,e.prototype.remainder=Et,e.prototype.divideAndRemainder=xt,e.prototype.modPow=$t,e.prototype.modInverse=Wt,e.prototype.pow=Lt,e.prototype.gcd=Vt,e.prototype.isProbablePrime=Jt,e}()}.call(this),function(){Meteor._srp===void 0&&(Meteor._srp={}),Meteor._srp.SHA256=function(){function e(e){function t(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function n(e,t){return e>>>t|e<<32-t}function r(e,t){return e>>>t}function o(e,t,n){return e&t^~e&n}function i(e,t,n){return e&t^e&n^t&n}function a(e){return n(e,2)^n(e,13)^n(e,22)}function s(e){return n(e,6)^n(e,11)^n(e,25)}function l(e){return n(e,7)^n(e,18)^r(e,3)}function u(e){return n(e,17)^n(e,19)^r(e,10)}function c(e,n){var r,c,d,f,p,h,g,m,v,_,y,b,w=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],S=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],T=Array(64);e[n>>5]|=128<<24-n%32,e[(n+64>>9<<4)+15]=n;for(var v=0;e.length>v;v+=16){r=S[0],c=S[1],d=S[2],f=S[3],p=S[4],h=S[5],g=S[6],m=S[7];for(var _=0;64>_;_++)T[_]=16>_?e[_+v]:t(t(t(u(T[_-2]),T[_-7]),l(T[_-15])),T[_-16]),y=t(t(t(t(m,s(p)),o(p,h,g)),w[_]),T[_]),b=t(a(r),i(r,c,d)),m=g,g=h,h=p,p=t(f,y),f=d,d=c,c=r,r=t(y,b);S[0]=t(r,S[0]),S[1]=t(c,S[1]),S[2]=t(d,S[2]),S[3]=t(f,S[3]),S[4]=t(p,S[4]),S[5]=t(h,S[5]),S[6]=t(g,S[6]),S[7]=t(m,S[7])}return S}function d(e){for(var t=[],n=(1<<h)-1,r=0;e.length*h>r;r+=h)t[r>>5]|=(e.charCodeAt(r/h)&n)<<24-r%32;return t}function f(e){for(var t="",n=0;e.length>n;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(192|r>>6),t+=String.fromCharCode(128|63&r)):(t+=String.fromCharCode(224|r>>12),t+=String.fromCharCode(128|63&r>>6),t+=String.fromCharCode(128|63&r))}return t}function p(e){for(var t=g?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;4*e.length>r;r++)n+=t.charAt(15&e[r>>2]>>8*(3-r%4)+4)+t.charAt(15&e[r>>2]>>8*(3-r%4));return n}var h=8,g=0;return e=f(e),p(c(d(e),e.length*h))}return e}()}.call(this),function(){Meteor._srp===void 0&&(Meteor._srp={}),Meteor._srp.generateVerifier=function(t,n){var r=e(n),o=n&&n.identity||Random.id(),i=n&&n.salt||Random.id(),a=r.hash(i+r.hash(o+":"+t)),s=new Meteor._srp.BigInteger(a,16),l=r.g.modPow(s,r.N);return{identity:o,salt:i,verifier:l.toString(16)}},Meteor._srp.Client=function(n,r){var o=this;o.params=e(r),o.password=n;var i,a,s=o.params.N,l=o.params.g;if(r&&r.a){if("string"==typeof r.a)i=new Meteor._srp.BigInteger(r.a,16);else{if(!(r.a instanceof Meteor._srp.BigInteger))throw Error("Invalid parameter: a");i=r.a}if(a=l.modPow(i,s),0===a.mod(s))throw Error("Invalid parameter: a: A mod N == 0.")}else for(;!a||0===a.mod(s);)i=t(),a=l.modPow(i,s);o.a=i,o.A=a,o.Astr=a.toString(16)},Meteor._srp.Client.prototype.startExchange=function(){var e=this;return{A:e.Astr}},Meteor._srp.Client.prototype.respondToChallenge=function(e){var t=this,n=t.params.N,r=t.params.g,o=t.params.k,i=t.params.hash;if(t.identity=e.identity,t.salt=e.salt,t.Bstr=e.B,t.B=new Meteor._srp.BigInteger(t.Bstr,16),0===t.B.mod(n))throw Error("Server sent invalid key: B mod N == 0.");var a=new Meteor._srp.BigInteger(i(t.Astr+t.Bstr),16),s=new Meteor._srp.BigInteger(i(t.salt+i(t.identity+":"+t.password)),16),l=o.multiply(r.modPow(s,n)),u=t.a.add(a.multiply(s)),c=t.B.subtract(l).modPow(u,n),d=i(t.Astr+t.Bstr+c.toString(16)),f=i(t.Astr+d+c.toString(16));return t.S=c,t.HAMK=f,{M:d}},Meteor._srp.Client.prototype.verifyConfirmation=function(e){var t=this;return t.HAMK&&e.HAMK===t.HAMK},Meteor._srp.Server=function(n,r){var o=this;o.params=e(r),o.verifier=n;var i,a,s=o.params.N,l=o.params.g,u=o.params.k,c=new Meteor._srp.BigInteger(o.verifier.verifier,16);if(r&&r.b){if("string"==typeof r.b)i=new Meteor._srp.BigInteger(r.b,16);else{if(!(r.b instanceof Meteor._srp.BigInteger))throw Error("Invalid parameter: b");i=r.b}if(a=u.multiply(c).add(l.modPow(i,s)).mod(s),0===a.mod(s))throw Error("Invalid parameter: b: B mod N == 0.")}else for(;!a||0===a.mod(s);)i=t(),a=u.multiply(c).add(l.modPow(i,s)).mod(s);o.b=i,o.B=a,o.Bstr=a.toString(16)},Meteor._srp.Server.prototype.issueChallenge=function(e){var t=this;if(t.Astr=e.A,t.A=new Meteor._srp.BigInteger(t.Astr,16),0===t.A.mod(t.params.N))throw Error("Client sent invalid key: A mod N == 0.");var n=t.params.N,r=t.params.hash,o=new Meteor._srp.BigInteger(r(t.Astr+t.Bstr),16),i=new Meteor._srp.BigInteger(t.verifier.verifier,16),a=t.A.multiply(i.modPow(o,n));return t.S=a.modPow(t.b,n),t.M=r(t.Astr+t.Bstr+t.S.toString(16)),t.HAMK=r(t.Astr+t.M+t.S.toString(16)),{identity:t.verifier.identity,salt:t.verifier.salt,B:t.Bstr}},Meteor._srp.Server.prototype.verifyResponse=function(e){var t=this;return e.M!==t.M?null:{HAMK:t.HAMK}},Meteor._srp._defaults={hash:function(e){return Meteor._srp.SHA256(e).toLowerCase()},N:new Meteor._srp.BigInteger("EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",16),g:new Meteor._srp.BigInteger("2")},Meteor._srp._defaults.k=new Meteor._srp.BigInteger(Meteor._srp._defaults.hash(Meteor._srp._defaults.N.toString(16)+Meteor._srp._defaults.g.toString(16)),16);var e=function(e){if(!e)return Meteor._srp._defaults;var t=_.extend({},Meteor._srp._defaults);return _.each(["N","g","k"],function(n){if(e[n])if("string"==typeof e[n])t[n]=new Meteor._srp.BigInteger(e[n],16);else{if(!(e[n]instanceof Meteor._srp.BigInteger))throw Error("Invalid parameter: "+n);t[n]=e[n]}}),e.hash&&(t.hash=function(t){return e.hash(t).toLowerCase()}),!e.k&&(e.N||e.g||e.hash)&&(t.k=t.hash(t.N.toString(16)+t.g.toString(16))),t},t=function(){return new Meteor._srp.BigInteger(Random.hexString(36),16)}}.call(this),function(){Meteor.loginWithPassword=function(e,t,n){var r=new Meteor._srp.Client(t),o=r.startExchange();"string"==typeof e&&(e=-1===e.indexOf("@")?{username:e}:{email:e}),o.user=e,Accounts._setLoggingIn(!0),Meteor.apply("beginPasswordExchange",[o],function(e,t){if(e||!t)return Accounts._setLoggingIn(!1),e=e||Error("No result from call to beginPasswordExchange"),n&&n(e),void 0;var o=r.respondToChallenge(t);Accounts.callLoginMethod({methodArguments:[{srp:o}],validateResult:function(e){if(!r.verifyConfirmation({HAMK:e.HAMK}))throw Error("Server is cheating!")},userCallback:n})})},Accounts.createUser=function(e,t){if(e=_.clone(e),!e.password)throw Error("Must set options.password");var n=Meteor._srp.generateVerifier(e.password);delete e.password,e.srp=n,Accounts.callLoginMethod({methodName:"createUser",methodArguments:[e],userCallback:t})},Accounts.changePassword=function(e,t,n){if(!Meteor.user())return n&&n(Error("Must be logged in to change password.")),void 0;var r=Meteor._srp.generateVerifier(t);if(e){var o=new Meteor._srp.Client(e),i=o.startExchange();i.user={id:Meteor.user()._id},Meteor.apply("beginPasswordExchange",[i],function(e,t){if(e||!t)return n&&n(e||Error("No result from call to beginPasswordExchange")),void 0;var i=o.respondToChallenge(t);i.srp=r,Meteor.apply("changePassword",[i],function(e,t){e||!t?n&&n(e||Error("No result from changePassword.")):o.verifyConfirmation(t)?n&&n():n&&n(Error("Old password verification failed."))})})}else Meteor.apply("changePassword",[{srp:r}],function(e,t){e||!t?n&&n(e||Error("No result from changePassword.")):n&&n()})},Accounts.forgotPassword=function(e,t){if(!e.email)throw Error("Must pass options.email");Meteor.call("forgotPassword",e,t)},Accounts.resetPassword=function(e,t,n){if(!e)throw Error("Need to pass token");if(!t)throw Error("Need to pass newPassword");var r=Meteor._srp.generateVerifier(t);Accounts.callLoginMethod({methodName:"resetPassword",methodArguments:[e,r],userCallback:n})},Accounts.verifyEmail=function(e,t){if(!e)throw Error("Need to pass token");Accounts.callLoginMethod({methodName:"verifyEmail",methodArguments:[e],userCallback:t})}}.call(this),function(){Accounts.password={}}.call(this),function(){Accounts.ui||(Accounts.ui={}),Accounts.ui._options||(Accounts.ui._options={requestPermissions:{},requestOfflineToken:{}}),Accounts.ui.config=function(e){var t=["passwordSignupFields","requestPermissions","requestOfflineToken"];if(_.each(_.keys(e),function(e){if(!_.contains(t,e))throw Error("Accounts.ui.config: Invalid key: "+e)}),e.passwordSignupFields){if(!_.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY","EMAIL_ONLY"],e.passwordSignupFields))throw Error("Accounts.ui.config: Invalid option for `passwordSignupFields`: "+e.passwordSignupFields);if(Accounts.ui._options.passwordSignupFields)throw Error("Accounts.ui.config: Can't set `passwordSignupFields` more than once");Accounts.ui._options.passwordSignupFields=e.passwordSignupFields}e.requestPermissions&&_.each(e.requestPermissions,function(e,t){if(Accounts.ui._options.requestPermissions[t])throw Error("Accounts.ui.config: Can't set `requestPermissions` more than once for "+t);if(!(e instanceof Array))throw Error("Accounts.ui.config: Value for `requestPermissions` must be an array");Accounts.ui._options.requestPermissions[t]=e}),e.requestOfflineToken&&_.each(e.requestOfflineToken,function(e,t){if("google"!==t)throw Error("Accounts.ui.config: `requestOfflineToken` only supported for Google login at the moment.");if(Accounts.ui._options.requestOfflineToken[t])throw Error("Accounts.ui.config: Can't set `requestOfflineToken` more than once for "+t);Accounts.ui._options.requestOfflineToken[t]=e})},Accounts.ui._passwordSignupFields=function(){return Accounts.ui._options.passwordSignupFields||"EMAIL_ONLY"}}.call(this),function(){Meteor._def_template("_loginButtons",Handlebars.json_ast_to_func(['<div id="login-buttons" class="login-buttons-dropdown-align-',["{",[[0,"align"]]],'">\n    ',["#",[[0,"if"],[0,"currentUser"]],["\n      ",["#",[[0,"if"],[0,"loggingIn"]],["\n        ","\n        ",["#",[[0,"if"],[0,"dropdown"]],["\n          ",[">","_loginButtonsLoggingIn"],"\n        "],['\n          <div class="login-buttons-with-only-one-button">\n            ',[">","_loginButtonsLoggingInSingleLoginButton"],"\n          </div>\n        "]],"\n      "],["\n        ",[">","_loginButtonsLoggedIn"],"\n      "]],"\n    "],["\n      ",[">","_loginButtonsLoggedOut"],"\n    "]],"\n  </div>"])),Meteor._def_template("_loginButtonsLoggedIn",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"dropdown"]],["\n    ",[">","_loginButtonsLoggedInDropdown"],"\n  "],['\n    <div class="login-buttons-with-only-one-button">\n      ',[">","_loginButtonsLoggedInSingleLogoutButton"],"\n    </div>\n  "]]])),Meteor._def_template("_loginButtonsLoggedOut",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"services"]],[" ","\n    ",["#",[[0,"if"],[0,"configurationLoaded"]],["\n      ",["#",[[0,"if"],[0,"dropdown"]],[" ","\n        ",[">","_loginButtonsLoggedOutDropdown"],"\n      "],["\n        ",["#",[[0,"with"],[0,"singleService"]],[" ",'\n          <div class="login-buttons-with-only-one-button">\n            ',["#",[[0,"if"],[0,"loggingIn"]],["\n              ",[">","_loginButtonsLoggingInSingleLoginButton"],"\n            "],["\n              ",[">","_loginButtonsLoggedOutSingleLoginButton"],"\n            "]],"\n          </div>\n        "]],"\n      "]],"\n    "]],"\n  "],['\n    <div class="no-services">No login services configured</div>\n  ']]])),Meteor._def_template("_loginButtonsMessages",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"errorMessage"]],['\n    <div class="message error-message">',["{",[[0,"errorMessage"]]],"</div>\n  "]],"\n  ",["#",[[0,"if"],[0,"infoMessage"]],['\n    <div class="message info-message">',["{",[[0,"infoMessage"]]],"</div>\n  "]]])),Meteor._def_template("_loginButtonsLoggingIn",Handlebars.json_ast_to_func([[">","_loginButtonsLoggingInPadding"],'\n  <div class="loading">&nbsp;</div>\n  ',[">","_loginButtonsLoggingInPadding"]])),Meteor._def_template("_loginButtonsLoggingInPadding",Handlebars.json_ast_to_func([["#",[[0,"unless"],[0,"dropdown"]],["\n    ",'\n    <div class="login-buttons-padding">\n      <div class="login-button single-login-button" style="visibility: hidden;" id="login-buttons-logout">&nbsp;</div>\n    </div>\n  '],["\n    ",'\n    <div class="login-buttons-padding" />\n  ']]]))}.call(this),function(){Meteor._def_template("_loginButtonsLoggedOutSingleLoginButton",Handlebars.json_ast_to_func(['<div class="login-text-and-button">\n    <div class="login-button single-login-button ',["#",[[0,"unless"],[0,"configured"]],["configure-button"]],'"\n         id="login-buttons-',["{",[[0,"name"]]],'">\n      <div class="login-image" id="login-buttons-image-',["{",[[0,"name"]]],'"></div>\n      ',["#",[[0,"if"],[0,"configured"]],['\n        <span class="text-besides-image sign-in-text-',["{",[[0,"name"]]],'">Sign in with ',["{",[[0,"capitalizedName"]]],"</span>\n      "],['\n        <span class="text-besides-image configure-text-',["{",[[0,"name"]]],'">Configure ',["{",[[0,"capitalizedName"]]]," Login</span>\n      "]],"\n    </div>\n  </div>"])),Meteor._def_template("_loginButtonsLoggingInSingleLoginButton",Handlebars.json_ast_to_func(['<div class="login-text-and-button">\n    ',[">","_loginButtonsLoggingIn"],"\n  </div>"])),Meteor._def_template("_loginButtonsLoggedInSingleLogoutButton",Handlebars.json_ast_to_func(['<div class="login-text-and-button">\n    <div class="login-display-name">\n      ',["{",[[0,"displayName"]]],'\n    </div>\n    <div class="login-button single-login-button" id="login-buttons-logout">Sign Out</div>\n  </div>']))}.call(this),function(){Meteor._def_template("_loginButtonsLoggedInDropdown",Handlebars.json_ast_to_func(['<div class="login-link-and-dropdown-list">\n    <a class="login-link-text" id="login-name-link">\n      ',["{",[[0,"displayName"]]]," â–¾\n    </a>\n\n    ",["#",[[0,"if"],[0,"dropdownVisible"]],['\n      <div id="login-dropdown-list" class="accounts-dialog">\n        <a class="login-close-text">Close</a>\n        <div class="login-close-text-clear"></div>\n\n        ',["#",[[0,"if"],[0,"inMessageOnlyFlow"]],["\n          ",[">","_loginButtonsMessages"],"\n        "],["\n          ",["#",[[0,"if"],[0,"inChangePasswordFlow"]],["\n            ",[">","_loginButtonsChangePassword"],"\n          "],["\n            ",[">","_loginButtonsLoggedInDropdownActions"],"\n          "]],"\n        "]],"\n      </div>\n    "]],"\n  </div>"])),Meteor._def_template("_loginButtonsLoggedInDropdownActions",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"allowChangingPassword"]],['\n    <div class="login-button" id="login-buttons-open-change-password">\n      Change password\n    </div>\n  ']],'\n\n  <div class="login-button" id="login-buttons-logout">\n    Sign out\n  </div>\n\n  ',[">","_loginButtonsMessages"]])),Meteor._def_template("_loginButtonsLoggedOutDropdown",Handlebars.json_ast_to_func(['<div class="login-link-and-dropdown-list ',["{",[[0,"additionalClasses"]]],'">\n    ',["#",[[0,"if"],[0,"dropdownVisible"]],["\n      ",'\n      <a class="login-link-text" id="login-sign-in-link">Sign in â–¾</a>\n      <div id="login-dropdown-list" class="accounts-dialog">\n        <a class="login-close-text">Close</a>\n        ',["#",[[0,"if"],[0,"loggingIn"]],["\n          ",[">","_loginButtonsLoggingIn"],"\n        "]],'\n        <div class="login-close-text-clear"></div>\n        ',[">","_loginButtonsLoggedOutAllServices"],"\n      </div>\n    "],["\n      ",["#",[[0,"if"],[0,"loggingIn"]],["\n        ","\n        ",[">","_loginButtonsLoggingIn"],"\n      "],['\n        <a class="login-link-text" id="login-sign-in-link">Sign in â–¾</a>\n      ']],"\n    "]],"\n  </div>"])),Meteor._def_template("_loginButtonsLoggedOutAllServices",Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"services"]],["\n    ",["#",[[0,"if"],[0,"isPasswordService"]],["\n      ",["#",[[0,"if"],[0,"hasOtherServices"]],[" ","\n        ",[">","_loginButtonsLoggedOutPasswordServiceSeparator"],"\n      "]],"\n      ",[">","_loginButtonsLoggedOutPasswordService"],"\n    "],["\n      ",[">","_loginButtonsLoggedOutSingleLoginButton"],"\n    "]],"\n  "]],"\n\n  ",["#",[[0,"unless"],[0,"hasPasswordService"]],["\n    ",[">","_loginButtonsMessages"],"\n  "]]])),Meteor._def_template("_loginButtonsLoggedOutPasswordServiceSeparator",Handlebars.json_ast_to_func(['<div class="or">\n    <span class="hline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n    <span class="or-text">or</span>\n    <span class="hline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n  </div>'])),Meteor._def_template("_loginButtonsLoggedOutPasswordService",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"inForgotPasswordFlow"]],["\n    ",[">","_forgotPasswordForm"],"\n  "],['\n    <div class="login-form login-password-form">\n      ',["#",[[0,"each"],[0,"fields"]],["\n        ",[">","_loginButtonsFormField"],"\n      "]],"\n\n      ",[">","_loginButtonsMessages"],'\n\n      <div class="login-button login-button-form-submit" id="login-buttons-password">\n        ',["#",[[0,"if"],[0,"inSignupFlow"]],["\n          Create account\n        "],["\n          Sign in\n        "]],"\n      </div>\n\n      ",["#",[[0,"if"],[0,"inLoginFlow"]],["\n        ",["#",[[0,"if"],[0,"showCreateAccountLink"]],['\n          <div class="additional-link-container">\n            <a id="signup-link" class="additional-link">Create account</a>\n          </div>\n        ']],"\n\n        ",["#",[[0,"if"],[0,"showForgotPasswordLink"]],['\n          <div class="additional-link-container">\n            <a id="forgot-password-link" class="additional-link">Forgot password</a>\n          </div>\n        ']],"\n      "]],"\n\n      ",["#",[[0,"if"],[0,"inSignupFlow"]],["\n        ",[">","_loginButtonsBackToLoginLink"],"\n      "]],"\n    </div>\n  "]]])),Meteor._def_template("_forgotPasswordForm",Handlebars.json_ast_to_func(['<div class="login-form">\n    <div id="forgot-password-email-label-and-input"> ','\n      <label id="forgot-password-email-label" for="forgot-password-email">Email</label>\n      <input id="forgot-password-email" type="email"/>\n    </div>\n\n    ',[">","_loginButtonsMessages"],'\n\n    <div class="login-button login-button-form-submit" id="login-buttons-forgot-password">\n      Reset password\n    </div>\n\n    ',[">","_loginButtonsBackToLoginLink"],"\n  </div>"])),Meteor._def_template("_loginButtonsBackToLoginLink",Handlebars.json_ast_to_func(['<div class="additional-link-container">\n    <a id="back-to-login-link" class="additional-link">Sign in</a>\n  </div>'])),Meteor._def_template("_loginButtonsFormField",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div id="login-',["{",[[0,"fieldName"]]],'-label-and-input">\n      <label id="login-',["{",[[0,"fieldName"]]],'-label" for="login-',["{",[[0,"fieldName"]]],'">\n        ',["{",[[0,"fieldLabel"]]],'\n      </label>\n      <input id="login-',["{",[[0,"fieldName"]]],'" type="',["{",[[0,"inputType"]]],'" />\n    </div>\n  ']]])),Meteor._def_template("_loginButtonsChangePassword",Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"fields"]],["\n    ",[">","_loginButtonsFormField"],"\n  "]],"\n\n  ",[">","_loginButtonsMessages"],'\n\n  <div class="login-button login-button-form-submit" id="login-buttons-do-change-password">\n    Change password\n  </div>']))
}.call(this),function(){Meteor.startup(function(){document.body.appendChild(Spark.render(Meteor._def_template(null,Handlebars.json_ast_to_func([[">","_resetPasswordDialog"],"\n  ",[">","_enrollAccountDialog"],"\n  ",[">","_justVerifiedEmailDialog"],"\n  ",[">","_configureLoginServiceDialog"],"\n\n  <!-- if we're not showing a dropdown, we need some other place to show messages -->\n  ",[">","_loginButtonsMessagesDialog"]]))))}),Meteor._def_template("_resetPasswordDialog",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"inResetPasswordFlow"]],['\n    <div class="hide-background"></div>\n\n    <div class="accounts-dialog accounts-centered-dialog">\n      <label id="reset-password-new-password-label" for="reset-password-new-password">\n        New password\n      </label>\n\n      <div>\n        <input id="reset-password-new-password" type="password" />\n      </div>\n\n      ',[">","_loginButtonsMessages"],'\n\n      <div class="login-button login-button-form-submit" id="login-buttons-reset-password-button">\n        Set password\n      </div>\n\n      <a class="accounts-close" id="login-buttons-cancel-reset-password">&times;</a>\n    </div>\n  ']]])),Meteor._def_template("_enrollAccountDialog",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"inEnrollAccountFlow"]],['\n    <div class="hide-background"></div>\n\n    <div class="accounts-dialog accounts-centered-dialog">\n      <label id="enroll-account-password-label" for="enroll-account-password">\n        Choose a password\n      </label>\n\n      <div>\n        <input id="enroll-account-password" type="password" />\n      </div>\n\n      ',[">","_loginButtonsMessages"],'\n\n      <div class="login-button login-button-form-submit" id="login-buttons-enroll-account-button">\n        Create account\n      </div>\n\n      <a class="accounts-close" id="login-buttons-cancel-enroll-account">&times;</a>\n    </div>\n  ']]])),Meteor._def_template("_justVerifiedEmailDialog",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div class="accounts-dialog accounts-centered-dialog">\n      Email verified\n      <div class="login-button" id="just-verified-dismiss-button">Dismiss</div>\n    </div>\n  ']]])),Meteor._def_template("_configureLoginServiceDialog",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div id="configure-login-service-dialog" class="accounts-dialog accounts-centered-dialog">\n      ',["!",[[0,"configurationSteps"]]],'\n\n      <p>\n        Now, copy over some details.\n      </p>\n      <p>\n        <table>\n          <colgroup>\n            <col span="1" class="configuration_labels">\n            <col span="1" class="configuration_inputs">\n          </colgroup>\n          ',["#",[[0,"each"],[0,"configurationFields"]],['\n            <tr>\n              <td>\n                <label for="configure-login-service-dialog-',["{",[[0,"property"]]],'">',["{",[[0,"label"]]],'</label>\n              </td>\n              <td>\n                <input id="configure-login-service-dialog-',["{",[[0,"property"]]],'" type="text" />\n              </td>\n            </tr>\n          ']],'\n        </table>\n      </p>\n      <div class="new-section">\n        <div class="login-button configure-login-service-dismiss-button">\n          I\'ll do this later\n        </div>\n        <a class="accounts-close configure-login-service-dismiss-button">&times;</a>\n\n        ',["#",[[0,"isolate"]],['\n          <div class="login-button login-button-configure ',["#",[[0,"if"],[0,"saveDisabled"]],["login-button-disabled"]],'"\n             id="configure-login-service-dialog-save-configuration">\n            Save Configuration\n          </div>\n        ']],"\n      </div>\n    </div>\n  "]]])),Meteor._def_template("_loginButtonsMessagesDialog",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div class="accounts-dialog accounts-centered-dialog" id="login-buttons-message-dialog">\n      ',[">","_loginButtonsMessages"],'\n      <div class="login-button" id="messages-dialog-dismiss-button">Dismiss</div>\n    </div>\n  ']]]))}.call(this),function(){var e=["dropdownVisible","inSignupFlow","inForgotPasswordFlow","inChangePasswordFlow","inMessageOnlyFlow","errorMessage","infoMessage","resetPasswordToken","enrollAccountToken","justVerifiedEmail","configureLoginServiceDialogVisible","configureLoginServiceDialogServiceName","configureLoginServiceDialogSaveDisabled"],t=function(t){if(!_.contains(e,t))throw Error("Invalid key in loginButtonsSession: "+t)},n="Meteor.loginButtons.";Accounts._loginButtonsSession={set:function(e,n){if(t(e),_.contains(["errorMessage","infoMessage"],e))throw Error("Don't set errorMessage or infoMessage directly. Instead, use errorMessage() or infoMessage().");this._set(e,n)},_set:function(e,t){Session.set(n+e,t)},get:function(e){return t(e),Session.get(n+e)},closeDropdown:function(){this.set("inSignupFlow",!1),this.set("inForgotPasswordFlow",!1),this.set("inChangePasswordFlow",!1),this.set("inMessageOnlyFlow",!1),this.set("dropdownVisible",!1),this.resetMessages()},infoMessage:function(e){this._set("errorMessage",null),this._set("infoMessage",e),this.ensureMessageVisible()},errorMessage:function(e){this._set("errorMessage",e),this._set("infoMessage",null),this.ensureMessageVisible()},isMessageDialogVisible:function(){return this.get("resetPasswordToken")||this.get("enrollAccountToken")||this.get("justVerifiedEmail")},ensureMessageVisible:function(){this.isMessageDialogVisible()||this.set("dropdownVisible",!0)},resetMessages:function(){this._set("errorMessage",null),this._set("infoMessage",null)},configureService:function(e){this.set("configureLoginServiceDialogVisible",!0),this.set("configureLoginServiceDialogServiceName",e),this.set("configureLoginServiceDialogSaveDisabled",!0)}}}.call(this),function(){Accounts._loginButtons||(Accounts._loginButtons={});var e=Accounts._loginButtonsSession;Handlebars.registerHelper("loginButtons",function(e){return"right"===e.hash.align?new Handlebars.SafeString(Template._loginButtons({align:"right"})):new Handlebars.SafeString(Template._loginButtons({align:"left"}))}),Template._loginButtons.events({"click #login-buttons-logout":function(){Meteor.logout(function(){e.closeDropdown()})}}),Template._loginButtons.preserve({"input[id]":Spark._labelFromIdOrName}),Template._loginButtonsLoggedOut.dropdown=function(){return Accounts._loginButtons.dropdown()},Template._loginButtonsLoggedOut.services=function(){return Accounts._loginButtons.getLoginServices()},Template._loginButtonsLoggedOut.singleService=function(){var e=Accounts._loginButtons.getLoginServices();if(1!==e.length)throw Error("Shouldn't be rendering this template with more than one configured service");return e[0]},Template._loginButtonsLoggedOut.configurationLoaded=function(){return Accounts.loginServicesConfigured()},Template._loginButtonsLoggedIn.dropdown=function(){return Accounts._loginButtons.dropdown()},Template._loginButtonsLoggedInSingleLogoutButton.displayName=function(){return Accounts._loginButtons.displayName()},Template._loginButtonsMessages.errorMessage=function(){return e.get("errorMessage")},Template._loginButtonsMessages.infoMessage=function(){return e.get("infoMessage")},Template._loginButtonsLoggingInPadding.dropdown=function(){return Accounts._loginButtons.dropdown()},Accounts._loginButtons.displayName=function(){var e=Meteor.user();return e?e.profile&&e.profile.name?e.profile.name:e.username?e.username:e.emails&&e.emails[0]&&e.emails[0].address?e.emails[0].address:"":""},Accounts._loginButtons.getLoginServices=function(){var e=[];return _.each(_.keys(Meteor),function(t){var n;if(n=t.match(/^loginWith(.*)/)){var r=n[1].toLowerCase();Accounts[r]&&e.push(n[1].toLowerCase())}}),e.sort(),_.contains(e,"password")&&(e=_.without(e,"password").concat(["password"])),_.map(e,function(e){return{name:e}})},Accounts._loginButtons.hasPasswordService=function(){return Accounts.password},Accounts._loginButtons.dropdown=function(){return Accounts._loginButtons.hasPasswordService()||Accounts._loginButtons.getLoginServices().length>1},Accounts._loginButtons.validateUsername=function(t){return t.length>=3?!0:(e.errorMessage("Username must be at least 3 characters long"),!1)},Accounts._loginButtons.validateEmail=function(t){return"USERNAME_AND_OPTIONAL_EMAIL"===Accounts.ui._passwordSignupFields()&&""===t?!0:-1!==t.indexOf("@")?!0:(e.errorMessage("Invalid email"),!1)},Accounts._loginButtons.validatePassword=function(t){return t.length>=6?!0:(e.errorMessage("Password must be at least 6 characters long"),!1)}}.call(this),function(){var e=Accounts._loginButtonsSession;Template._loginButtonsLoggedOutSingleLoginButton.events({"click .login-button":function(){var n=this.name;e.resetMessages();var r=function(t){t?t instanceof Accounts.LoginCancelledError||(t instanceof Accounts.ConfigError?e.configureService(n):e.errorMessage(t.reason||"Unknown error")):e.closeDropdown()},o=Meteor["loginWith"+t(n)],i={};Accounts.ui._options.requestPermissions[n]&&(i.requestPermissions=Accounts.ui._options.requestPermissions[n]),Accounts.ui._options.requestOfflineToken[n]&&(i.requestOfflineToken=Accounts.ui._options.requestOfflineToken[n]),o(i,r)}}),Template._loginButtonsLoggedOutSingleLoginButton.configured=function(){return!!Accounts.loginServiceConfiguration.findOne({service:this.name})},Template._loginButtonsLoggedOutSingleLoginButton.capitalizedName=function(){return"github"===this.name?"GitHub":t(this.name)};var t=function(e){return e=null==e?"":e+"",e.charAt(0).toUpperCase()+e.slice(1)}}.call(this),function(){var e=Accounts._loginButtonsSession;Template._loginButtons.events({"click #login-name-link, click #login-sign-in-link":function(){e.set("dropdownVisible",!0),Deps.flush(),u()},"click .login-close-text":function(){e.closeDropdown()}}),Template._loginButtonsLoggedInDropdown.events({"click #login-buttons-open-change-password":function(){e.resetMessages(),e.set("inChangePasswordFlow",!0)}}),Template._loginButtonsLoggedInDropdown.displayName=function(){return Accounts._loginButtons.displayName()},Template._loginButtonsLoggedInDropdown.inChangePasswordFlow=function(){return e.get("inChangePasswordFlow")},Template._loginButtonsLoggedInDropdown.inMessageOnlyFlow=function(){return e.get("inMessageOnlyFlow")},Template._loginButtonsLoggedInDropdown.dropdownVisible=function(){return e.get("dropdownVisible")},Template._loginButtonsLoggedInDropdownActions.allowChangingPassword=function(){var e=Meteor.user();return e.username||e.emails&&e.emails[0]&&e.emails[0].address},Template._loginButtonsLoggedOutDropdown.events({"click #login-buttons-password":function(){r()},"keypress #forgot-password-email":function(e){13===e.keyCode&&a()},"click #login-buttons-forgot-password":function(){a()},"click #signup-link":function(){e.resetMessages();var r=n("login-username"),o=n("login-email"),i=n("login-username-or-email");t("login-password"),e.set("inSignupFlow",!0),e.set("inForgotPasswordFlow",!1),Deps.flush(),null!==r?document.getElementById("login-username").value=r:null!==o?document.getElementById("login-email").value=o:null!==i&&(-1===i.indexOf("@")?document.getElementById("login-username").value=i:document.getElementById("login-email").value=i);var a=document.getElementById("login-dropdown-list");a.style.display="none",a.offsetHeight,a.style.display="block"},"click #forgot-password-link":function(){e.resetMessages();var t=n("login-email"),r=n("login-username-or-email");e.set("inSignupFlow",!1),e.set("inForgotPasswordFlow",!0),Deps.flush(),null!==t?document.getElementById("forgot-password-email").value=t:null!==r&&-1!==r.indexOf("@")&&(document.getElementById("forgot-password-email").value=r)},"click #back-to-login-link":function(){e.resetMessages();var t=n("login-username"),r=n("login-email")||n("forgot-password-email");e.set("inSignupFlow",!1),e.set("inForgotPasswordFlow",!1),Deps.flush(),document.getElementById("login-username")&&(document.getElementById("login-username").value=t),document.getElementById("login-email")&&(document.getElementById("login-email").value=r),document.getElementById("login-username-or-email")&&(document.getElementById("login-username-or-email").value=r||t)},"keypress #login-username, keypress #login-email, keypress #login-username-or-email, keypress #login-password, keypress #login-password-again":function(e){13===e.keyCode&&r()}}),Template._loginButtonsLoggedOutDropdown.additionalClasses=function(){return Accounts.password?e.get("inSignupFlow")?"login-form-create-account":e.get("inForgotPasswordFlow")?"login-form-forgot-password":"login-form-sign-in":!1},Template._loginButtonsLoggedOutDropdown.dropdownVisible=function(){return e.get("dropdownVisible")},Template._loginButtonsLoggedOutDropdown.hasPasswordService=function(){return Accounts._loginButtons.hasPasswordService()},Template._loginButtonsLoggedOutAllServices.services=function(){return Accounts._loginButtons.getLoginServices()},Template._loginButtonsLoggedOutAllServices.isPasswordService=function(){return"password"===this.name},Template._loginButtonsLoggedOutAllServices.hasOtherServices=function(){return Accounts._loginButtons.getLoginServices().length>1},Template._loginButtonsLoggedOutAllServices.hasPasswordService=function(){return Accounts._loginButtons.hasPasswordService()},Template._loginButtonsLoggedOutPasswordService.fields=function(){var t=[{fieldName:"username-or-email",fieldLabel:"Username or Email",visible:function(){return _.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL"],Accounts.ui._passwordSignupFields())}},{fieldName:"username",fieldLabel:"Username",visible:function(){return"USERNAME_ONLY"===Accounts.ui._passwordSignupFields()}},{fieldName:"email",fieldLabel:"Email",inputType:"email",visible:function(){return"EMAIL_ONLY"===Accounts.ui._passwordSignupFields()}},{fieldName:"password",fieldLabel:"Password",inputType:"password",visible:function(){return!0}}],n=[{fieldName:"username",fieldLabel:"Username",visible:function(){return _.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],Accounts.ui._passwordSignupFields())}},{fieldName:"email",fieldLabel:"Email",inputType:"email",visible:function(){return _.contains(["USERNAME_AND_EMAIL","EMAIL_ONLY"],Accounts.ui._passwordSignupFields())}},{fieldName:"email",fieldLabel:"Email (optional)",inputType:"email",visible:function(){return"USERNAME_AND_OPTIONAL_EMAIL"===Accounts.ui._passwordSignupFields()}},{fieldName:"password",fieldLabel:"Password",inputType:"password",visible:function(){return!0}},{fieldName:"password-again",fieldLabel:"Password (again)",inputType:"password",visible:function(){return _.contains(["USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],Accounts.ui._passwordSignupFields())}}];return e.get("inSignupFlow")?n:t},Template._loginButtonsLoggedOutPasswordService.inForgotPasswordFlow=function(){return e.get("inForgotPasswordFlow")},Template._loginButtonsLoggedOutPasswordService.inLoginFlow=function(){return!e.get("inSignupFlow")&&!e.get("inForgotPasswordFlow")},Template._loginButtonsLoggedOutPasswordService.inSignupFlow=function(){return e.get("inSignupFlow")},Template._loginButtonsLoggedOutPasswordService.showCreateAccountLink=function(){return!Accounts._options.forbidClientAccountCreation},Template._loginButtonsLoggedOutPasswordService.showForgotPasswordLink=function(){return _.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","EMAIL_ONLY"],Accounts.ui._passwordSignupFields())},Template._loginButtonsFormField.inputType=function(){return this.inputType||"text"},Template._loginButtonsChangePassword.events({"keypress #login-old-password, keypress #login-password, keypress #login-password-again":function(e){13===e.keyCode&&s()},"click #login-buttons-do-change-password":function(){s()}}),Template._loginButtonsChangePassword.fields=function(){return[{fieldName:"old-password",fieldLabel:"Current Password",inputType:"password",visible:function(){return!0}},{fieldName:"password",fieldLabel:"New Password",inputType:"password",visible:function(){return!0}},{fieldName:"password-again",fieldLabel:"New Password (again)",inputType:"password",visible:function(){return _.contains(["USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],Accounts.ui._passwordSignupFields())}}]};var t=function(e){var t=document.getElementById(e);return t?t.value:null},n=function(e){var t=document.getElementById(e);return t?t.value.replace(/^\s*|\s*$/g,""):null},r=function(){e.get("inSignupFlow")?i():o()},o=function(){e.resetMessages();var r,o=n("login-username"),i=n("login-email"),a=n("login-username-or-email"),s=t("login-password");if(null!==o){if(!Accounts._loginButtons.validateUsername(o))return;r={username:o}}else if(null!==i){if(!Accounts._loginButtons.validateEmail(i))return;r={email:i}}else{if(null===a)throw Error("Unexpected -- no element to use as a login user selector");if(!Accounts._loginButtons.validateUsername(a))return;r=a}Meteor.loginWithPassword(r,s,function(t){t?e.errorMessage(t.reason||"Unknown error"):e.closeDropdown()})},i=function(){e.resetMessages();var r={},o=n("login-username");if(null!==o){if(!Accounts._loginButtons.validateUsername(o))return;r.username=o}var i=n("login-email");if(null!==i){if(!Accounts._loginButtons.validateEmail(i))return;r.email=i}var a=t("login-password");Accounts._loginButtons.validatePassword(a)&&(r.password=a,l()&&Accounts.createUser(r,function(t){t?e.errorMessage(t.reason||"Unknown error"):e.closeDropdown()}))},a=function(){e.resetMessages();var t=n("forgot-password-email");-1!==t.indexOf("@")?Accounts.forgotPassword({email:t},function(t){t?e.errorMessage(t.reason||"Unknown error"):e.infoMessage("Email sent")}):e.errorMessage("Invalid email")},s=function(){e.resetMessages();var n=t("login-old-password"),r=t("login-password");Accounts._loginButtons.validatePassword(r)&&l()&&Accounts.changePassword(n,r,function(t){t?e.errorMessage(t.reason||"Unknown error"):(e.set("inChangePasswordFlow",!1),e.set("inMessageOnlyFlow",!0),e.infoMessage("Password changed"))})},l=function(){var n=t("login-password-again");if(null!==n){var r=t("login-password");if(r!==n)return e.errorMessage("Passwords don't match"),!1}return!0},u=function(){for(var e=document.getElementById("login-dropdown-list").parentNode;"BODY"!==e.nodeName;e=e.parentNode)0===e.style.zIndex&&(e.style.zIndex=1)}}.call(this),function(){var e=Accounts._loginButtonsSession;Accounts._resetPasswordToken&&e.set("resetPasswordToken",Accounts._resetPasswordToken),Accounts._enrollAccountToken&&e.set("enrollAccountToken",Accounts._enrollAccountToken),Meteor.startup(function(){Accounts._verifyEmailToken&&Accounts.verifyEmail(Accounts._verifyEmailToken,function(t){Accounts._enableAutoLogin(),t||e.set("justVerifiedEmail",!0)})}),Template._resetPasswordDialog.events({"click #login-buttons-reset-password-button":function(){t()},"keypress #reset-password-new-password":function(e){13===e.keyCode&&t()},"click #login-buttons-cancel-reset-password":function(){e.set("resetPasswordToken",null),Accounts._enableAutoLogin()}});var t=function(){e.resetMessages();var t=document.getElementById("reset-password-new-password").value;Accounts._loginButtons.validatePassword(t)&&Accounts.resetPassword(e.get("resetPasswordToken"),t,function(t){t?e.errorMessage(t.reason||"Unknown error"):(e.set("resetPasswordToken",null),Accounts._enableAutoLogin())})};Template._resetPasswordDialog.inResetPasswordFlow=function(){return e.get("resetPasswordToken")},Template._enrollAccountDialog.events({"click #login-buttons-enroll-account-button":function(){n()},"keypress #enroll-account-password":function(e){13===e.keyCode&&n()},"click #login-buttons-cancel-enroll-account":function(){e.set("enrollAccountToken",null),Accounts._enableAutoLogin()}});var n=function(){e.resetMessages();var t=document.getElementById("enroll-account-password").value;Accounts._loginButtons.validatePassword(t)&&Accounts.resetPassword(e.get("enrollAccountToken"),t,function(t){t?e.errorMessage(t.reason||"Unknown error"):(e.set("enrollAccountToken",null),Accounts._enableAutoLogin())})};Template._enrollAccountDialog.inEnrollAccountFlow=function(){return e.get("enrollAccountToken")},Template._justVerifiedEmailDialog.events({"click #just-verified-dismiss-button":function(){e.set("justVerifiedEmail",!1)}}),Template._justVerifiedEmailDialog.visible=function(){return e.get("justVerifiedEmail")},Template._loginButtonsMessagesDialog.events({"click #messages-dialog-dismiss-button":function(){e.resetMessages()}}),Template._loginButtonsMessagesDialog.visible=function(){var t=e.get("infoMessage")||e.get("errorMessage");return!Accounts._loginButtons.dropdown()&&t},Template._configureLoginServiceDialog.events({"click .configure-login-service-dismiss-button":function(){e.set("configureLoginServiceDialogVisible",!1)},"click #configure-login-service-dialog-save-configuration":function(){if(e.get("configureLoginServiceDialogVisible")&&!e.get("configureLoginServiceDialogSaveDisabled")){var t=e.get("configureLoginServiceDialogServiceName"),n={service:t};_.each(i(),function(e){n[e.property]=document.getElementById("configure-login-service-dialog-"+e.property).value.replace(/^\s*|\s*$/g,"")}),Meteor.call("configureLoginService",n,function(n){n?Meteor._debug("Error configuring login service "+t,n):e.set("configureLoginServiceDialogVisible",!1)})}},"input, keyup input":function(e){0===e.target.id.indexOf("configure-login-service-dialog")&&r()}});var r=function(){var t=_.any(i(),function(e){return""===document.getElementById("configure-login-service-dialog-"+e.property).value});e.set("configureLoginServiceDialogSaveDisabled",t)},o=function(){var t=e.get("configureLoginServiceDialogServiceName");return Template["configureLoginServiceDialogFor"+a(t)]},i=function(){var e=o();return e.fields()};Template._configureLoginServiceDialog.configurationFields=function(){return i()},Template._configureLoginServiceDialog.visible=function(){return e.get("configureLoginServiceDialogVisible")},Template._configureLoginServiceDialog.configurationSteps=function(){return o()()},Template._configureLoginServiceDialog.saveDisabled=function(){return e.get("configureLoginServiceDialogSaveDisabled")};var a=function(e){return e=null==e?"":e+"",e.charAt(0).toUpperCase()+e.slice(1)}}.call(this),function(){Accounts.oauth={}}.call(this),function(){Accounts.oauth.initiateLogin=function(n,r,o,i){var a=t(r,i&&i.width||650,i&&i.height||331),s=setInterval(function(){(a.closed||void 0===a.closed)&&(clearInterval(s),e(n,o))},100)};var e=function(e,t){Accounts.callLoginMethod({methodArguments:[{oauth:{state:e}}],userCallback:t&&function(e){e&&e instanceof Meteor.Error&&e.error===Accounts.LoginCancelledError.numericError?t(new Accounts.LoginCancelledError(e.details)):t(e)}})},t=function(e,t,n){var r=window.screenX!==void 0?window.screenX:window.screenLeft,o=window.screenY!==void 0?window.screenY:window.screenTop,i=window.outerWidth!==void 0?window.outerWidth:document.body.clientWidth,a=window.outerHeight!==void 0?window.outerHeight:document.body.clientHeight-22,s=r+(i-t)/2,l=o+(a-n)/2,u="width="+t+",height="+n+",left="+s+",top="+l,c=window.open(e,"Login",u);return c.focus&&c.focus(),c}}.call(this),function(){Accounts.oauth2={}}.call(this),function(){Meteor.http=Meteor.http||{},Meteor.http._encodeParams=function(e){var t=[];return _.each(e,function(e,n){t.length&&t.push("&"),t.push(Meteor.http._encodeString(n),"=",Meteor.http._encodeString(e))}),t.join("").replace(/%20/g,"+")},Meteor.http._encodeString=function(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")},Meteor.http._buildUrl=function(e,t,n,r){var o=e,i=t?t.slice(1):null;if("string"==typeof n&&(i=n+""),r){i=i||"";var a=Meteor.http._encodeParams(r);i&&a&&(i+="&"),i+=a}var s=o;return null!==i&&(s+="?"+i),s},Meteor.http._populateData=function(e){var t=(e.headers["content-type"]||";").split(";")[0];if(_.include(["application/json","text/javascript"],t))try{e.data=JSON.parse(e.content)}catch(n){e.data=null}else e.data=null},Meteor.http.get=function(){return Meteor.http.call.apply(this,["GET"].concat(_.toArray(arguments)))},Meteor.http.post=function(){return Meteor.http.call.apply(this,["POST"].concat(_.toArray(arguments)))},Meteor.http.put=function(){return Meteor.http.call.apply(this,["PUT"].concat(_.toArray(arguments)))},Meteor.http.del=function(){return Meteor.http.call.apply(this,["DELETE"].concat(_.toArray(arguments)))}}.call(this),function(){Meteor.http=Meteor.http||{},Meteor.http.call=function(e,t,n,r){if(r||"function"!=typeof n||(r=n,n=null),n=n||{},"function"!=typeof r)throw Error("Can't make a blocking HTTP call from the client; callback required.");e=(e||"").toUpperCase();var o={},i=n.content;n.data&&(i=JSON.stringify(n.data),o["Content-Type"]="application/json");var a,s;i||"GET"===e||"HEAD"===e?a=n.params:s=n.params;var l=/^(.*?)(\?.*)?$/.exec(t);if(t=Meteor.http._buildUrl(l[1],l[2],n.query,a),n.followRedirects===!1)throw Error("Option followRedirects:false not supported on client.");var u,c;if(n.auth){var d=n.auth.indexOf(":");if(0>d)throw Error('auth option should be of the form "username:password"');u=n.auth.substring(0,d),c=n.auth.substring(d+1)}s&&(i=Meteor.http._encodeParams(s)),_.extend(o,n.headers||{}),r=function(e){return function(t,n){n=n||{},n.error=t,e(t,n)}}(r),r=_.once(r);try{var f;if("undefined"!=typeof XMLHttpRequest)f=new XMLHttpRequest;else{if("undefined"==typeof ActiveXObject)throw Error("Can't create XMLHttpRequest");f=new ActiveXObject("Microsoft.XMLHttp")}f.open(e,t,!0,u,c);for(var p in o)f.setRequestHeader(p,o[p]);var h,g=!1;n.timeout&&(h=Meteor.setTimeout(function(){g=!0,f.abort()},n.timeout)),f.onreadystatechange=function(){if(4===f.readyState)if(h&&Meteor.clearTimeout(h),g)r(Error("timeout"));else if(f.status){var e={};e.statusCode=f.status,e.content=f.responseText,e.headers={};var t=f.getAllResponseHeaders();""===t&&f.getResponseHeader("content-type")&&(t="content-type: "+f.getResponseHeader("content-type"));var n=t.split(/\r?\n/);_.each(n,function(t){var n=/^(.*?):(?:\s+)(.*)$/.exec(t);n&&3===n.length&&(e.headers[n[1].toLowerCase()]=n[2])}),Meteor.http._populateData(e);var o=null;f.status>=400&&(o=Error("failed")),r(o,e)}else r(Error("network"))},f.send(i)}catch(m){r(m)}}}.call(this),function(){Meteor._def_template("configureLoginServiceDialogForFacebook",Handlebars.json_ast_to_func(['<p>\n    First, you\'ll need to register your app on Facebook. Follow these steps:\n  </p>\n  <ol>\n    <li>\n      Visit <a href="https://developers.facebook.com/apps" target="_blank">https://developers.facebook.com/apps</a>\n    </li>\n    <li>\n      Create New App (Only a name is required.)\n    </li>\n    <li>\n      Under "Select how your app integrates with Facebook", expand "Website with Facebook Login".\n    </li>\n    <li>\n      Set Site URL to: <span class="url">',["{",[[0,"siteUrl"]]],"</span>\n    </li>\n  </ol>"]))}.call(this),function(){Template.configureLoginServiceDialogForFacebook.siteUrl=function(){return Meteor.absoluteUrl()},Template.configureLoginServiceDialogForFacebook.fields=function(){return[{property:"appId",label:"App ID"},{property:"secret",label:"App Secret"}]}}.call(this),function(){Accounts.facebook||(Accounts.facebook={})}.call(this),function(){Meteor.loginWithFacebook=function(e,t){t||"function"!=typeof e||(t=e,e={});var n=Accounts.loginServiceConfiguration.findOne({service:"facebook"});if(!n)return t&&t(new Accounts.ConfigError("Service not configured")),void 0;var r=Random.id(),o=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),i=o?"touch":"popup",a="email";e&&e.requestPermissions&&(a=e.requestPermissions.join(","));var s="https://www.facebook.com/dialog/oauth?client_id="+n.appId+"&redirect_uri="+Meteor.absoluteUrl("_oauth/facebook?close")+"&display="+i+"&scope="+a+"&state="+r;Accounts.oauth.initiateLogin(r,s,t)}}.call(this),function(){d3=function(){function e(e){return null!=e&&!isNaN(e)}function t(e){return e.length}function n(e){for(var t=1;e*t%1;)t*=10;return t}function r(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(r){e.prototype=t}}function o(){}function i(){}function a(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function s(){}function l(e){function t(){for(var t,r=n,o=-1,i=r.length;i>++o;)(t=r[o].on)&&t.apply(this,arguments);return e}var n=[],r=new o;return t.on=function(t,o){var i,a=r.get(t);return 2>arguments.length?a&&a.on:(a&&(a.on=null,n=n.slice(0,i=n.indexOf(a)).concat(n.slice(i+1)),r.remove(t)),o&&n.push(r.set(t,{on:o})),e)},t}function u(){ua.event.stopPropagation(),ua.event.preventDefault()}function c(){for(var e,t=ua.event;e=t.sourceEvent;)t=e;return t}function d(e){for(var t=new s,n=0,r=arguments.length;r>++n;)t[arguments[n]]=l(t);return t.of=function(n,r){return function(o){try{var i=o.sourceEvent=ua.event;o.target=e,ua.event=o,t[o.type].apply(n,r)}finally{ua.event=i}}},t}function f(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>_a&&(da.scrollX||da.scrollY)){n=ua.select(ca.body).append("svg").style("position","absolute").style("top",0).style("left",0);var o=n[0][0].getScreenCTM();_a=!(o.f||o.e),n.remove()}return _a?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function p(e){for(var t=-1,n=e.length,r=[];n>++t;)r.push(e[t]);return r}function h(e){return Array.prototype.slice.call(e)}function g(e){return wa(e,xa),e}function m(e){return function(){return Sa(e,this)}}function v(e){return function(){return Ta(e,this)}}function _(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function o(){this.setAttribute(e,t)}function i(){this.setAttributeNS(e.space,e.local,t)}function a(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=ua.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?s:a:e.local?i:o}function y(e){return e.trim().replace(/\s+/g," ")}function w(e){return RegExp("(?:^|\\s+)"+ua.requote(e)+"(?:\\s+|$)","g")}function S(e,t){function n(){for(var n=-1;o>++n;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);o>++n;)e[n](this,r)}e=e.trim().split(/\s+/).map(T);var o=e.length;return"function"==typeof t?r:n}function T(e){var t=w(e);return function(n,r){if(o=n.classList)return r?o.add(e):o.remove(e);var o=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(o)||n.setAttribute("class",y(o+" "+e))):n.setAttribute("class",y(o.replace(t," ")))}}function M(e,t,n){function r(){this.style.removeProperty(e)}function o(){this.style.setProperty(e,t,n)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?i:o}function k(e,t){function n(){delete this[e]}function r(){this[e]=t}function o(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?o:r}function E(e){return{__data__:e}}function x(e){return function(){return Ea(this,e)}}function C(e){return arguments.length||(e=ua.ascending),function(t,n){return!t-!n||e(t.__data__,n.__data__)}}function A(){}function N(e,t,n){function r(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}function o(){var o=l(t,ya(arguments));r.call(this),this.addEventListener(e,this[a]=o,o.$=n),o._=t}function i(){var t,n=RegExp("^__on([^.]+)"+ua.requote(e)+"$");for(var r in this)if(t=r.match(n)){var o=this[r];this.removeEventListener(t[1],o,o.$),delete this[r]}}var a="__on"+e,s=e.indexOf("."),l=O;s>0&&(e=e.substring(0,s));var u=Na.get(e);return u&&(e=u,l=D),s?t?o:r:t?A:i}function O(e,t){return function(n){var r=ua.event;ua.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{ua.event=r}}}function D(e,t){var n=O(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)
}}function I(e,t){for(var n=0,r=e.length;r>n;n++)for(var o,i=e[n],a=0,s=i.length;s>a;a++)(o=i[a])&&t(o,a,n);return e}function L(e){return wa(e,Oa),e}function R(){}function P(e,t,n){return new B(e,t,n)}function B(e,t,n){this.h=e,this.s=t,this.l=n}function F(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?i+(a-i)*e/60:180>e?a:240>e?i+(a-i)*(240-e)/60:i}function o(e){return Math.round(255*r(e))}var i,a;return e%=360,0>e&&(e+=360),t=0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+t):n+t-n*t,i=2*n-a,tt(o(e+120),o(e),o(e-120))}function j(e){return e>0?1:0>e?-1:0}function H(e){return Math.acos(Math.max(-1,Math.min(1,e)))}function U(e){return e>1?Ba/2:-1>e?-Ba/2:Math.asin(e)}function q(e){return(Math.exp(e)-Math.exp(-e))/2}function $(e){return(Math.exp(e)+Math.exp(-e))/2}function V(e){return(e=Math.sin(e/2))*e}function z(e,t,n){return new W(e,t,n)}function W(e,t,n){this.h=e,this.c=t,this.l=n}function J(e,t,n){return G(n,Math.cos(e*=ja)*t,Math.sin(e)*t)}function G(e,t,n){return new X(e,t,n)}function X(e,t,n){this.l=e,this.a=t,this.b=n}function Y(e,t,n){var r=(e+16)/116,o=r+t/500,i=r-n/200;return o=Q(o)*$a,r=Q(r)*Va,i=Q(i)*za,tt(et(3.2404542*o-1.5371385*r-.4985314*i),et(-.969266*o+1.8760108*r+.041556*i),et(.0556434*o-.2040259*r+1.0572252*i))}function K(e,t,n){return z(Math.atan2(n,t)*Ha,Math.sqrt(t*t+n*n),e)}function Q(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function Z(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function et(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function tt(e,t,n){return new nt(e,t,n)}function nt(e,t,n){this.r=e,this.g=t,this.b=n}function rt(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ot(e,t,n){var r,o,i,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/i.exec(e))switch(o=r[2].split(","),r[1]){case"hsl":return n(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return t(lt(o[0]),lt(o[1]),lt(o[2]))}return(i=Ga.get(e))?t(i.r,i.g,i.b):(null!=e&&"#"===e.charAt(0)&&(4===e.length?(a=e.charAt(1),a+=a,s=e.charAt(2),s+=s,l=e.charAt(3),l+=l):7===e.length&&(a=e.substring(1,3),s=e.substring(3,5),l=e.substring(5,7)),a=parseInt(a,16),s=parseInt(s,16),l=parseInt(l,16)),t(a,s,l))}function it(e,t,n){var r,o,i=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-i,l=(a+i)/2;return s?(o=.5>l?s/(a+i):s/(2-a-i),r=e==a?(t-n)/s+(n>t?6:0):t==a?(n-e)/s+2:(e-t)/s+4,r*=60):o=r=0,P(r,o,l)}function at(e,t,n){e=st(e),t=st(t),n=st(n);var r=Z((.4124564*e+.3575761*t+.1804375*n)/$a),o=Z((.2126729*e+.7151522*t+.072175*n)/Va),i=Z((.0193339*e+.119192*t+.9503041*n)/za);return G(116*o-16,500*(r-o),200*(o-i))}function st(e){return.04045>=(e/=255)?e/12.92:Math.pow((e+.055)/1.055,2.4)}function lt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function ut(e){return"function"==typeof e?e:function(){return e}}function ct(e){return e}function dt(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function ft(e,t){function n(e,n,i){3>arguments.length&&(i=n,n=null);var a=ua.xhr(e,t,i);return a.row=function(e){return arguments.length?a.response(null==(n=e)?r:o(e)):n},a.row(n)}function r(e){return n.parse(e.responseText)}function o(e){return function(t){return n.parse(t.responseText,e)}}function a(t){return t.map(s).join(e)}function s(e){return l.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var l=RegExp('["'+e+"\n]"),u=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var o=Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(o(e),n)}:o})},n.parseRows=function(e,t){function n(){if(c>=l)return a;if(o)return o=!1,i;var t=c;if(34===e.charCodeAt(t)){for(var n=t;l>n++;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(o=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(o=!0),e.substring(t+1,n).replace(/""/g,'"')}for(;l>c;){var r=e.charCodeAt(c++),s=1;if(10===r)o=!0;else if(13===r)o=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==u)continue;return e.substring(t,c-s)}return e.substring(t)}for(var r,o,i={},a={},s=[],l=e.length,c=0,d=0;(r=n())!==a;){for(var f=[];r!==i&&r!==a;)f.push(r),r=n();(!t||(f=t(f,d++)))&&s.push(f)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new i,o=[];return t.forEach(function(e){for(var t in e)r.has(t)||o.push(r.add(t))}),[o.map(s).join(e)].concat(t.map(function(t){return o.map(function(e){return s(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(a).join("\n")},n}function pt(){for(var e,t=Date.now(),n=Za;n;)e=t-n.then,e>=n.delay&&(n.flush=n.callback(e)),n=n.next;var r=ht()-t;r>24?(isFinite(r)&&(clearTimeout(Ya),Ya=setTimeout(pt,r)),Xa=0):(Xa=1,es(pt))}function ht(){for(var e=null,t=Za,n=1/0;t;)t.flush?(delete Qa[t.callback.id],t=e?e.next=t.next:Za=t.next):(n=Math.min(n,t.then+t.delay),t=(e=t).next);return n}function gt(e,t){var n=Math.pow(10,3*Math.abs(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function mt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function vt(e){return e+""}function _t(e,t){cs.hasOwnProperty(e.type)&&cs[e.type](e,t)}function yt(e,t,n){var r,o=-1,i=e.length-n;for(t.lineStart();i>++o;)r=e[o],t.point(r[0],r[1]);t.lineEnd()}function bt(e,t){var n=-1,r=e.length;for(t.polygonStart();r>++n;)yt(e[n],t,1);t.polygonEnd()}function wt(){function e(e,t){e*=ja,t=t*ja/2+Ba/4;var n=e-r,a=Math.cos(t),s=Math.sin(t),l=i*s,u=fs,c=ps,d=o*a+l*Math.cos(n),f=l*Math.sin(n);fs=u*d-c*f,ps=c*d+u*f,r=e,o=a,i=s}var t,n,r,o,i;hs.point=function(a,s){hs.point=e,r=(t=a)*ja,o=Math.cos(s=(n=s)*ja/2+Ba/4),i=Math.sin(s)},hs.lineEnd=function(){e(t,n)}}function St(e){function t(e,t){r>e&&(r=e),e>i&&(i=e),o>t&&(o=t),t>a&&(a=t)}function n(){s.point=s.lineEnd=A}var r,o,i,a,s={point:t,lineStart:A,lineEnd:A,polygonStart:function(){s.lineEnd=n},polygonEnd:function(){s.point=t}};return function(t){return a=i=-(r=o=1/0),ua.geo.stream(t,e(s)),[[r,o],[i,a]]}}function Tt(e,t){if(!gs){++ms,e*=ja;var n=Math.cos(t*=ja);vs+=(n*Math.cos(e)-vs)/ms,_s+=(n*Math.sin(e)-_s)/ms,ys+=(Math.sin(t)-ys)/ms}}function Mt(){var e,t;gs=1,kt(),gs=2;var n=bs.point;bs.point=function(r,o){n(e=r,t=o)},bs.lineEnd=function(){bs.point(e,t),Et(),bs.lineEnd=Et}}function kt(){function e(e,o){e*=ja;var i=Math.cos(o*=ja),a=i*Math.cos(e),s=i*Math.sin(e),l=Math.sin(o),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*a-t*l)*u+(u=t*s-n*a)*u),t*a+n*s+r*l);ms+=u,vs+=u*(t+(t=a)),_s+=u*(n+(n=s)),ys+=u*(r+(r=l))}var t,n,r;gs>1||(1>gs&&(gs=1,ms=vs=_s=ys=0),bs.point=function(o,i){o*=ja;var a=Math.cos(i*=ja);t=a*Math.cos(o),n=a*Math.sin(o),r=Math.sin(i),bs.point=e})}function Et(){bs.point=Tt}function xt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Ct(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function At(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Nt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ot(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Dt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function It(){return!0}function Lt(e){return[Math.atan2(e[1],e[0]),Math.asin(Math.max(-1,Math.min(1,e[2])))]}function Rt(e,t){return Fa>Math.abs(e[0]-t[0])&&Fa>Math.abs(e[1]-t[1])}function Pt(e,t,n,r,o){var i=[],a=[];if(e.forEach(function(e){if(!(0>=(t=e.length-1))){var t,n=e[0],r=e[t];if(Rt(n,r)){o.lineStart();for(var s=0;t>s;++s)o.point((n=e[s])[0],n[1]);return o.lineEnd(),void 0}var l={point:n,points:e,other:null,visited:!1,entry:!0,subject:!0},u={point:n,points:[n],other:l,visited:!1,entry:!1,subject:!1};l.other=u,i.push(l),a.push(u),l={point:r,points:[r],other:null,visited:!1,entry:!1,subject:!0},u={point:r,points:[r],other:l,visited:!1,entry:!0,subject:!1},l.other=u,i.push(l),a.push(u)}}),a.sort(t),Bt(i),Bt(a),i.length){if(n)for(var s=1,l=!n(a[0].point),u=a.length;u>s;++s)a[s].entry=l=!l;for(var c,d,f,p=i[0];;){for(c=p;c.visited;)if((c=c.next)===p)return;d=c.points,o.lineStart();do{if(c.visited=c.other.visited=!0,c.entry){if(c.subject)for(var s=0;d.length>s;s++)o.point((f=d[s])[0],f[1]);else r(c.point,c.next.point,1,o);c=c.next}else{if(c.subject){d=c.prev.points;for(var s=d.length;--s>=0;)o.point((f=d[s])[0],f[1])}else r(c.point,c.prev.point,-1,o);c=c.prev}c=c.other,d=c.points}while(!c.visited);o.lineEnd()}}}function Bt(e){if(t=e.length){for(var t,n,r=0,o=e[0];t>++r;)o.next=n=e[r],n.prev=o,o=n;o.next=n=e[0],n.prev=o}}function Ft(e,t,n){return function(r){function o(t,n){e(t,n)&&r.point(t,n)}function i(e,t){m.point(e,t)}function a(){v.point=i,m.lineStart()}function s(){v.point=o,m.lineEnd()}function l(e,t){y.point(e,t),g.push([e,t])}function u(){y.lineStart(),g=[]}function c(){l(g[0][0],g[0][1]),y.lineEnd();var e,t=y.clean(),n=_.buffer(),o=n.length;if(!o)return h=!0,p+=Ut(g,-1),g=null,void 0;if(g=null,1&t){e=n[0],f+=Ut(e,1);var i,o=e.length-1,a=-1;for(r.lineStart();o>++a;)r.point((i=e[a])[0],i[1]);return r.lineEnd(),void 0}o>1&&2&t&&n.push(n.pop().concat(n.shift())),d.push(n.filter(jt))}var d,f,p,h,g,m=t(r),v={point:o,lineStart:a,lineEnd:s,polygonStart:function(){v.point=l,v.lineStart=u,v.lineEnd=c,h=!1,p=f=0,d=[],r.polygonStart()},polygonEnd:function(){v.point=o,v.lineStart=a,v.lineEnd=s,d=ua.merge(d),d.length?Pt(d,qt,null,n,r):(-Fa>f||h&&-Fa>p)&&(r.lineStart(),n(null,null,1,r),r.lineEnd()),r.polygonEnd(),d=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}},_=Ht(),y=t(_);return v}}function jt(e){return e.length>1}function Ht(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:A,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Ut(e,t){if(!(n=e.length))return 0;for(var n,r,o,i=0,a=0,s=e[0],l=s[0],u=s[1],c=Math.cos(u),d=Math.atan2(t*Math.sin(l)*c,Math.sin(u)),f=1-t*Math.cos(l)*c,p=d;n>++i;)s=e[i],c=Math.cos(u=s[1]),r=Math.atan2(t*Math.sin(l=s[0])*c,Math.sin(u)),o=1-t*Math.cos(l)*c,Fa>Math.abs(f-2)&&Fa>Math.abs(o-2)||(Fa>Math.abs(o)||Fa>Math.abs(f)||(Fa>Math.abs(Math.abs(r-d)-Ba)?o+f>2&&(a+=4*(r-d)):a+=Fa>Math.abs(f-2)?4*(r-p):((3*Ba+r-d)%(2*Ba)-Ba)*(f+o)),p=d,d=r,f=o);return a}function qt(e,t){return(0>(e=e.point)[0]?e[1]-Ba/2-Fa:Ba/2-e[1])-(0>(t=t.point)[0]?t[1]-Ba/2-Fa:Ba/2-t[1])}function $t(e){var t,n=0/0,r=0/0,o=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(i,a){var s=i>0?Ba:-Ba,l=Math.abs(i-n);Fa>Math.abs(l-Ba)?(e.point(n,r=(r+a)/2>0?Ba/2:-Ba/2),e.point(o,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(i,r),t=0):o!==s&&l>=Ba&&(Fa>Math.abs(n-o)&&(n-=o*Fa),Fa>Math.abs(i-s)&&(i-=s*Fa),r=Vt(n,r,i,a),e.point(o,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=i,r=a),o=s},lineEnd:function(){e.lineEnd(),n=r=0/0},clean:function(){return 2-t}}}function Vt(e,t,n,r){var o,i,a=Math.sin(e-n);return Math.abs(a)>Fa?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(n)-Math.sin(r)*(o=Math.cos(t))*Math.sin(e))/(o*i*a)):(t+r)/2}function zt(e,t,n,r){var o;if(null==e)o=n*Ba/2,r.point(-Ba,o),r.point(0,o),r.point(Ba,o),r.point(Ba,0),r.point(Ba,-o),r.point(0,-o),r.point(-Ba,-o),r.point(-Ba,0),r.point(-Ba,o);else if(Math.abs(e[0]-t[0])>Fa){var i=(e[0]<t[0]?1:-1)*Ba;o=n*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(t[0],t[1])}function Wt(e){function t(e,t){return Math.cos(e)*Math.cos(t)>i}function n(e){var n,i,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(d,f){var p,h=[d,f],g=t(d,f),m=a?g?0:o(d,f):g?o(d+(0>d?Ba:-Ba),f):0;if(!n&&(u=l=g)&&e.lineStart(),g!==l&&(p=r(n,h),(Rt(n,p)||Rt(h,p))&&(h[0]+=Fa,h[1]+=Fa,g=t(h[0],h[1]))),g!==l)c=0,g?(e.lineStart(),p=r(h,n),e.point(p[0],p[1])):(p=r(n,h),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(s&&n&&a^g){var v;m&i||!(v=r(h,n,!0))||(c=0,a?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||n&&Rt(n,h)||e.point(h[0],h[1]),n=h,l=g,i=m},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(e,t,n){var r=xt(e),o=xt(t),a=[1,0,0],s=At(r,o),l=Ct(s,s),u=s[0],c=l-u*u;if(!c)return!n&&e;var d=i*l/c,f=-i*u/c,p=At(a,s),h=Ot(a,d),g=Ot(s,f);Nt(h,g);var m=p,v=Ct(h,m),_=Ct(m,m),y=v*v-_*(Ct(h,h)-1);if(!(0>y)){var b=Math.sqrt(y),w=Ot(m,(-v-b)/_);if(Nt(w,h),w=Lt(w),!n)return w;var S,T=e[0],M=t[0],k=e[1],E=t[1];T>M&&(S=T,T=M,M=S);var x=M-T,C=Fa>Math.abs(x-Ba),A=C||Fa>x;if(!C&&k>E&&(S=k,k=E,E=S),A?C?k+E>0^w[1]<(Fa>Math.abs(w[0]-T)?k:E):w[1]>=k&&E>=w[1]:x>Ba^(w[0]>=T&&M>=w[0])){var N=Ot(m,(-v+b)/_);return Nt(N,h),[w,Lt(N)]}}}function o(t,n){var r=a?e:Ba-e,o=0;return-r>t?o|=1:t>r&&(o|=2),-r>n?o|=4:n>r&&(o|=8),o}var i=Math.cos(e),a=i>0,s=Math.abs(i)>Fa,l=an(e,6*ja);return Ft(t,n,l)}function Jt(e,t,n,r){function o(r,o){return Fa>Math.abs(r[0]-e)?o>0?0:3:Fa>Math.abs(r[0]-n)?o>0?2:1:Fa>Math.abs(r[1]-t)?o>0?1:0:o>0?3:2}function i(e,t){return a(e.point,t.point)}function a(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}function s(o,i){var a=i[0]-o[0],s=i[1]-o[1],l=[0,1];return Fa>Math.abs(a)&&Fa>Math.abs(s)?o[0]>=e&&n>=o[0]&&o[1]>=t&&r>=o[1]:Gt(e-o[0],a,l)&&Gt(o[0]-n,-a,l)&&Gt(t-o[1],s,l)&&Gt(o[1]-r,-s,l)?(1>l[1]&&(i[0]=o[0]+l[1]*a,i[1]=o[1]+l[1]*s),l[0]>0&&(o[0]+=l[0]*a,o[1]+=l[0]*s),!0):!1}return function(l){function u(i){var a=o(i,-1),s=c([0===a||3===a?e:n,a>1?r:t]);return s}function c(e){for(var t=0,n=y.length,r=e[1],o=0;n>o;++o)for(var i=1,a=y[o],s=a.length,l=a[0];s>i;++i)b=a[i],r>=l[1]?b[1]>r&&d(l,b,e)>0&&++t:r>=b[1]&&0>d(l,b,e)&&--t,l=b;return 0!==t}function d(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function f(i,s,l,u){var c=0,d=0;if(null==i||(c=o(i,l))!==(d=o(s,l))||0>a(i,s)^l>0){do u.point(0===c||3===c?e:n,c>1?r:t);while((c=(c+l+4)%4)!==d)}else u.point(s[0],s[1])}function p(o,i){return o>=e&&n>=o&&i>=t&&r>=i}function h(e,t){p(e,t)&&l.point(e,t)}function g(){O.point=v,y&&y.push(w=[]),C=!0,x=!1,k=E=0/0}function m(){_&&(v(S,T),M&&x&&N.rejoin(),_.push(N.buffer())),O.point=h,x&&l.lineEnd()}function v(e,t){e=Math.max(-Ss,Math.min(Ss,e)),t=Math.max(-Ss,Math.min(Ss,t));var n=p(e,t);if(y&&w.push([e,t]),C)S=e,T=t,M=n,C=!1,n&&(l.lineStart(),l.point(e,t));else if(n&&x)l.point(e,t);else{var r=[k,E],o=[e,t];s(r,o)?(x||(l.lineStart(),l.point(r[0],r[1])),l.point(o[0],o[1]),n||l.lineEnd()):(l.lineStart(),l.point(e,t))}k=e,E=t,x=n}var _,y,w,S,T,M,k,E,x,C,A=l,N=Ht(),O={point:h,lineStart:g,lineEnd:m,polygonStart:function(){l=N,_=[],y=[]},polygonEnd:function(){l=A,(_=ua.merge(_)).length?(l.polygonStart(),Pt(_,i,u,f,l),l.polygonEnd()):c([e,t])&&(l.polygonStart(),l.lineStart(),f(null,null,1,l),l.lineEnd(),l.polygonEnd()),_=y=w=null}};return O}}function Gt(e,t,n){if(Fa>Math.abs(t))return 0>=e;var r=e/t;if(t>0){if(r>n[1])return!1;r>n[0]&&(n[0]=r)}else{if(n[0]>r)return!1;n[1]>r&&(n[1]=r)}return!0}function Xt(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Yt(e){function t(t){function r(n,r){n=e(n,r),t.point(n[0],n[1])}function i(){c=0/0,g.point=a,t.lineStart()}function a(r,i){var a=xt([r,i]),s=e(r,i);n(c,d,u,f,p,h,c=s[0],d=s[1],u=r,f=a[0],p=a[1],h=a[2],o,t),t.point(c,d)}function s(){g.point=r,t.lineEnd()}function l(){var e,r,l,m,v,_,y;i(),g.point=function(t,n){a(e=t,r=n),l=c,m=d,v=f,_=p,y=h,g.point=a},g.lineEnd=function(){n(c,d,u,f,p,h,l,m,e,v,_,y,o,t),g.lineEnd=s,s()}}var u,c,d,f,p,h,g={point:r,lineStart:i,lineEnd:s,polygonStart:function(){t.polygonStart(),g.lineStart=l},polygonEnd:function(){t.polygonEnd(),g.lineStart=i}};return g}function n(t,o,i,a,s,l,u,c,d,f,p,h,g,m){var v=u-t,_=c-o,y=v*v+_*_;if(y>4*r&&g--){var b=a+f,w=s+p,S=l+h,T=Math.sqrt(b*b+w*w+S*S),M=Math.asin(S/=T),k=Fa>Math.abs(Math.abs(S)-1)?(i+d)/2:Math.atan2(w,b),E=e(k,M),x=E[0],C=E[1],A=x-t,N=C-o,O=_*A-v*N;(O*O/y>r||Math.abs((v*A+_*N)/y-.5)>.3)&&(n(t,o,i,a,s,l,x,C,k,b/=T,w/=T,S,g,m),m.point(x,C),n(x,C,k,b,w,S,u,c,d,f,p,h,g,m))}}var r=.5,o=16;return t.precision=function(e){return arguments.length?(o=(r=e*e)>0&&16,t):Math.sqrt(r)},t}function Kt(e){return Qt(function(){return e})()}function Qt(e){function t(e){return e=a(e[0]*ja,e[1]*ja),[e[0]*c+s,l-e[1]*c]}function n(e){return e=a.invert((e[0]-s)/c,(l-e[1])/c),e&&[e[0]*Ha,e[1]*Ha]}function r(){a=Xt(i=tn(g,m,v),o);var e=o(p,h);return s=d-e[0]*c,l=f+e[1]*c,t}var o,i,a,s,l,u=Yt(function(e,t){return e=o(e,t),[e[0]*c+s,l-e[1]*c]}),c=150,d=480,f=250,p=0,h=0,g=0,m=0,v=0,_=ws,y=ct,b=null,w=null;return t.stream=function(e){return Zt(i,_(u(y(e))))},t.clipAngle=function(e){return arguments.length?(_=null==e?(b=e,ws):Wt((b=+e)*ja),t):b},t.clipExtent=function(e){return arguments.length?(w=e,y=null==e?ct:Jt(e[0][0],e[0][1],e[1][0],e[1][1]),t):w},t.scale=function(e){return arguments.length?(c=+e,r()):c},t.translate=function(e){return arguments.length?(d=+e[0],f=+e[1],r()):[d,f]},t.center=function(e){return arguments.length?(p=e[0]%360*ja,h=e[1]%360*ja,r()):[p*Ha,h*Ha]},t.rotate=function(e){return arguments.length?(g=e[0]%360*ja,m=e[1]%360*ja,v=e.length>2?e[2]%360*ja:0,r()):[g*Ha,m*Ha,v*Ha]},ua.rebind(t,u,"precision"),function(){return o=e.apply(this,arguments),t.invert=o.invert&&n,r()}}function Zt(e,t){return{point:function(n,r){r=e(n*ja,r*ja),n=r[0],t.point(n>Ba?n-2*Ba:-Ba>n?n+2*Ba:n,r[1])},sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function en(e,t){return[e,t]}function tn(e,t,n){return e?t||n?Xt(rn(e),on(t,n)):rn(e):t||n?on(t,n):en}function nn(e){return function(t,n){return t+=e,[t>Ba?t-2*Ba:-Ba>t?t+2*Ba:t,n]}}function rn(e){var t=nn(e);return t.invert=nn(-e),t}function on(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*r+s*o;return[Math.atan2(l*i-c*a,s*r-u*o),Math.asin(Math.max(-1,Math.min(1,c*i+l*a)))]}var r=Math.cos(e),o=Math.sin(e),i=Math.cos(t),a=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*i-l*a;return[Math.atan2(l*i+u*a,s*r+c*o),Math.asin(Math.max(-1,Math.min(1,c*r-s*o)))]},n}function an(e,t){var n=Math.cos(e),r=Math.sin(e);return function(o,i,a,s){null!=o?(o=sn(n,o),i=sn(n,i),(a>0?i>o:o>i)&&(o+=2*a*Ba)):(o=e+2*a*Ba,i=e);for(var l,u=a*t,c=o;a>0?c>i:i>c;c-=u)s.point((l=Lt([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function sn(e,t){var n=xt(t);n[0]-=e,Dt(n);var r=H(-n[1]);return((0>-n[2]?-r:r)+2*Math.PI-Fa)%(2*Math.PI)}function ln(e,t,n){var r=ua.range(e,t-Fa,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function un(e,t,n){var r=ua.range(e,t-Fa,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function cn(e){return e.source}function dn(e){return e.target}function fn(e,t,n,r){var o=Math.cos(t),i=Math.sin(t),a=Math.cos(r),s=Math.sin(r),l=o*Math.cos(e),u=o*Math.sin(e),c=a*Math.cos(n),d=a*Math.sin(n),f=2*Math.asin(Math.sqrt(V(r-t)+o*a*V(n-e))),p=1/Math.sin(f),h=f?function(e){var t=Math.sin(e*=f)*p,n=Math.sin(f-e)*p,r=n*l+t*c,o=n*u+t*d,a=n*i+t*s;return[Math.atan2(o,r)*Ha,Math.atan2(a,Math.sqrt(r*r+o*o))*Ha]}:function(){return[e*Ha,t*Ha]};return h.distance=f,h}function pn(){function e(e,o){var i=Math.sin(o*=ja),a=Math.cos(o),s=Math.abs((e*=ja)-t),l=Math.cos(s);Ts+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*i-n*a*l)*s),n*i+r*a*l),t=e,n=i,r=a}var t,n,r;Ms.point=function(o,i){t=o*ja,n=Math.sin(i*=ja),r=Math.cos(i),Ms.point=e},Ms.lineEnd=function(){Ms.point=Ms.lineEnd=A}}function hn(e){var t=0,n=Ba/3,r=Qt(e),o=r(t,n);return o.parallels=function(e){return arguments.length?r(t=e[0]*Ba/180,n=e[1]*Ba/180):[180*(t/Ba),180*(n/Ba)]},o}function gn(e,t){function n(e,t){var n=Math.sqrt(i-2*o*Math.sin(t))/o;return[n*Math.sin(e*=o),a-n*Math.cos(e)]}var r=Math.sin(e),o=(r+Math.sin(t))/2,i=1+r*(2*o-r),a=Math.sqrt(i)/o;return n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/o,Math.asin((i-(e*e+n*n)*o*o)/(2*o))]},n}function mn(e,t){var n=e(t[0]),r=e([.5*(t[0][0]+t[1][0]),t[0][1]]),o=e([t[1][0],t[0][1]]),i=e(t[1]),a=r[1]-n[1],s=r[0]-n[0],l=o[1]-r[1],u=o[0]-r[0],c=a/s,d=l/u,f=.5*(c*d*(n[1]-o[1])+d*(n[0]+r[0])-c*(r[0]+o[0]))/(d-c),p=(.5*(n[0]+r[0])-f)/c+.5*(n[1]+r[1]),h=i[0]-f,g=i[1]-p,m=n[0]-f,v=n[1]-p,_=h*h+g*g,y=m*m+v*v,b=Math.atan2(g,h),w=Math.atan2(v,m);return function(t){var n=t[0]-f,r=t[1]-p,o=n*n+r*r,i=Math.atan2(r,n);return o>_&&y>o&&i>b&&w>i?e.invert(t):void 0}}function vn(){function e(e,t){Es+=o*e-r*t,r=e,o=t}var t,n,r,o;xs.point=function(i,a){xs.point=e,t=r=i,n=o=a},xs.lineEnd=function(){e(t,n)}}function _n(){function e(e,t){a.push("M",e,",",t,i)}function t(e,t){a.push("M",e,",",t),s.point=n}function n(e,t){a.push("L",e,",",t)}function r(){s.point=e}function o(){a.push("Z")}var i=Mn(4.5),a=[],s={point:e,lineStart:function(){s.point=t},lineEnd:r,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(e){return i=Mn(e),s},result:function(){if(a.length){var e=a.join("");return a=[],e}}};return s}function yn(e,t){gs||(vs+=e,_s+=t,++ys)}function bn(){function e(e,r){var o=e-t,i=r-n,a=Math.sqrt(o*o+i*i);vs+=a*(t+e)/2,_s+=a*(n+r)/2,ys+=a,t=e,n=r}var t,n;if(1!==gs){if(!(1>gs))return;gs=1,vs=_s=ys=0}Cs.point=function(r,o){Cs.point=e,t=r,n=o}}function wn(){Cs.point=yn}function Sn(){function e(e,t){var n=o*e-r*t;vs+=n*(r+e),_s+=n*(o+t),ys+=3*n,r=e,o=t}var t,n,r,o;2>gs&&(gs=2,vs=_s=ys=0),Cs.point=function(i,a){Cs.point=e,t=r=i,n=o=a},Cs.lineEnd=function(){e(t,n)}}function Tn(e){function t(t,n){e.moveTo(t,n),e.arc(t,n,a,0,2*Ba)}function n(t,n){e.moveTo(t,n),s.point=r}function r(t,n){e.lineTo(t,n)}function o(){s.point=t}function i(){e.closePath()}var a=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:o,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=o,s.point=t},pointRadius:function(e){return a=e,s},result:A};return s}function Mn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function kn(e){var t=Yt(function(t,n){return e([t*Ha,n*Ha])});return function(e){return e=t(e),{point:function(t,n){e.point(t*ja,n*ja)},sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}}function En(e,t){function n(t,n){var r=Math.cos(t),o=Math.cos(n),i=e(r*o);return[i*o*Math.sin(t),i*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),o=t(r),i=Math.sin(o),a=Math.cos(o);return[Math.atan2(e*i,r*a),Math.asin(r&&n*i/r)]},n}function xn(e,t){function n(e,t){var n=Fa>Math.abs(Math.abs(t)-Ba/2)?0:a/Math.pow(o(t),i);return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}var r=Math.cos(e),o=function(e){return Math.tan(Ba/4+e/2)},i=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(o(t)/o(e)),a=r*Math.pow(o(e),i)/i;return i?(n.invert=function(e,t){var n=a-t,r=j(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(a/r,1/i))-Ba/2]},n):An}function Cn(e,t){function n(e,t){var n=i-t;return[n*Math.sin(o*e),i-n*Math.cos(o*e)]}var r=Math.cos(e),o=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),i=r/o+e;return Fa>Math.abs(o)?en:(n.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/o,i-j(o)*Math.sqrt(e*e+n*n)]},n)}function An(e,t){return[e,Math.log(Math.tan(Ba/4+t/2))]}function Nn(e){var t,n=Kt(e),r=n.scale,o=n.translate,i=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=o.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var a=i.apply(n,arguments);if(a===n){if(t=null==e){var s=Ba*r(),l=o();i([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(a=null);return a},n.clipExtent(null)}function On(e,t){var n=Math.cos(t)*Math.sin(e);return[Math.log((1+n)/(1-n))/2,Math.atan2(Math.tan(t),Math.cos(e))]}function Dn(e){function t(t){function a(){u.push("M",i(e(c),s))}for(var l,u=[],c=[],d=-1,f=t.length,p=ut(n),h=ut(r);f>++d;)o.call(this,l=t[d],d)?c.push([+p.call(this,l,d),+h.call(this,l,d)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=In,r=Ln,o=It,i=Rn,a=i.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?i=e:(i=Ls.get(e)||Rn).key,t):a},t.tension=function(e){return arguments.length?(s=e,t):s},t}function In(e){return e[0]}function Ln(e){return e[1]}function Rn(e){return e.join("L")}function Pn(e){return Rn(e)+"Z"}function Bn(e){for(var t=0,n=e.length,r=e[0],o=[r[0],",",r[1]];n>++t;)o.push("V",(r=e[t])[1],"H",r[0]);return o.join("")}function Fn(e){for(var t=0,n=e.length,r=e[0],o=[r[0],",",r[1]];n>++t;)o.push("H",(r=e[t])[0],"V",r[1]);return o.join("")}function jn(e,t){return 4>e.length?Rn(e):e[1]+qn(e.slice(1,e.length-1),$n(e,t))}function Hn(e,t){return 3>e.length?Rn(e):e[0]+qn((e.push(e[0]),e),$n([e[e.length-2]].concat(e,[e[1]]),t))}function Un(e,t){return 3>e.length?Rn(e):e[0]+qn(e,$n(e,t))}function qn(e,t){if(1>t.length||e.length!=t.length&&e.length!=t.length+2)return Rn(e);var n=e.length!=t.length,r="",o=e[0],i=e[1],a=t[0],s=a,l=1;if(n&&(r+="Q"+(i[0]-2*a[0]/3)+","+(i[1]-2*a[1]/3)+","+i[0]+","+i[1],o=e[1],l=2),t.length>1){s=t[1],i=e[l],l++,r+="C"+(o[0]+a[0])+","+(o[1]+a[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var u=2;t.length>u;u++,l++)i=e[l],s=t[u],r+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}if(n){var c=e[l];r+="Q"+(i[0]+2*s[0]/3)+","+(i[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function $n(e,t){for(var n,r=[],o=(1-t)/2,i=e[0],a=e[1],s=1,l=e.length;l>++s;)n=i,i=a,a=e[s],r.push([o*(a[0]-n[0]),o*(a[1]-n[1])]);return r}function Vn(e){if(3>e.length)return Rn(e);var t=1,n=e.length,r=e[0],o=r[0],i=r[1],a=[o,o,o,(r=e[1])[0]],s=[i,i,i,r[1]],l=[o,",",i];for(Xn(l,a,s);n>++t;)r=e[t],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Xn(l,a,s);for(t=-1;2>++t;)a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Xn(l,a,s);return l.join("")}function zn(e){if(4>e.length)return Rn(e);for(var t,n=[],r=-1,o=e.length,i=[0],a=[0];3>++r;)t=e[r],i.push(t[0]),a.push(t[1]);for(n.push(Gn(Bs,i)+","+Gn(Bs,a)),--r;o>++r;)t=e[r],i.shift(),i.push(t[0]),a.shift(),a.push(t[1]),Xn(n,i,a);return n.join("")}function Wn(e){for(var t,n,r=-1,o=e.length,i=o+4,a=[],s=[];4>++r;)n=e[r%o],a.push(n[0]),s.push(n[1]);for(t=[Gn(Bs,a),",",Gn(Bs,s)],--r;i>++r;)n=e[r%o],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Xn(t,a,s);return t.join("")}function Jn(e,t){var n=e.length-1;if(n)for(var r,o,i=e[0][0],a=e[0][1],s=e[n][0]-i,l=e[n][1]-a,u=-1;n>=++u;)r=e[u],o=u/n,r[0]=t*r[0]+(1-t)*(i+o*s),r[1]=t*r[1]+(1-t)*(a+o*l);return Vn(e)}function Gn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Xn(e,t,n){e.push("C",Gn(Rs,t),",",Gn(Rs,n),",",Gn(Ps,t),",",Gn(Ps,n),",",Gn(Bs,t),",",Gn(Bs,n))}function Yn(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Kn(e){for(var t=0,n=e.length-1,r=[],o=e[0],i=e[1],a=r[0]=Yn(o,i);n>++t;)r[t]=(a+(a=Yn(o=i,i=e[t+1])))/2;return r[t]=a,r}function Qn(e){for(var t,n,r,o,i=[],a=Kn(e),s=-1,l=e.length-1;l>++s;)t=Yn(e[s],e[s+1]),1e-6>Math.abs(t)?a[s]=a[s+1]=0:(n=a[s]/t,r=a[s+1]/t,o=n*n+r*r,o>9&&(o=3*t/Math.sqrt(o),a[s]=o*n,a[s+1]=o*r));for(s=-1;l>=++s;)o=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),i.push([o||0,a[s]*o||0]);return i}function Zn(e){return 3>e.length?Rn(e):e[0]+qn(e,Qn(e))}function er(e,t,n,r){var o,i,a,s,l,u,c;return o=r[e],i=o[0],a=o[1],o=r[t],s=o[0],l=o[1],o=r[n],u=o[0],c=o[1],(c-a)*(s-i)-(l-a)*(u-i)>0}function tr(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function nr(e,t,n,r){var o=e[0],i=n[0],a=t[0]-o,s=r[0]-i,l=e[1],u=n[1],c=t[1]-l,d=r[1]-u,f=(s*(l-u)-d*(o-i))/(d*a-s*c);return[o+f*a,l+f*c]}function rr(e,t){var n={list:e.map(function(e,t){return{index:t,x:e[0],y:e[1]}}).sort(function(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}),bottomSite:null},r={list:[],leftEnd:null,rightEnd:null,init:function(){r.leftEnd=r.createHalfEdge(null,"l"),r.rightEnd=r.createHalfEdge(null,"l"),r.leftEnd.r=r.rightEnd,r.rightEnd.l=r.leftEnd,r.list.unshift(r.leftEnd,r.rightEnd)},createHalfEdge:function(e,t){return{edge:e,side:t,vertex:null,l:null,r:null}},insert:function(e,t){t.l=e,t.r=e.r,e.r.l=t,e.r=t},leftBound:function(e){var t=r.leftEnd;do t=t.r;while(t!=r.rightEnd&&o.rightOf(t,e));return t=t.l},del:function(e){e.l.r=e.r,e.r.l=e.l,e.edge=null},right:function(e){return e.r},left:function(e){return e.l},leftRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[e.side]},rightRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[Fs[e.side]]}},o={bisect:function(e,t){var n={region:{l:e,r:t},ep:{l:null,r:null}},r=t.x-e.x,o=t.y-e.y,i=r>0?r:-r,a=o>0?o:-o;return n.c=e.x*r+e.y*o+.5*(r*r+o*o),i>a?(n.a=1,n.b=o/r,n.c/=r):(n.b=1,n.a=r/o,n.c/=o),n},intersect:function(e,t){var n=e.edge,r=t.edge;if(!n||!r||n.region.r==r.region.r)return null;var o=n.a*r.b-n.b*r.a;if(1e-10>Math.abs(o))return null;var i,a,s=(n.c*r.b-r.c*n.b)/o,l=(r.c*n.a-n.c*r.a)/o,u=n.region.r,c=r.region.r;u.y<c.y||u.y==c.y&&u.x<c.x?(i=e,a=n):(i=t,a=r);var d=s>=a.region.r.x;return d&&"l"===i.side||!d&&"r"===i.side?null:{x:s,y:l}},rightOf:function(e,t){var n=e.edge,r=n.region.r,o=t.x>r.x;if(o&&"l"===e.side)return 1;if(!o&&"r"===e.side)return 0;if(1===n.a){var i=t.y-r.y,a=t.x-r.x,s=0,l=0;if(!o&&0>n.b||o&&n.b>=0?l=s=i>=n.b*a:(l=t.x+t.y*n.b>n.c,0>n.b&&(l=!l),l||(s=1)),!s){var u=r.x-n.region.l.x;l=n.b*(a*a-i*i)<u*i*(1+2*a/u+n.b*n.b),0>n.b&&(l=!l)}}else{var c=n.c-n.a*t.x,d=t.y-c,f=t.x-r.x,p=c-r.y;l=d*d>f*f+p*p}return"l"===e.side?l:!l},endPoint:function(e,n,r){e.ep[n]=r,e.ep[Fs[n]]&&t(e)},distance:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}},i={list:[],insert:function(e,t,n){e.vertex=t,e.ystar=t.y+n;for(var r=0,o=i.list,a=o.length;a>r;r++){var s=o[r];if(!(e.ystar>s.ystar||e.ystar==s.ystar&&t.x>s.vertex.x))break}o.splice(r,0,e)},del:function(e){for(var t=0,n=i.list,r=n.length;r>t&&n[t]!=e;++t);n.splice(t,1)},empty:function(){return 0===i.list.length},nextEvent:function(e){for(var t=0,n=i.list,r=n.length;r>t;++t)if(n[t]==e)return n[t+1];return null},min:function(){var e=i.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return i.list.shift()}};r.init(),n.bottomSite=n.list.shift();for(var a,s,l,u,c,d,f,p,h,g,m,v,_,y=n.list.shift();;)if(i.empty()||(a=i.min()),y&&(i.empty()||y.y<a.y||y.y==a.y&&y.x<a.x))s=r.leftBound(y),l=r.right(s),f=r.rightRegion(s),v=o.bisect(f,y),d=r.createHalfEdge(v,"l"),r.insert(s,d),g=o.intersect(s,d),g&&(i.del(s),i.insert(s,g,o.distance(g,y))),s=d,d=r.createHalfEdge(v,"r"),r.insert(s,d),g=o.intersect(d,l),g&&i.insert(d,g,o.distance(g,y)),y=n.list.shift();else{if(i.empty())break;s=i.extractMin(),u=r.left(s),l=r.right(s),c=r.right(l),f=r.leftRegion(s),p=r.rightRegion(l),m=s.vertex,o.endPoint(s.edge,s.side,m),o.endPoint(l.edge,l.side,m),r.del(s),i.del(l),r.del(l),_="l",f.y>p.y&&(h=f,f=p,p=h,_="r"),v=o.bisect(f,p),d=r.createHalfEdge(v,_),r.insert(u,d),o.endPoint(v,Fs[_],m),g=o.intersect(u,d),g&&(i.del(u),i.insert(u,g,o.distance(g,f))),g=o.intersect(d,c),g&&i.insert(d,g,o.distance(g,f))}for(s=r.right(r.leftEnd);s!=r.rightEnd;s=r.right(s))t(s.edge)}function or(e){return e.x}function ir(e){return e.y}function ar(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function sr(e,t,n,r,o,i){if(!e(t,n,r,o,i)){var a=.5*(n+o),s=.5*(r+i),l=t.nodes;l[0]&&sr(e,l[0],n,r,a,s),l[1]&&sr(e,l[1],a,r,o,s),l[2]&&sr(e,l[2],n,s,a,i),l[3]&&sr(e,l[3],a,s,o,i)}}function lr(e,t){e=ua.rgb(e),t=ua.rgb(t);var n=e.r,r=e.g,o=e.b,i=t.r-n,a=t.g-r,s=t.b-o;return function(e){return"#"+rt(Math.round(n+i*e))+rt(Math.round(r+a*e))+rt(Math.round(o+s*e))}}function ur(e){var t=[e.a,e.b],n=[e.c,e.d],r=dr(t),o=cr(t,n),i=dr(fr(n,t,-o))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,o*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Ha,this.translate=[e.e,e.f],this.scale=[r,i],this.skew=i?Math.atan2(o,i)*Ha:0}function cr(e,t){return e[0]*t[0]+e[1]*t[1]}function dr(e){var t=Math.sqrt(cr(e,e));
return t&&(e[0]/=t,e[1]/=t),t}function fr(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function pr(e,t){return t-=e,function(n){return e+t*n}}function hr(e,t){var n,r=[],o=[],i=ua.transform(e),a=ua.transform(t),s=i.translate,l=a.translate,u=i.rotate,c=a.rotate,d=i.skew,f=a.skew,p=i.scale,h=a.scale;return s[0]!=l[0]||s[1]!=l[1]?(r.push("translate(",null,",",null,")"),o.push({i:1,x:pr(s[0],l[0])},{i:3,x:pr(s[1],l[1])})):l[0]||l[1]?r.push("translate("+l+")"):r.push(""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),o.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:pr(u,c)})):c&&r.push(r.pop()+"rotate("+c+")"),d!=f?o.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:pr(d,f)}):f&&r.push(r.pop()+"skewX("+f+")"),p[0]!=h[0]||p[1]!=h[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),o.push({i:n-4,x:pr(p[0],h[0])},{i:n-2,x:pr(p[1],h[1])})):(1!=h[0]||1!=h[1])&&r.push(r.pop()+"scale("+h+")"),n=o.length,function(e){for(var t,i=-1;n>++i;)r[(t=o[i]).i]=t.x(e);return r.join("")}}function gr(e,t){var n,r={},o={};for(n in e)n in t?r[n]=_r(n)(e[n],t[n]):o[n]=e[n];for(n in t)n in e||(o[n]=t[n]);return function(e){for(n in r)o[n]=r[n](e);return o}}function mr(e,t){var n,r,o,i,a,s=0,l=0,u=[],c=[];for(Hs.lastIndex=0,r=0;n=Hs.exec(t);++r)n.index&&u.push(t.substring(s,l=n.index)),c.push({i:u.length,x:n[0]}),u.push(null),s=Hs.lastIndex;for(t.length>s&&u.push(t.substring(s)),r=0,i=c.length;(n=Hs.exec(e))&&i>r;++r)if(a=c[r],a.x==n[0]){if(a.i)if(null==u[a.i+1])for(u[a.i-1]+=a.x,u.splice(a.i,1),o=r+1;i>o;++o)c[o].i--;else for(u[a.i-1]+=a.x+u[a.i+1],u.splice(a.i,2),o=r+1;i>o;++o)c[o].i-=2;else if(null==u[a.i+1])u[a.i]=a.x;else for(u[a.i]=a.x+u[a.i+1],u.splice(a.i+1,1),o=r+1;i>o;++o)c[o].i--;c.splice(r,1),i--,r--}else a.x=pr(parseFloat(n[0]),parseFloat(a.x));for(;i>r;)a=c.pop(),null==u[a.i+1]?u[a.i]=a.x:(u[a.i]=a.x+u[a.i+1],u.splice(a.i+1,1)),i--;return 1===u.length?null==u[0]?c[0].x:function(){return t}:function(e){for(r=0;i>r;++r)u[(a=c[r]).i]=a.x(e);return u.join("")}}function vr(e,t){for(var n,r=ua.interpolators.length;--r>=0&&!(n=ua.interpolators[r](e,t)););return n}function _r(e){return"transform"==e?hr:vr}function yr(e,t){var n,r=[],o=[],i=e.length,a=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)r.push(vr(e[n],t[n]));for(;i>n;++n)o[n]=e[n];for(;a>n;++n)o[n]=t[n];return function(e){for(n=0;s>n;++n)o[n]=r[n](e);return o}}function br(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function wr(e){return function(t){return 1-e(1-t)}}function Sr(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Tr(e){return e*e}function Mr(e){return e*e*e}function kr(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Er(e){return function(t){return Math.pow(t,e)}}function xr(e){return 1-Math.cos(e*Ba/2)}function Cr(e){return Math.pow(2,10*(e-1))}function Ar(e){return 1-Math.sqrt(1-e*e)}function Nr(e,t){var n;return 2>arguments.length&&(t=.45),arguments.length?n=t/(2*Ba)*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,10*-r)*Math.sin(2*(r-n)*Ba/t)}}function Or(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Dr(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Ir(e,t){e=ua.hcl(e),t=ua.hcl(t);var n=e.h,r=e.c,o=e.l,i=t.h-n,a=t.c-r,s=t.l-o;return i>180?i-=360:-180>i&&(i+=360),function(e){return J(n+i*e,r+a*e,o+s*e)+""}}function Lr(e,t){e=ua.hsl(e),t=ua.hsl(t);var n=e.h,r=e.s,o=e.l,i=t.h-n,a=t.s-r,s=t.l-o;return i>180?i-=360:-180>i&&(i+=360),function(e){return F(n+i*e,r+a*e,o+s*e)+""}}function Rr(e,t){e=ua.lab(e),t=ua.lab(t);var n=e.l,r=e.a,o=e.b,i=t.l-n,a=t.a-r,s=t.b-o;return function(e){return Y(n+i*e,r+a*e,o+s*e)+""}}function Pr(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Br(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function Fr(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function jr(e){for(var t=e.source,n=e.target,r=Ur(t,n),o=[t];t!==r;)t=t.parent,o.push(t);for(var i=o.length;n!==r;)o.splice(i,0,n),n=n.parent;return o}function Hr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Ur(e,t){if(e===t)return e;for(var n=Hr(e),r=Hr(t),o=n.pop(),i=r.pop(),a=null;o===i;)a=o,o=n.pop(),i=r.pop();return a}function qr(e){e.fixed|=2}function $r(e){e.fixed&=-7}function Vr(e){e.fixed|=4,e.px=e.x,e.py=e.y}function zr(e){e.fixed&=-5}function Wr(e,t,n){var r=0,o=0;if(e.charge=0,!e.leaf)for(var i,a=e.nodes,s=a.length,l=-1;s>++l;)i=a[l],null!=i&&(Wr(i,t,n),e.charge+=i.charge,r+=i.charge*i.cx,o+=i.charge*i.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,r+=u*e.point.x,o+=u*e.point.y}e.cx=r/e.charge,e.cy=o/e.charge}function Jr(e,t){return ua.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Kr,e}function Gr(e){return e.children}function Xr(e){return e.value}function Yr(e,t){return t.value-e.value}function Kr(e){return ua.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Qr(e){return e.x}function Zr(e){return e.y}function eo(e,t,n){e.y0=t,e.y=n}function to(e){return ua.range(e.length)}function no(e){for(var t=-1,n=e[0].length,r=[];n>++t;)r[t]=0;return r}function ro(e){for(var t,n=1,r=0,o=e[0][1],i=e.length;i>n;++n)(t=e[n][1])>o&&(r=n,o=t);return r}function oo(e){return e.reduce(io,0)}function io(e,t){return e+t[1]}function ao(e,t){return so(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function so(e,t){for(var n=-1,r=+e[0],o=(e[1]-r)/t,i=[];t>=++n;)i[n]=o*n+r;return i}function lo(e){return[ua.min(e),ua.max(e)]}function uo(e,t){return e.parent==t.parent?1:2}function co(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function fo(e){var t,n=e.children;return n&&(t=n.length)?n[t-1]:e._tree.thread}function po(e,t){var n=e.children;if(n&&(o=n.length))for(var r,o,i=-1;o>++i;)t(r=po(n[i],t),e)>0&&(e=r);return e}function ho(e,t){return e.x-t.x}function go(e,t){return t.x-e.x}function mo(e,t){return e.depth-t.depth}function vo(e,t){function n(e,r){var o=e.children;if(o&&(a=o.length))for(var i,a,s=null,l=-1;a>++l;)i=o[l],n(i,s),s=i;t(e,r)}n(e,null)}function _o(e){for(var t,n=0,r=0,o=e.children,i=o.length;--i>=0;)t=o[i]._tree,t.prelim+=n,t.mod+=n,n+=t.shift+(r+=t.change)}function yo(e,t,n){e=e._tree,t=t._tree;var r=n/(t.number-e.number);e.change+=r,t.change-=r,t.shift+=n,t.prelim+=n,t.mod+=n}function bo(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function wo(e,t){return e.value-t.value}function So(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function To(e,t){e._pack_next=t,t._pack_prev=e}function Mo(e,t){var n=t.x-e.x,r=t.y-e.y,o=e.r+t.r;return o*o-n*n-r*r>.001}function ko(e){function t(e){c=Math.min(e.x-e.r,c),d=Math.max(e.x+e.r,d),f=Math.min(e.y-e.r,f),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(u=n.length)){var n,r,o,i,a,s,l,u,c=1/0,d=-1/0,f=1/0,p=-1/0;if(n.forEach(Eo),r=n[0],r.x=-r.r,r.y=0,t(r),u>1&&(o=n[1],o.x=o.r,o.y=0,t(o),u>2))for(i=n[2],Ao(r,o,i),t(i),So(r,i),r._pack_prev=i,So(i,o),o=r._pack_next,a=3;u>a;a++){Ao(r,o,i=n[a]);var h=0,g=1,m=1;for(s=o._pack_next;s!==o;s=s._pack_next,g++)if(Mo(s,i)){h=1;break}if(1==h)for(l=r._pack_prev;l!==s._pack_prev&&!Mo(l,i);l=l._pack_prev,m++);h?(m>g||g==m&&o.r<r.r?To(r,o=s):To(r=l,o),a--):(So(r,i),o=i,t(i))}var v=(c+d)/2,_=(f+p)/2,y=0;for(a=0;u>a;a++)i=n[a],i.x-=v,i.y-=_,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=y,n.forEach(xo)}}function Eo(e){e._pack_next=e._pack_prev=e}function xo(e){delete e._pack_next,delete e._pack_prev}function Co(e,t,n,r){var o=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,o)for(var i=-1,a=o.length;a>++i;)Co(o[i],t,n,r)}function Ao(e,t,n){var r=e.r+n.r,o=t.x-e.x,i=t.y-e.y;if(r&&(o||i)){var a=t.r+n.r,s=o*o+i*i;a*=a,r*=r;var l=.5+(r-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=e.x+l*o+u*i,n.y=e.y+l*i-u*o}else n.x=e.x+r,n.y=e.y}function No(e){return 1+ua.max(e,function(e){return e.y})}function Oo(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Do(e){var t=e.children;return t&&t.length?Do(t[0]):e}function Io(e){var t,n=e.children;return n&&(t=n.length)?Io(n[t-1]):e}function Lo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Ro(e,t){var n=e.x+t[3],r=e.y+t[0],o=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];return 0>o&&(n+=o/2,o=0),0>i&&(r+=i/2,i=0),{x:n,y:r,dx:o,dy:i}}function Po(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Bo(e){return e.rangeExtent?e.rangeExtent():Po(e.range())}function Fo(e,t,n,r){var o=n(e[0],e[1]),i=r(t[0],t[1]);return function(e){return i(o(e))}}function jo(e,t){var n,r=0,o=e.length-1,i=e[r],a=e[o];return i>a&&(n=r,r=o,o=n,n=i,i=a,a=n),(t=t(a-i))&&(e[r]=t.floor(i),e[o]=t.ceil(a)),e}function Ho(e,t,n,r){var o=[],i=[],a=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());s>=++a;)o.push(n(e[a-1],e[a])),i.push(r(t[a-1],t[a]));return function(t){var n=ua.bisect(e,t,1,s)-1;return i[n](o[n](t))}}function Uo(e,t,n,r){function o(){var o=Math.min(e.length,t.length)>2?Ho:Fo,l=r?Fr:Br;return a=o(e,t,l,n),s=o(t,e,l,vr),i}function i(e){return a(e)}var a,s;return i.invert=function(e){return s(e)},i.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},i.range=function(e){return arguments.length?(t=e,o()):t},i.rangeRound=function(e){return i.range(e).interpolate(Pr)},i.clamp=function(e){return arguments.length?(r=e,o()):r},i.interpolate=function(e){return arguments.length?(n=e,o()):n},i.ticks=function(t){return zo(e,t)},i.tickFormat=function(t,n){return Wo(e,t,n)},i.nice=function(){return jo(e,$o),o()},i.copy=function(){return Uo(e,t,n,r)},o()}function qo(e,t){return ua.rebind(e,t,"range","rangeRound","interpolate","clamp")}function $o(e){return e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1),e&&{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}}function Vo(e,t){var n=Po(e),r=n[1]-n[0],o=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*o;return.15>=i?o*=10:.35>=i?o*=5:.75>=i&&(o*=2),n[0]=Math.ceil(n[0]/o)*o,n[1]=Math.floor(n[1]/o)*o+.5*o,n[2]=o,n}function zo(e,t){return ua.range.apply(ua,Vo(e,t))}function Wo(e,t,n){var r=-Math.floor(Math.log(Vo(e,t)[2])/Math.LN10+.01);return ua.format(n?n.replace(is,function(e,t,n,o,i,a,s,l,u,c){return[t,n,o,i,a,s,l,u||"."+(r-2*("%"===c)),c].join("")}):",."+r+"f")}function Jo(e,t,n,r){function o(t){return e(n(t))}return o.invert=function(t){return r(e.invert(t))},o.domain=function(t){return arguments.length?(0>t[0]?(n=Yo,r=Ko):(n=Go,r=Xo),e.domain(t.map(n)),o):e.domain().map(r)},o.base=function(e){return arguments.length?(t=+e,o):t},o.nice=function(){return e.domain(jo(e.domain(),Qo(t))),o},o.ticks=function(){var o=Po(e.domain()),i=[];if(o.every(isFinite)){var a=Math.log(t),s=Math.floor(o[0]/a),l=Math.ceil(o[1]/a),u=r(o[0]),c=r(o[1]),d=t%1?2:t;if(n===Yo)for(i.push(-Math.pow(t,-s));l>s++;)for(var f=d-1;f>0;f--)i.push(-Math.pow(t,-s)*f);else{for(;l>s;s++)for(var f=1;d>f;f++)i.push(Math.pow(t,s)*f);i.push(Math.pow(t,s))}for(s=0;u>i[s];s++);for(l=i.length;i[l-1]>c;l--);i=i.slice(s,l)}return i},o.tickFormat=function(e,i){if(2>arguments.length&&(i=Xs),!arguments.length)return i;var a,s=Math.log(t),l=Math.max(.1,e/o.ticks().length),u=n===Yo?(a=-1e-12,Math.floor):(a=1e-12,Math.ceil);return function(e){return l>=e/r(s*u(n(e)/s+a))?i(e):""}},o.copy=function(){return Jo(e.copy(),t,n,r)},qo(o,e)}function Go(e){return Math.log(0>e?0:e)}function Xo(e){return Math.exp(e)}function Yo(e){return-Math.log(e>0?0:-e)}function Ko(e){return-Math.exp(-e)}function Qo(e){e=Math.log(e);var t={floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}};return function(){return t}}function Zo(e,t){function n(t){return e(r(t))}var r=ei(t),o=ei(1/t);return n.invert=function(t){return o(e.invert(t))},n.domain=function(t){return arguments.length?(e.domain(t.map(r)),n):e.domain().map(o)},n.ticks=function(e){return zo(n.domain(),e)},n.tickFormat=function(e,t){return Wo(n.domain(),e,t)},n.nice=function(){return n.domain(jo(n.domain(),$o))},n.exponent=function(e){if(!arguments.length)return t;var i=n.domain();return r=ei(t=e),o=ei(1/t),n.domain(i)},n.copy=function(){return Zo(e.copy(),t)},qo(n,e)}function ei(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function ti(e,t){function n(t){return a[((i.get(t)||i.set(t,e.push(t)))-1)%a.length]}function r(t,n){return ua.range(e.length).map(function(e){return t+n*e})}var i,a,s;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new o;for(var a,s=-1,l=r.length;l>++s;)i.has(a=r[s])||i.set(a,e.push(a));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(a=e,s=0,t={t:"range",a:arguments},n):a},n.rangePoints=function(o,i){2>arguments.length&&(i=0);var l=o[0],u=o[1],c=(u-l)/(Math.max(1,e.length-1)+i);return a=r(2>e.length?(l+u)/2:l+c*i/2,c),s=0,t={t:"rangePoints",a:arguments},n},n.rangeBands=function(o,i,l){2>arguments.length&&(i=0),3>arguments.length&&(l=i);var u=o[1]<o[0],c=o[u-0],d=o[1-u],f=(d-c)/(e.length-i+2*l);return a=r(c+f*l,f),u&&a.reverse(),s=f*(1-i),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(o,i,l){2>arguments.length&&(i=0),3>arguments.length&&(l=i);var u=o[1]<o[0],c=o[u-0],d=o[1-u],f=Math.floor((d-c)/(e.length-i+2*l)),p=d-c-(e.length-i)*f;return a=r(c+Math.round(p/2),f),u&&a.reverse(),s=Math.round(f*(1-i)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Po(t.a[0])},n.copy=function(){return ti(e,t)},n.domain(e)}function ni(e,t){function n(){var n=0,i=t.length;for(o=[];i>++n;)o[n-1]=ua.quantile(e,n/i);return r}function r(e){return isNaN(e=+e)?0/0:t[ua.bisect(o,e)]}var o;return r.domain=function(t){return arguments.length?(e=t.filter(function(e){return!isNaN(e)}).sort(ua.ascending),n()):e},r.range=function(e){return arguments.length?(t=e,n()):t},r.quantiles=function(){return o},r.copy=function(){return ni(e,t)},n()}function ri(e,t,n){function r(t){return n[Math.max(0,Math.min(a,Math.floor(i*(t-e))))]}function o(){return i=n.length/(t-e),a=n.length-1,r}var i,a;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},r.range=function(e){return arguments.length?(n=e,o()):n},r.copy=function(){return ri(e,t,n)},o()}function oi(e,t){function n(n){return t[ua.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return oi(e,t)},n}function ii(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return zo(e,t)},t.tickFormat=function(t,n){return Wo(e,t,n)},t.copy=function(){return ii(e)},t}function ai(e){return e.innerRadius}function si(e){return e.outerRadius}function li(e){return e.startAngle}function ui(e){return e.endAngle}function ci(e){for(var t,n,r,o=-1,i=e.length;i>++o;)t=e[o],n=t[0],r=t[1]+el,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function di(e){function t(t){function l(){g.push("M",s(e(v),d),c,u(e(m.reverse()),d),"Z")}for(var f,p,h,g=[],m=[],v=[],_=-1,y=t.length,b=ut(n),w=ut(o),S=n===r?function(){return p}:ut(r),T=o===i?function(){return h}:ut(i);y>++_;)a.call(this,f=t[_],_)?(m.push([p=+b.call(this,f,_),h=+w.call(this,f,_)]),v.push([+S.call(this,f,_),+T.call(this,f,_)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=In,r=In,o=0,i=Ln,a=It,s=Rn,l=s.key,u=s,c="L",d=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(o=i=e,t):i},t.y0=function(e){return arguments.length?(o=e,t):o},t.y1=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(a=e,t):a},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=Ls.get(e)||Rn).key,u=s.reverse||s,c=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(d=e,t):d},t}function fi(e){return e.radius}function pi(e){return[e.x,e.y]}function hi(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+el;return[n*Math.cos(r),n*Math.sin(r)]}}function gi(){return 64}function mi(){return"circle"}function vi(e){var t=Math.sqrt(e/Ba);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function _i(e,t){return wa(e,al),e.id=t,e}function yi(e,t,n,r){var o=e.id;return I(e,"function"==typeof n?function(e,i,a){e.__transition__[o].tween.set(t,r(n.call(e,e.__data__,i,a)))}:(n=r(n),function(e){e.__transition__[o].tween.set(t,n)}))}function bi(e){return null==e&&(e=""),function(){this.textContent=e}}function wi(e,t,n,r){var i=e.__transition__||(e.__transition__={active:0,count:0}),a=i[n];if(!a){var s=r.time;return a=i[n]={tween:new o,event:ua.dispatch("start","end"),time:s,ease:r.ease,delay:r.delay,duration:r.duration},++i.count,ua.timer(function(r){function o(r){return i.active>n?u():(i.active=n,f.start.call(e,c,t),a.tween.forEach(function(n,r){(r=r.call(e,c,t))&&g.push(r)}),l(r)||ua.timer(l,0,s),1)}function l(r){if(i.active!==n)return u();for(var o=(r-p)/h,a=d(o),s=g.length;s>0;)g[--s].call(e,a);return o>=1?(u(),f.end.call(e,c,t),1):void 0}function u(){return--i.count?delete i[n]:delete e.__transition__,1}var c=e.__data__,d=a.ease,f=a.event,p=a.delay,h=a.duration,g=[];return r>=p?o(r):ua.timer(o,p,s),1},0,s),a}}function Si(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function Ti(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function Mi(e,t,n){if(r=[],n&&t.length>1){for(var r,o,i,a=Po(e.domain()),s=-1,l=t.length,u=(t[1]-t[0])/++n;l>++s;)for(o=n;--o>0;)(i=+t[s]-o*u)>=a[0]&&r.push(i);for(--s,o=0;n>++o&&(i=+t[s]+o*u)<a[1];)r.push(i)}return r}function ki(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ei(e,t,n){function r(t){var n=e(t),r=i(n,1);return r-t>t-n?n:r}function o(n){return t(n=e(new pl(n-1)),1),n}function i(e,n){return t(e=new pl(+e),n),e}function a(e,r,i){var a=o(e),s=[];if(i>1)for(;r>a;)n(a)%i||s.push(new Date(+a)),t(a,1);else for(;r>a;)s.push(new Date(+a)),t(a,1);return s}function s(e,t,n){try{pl=ki;var r=new ki;return r._=e,a(r,t,n)}finally{pl=Date}}e.floor=e,e.round=r,e.ceil=o,e.offset=i,e.range=a;var l=e.utc=xi(e);return l.floor=l,l.round=xi(r),l.ceil=xi(o),l.offset=xi(i),l.range=s,e}function xi(e){return function(t,n){try{pl=ki;var r=new ki;return r._=t,e(r,n)._}finally{pl=Date}}}function Ci(e,t,n,r){for(var o,i,a=0,s=t.length,l=n.length;s>a;){if(r>=l)return-1;if(o=t.charCodeAt(a++),37===o){if(i=Ol[t.charAt(a++)],!i||0>(r=i(e,n,r)))return-1}else if(o!=n.charCodeAt(r++))return-1}return r}function Ai(e){return RegExp("^(?:"+e.map(ua.requote).join("|")+")","i")}function Ni(e){for(var t=new o,n=-1,r=e.length;r>++n;)t.set(e[n].toLowerCase(),n);return t}function Oi(e,t,n){e+="";var r=e.length;return n>r?Array(n-r+1).join(t)+e:e}function Di(e,t,n){Ml.lastIndex=0;var r=Ml.exec(t.substring(n));return r?n+=r[0].length:-1}function Ii(e,t,n){Tl.lastIndex=0;var r=Tl.exec(t.substring(n));return r?n+=r[0].length:-1}function Li(e,t,n){xl.lastIndex=0;var r=xl.exec(t.substring(n));return r?(e.m=Cl.get(r[0].toLowerCase()),n+=r[0].length):-1}function Ri(e,t,n){kl.lastIndex=0;var r=kl.exec(t.substring(n));return r?(e.m=El.get(r[0].toLowerCase()),n+=r[0].length):-1}function Pi(e,t,n){return Ci(e,""+Nl.c,t,n)}function Bi(e,t,n){return Ci(e,""+Nl.x,t,n)}function Fi(e,t,n){return Ci(e,""+Nl.X,t,n)}function ji(e,t,n){Dl.lastIndex=0;var r=Dl.exec(t.substring(n,n+4));return r?(e.y=+r[0],n+=r[0].length):-1}function Hi(e,t,n){Dl.lastIndex=0;var r=Dl.exec(t.substring(n,n+2));return r?(e.y=Ui(+r[0]),n+=r[0].length):-1}function Ui(e){return e+(e>68?1900:2e3)}function qi(e,t,n){Dl.lastIndex=0;var r=Dl.exec(t.substring(n,n+2));return r?(e.m=r[0]-1,n+=r[0].length):-1}function $i(e,t,n){Dl.lastIndex=0;var r=Dl.exec(t.substring(n,n+2));return r?(e.d=+r[0],n+=r[0].length):-1}function Vi(e,t,n){Dl.lastIndex=0;var r=Dl.exec(t.substring(n,n+2));return r?(e.H=+r[0],n+=r[0].length):-1}function zi(e,t,n){Dl.lastIndex=0;var r=Dl.exec(t.substring(n,n+2));return r?(e.M=+r[0],n+=r[0].length):-1}function Wi(e,t,n){Dl.lastIndex=0;var r=Dl.exec(t.substring(n,n+2));return r?(e.S=+r[0],n+=r[0].length):-1}function Ji(e,t,n){Dl.lastIndex=0;var r=Dl.exec(t.substring(n,n+3));return r?(e.L=+r[0],n+=r[0].length):-1}function Gi(e,t,n){var r=Il.get(t.substring(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}function Xi(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=~~(Math.abs(t)/60),o=Math.abs(t)%60;return n+Oi(r,"0",2)+Oi(o,"0",2)}function Yi(e){return e.toISOString()}function Ki(e,t,n){function r(t){return e(t)}return r.invert=function(t){return Zi(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Zi)},r.nice=function(e){return r.domain(jo(r.domain(),function(){return e}))},r.ticks=function(n,o){var i=Qi(r.domain());if("function"!=typeof n){var a=i[1]-i[0],s=a/n,l=ua.bisect(Rl,s);if(l==Rl.length)return t.year(i,n);if(!l)return e.ticks(n).map(Zi);Math.log(s/Rl[l-1])<Math.log(Rl[l]/s)&&--l,n=t[l],o=n[1],n=n[0].range}return n(i[0],new Date(+i[1]+1),o)},r.tickFormat=function(){return n},r.copy=function(){return Ki(e.copy(),t,n)},ua.rebind(r,e,"range","rangeRound","interpolate","clamp")}function Qi(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Zi(e){return new Date(e)}function ea(e){return function(t){for(var n=e.length-1,r=e[n];!r[1](t);)r=e[--n];return r[0](t)}}function ta(e){var t=new Date(e,0,1);return t.setFullYear(e),t}function na(e){var t=e.getFullYear(),n=ta(t),r=ta(t+1);return t+(e-n)/(r-n)}function ra(e){var t=new Date(Date.UTC(e,0,1));return t.setUTCFullYear(e),t}function oa(e){var t=e.getUTCFullYear(),n=ra(t),r=ra(t+1);return t+(e-n)/(r-n)}function ia(e){return e.responseText}function aa(e){return JSON.parse(e.responseText)}function sa(e){var t=ca.createRange();return t.selectNode(ca.body),t.createContextualFragment(e.responseText)}function la(e){return e.responseXML}var ua={version:"3.1.4"};Date.now||(Date.now=function(){return+new Date});var ca=document,da=window;try{ca.createElement("div").style.setProperty("opacity",0,"")}catch(fa){var pa=da.CSSStyleDeclaration.prototype,ha=pa.setProperty;pa.setProperty=function(e,t,n){ha.call(this,e,t+"",n)}}ua.ascending=function(e,t){return t>e?-1:e>t?1:e>=t?0:0/0},ua.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},ua.min=function(e,t){var n,r,o=-1,i=e.length;if(1===arguments.length){for(;i>++o&&(null==(n=e[o])||n!=n);)n=void 0;for(;i>++o;)null!=(r=e[o])&&n>r&&(n=r)}else{for(;i>++o&&(null==(n=t.call(e,e[o],o))||n!=n);)n=void 0;for(;i>++o;)null!=(r=t.call(e,e[o],o))&&n>r&&(n=r)}return n},ua.max=function(e,t){var n,r,o=-1,i=e.length;if(1===arguments.length){for(;i>++o&&(null==(n=e[o])||n!=n);)n=void 0;for(;i>++o;)null!=(r=e[o])&&r>n&&(n=r)}else{for(;i>++o&&(null==(n=t.call(e,e[o],o))||n!=n);)n=void 0;for(;i>++o;)null!=(r=t.call(e,e[o],o))&&r>n&&(n=r)}return n},ua.extent=function(e,t){var n,r,o,i=-1,a=e.length;if(1===arguments.length){for(;a>++i&&(null==(n=o=e[i])||n!=n);)n=o=void 0;for(;a>++i;)null!=(r=e[i])&&(n>r&&(n=r),r>o&&(o=r))}else{for(;a>++i&&(null==(n=o=t.call(e,e[i],i))||n!=n);)n=void 0;for(;a>++i;)null!=(r=t.call(e,e[i],i))&&(n>r&&(n=r),r>o&&(o=r))}return[n,o]},ua.sum=function(e,t){var n,r=0,o=e.length,i=-1;if(1===arguments.length)for(;o>++i;)isNaN(n=+e[i])||(r+=n);else for(;o>++i;)isNaN(n=+t.call(e,e[i],i))||(r+=n);return r},ua.mean=function(t,n){var r,o=t.length,i=0,a=-1,s=0;if(1===arguments.length)for(;o>++a;)e(r=t[a])&&(i+=(r-i)/++s);else for(;o>++a;)e(r=n.call(t,t[a],a))&&(i+=(r-i)/++s);return s?i:void 0},ua.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),o=+e[r-1],i=n-r;return i?o+i*(e[r]-o):o},ua.median=function(t,n){return arguments.length>1&&(t=t.map(n)),t=t.filter(e),t.length?ua.quantile(t.sort(ua.ascending),.5):void 0},ua.bisector=function(e){return{left:function(t,n,r,o){for(3>arguments.length&&(r=0),4>arguments.length&&(o=t.length);o>r;){var i=r+o>>>1;n>e.call(t,t[i],i)?r=i+1:o=i}return r},right:function(t,n,r,o){for(3>arguments.length&&(r=0),4>arguments.length&&(o=t.length);o>r;){var i=r+o>>>1;e.call(t,t[i],i)>n?o=i:r=i+1}return r}}};var ga=ua.bisector(function(e){return e});ua.bisectLeft=ga.left,ua.bisect=ua.bisectRight=ga.right,ua.shuffle=function(e){for(var t,n,r=e.length;r;)n=0|Math.random()*r--,t=e[r],e[r]=e[n],e[n]=t;return e},ua.permute=function(e,t){for(var n=[],r=-1,o=t.length;o>++r;)n[r]=e[t[r]];return n},ua.zip=function(){if(!(o=arguments.length))return[];for(var e=-1,n=ua.min(arguments,t),r=Array(n);n>++e;)for(var o,i=-1,a=r[e]=Array(o);o>++i;)a[i]=arguments[i][e];return r},ua.transpose=function(e){return ua.zip.apply(ua,e)},ua.keys=function(e){var t=[];for(var n in e)t.push(n);return t},ua.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},ua.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},ua.merge=function(e){return Array.prototype.concat.apply([],e)},ua.range=function(e,t,r){if(3>arguments.length&&(r=1,2>arguments.length&&(t=e,e=0)),1/0===(t-e)/r)throw Error("infinite range");var o,i=[],a=n(Math.abs(r)),s=-1;if(e*=a,t*=a,r*=a,0>r)for(;(o=e+r*++s)>t;)i.push(o/a);else for(;t>(o=e+r*++s);)i.push(o/a);return i},ua.map=function(e){var t=new o;for(var n in e)t.set(n,e[n]);return t},r(o,{has:function(e){return ma+e in this},get:function(e){return this[ma+e]},set:function(e,t){return this[ma+e]=t},remove:function(e){return e=ma+e,e in this&&delete this[e]},keys:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===va&&e.call(this,t.substring(1),this[t])}});var ma="\0",va=ma.charCodeAt(0);ua.nest=function(){function e(t,s,l){if(l>=a.length)return r?r.call(i,s):n?s.sort(n):s;for(var u,c,d,f,p=-1,h=s.length,g=a[l++],m=new o;h>++p;)(f=m.get(u=g(c=s[p])))?f.push(c):m.set(u,[c]);return t?(c=t(),d=function(n,r){c.set(n,e(t,r,l))}):(c={},d=function(n,r){c[n]=e(t,r,l)}),m.forEach(d),c}function t(e,n){if(n>=a.length)return e;var r=[],o=s[n++];return e.forEach(function(e,o){r.push({key:e,values:t(o,n)})}),o?r.sort(function(e,t){return o(e.key,t.key)}):r}var n,r,i={},a=[],s=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(ua.map,n,0),0)},i.key=function(e){return a.push(e),i},i.sortKeys=function(e){return s[a.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},ua.set=function(e){var t=new i;if(e)for(var n=0;e.length>n;n++)t.add(e[n]);return t},r(i,{has:function(e){return ma+e in this},add:function(e){return this[ma+e]=!0,e},remove:function(e){return e=ma+e,e in this&&delete this[e]},values:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===va&&e.call(this,t.substring(1))}}),ua.behavior={},ua.rebind=function(e,t){for(var n,r=1,o=arguments.length;o>++r;)e[n=arguments[r]]=a(e,t,t[n]);return e},ua.dispatch=function(){for(var e=new s,t=-1,n=arguments.length;n>++t;)e[arguments[t]]=l(e);return e},s.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.substring(n+1),e=e.substring(0,n)),e)return 2>arguments.length?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},ua.event=null,ua.mouse=function(e){return f(e,c())};var _a=/WebKit/.test(da.navigator.userAgent)?-1:0,ya=h;try{ya(ca.documentElement.childNodes)[0].nodeType}catch(ba){ya=p}var wa=[].__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};ua.touches=function(e,t){return 2>arguments.length&&(t=c().touches),t?ya(t).map(function(t){var n=f(e,t);return n.identifier=t.identifier,n}):[]},ua.behavior.drag=function(){function e(){this.on("mousedown.drag",t).on("touchstart.drag",t)}function t(){function e(){var e=s.parentNode;return null!=d?ua.touches(e).filter(function(e){return e.identifier===d})[0]:ua.mouse(e)}function t(){if(!s.parentNode)return o();var t=e(),n=t[0]-f[0],r=t[1]-f[1];p|=n|r,f=t,u(),l({type:"drag",x:t[0]+a[0],y:t[1]+a[1],dx:n,dy:r})}function o(){l({type:"dragend"}),p&&(u(),ua.event.target===c&&h.on("click.drag",i,!0)),h.on(null!=d?"touchmove.drag-"+d:"mousemove.drag",null).on(null!=d?"touchend.drag-"+d:"mouseup.drag",null)}function i(){u(),h.on("click.drag",null)}var a,s=this,l=n.of(s,arguments),c=ua.event.target,d=ua.event.touches?ua.event.changedTouches[0].identifier:null,f=e(),p=0,h=ua.select(da).on(null!=d?"touchmove.drag-"+d:"mousemove.drag",t).on(null!=d?"touchend.drag-"+d:"mouseup.drag",o,!0);r?(a=r.apply(s,arguments),a=[a.x-f[0],a.y-f[1]]):a=[0,0],null==d&&u(),l({type:"dragstart"})}var n=d(e,"drag","dragstart","dragend"),r=null;return e.origin=function(t){return arguments.length?(r=t,e):r},ua.rebind(e,n,"on")};var Sa=function(e,t){return t.querySelector(e)},Ta=function(e,t){return t.querySelectorAll(e)},Ma=ca.documentElement,ka=Ma.matchesSelector||Ma.webkitMatchesSelector||Ma.mozMatchesSelector||Ma.msMatchesSelector||Ma.oMatchesSelector,Ea=function(e,t){return ka.call(e,t)};"function"==typeof Sizzle&&(Sa=function(e,t){return Sizzle(e,t)[0]||null},Ta=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},Ea=Sizzle.matchesSelector);var xa=[];ua.selection=function(){return Da},ua.selection.prototype=xa,xa.select=function(e){var t,n,r,o,i=[];"function"!=typeof e&&(e=m(e));for(var a=-1,s=this.length;s>++a;){i.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;u>++l;)(o=r[l])?(t.push(n=e.call(o,o.__data__,l)),n&&"__data__"in o&&(n.__data__=o.__data__)):t.push(null)}return g(i)},xa.selectAll=function(e){var t,n,r=[];"function"!=typeof e&&(e=v(e));for(var o=-1,i=this.length;i>++o;)for(var a=this[o],s=-1,l=a.length;l>++s;)(n=a[s])&&(r.push(t=ya(e.call(n,n.__data__,s))),t.parentNode=n);return g(r)};var Ca={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ua.ns={prefix:Ca,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),Ca.hasOwnProperty(n)?{space:Ca[n],local:e}:e}},xa.attr=function(e,t){if(2>arguments.length){if("string"==typeof e){var n=this.node();return e=ua.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(_(t,e[t]));return this}return this.each(_(e,t))},ua.requote=function(e){return e.replace(Aa,"\\$&")};var Aa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;xa.classed=function(e,t){if(2>arguments.length){if("string"==typeof e){var n=this.node(),r=(e=e.trim().split(/^|\s+/g)).length,o=-1;if(t=n.classList){for(;r>++o;)if(!t.contains(e[o]))return!1}else for(t=n.getAttribute("class");r>++o;)if(!w(e[o]).test(t))return!1;return!0}for(t in e)this.each(S(t,e[t]));return this}return this.each(S(e,t))},xa.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t="");for(n in e)this.each(M(n,e[n],t));return this}if(2>r)return da.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(M(e,t,n))},xa.property=function(e,t){if(2>arguments.length){if("string"==typeof e)return this.node()[e];for(t in e)this.each(k(t,e[t]));return this}return this.each(k(e,t))},xa.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},xa.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e
}):this.node().innerHTML},xa.append=function(e){function t(){return this.appendChild(ca.createElementNS(this.namespaceURI,e))}function n(){return this.appendChild(ca.createElementNS(e.space,e.local))}return e=ua.ns.qualify(e),this.select(e.local?n:t)},xa.insert=function(e,t){function n(n,r){return this.insertBefore(ca.createElementNS(this.namespaceURI,e),t.call(this,n,r))}function r(n,r){return this.insertBefore(ca.createElementNS(e.space,e.local),t.call(this,n,r))}return e=ua.ns.qualify(e),"function"!=typeof t&&(t=m(t)),this.select(e.local?r:n)},xa.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},xa.data=function(e,t){function n(e,n){var r,i,a,s=e.length,d=n.length,f=Math.min(s,d),p=Array(d),h=Array(d),g=Array(s);if(t){var m,v=new o,_=new o,y=[];for(r=-1;s>++r;)m=t.call(i=e[r],i.__data__,r),v.has(m)?g[r]=i:v.set(m,i),y.push(m);for(r=-1;d>++r;)m=t.call(n,a=n[r],r),(i=v.get(m))?(p[r]=i,i.__data__=a):_.has(m)||(h[r]=E(a)),_.set(m,a),v.remove(m);for(r=-1;s>++r;)v.has(y[r])&&(g[r]=e[r])}else{for(r=-1;f>++r;)i=e[r],a=n[r],i?(i.__data__=a,p[r]=i):h[r]=E(a);for(;d>r;++r)h[r]=E(n[r]);for(;s>r;++r)g[r]=e[r]}h.update=p,h.parentNode=p.parentNode=g.parentNode=e.parentNode,l.push(h),u.push(p),c.push(g)}var r,i,a=-1,s=this.length;if(!arguments.length){for(e=Array(s=(r=this[0]).length);s>++a;)(i=r[a])&&(e[a]=i.__data__);return e}var l=L([]),u=g([]),c=g([]);if("function"==typeof e)for(;s>++a;)n(r=this[a],e.call(r,r.parentNode.__data__,a));else for(;s>++a;)n(r=this[a],e);return u.enter=function(){return l},u.exit=function(){return c},u},xa.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},xa.filter=function(e){var t,n,r,o=[];"function"!=typeof e&&(e=x(e));for(var i=0,a=this.length;a>i;i++){o.push(t=[]),t.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;l>s;s++)(r=n[s])&&e.call(r,r.__data__,s)&&t.push(r)}return g(o)},xa.order=function(){for(var e=-1,t=this.length;t>++e;)for(var n,r=this[e],o=r.length-1,i=r[o];--o>=0;)(n=r[o])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},xa.sort=function(e){e=C.apply(this,arguments);for(var t=-1,n=this.length;n>++t;)this[t].sort(e);return this.order()},xa.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(N(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(N(e,t,n))};var Na=ua.map({mouseenter:"mouseover",mouseleave:"mouseout"});Na.forEach(function(e){"on"+e in ca&&Na.remove(e)}),xa.each=function(e){return I(this,function(t,n,r){e.call(t,t.__data__,n,r)})},xa.call=function(e){var t=ya(arguments);return e.apply(t[0]=this,t),this},xa.empty=function(){return!this.node()},xa.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,o=n.length;o>r;r++){var i=n[r];if(i)return i}return null};var Oa=[];ua.selection.enter=L,ua.selection.enter.prototype=Oa,Oa.append=xa.append,Oa.insert=xa.insert,Oa.empty=xa.empty,Oa.node=xa.node,Oa.select=function(e){for(var t,n,r,o,i,a=[],s=-1,l=this.length;l>++s;){r=(o=this[s]).update,a.push(t=[]),t.parentNode=o.parentNode;for(var u=-1,c=o.length;c>++u;)(i=o[u])?(t.push(r[u]=n=e.call(o.parentNode,i.__data__,u)),n.__data__=i.__data__):t.push(null)}return g(a)},xa.transition=function(){var e,t,n=rl||++sl,r=[],o=Object.create(ll);o.time=Date.now();for(var i=-1,a=this.length;a>++i;){r.push(e=[]);for(var s=this[i],l=-1,u=s.length;u>++l;)(t=s[l])&&wi(t,l,n,o),e.push(t)}return _i(r,n)};var Da=g([[ca]]);Da[0].parentNode=Ma,ua.select=function(e){return"string"==typeof e?Da.select(e):g([[e]])},ua.selectAll=function(e){return"string"==typeof e?Da.selectAll(e):g([ya(e)])},ua.behavior.zoom=function(){function e(){this.on("mousedown.zoom",s).on("mousemove.zoom",c).on(Ra+".zoom",l).on("dblclick.zoom",f).on("touchstart.zoom",p).on("touchmove.zoom",h).on("touchend.zoom",p)}function t(e){return[(e[0]-S[0])/T,(e[1]-S[1])/T]}function n(e){return[e[0]*T+S[0],e[1]*T+S[1]]}function r(e){T=Math.max(M[0],Math.min(M[1],e))}function o(e,t){t=n(t),S[0]+=e[0]-t[0],S[1]+=e[1]-t[1]}function i(){_&&_.domain(v.range().map(function(e){return(e-S[0])/T}).map(v.invert)),b&&b.domain(y.range().map(function(e){return(e-S[1])/T}).map(y.invert))}function a(e){i(),ua.event.preventDefault(),e({type:"zoom",scale:T,translate:S})}function s(){function e(){c=1,o(ua.mouse(i),f),a(s)}function n(){c&&u(),d.on("mousemove.zoom",null).on("mouseup.zoom",null),c&&ua.event.target===l&&d.on("click.zoom",r,!0)}function r(){u(),d.on("click.zoom",null)}var i=this,s=k.of(i,arguments),l=ua.event.target,c=0,d=ua.select(da).on("mousemove.zoom",e).on("mouseup.zoom",n),f=t(ua.mouse(i));da.focus(),u()}function l(){g||(g=t(ua.mouse(this))),r(Math.pow(2,.002*Ia())*T),o(ua.mouse(this),g),a(k.of(this,arguments))}function c(){g=null}function f(){var e=ua.mouse(this),n=t(e),i=Math.log(T)/Math.LN2;r(Math.pow(2,ua.event.shiftKey?Math.ceil(i)-1:Math.floor(i)+1)),o(e,n),a(k.of(this,arguments))}function p(){var e=ua.touches(this),n=Date.now();if(m=T,g={},e.forEach(function(e){g[e.identifier]=t(e)}),u(),1===e.length){if(500>n-w){var i=e[0],s=t(e[0]);r(2*T),o(i,s),a(k.of(this,arguments))}w=n}}function h(){var e=ua.touches(this),t=e[0],n=g[t.identifier];if(i=e[1]){var i,s=g[i.identifier];t=[(t[0]+i[0])/2,(t[1]+i[1])/2],n=[(n[0]+s[0])/2,(n[1]+s[1])/2],r(ua.event.scale*m)}o(t,n),w=null,a(k.of(this,arguments))}var g,m,v,_,y,b,w,S=[0,0],T=1,M=La,k=d(e,"zoom");return e.translate=function(t){return arguments.length?(S=t.map(Number),i(),e):S},e.scale=function(t){return arguments.length?(T=+t,i(),e):T},e.scaleExtent=function(t){return arguments.length?(M=null==t?La:t.map(Number),e):M},e.x=function(t){return arguments.length?(_=t,v=t.copy(),S=[0,0],T=1,e):_},e.y=function(t){return arguments.length?(b=t,y=t.copy(),S=[0,0],T=1,e):b},ua.rebind(e,k,"on")};var Ia,La=[0,1/0],Ra="onwheel"in ca?(Ia=function(){return-ua.event.deltaY*(ua.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ca?(Ia=function(){return ua.event.wheelDelta},"mousewheel"):(Ia=function(){return-ua.event.detail},"MozMousePixelScroll");R.prototype.toString=function(){return this.rgb()+""},ua.hsl=function(e,t,n){return 1===arguments.length?e instanceof B?P(e.h,e.s,e.l):ot(""+e,it,P):P(+e,+t,+n)};var Pa=B.prototype=new R;Pa.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),P(this.h,this.s,this.l/e)},Pa.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),P(this.h,this.s,e*this.l)},Pa.rgb=function(){return F(this.h,this.s,this.l)};var Ba=Math.PI,Fa=1e-6,ja=Ba/180,Ha=180/Ba;ua.hcl=function(e,t,n){return 1===arguments.length?e instanceof W?z(e.h,e.c,e.l):e instanceof X?K(e.l,e.a,e.b):K((e=at((e=ua.rgb(e)).r,e.g,e.b)).l,e.a,e.b):z(+e,+t,+n)};var Ua=W.prototype=new R;Ua.brighter=function(e){return z(this.h,this.c,Math.min(100,this.l+qa*(arguments.length?e:1)))},Ua.darker=function(e){return z(this.h,this.c,Math.max(0,this.l-qa*(arguments.length?e:1)))},Ua.rgb=function(){return J(this.h,this.c,this.l).rgb()},ua.lab=function(e,t,n){return 1===arguments.length?e instanceof X?G(e.l,e.a,e.b):e instanceof W?J(e.l,e.c,e.h):at((e=ua.rgb(e)).r,e.g,e.b):G(+e,+t,+n)};var qa=18,$a=.95047,Va=1,za=1.08883,Wa=X.prototype=new R;Wa.brighter=function(e){return G(Math.min(100,this.l+qa*(arguments.length?e:1)),this.a,this.b)},Wa.darker=function(e){return G(Math.max(0,this.l-qa*(arguments.length?e:1)),this.a,this.b)},Wa.rgb=function(){return Y(this.l,this.a,this.b)},ua.rgb=function(e,t,n){return 1===arguments.length?e instanceof nt?tt(e.r,e.g,e.b):ot(""+e,tt,F):tt(~~e,~~t,~~n)};var Ja=nt.prototype=new R;Ja.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,o=30;return t||n||r?(t&&o>t&&(t=o),n&&o>n&&(n=o),r&&o>r&&(r=o),tt(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(r/e)))):tt(o,o,o)},Ja.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),tt(Math.floor(e*this.r),Math.floor(e*this.g),Math.floor(e*this.b))},Ja.hsl=function(){return it(this.r,this.g,this.b)},Ja.toString=function(){return"#"+rt(this.r)+rt(this.g)+rt(this.b)};var Ga=ua.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});Ga.forEach(function(e,t){Ga.set(e,ot(t,tt,F))}),ua.functor=ut,ua.xhr=function(e,t,n){function r(){var e=l.status;!e&&l.responseText||e>=200&&300>e||304===e?i.load.call(o,s.call(o,l)):i.error.call(o,l)}var o={},i=ua.dispatch("progress","load","error"),a={},s=ct,l=new(da.XDomainRequest&&/^(http(s)?:)?\/\//.test(e)?XDomainRequest:XMLHttpRequest);return"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(e){var t=ua.event;ua.event=e;try{i.progress.call(o,l)}finally{ua.event=t}},o.header=function(e,t){return e=(e+"").toLowerCase(),2>arguments.length?a[e]:(null==t?delete a[e]:a[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",o):t},o.response=function(e){return s=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(ya(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,e,!0),null==t||"accept"in a||(a.accept=t+",*/*"),l.setRequestHeader)for(var s in a)l.setRequestHeader(s,a[s]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=i&&o.on("error",i).on("load",function(e){i(null,e)}),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},ua.rebind(o,i,"on"),2===arguments.length&&"function"==typeof t&&(n=t,t=null),null==n?o:o.get(dt(n))},ua.csv=ft(",","text/csv"),ua.tsv=ft(" ","text/tab-separated-values");var Xa,Ya,Ka=0,Qa={},Za=null;ua.timer=function(e,t,n){if(3>arguments.length){if(2>arguments.length)t=0;else if(!isFinite(t))return;n=Date.now()}var r=Qa[e.id];r&&r.callback===e?(r.then=n,r.delay=t):Qa[e.id=++Ka]=Za={callback:e,then:n,delay:t,next:Za},Xa||(Ya=clearTimeout(Ya),Xa=1,es(pt))},ua.timer.flush=function(){for(var e,t=Date.now(),n=Za;n;)e=t-n.then,n.delay||(n.flush=n.callback(e)),n=n.next;ht()};var es=da.requestAnimationFrame||da.webkitRequestAnimationFrame||da.mozRequestAnimationFrame||da.oRequestAnimationFrame||da.msRequestAnimationFrame||function(e){setTimeout(e,17)},ts=".",ns=",",rs=[3,3],os=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(gt);ua.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=ua.round(e,mt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),os[8+n/3]},ua.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},ua.format=function(e){var t=is.exec(e),n=t[1]||" ",r=t[2]||">",o=t[3]||"",i=t[4]||"",a=t[5],s=+t[6],l=t[7],u=t[8],c=t[9],d=1,f="",p=!1;switch(u&&(u=+u.substring(1)),(a||"0"===n&&"="===r)&&(a=n="0",r="=",l&&(s-=Math.floor((s-1)/4))),c){case"n":l=!0,c="g";break;case"%":d=100,f="%",c="f";break;case"p":d=100,f="%",c="r";break;case"b":case"o":case"x":case"X":i&&(i="0"+c.toLowerCase());case"c":case"d":p=!0,u=0;break;case"s":d=-1,c="r"}"#"===i&&(i=""),"r"!=c||u||(c="g"),null!=u&&("g"==c?u=Math.max(1,Math.min(21,u)):("e"==c||"f"==c)&&(u=Math.max(0,Math.min(20,u)))),c=as.get(c)||vt;var h=a&&l;return function(e){if(p&&e%1)return"";var t=0>e||0===e&&0>1/e?(e=-e,"-"):o;if(0>d){var g=ua.formatPrefix(e,u);e=g.scale(e),f=g.symbol}else e*=d;e=c(e,u),!a&&l&&(e=ss(e));var m=i.length+e.length+(h?0:t.length),v=s>m?Array(m=s-m+1).join(n):"";return h&&(e=ss(v+e)),ts&&e.replace(".",ts),t+=i,("<"===r?t+e+v:">"===r?v+t+e:"^"===r?v.substring(0,m>>=1)+t+e+v.substring(m):t+(h?e:v+e))+f}};var is=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,as=ua.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=ua.round(e,mt(e,t))).toFixed(Math.max(0,Math.min(20,mt(e*(1+1e-15),t))))}}),ss=ct;if(rs){var ls=rs.length;ss=function(e){for(var t=e.lastIndexOf("."),n=t>=0?"."+e.substring(t+1):(t=e.length,""),r=[],o=0,i=rs[0];t>0&&i>0;)r.push(e.substring(t-=i,t+i)),i=rs[o=(o+1)%ls];return r.reverse().join(ns||"")+n}}ua.geo={},ua.geo.stream=function(e,t){us.hasOwnProperty(e.type)?us[e.type](e,t):_t(e,t)};var us={Feature:function(e,t){_t(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,o=n.length;o>++r;)_t(n[r].geometry,t)}},cs={Sphere:function(e,t){t.sphere()},Point:function(e,t){var n=e.coordinates;t.point(n[0],n[1])},MultiPoint:function(e,t){for(var n,r=e.coordinates,o=-1,i=r.length;i>++o;)n=r[o],t.point(n[0],n[1])},LineString:function(e,t){yt(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;o>++r;)yt(n[r],t,0)},Polygon:function(e,t){bt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;o>++r;)bt(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,o=n.length;o>++r;)_t(n[r],t)}};ua.geo.area=function(e){return ds=0,ua.geo.stream(e,hs),ds};var ds,fs,ps,hs={sphere:function(){ds+=4*Ba},point:A,lineStart:A,lineEnd:A,polygonStart:function(){fs=1,ps=0,hs.lineStart=wt},polygonEnd:function(){var e=2*Math.atan2(ps,fs);ds+=0>e?4*Ba+e:e,hs.lineStart=hs.lineEnd=hs.point=A}};ua.geo.bounds=St(ct),ua.geo.centroid=function(e){gs=ms=vs=_s=ys=0,ua.geo.stream(e,bs);var t;return ms&&Math.abs(t=Math.sqrt(vs*vs+_s*_s+ys*ys))>Fa?[Math.atan2(_s,vs)*Ha,Math.asin(Math.max(-1,Math.min(1,ys/t)))*Ha]:void 0};var gs,ms,vs,_s,ys,bs={sphere:function(){2>gs&&(gs=2,ms=vs=_s=ys=0)},point:Tt,lineStart:kt,lineEnd:Et,polygonStart:function(){2>gs&&(gs=2,ms=vs=_s=ys=0),bs.lineStart=Mt},polygonEnd:function(){bs.lineStart=kt}},ws=Ft(It,$t,zt),Ss=1e9;ua.geo.projection=Kt,ua.geo.projectionMutator=Qt,(ua.geo.equirectangular=function(){return Kt(en)}).raw=en.invert=en,ua.geo.rotation=function(e){function t(t){return t=e(t[0]*ja,t[1]*ja),t[0]*=Ha,t[1]*=Ha,t}return e=tn(e[0]%360*ja,e[1]*ja,e.length>2?e[2]*ja:0),t.invert=function(t){return t=e.invert(t[0]*ja,t[1]*ja),t[0]*=Ha,t[1]*=Ha,t},t},ua.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=tn(-e[0]*ja,-e[1]*ja,0).invert,o=[];return n(null,null,1,{point:function(e,n){o.push(e=t(e,n)),e[0]*=Ha,e[1]*=Ha}}),{type:"Polygon",coordinates:[o]}}var t,n,r=[0,0],o=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=an((t=+r)*ja,o*ja),e):t},e.precision=function(r){return arguments.length?(n=an(t*ja,(o=+r)*ja),e):o},e.angle(90)},ua.geo.distance=function(e,t){var n,r=(t[0]-e[0])*ja,o=e[1]*ja,i=t[1]*ja,a=Math.sin(r),s=Math.cos(r),l=Math.sin(o),u=Math.cos(o),c=Math.sin(i),d=Math.cos(i);return Math.atan2(Math.sqrt((n=d*a)*n+(n=u*c-l*d*s)*n),l*c+u*d*s)},ua.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return ua.range(Math.ceil(i/m)*m,o,m).map(f).concat(ua.range(Math.ceil(u/v)*v,l,v).map(p)).concat(ua.range(Math.ceil(r/h)*h,n,h).filter(function(e){return Math.abs(e%m)>Fa}).map(c)).concat(ua.range(Math.ceil(s/g)*g,a,g).filter(function(e){return Math.abs(e%v)>Fa}).map(d))}var n,r,o,i,a,s,l,u,c,d,f,p,h=10,g=h,m=90,v=360,_=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(p(l).slice(1),f(o).reverse().slice(1),p(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(i=+t[0][0],o=+t[1][0],u=+t[0][1],l=+t[1][1],i>o&&(t=i,i=o,o=t),u>l&&(t=u,u=l,l=t),e.precision(_)):[[i,u],[o,l]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),e.precision(_)):[[r,s],[n,a]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.minorStep=function(t){return arguments.length?(h=+t[0],g=+t[1],e):[h,g]},e.precision=function(t){return arguments.length?(_=+t,c=ln(s,a,90),d=un(r,n,_),f=ln(u,l,90),p=un(i,o,_),e):_},e.majorExtent([[-180,-90+Fa],[180,90-Fa]]).minorExtent([[-180,-80-Fa],[180,80+Fa]])},ua.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||o.apply(this,arguments)]}}var t,n,r=cn,o=dn;return e.distance=function(){return ua.geo.distance(t||r.apply(this,arguments),n||o.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(o=t,n="function"==typeof t?null:t,e):o},e.precision=function(){return arguments.length?e:0},e},ua.geo.interpolate=function(e,t){return fn(e[0]*ja,e[1]*ja,t[0]*ja,t[1]*ja)},ua.geo.length=function(e){return Ts=0,ua.geo.stream(e,Ms),Ts};var Ts,Ms={sphere:A,point:A,lineStart:pn,lineEnd:A,polygonStart:A,polygonEnd:A};(ua.geo.conicEqualArea=function(){return hn(gn)}).raw=gn,ua.geo.albersUsa=function(){function e(e){return t(e)(e)}function t(e){var t=e[0],n=e[1];return n>50?a:-140>t?s:21>n?l:i}var n,r,o,i=ua.geo.conicEqualArea().rotate([98,0]).center([0,38]).parallels([29.5,45.5]),a=ua.geo.conicEqualArea().rotate([160,0]).center([0,60]).parallels([55,65]),s=ua.geo.conicEqualArea().rotate([160,0]).center([0,20]).parallels([8,18]),l=ua.geo.conicEqualArea().rotate([60,0]).center([0,10]).parallels([8,18]);return e.invert=function(e){return n(e)||r(e)||o(e)||i.invert(e)},e.scale=function(t){return arguments.length?(i.scale(t),a.scale(.6*t),s.scale(t),l.scale(1.5*t),e.translate(i.translate())):i.scale()},e.translate=function(t){if(!arguments.length)return i.translate();var u=i.scale(),c=t[0],d=t[1];return i.translate(t),a.translate([c-.4*u,d+.17*u]),s.translate([c-.19*u,d+.2*u]),l.translate([c+.58*u,d+.43*u]),n=mn(a,[[-180,50],[-130,72]]),r=mn(s,[[-164,18],[-154,24]]),o=mn(l,[[-67.5,17.5],[-65,19]]),e},e.scale(1e3)};var ks,Es,xs={point:A,lineStart:A,lineEnd:A,polygonStart:function(){Es=0,xs.lineStart=vn},polygonEnd:function(){xs.lineStart=xs.lineEnd=xs.point=A,ks+=Math.abs(Es/2)}},Cs={point:yn,lineStart:bn,lineEnd:wn,polygonStart:function(){Cs.lineStart=Sn},polygonEnd:function(){Cs.point=yn,Cs.lineStart=bn,Cs.lineEnd=wn}};ua.geo.path=function(){function e(e){return e&&ua.geo.stream(e,r(o.pointRadius("function"==typeof i?+i.apply(this,arguments):i))),o.result()}var t,n,r,o,i=4.5;return e.area=function(e){return ks=0,ua.geo.stream(e,r(xs)),ks},e.centroid=function(e){return gs=vs=_s=ys=0,ua.geo.stream(e,r(Cs)),ys?[vs/ys,_s/ys]:void 0},e.bounds=function(e){return St(r)(e)},e.projection=function(n){return arguments.length?(r=(t=n)?n.stream||kn(n):ct,e):t},e.context=function(t){return arguments.length?(o=null==(n=t)?new _n:new Tn(t),e):n},e.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:+t,e):i},e.projection(ua.geo.albersUsa()).context(null)},ua.geo.albers=function(){return ua.geo.conicEqualArea().parallels([29.5,45.5]).rotate([98,0]).center([0,38]).scale(1e3)};var As=En(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(ua.geo.azimuthalEqualArea=function(){return Kt(As)}).raw=As;var Ns=En(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},ct);(ua.geo.azimuthalEquidistant=function(){return Kt(Ns)}).raw=Ns,(ua.geo.conicConformal=function(){return hn(xn)}).raw=xn,(ua.geo.conicEquidistant=function(){return hn(Cn)}).raw=Cn;var Os=En(function(e){return 1/e},Math.atan);(ua.geo.gnomonic=function(){return Kt(Os)}).raw=Os,An.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ba/2]},(ua.geo.mercator=function(){return Nn(An)}).raw=An;var Ds=En(function(){return 1},Math.asin);(ua.geo.orthographic=function(){return Kt(Ds)}).raw=Ds;var Is=En(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(ua.geo.stereographic=function(){return Kt(Is)}).raw=Is,On.invert=function(e,t){return[Math.atan2(q(e),Math.cos(t)),U(Math.sin(t)/$(e))]},(ua.geo.transverseMercator=function(){return Nn(On)}).raw=On,ua.geom={},ua.svg={},ua.svg.line=function(){return Dn(ct)};var Ls=ua.map({linear:Rn,"linear-closed":Pn,"step-before":Bn,"step-after":Fn,basis:Vn,"basis-open":zn,"basis-closed":Wn,bundle:Jn,cardinal:Un,"cardinal-open":jn,"cardinal-closed":Hn,monotone:Zn});Ls.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Rs=[0,2/3,1/3,0],Ps=[0,1/3,2/3,0],Bs=[0,1/6,2/3,1/6];ua.geom.hull=function(e){function t(e){if(3>e.length)return[];var t,o,i,a,s,l,u,c,d,f,p,h,g=ut(n),m=ut(r),v=e.length,_=v-1,y=[],b=[],w=0;if(g===In&&r===Ln)t=e;else for(i=0,t=[];v>i;++i)t.push([+g.call(this,o=e[i],i),+m.call(this,o,i)]);for(i=1;v>i;++i)t[i][1]<t[w][1]?w=i:t[i][1]==t[w][1]&&(w=t[i][0]<t[w][0]?i:w);for(i=0;v>i;++i)i!==w&&(l=t[i][1]-t[w][1],s=t[i][0]-t[w][0],y.push({angle:Math.atan2(l,s),index:i}));for(y.sort(function(e,t){return e.angle-t.angle}),p=y[0].angle,f=y[0].index,d=0,i=1;_>i;++i)a=y[i].index,p==y[i].angle?(s=t[f][0]-t[w][0],l=t[f][1]-t[w][1],u=t[a][0]-t[w][0],c=t[a][1]-t[w][1],s*s+l*l>=u*u+c*c?y[i].index=-1:(y[d].index=-1,p=y[i].angle,d=i,f=a)):(p=y[i].angle,d=i,f=a);for(b.push(w),i=0,a=0;2>i;++a)-1!==y[a].index&&(b.push(y[a].index),i++);for(h=b.length;_>a;++a)if(-1!==y[a].index){for(;!er(b[h-2],b[h-1],y[a].index,t);)--h;b[h++]=y[a].index}var S=[];for(i=0;h>i;++i)S.push(e[b[i]]);return S}var n=In,r=Ln;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},ua.geom.polygon=function(e){return e.area=function(){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];n>++t;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return.5*r},e.centroid=function(t){var n,r,o=-1,i=e.length,a=0,s=0,l=e[i-1];for(arguments.length||(t=-1/(6*e.area()));i>++o;)n=l,l=e[o],r=n[0]*l[1]-l[0]*n[1],a+=(n[0]+l[0])*r,s+=(n[1]+l[1])*r;return[a*t,s*t]},e.clip=function(t){for(var n,r,o,i,a,s,l=-1,u=e.length,c=e[u-1];u>++l;){for(n=t.slice(),t.length=0,i=e[l],a=n[(o=n.length)-1],r=-1;o>++r;)s=n[r],tr(s,c,i)?(tr(a,c,i)||t.push(nr(a,s,c,i)),t.push(s)):tr(a,c,i)&&t.push(nr(a,s,c,i)),a=s;c=i}return t},e},ua.geom.delaunay=function(e){var t=e.map(function(){return[]}),n=[];return rr(e,function(n){t[n.region.l.index].push(e[n.region.r.index])}),t.forEach(function(t,r){var o=e[r],i=o[0],a=o[1];t.forEach(function(e){e.angle=Math.atan2(e[0]-i,e[1]-a)}),t.sort(function(e,t){return e.angle-t.angle});for(var s=0,l=t.length-1;l>s;s++)n.push([o,t[s],t[s+1]])}),n},ua.geom.voronoi=function(e){function t(e){var t,r,a,s=e.map(function(){return[]}),l=ut(o),u=ut(i),c=e.length,d=1e6;if(l===In&&u===Ln)t=e;else for(t=[],a=0;c>a;++a)t.push([+l.call(this,r=e[a],a),+u.call(this,r,a)]);if(rr(t,function(e){var t,n,r,o,i,a;1===e.a&&e.b>=0?(t=e.ep.r,n=e.ep.l):(t=e.ep.l,n=e.ep.r),1===e.a?(i=t?t.y:-d,r=e.c-e.b*i,a=n?n.y:d,o=e.c-e.b*a):(r=t?t.x:-d,i=e.c-e.a*r,o=n?n.x:d,a=e.c-e.a*o);var l=[r,i],u=[o,a];s[e.region.l.index].push(l,u),s[e.region.r.index].push(l,u)}),s=s.map(function(e,n){var r=t[n][0],o=t[n][1],i=e.map(function(e){return Math.atan2(e[0]-r,e[1]-o)}),a=ua.range(e.length).sort(function(e,t){return i[e]-i[t]});return a.filter(function(e,t){return!t||i[e]-i[a[t-1]]>Fa}).map(function(t){return e[t]})}),s.forEach(function(e,n){var r=e.length;if(!r)return e.push([-d,-d],[-d,d],[d,d],[d,-d]);if(!(r>2)){var o=t[n],i=e[0],a=e[1],s=o[0],l=o[1],u=i[0],c=i[1],f=a[0],p=a[1],h=Math.abs(f-u),g=p-c;if(Fa>Math.abs(g)){var m=c>l?-d:d;e.push([-d,m],[d,m])}else if(Fa>h){var v=u>s?-d:d;e.push([v,-d],[v,d])}else{var m=(u-s)*(p-c)>(f-u)*(c-l)?d:-d,_=Math.abs(g)-h;Fa>Math.abs(_)?e.push([0>g?m:-m,m]):(_>0&&(m*=-1),e.push([-d,m],[d,m]))}}}),n)for(a=0;c>a;++a)n(s[a]);for(a=0;c>a;++a)s[a].point=e[a];return s}var n,r=null,o=In,i=Ln;return arguments.length?t(e):(t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(i=e,t):i},t.size=function(e){return arguments.length?(null==e?n=null:(r=[+e[0],+e[1]],n=ua.geom.polygon([[0,0],[0,r[1]],r,[r[0],0]]).clip),t):r},t.links=function(e){var t,n,r,a=e.map(function(){return[]}),s=[],l=ut(o),u=ut(i),c=e.length;if(l===In&&u===Ln)t=e;else for(r=0;c>r;++r)t.push([+l.call(this,n=e[r],r),+u.call(this,n,r)]);return rr(t,function(t){var n=t.region.l.index,r=t.region.r.index;a[n][r]||(a[n][r]=a[r][n]=!0,s.push({source:e[n],target:e[r]}))}),s},t.triangles=function(e){if(o===In&&i===Ln)return ua.geom.delaunay(e);var t,n,r,a,s,l=ut(o),u=ut(i);for(a=0,t=[],s=e.length;s>a;++a)n=[+l.call(this,r=e[a],a),+u.call(this,r,a)],n.data=r,t.push(n);return ua.geom.delaunay(t).map(function(e){return e.map(function(e){return e.data})})},t)};var Fs={l:"r",r:"l"};ua.geom.quadtree=function(e,t,n,r,o){function i(e){function i(e,t,n,r,o,i,a,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(.01>Math.abs(l-n)+Math.abs(c-r))u(e,t,n,r,o,i,a,s);else{var d=e.point;e.x=e.y=e.point=null,u(e,d,l,c,o,i,a,s),u(e,t,n,r,o,i,a,s)}else e.x=n,e.y=r,e.point=t}else u(e,t,n,r,o,i,a,s)}function u(e,t,n,r,o,a,s,l){var u=.5*(o+s),c=.5*(a+l),d=n>=u,f=r>=c,p=(f<<1)+d;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=ar()),d?o=u:s=u,f?a=c:l=c,i(e,t,n,r,o,a,s,l)}var c,d,f,p,h,g,m,v,_,y=ut(s),b=ut(l);if(null!=t)g=t,m=n,v=r,_=o;else if(v=_=-(g=m=1/0),d=[],f=[],h=e.length,a)for(p=0;h>p;++p)c=e[p],g>c.x&&(g=c.x),m>c.y&&(m=c.y),c.x>v&&(v=c.x),c.y>_&&(_=c.y),d.push(c.x),f.push(c.y);else for(p=0;h>p;++p){var w=+y(c=e[p],p),S=+b(c,p);g>w&&(g=w),m>S&&(m=S),w>v&&(v=w),S>_&&(_=S),d.push(w),f.push(S)}var T=v-g,M=_-m;T>M?_=m+T:v=g+M;var k=ar();if(k.add=function(e){i(k,e,+y(e,++p),+b(e,p),g,m,v,_)},k.visit=function(e){sr(e,k,g,m,v,_)},p=-1,null==t){for(;h>++p;)i(k,e[p],d[p],f[p],g,m,v,_);--p}else e.forEach(k.add);return d=f=e=c=null,k}var a,s=In,l=Ln;return(a=arguments.length)?(s=or,l=ir,3===a&&(o=n,r=t,n=t=0),i(e)):(i.x=function(e){return arguments.length?(s=e,i):s},i.y=function(e){return arguments.length?(l=e,i):l},i.size=function(e){return arguments.length?(null==e?t=n=r=o=null:(t=n=0,r=+e[0],o=+e[1]),i):null==t?null:[r,o]},i)},ua.interpolateRgb=lr,ua.transform=function(e){var t=ca.createElementNS(ua.ns.prefix.svg,"g");return(ua.transform=function(e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate();return new ur(n?n.matrix:js)})(e)},ur.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var js={a:1,b:0,c:0,d:1,e:0,f:0};ua.interpolateNumber=pr,ua.interpolateTransform=hr,ua.interpolateObject=gr,ua.interpolateString=mr;var Hs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;ua.interpolate=vr,ua.interpolators=[gr,function(e,t){return Array.isArray(t)&&yr(e,t)},function(e,t){return("string"==typeof e||"string"==typeof t)&&mr(e+"",t+"")},function(e,t){return("string"==typeof t?Ga.has(t)||/^(#|rgb\(|hsl\()/.test(t):t instanceof R)&&lr(e,t)},function(e,t){return!isNaN(e=+e)&&!isNaN(t=+t)&&pr(e,t)}],ua.interpolateArray=yr;var Us=function(){return ct},qs=ua.map({linear:Us,poly:Er,quad:function(){return Tr},cubic:function(){return Mr},sin:function(){return xr},exp:function(){return Cr},circle:function(){return Ar},elastic:Nr,back:Or,bounce:function(){return Dr}}),$s=ua.map({"in":ct,out:wr,"in-out":Sr,"out-in":function(e){return Sr(wr(e))}});ua.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";return n=qs.get(n)||Us,r=$s.get(r)||ct,br(r(n.apply(null,Array.prototype.slice.call(arguments,1))))},ua.interpolateHcl=Ir,ua.interpolateHsl=Lr,ua.interpolateLab=Rr,ua.interpolateRound=Pr,ua.layout={},ua.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;r>++n;)t.push(jr(e[n]));return t}},ua.layout.chord=function(){function e(){var e,u,d,f,p,h={},g=[],m=ua.range(i),v=[];for(n=[],r=[],e=0,f=-1;i>++f;){for(u=0,p=-1;i>++p;)u+=o[f][p];g.push(u),v.push(ua.range(i)),e+=u}for(a&&m.sort(function(e,t){return a(g[e],g[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(o[t][e],o[t][n])})}),e=(2*Ba-c*i)/e,u=0,f=-1;i>++f;){for(d=u,p=-1;i>++p;){var _=m[f],y=v[_][p],b=o[_][y],w=u,S=u+=b*e;h[_+"-"+y]={index:_,subindex:y,startAngle:w,endAngle:S,value:b}}r[_]={index:_,startAngle:d,endAngle:u,value:(u-d)/e},u+=c}for(f=-1;i>++f;)for(p=f-1;i>++p;){var T=h[f+"-"+p],M=h[p+"-"+f];(T.value||M.value)&&n.push(T.value<M.value?{source:M,target:T}:{source:T,target:M})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,o,i,a,s,l,u={},c=0;return u.matrix=function(e){return arguments.length?(i=(o=e)&&o.length,n=r=null,u):o},u.padding=function(e){return arguments.length?(c=e,n=r=null,u):c},u.sortGroups=function(e){return arguments.length?(a=e,n=r=null,u):a},u.sortSubgroups=function(e){return arguments.length?(s=e,n=null,u):s},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return r||e(),r},u},ua.layout.force=function(){function e(e){return function(t,n,r,o){if(t.point!==e){var i=t.cx-e.x,a=t.cy-e.y,s=1/Math.sqrt(i*i+a*a);if(g>(o-n)*s){var l=t.charge*s*s;
return e.px-=i*l,e.py-=a*l,!0}if(t.point&&isFinite(s)){var l=t.pointCharge*s*s;e.px-=i*l,e.py-=a*l}}return!t.charge}}function t(e){e.px=ua.event.x,e.py=ua.event.y,s.resume()}var n,r,o,i,a,s={},l=ua.dispatch("start","tick","end"),u=[1,1],c=.9,d=Vs,f=zs,p=-30,h=.1,g=.8,m=[],v=[];return s.tick=function(){if(.005>(r*=.99))return l.end({type:"end",alpha:r=0}),!0;var t,n,s,d,f,g,_,y,b,w=m.length,S=v.length;for(n=0;S>n;++n)s=v[n],d=s.source,f=s.target,y=f.x-d.x,b=f.y-d.y,(g=y*y+b*b)&&(g=r*i[n]*((g=Math.sqrt(g))-o[n])/g,y*=g,b*=g,f.x-=y*(_=d.weight/(f.weight+d.weight)),f.y-=b*_,d.x+=y*(_=1-_),d.y+=b*_);if((_=r*h)&&(y=u[0]/2,b=u[1]/2,n=-1,_))for(;w>++n;)s=m[n],s.x+=(y-s.x)*_,s.y+=(b-s.y)*_;if(p)for(Wr(t=ua.geom.quadtree(m),r,a),n=-1;w>++n;)(s=m[n]).fixed||t.visit(e(s));for(n=-1;w>++n;)s=m[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*c,s.y-=(s.py-(s.py=s.y))*c);l.tick({type:"tick",alpha:r})},s.nodes=function(e){return arguments.length?(m=e,s):m},s.links=function(e){return arguments.length?(v=e,s):v},s.size=function(e){return arguments.length?(u=e,s):u},s.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(f="function"==typeof e?e:+e,s):f},s.friction=function(e){return arguments.length?(c=+e,s):c},s.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.gravity=function(e){return arguments.length?(h=+e,s):h},s.theta=function(e){return arguments.length?(g=+e,s):g},s.alpha=function(e){return arguments.length?(e=+e,r?r=e>0?e:0:e>0&&(l.start({type:"start",alpha:r=e}),ua.timer(s.tick)),s):r},s.start=function(){function e(e,r){for(var o,i=t(n),a=-1,s=i.length;s>++a;)if(!isNaN(o=i[a][e]))return o;return Math.random()*r}function t(){if(!l){for(l=[],r=0;h>r;++r)l[r]=[];for(r=0;g>r;++r){var e=v[r];l[e.source.index].push(e.target),l[e.target.index].push(e.source)}}return l[n]}var n,r,l,c,h=m.length,g=v.length,_=u[0],y=u[1];for(n=0;h>n;++n)(c=m[n]).index=n,c.weight=0;for(n=0;g>n;++n)c=v[n],"number"==typeof c.source&&(c.source=m[c.source]),"number"==typeof c.target&&(c.target=m[c.target]),++c.source.weight,++c.target.weight;for(n=0;h>n;++n)c=m[n],isNaN(c.x)&&(c.x=e("x",_)),isNaN(c.y)&&(c.y=e("y",y)),isNaN(c.px)&&(c.px=c.x),isNaN(c.py)&&(c.py=c.y);if(o=[],"function"==typeof d)for(n=0;g>n;++n)o[n]=+d.call(this,v[n],n);else for(n=0;g>n;++n)o[n]=d;if(i=[],"function"==typeof f)for(n=0;g>n;++n)i[n]=+f.call(this,v[n],n);else for(n=0;g>n;++n)i[n]=f;if(a=[],"function"==typeof p)for(n=0;h>n;++n)a[n]=+p.call(this,m[n],n);else for(n=0;h>n;++n)a[n]=p;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=ua.behavior.drag().origin(ct).on("dragstart.force",qr).on("drag.force",t).on("dragend.force",$r)),arguments.length?(this.on("mouseover.force",Vr).on("mouseout.force",zr).call(n),void 0):n},ua.rebind(s,l,"on")};var Vs=20,zs=1;ua.layout.hierarchy=function(){function e(t,a,s){var l=o.call(n,t,a);if(t.depth=a,s.push(t),l&&(u=l.length)){for(var u,c,d=-1,f=t.children=[],p=0,h=a+1;u>++d;)c=e(l[d],h,s),c.parent=t,f.push(c),p+=c.value;r&&f.sort(r),i&&(t.value=p)}else i&&(t.value=+i.call(n,t,a)||0);return t}function t(e,r){var o=e.children,a=0;if(o&&(s=o.length))for(var s,l=-1,u=r+1;s>++l;)a+=t(o[l],u);else i&&(a=+i.call(n,e,r)||0);return i&&(e.value=a),a}function n(t){var n=[];return e(t,0,n),n}var r=Yr,o=Gr,i=Xr;return n.sort=function(e){return arguments.length?(r=e,n):r},n.children=function(e){return arguments.length?(o=e,n):o},n.value=function(e){return arguments.length?(i=e,n):i},n.revalue=function(e){return t(e,0),e},n},ua.layout.partition=function(){function e(t,n,r,o){var i=t.children;if(t.x=n,t.y=t.depth*o,t.dx=r,t.dy=o,i&&(a=i.length)){var a,s,l,u=-1;for(r=t.value?r/t.value:0;a>++u;)e(s=i[u],n,l=s.value*r,o),n+=l}}function t(e){var n=e.children,r=0;if(n&&(o=n.length))for(var o,i=-1;o>++i;)r=Math.max(r,t(n[i]));return 1+r}function n(n,i){var a=r.call(this,n,i);return e(a[0],0,o[0],o[1]/t(a[0])),a}var r=ua.layout.hierarchy(),o=[1,1];return n.size=function(e){return arguments.length?(o=e,n):o},Jr(n,r)},ua.layout.pie=function(){function e(i){var a=i.map(function(n,r){return+t.call(e,n,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),l=(("function"==typeof o?o.apply(this,arguments):o)-s)/ua.sum(a),u=ua.range(i.length);null!=n&&u.sort(n===Ws?function(e,t){return a[t]-a[e]}:function(e,t){return n(i[e],i[t])});var c=[];return u.forEach(function(e){var t;c[e]={data:i[e],value:t=a[e],startAngle:s,endAngle:s+=t*l}}),c}var t=Number,n=Ws,r=0,o=2*Ba;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(o=t,e):o},e};var Ws={};ua.layout.stack=function(){function e(s,l){var u=s.map(function(n,r){return t.call(e,n,r)}),c=u.map(function(t){return t.map(function(t,n){return[i.call(e,t,n),a.call(e,t,n)]})}),d=n.call(e,c,l);u=ua.permute(u,d),c=ua.permute(c,d);var f,p,h,g=r.call(e,c,l),m=u.length,v=u[0].length;for(p=0;v>p;++p)for(o.call(e,u[0][p],h=g[p],c[0][p][1]),f=1;m>f;++f)o.call(e,u[f][p],h+=c[f-1][p][1],c[f][p][1]);return s}var t=ct,n=to,r=no,o=eo,i=Qr,a=Zr;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:Js.get(t)||to,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:Gs.get(t)||no,e):r},e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(t){return arguments.length?(o=t,e):o},e};var Js=ua.map({"inside-out":function(e){var t,n,r=e.length,o=e.map(ro),i=e.map(oo),a=ua.range(r).sort(function(e,t){return o[e]-o[t]}),s=0,l=0,u=[],c=[];for(t=0;r>t;++t)n=a[t],l>s?(s+=i[n],u.push(n)):(l+=i[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return ua.range(e.length).reverse()},"default":to}),Gs=ua.map({silhouette:function(e){var t,n,r,o=e.length,i=e[0].length,a=[],s=0,l=[];for(n=0;i>n;++n){for(t=0,r=0;o>t;t++)r+=e[t][n][1];r>s&&(s=r),a.push(r)}for(n=0;i>n;++n)l[n]=(s-a[n])/2;return l},wiggle:function(e){var t,n,r,o,i,a,s,l,u,c=e.length,d=e[0],f=d.length,p=[];for(p[0]=l=u=0,n=1;f>n;++n){for(t=0,o=0;c>t;++t)o+=e[t][n][1];for(t=0,i=0,s=d[n][0]-d[n-1][0];c>t;++t){for(r=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);t>r;++r)a+=(e[r][n][1]-e[r][n-1][1])/s;i+=a*e[t][n][1]}p[n]=l-=o?i/o*s:0,u>l&&(u=l)}for(n=0;f>n;++n)p[n]-=u;return p},expand:function(e){var t,n,r,o=e.length,i=e[0].length,a=1/o,s=[];for(n=0;i>n;++n){for(t=0,r=0;o>t;t++)r+=e[t][n][1];if(r)for(t=0;o>t;t++)e[t][n][1]/=r;else for(t=0;o>t;t++)e[t][n][1]=a}for(n=0;i>n;++n)s[n]=0;return s},zero:no});ua.layout.histogram=function(){function e(e,i){for(var a,s,l=[],u=e.map(n,this),c=r.call(this,u,i),d=o.call(this,c,u,i),i=-1,f=u.length,p=d.length-1,h=t?1:1/f;p>++i;)a=l[i]=[],a.dx=d[i+1]-(a.x=d[i]),a.y=0;if(p>0)for(i=-1;f>++i;)s=u[i],s>=c[0]&&c[1]>=s&&(a=l[ua.bisect(d,s,1,p)-1],a.y+=h,a.push(e[i]));return l}var t=!0,n=Number,r=lo,o=ao;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=ut(t),e):r},e.bins=function(t){return arguments.length?(o="number"==typeof t?function(e){return so(e,t)}:ut(t),e):o},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},ua.layout.tree=function(){function e(e,o){function i(e,t){var r=e.children,o=e._tree;if(r&&(a=r.length)){for(var a,l,u,c=r[0],d=c,f=-1;a>++f;)u=r[f],i(u,l),d=s(u,l,d),l=u;_o(e);var p=.5*(c._tree.prelim+u._tree.prelim);t?(o.prelim=t._tree.prelim+n(e,t),o.mod=o.prelim-p):o.prelim=p}else t&&(o.prelim=t._tree.prelim+n(e,t))}function a(e,t){e.x=e._tree.prelim+t;var n=e.children;if(n&&(r=n.length)){var r,o=-1;for(t+=e._tree.mod;r>++o;)a(n[o],t)}}function s(e,t,r){if(t){for(var o,i=e,a=e,s=t,l=e.parent.children[0],u=i._tree.mod,c=a._tree.mod,d=s._tree.mod,f=l._tree.mod;s=fo(s),i=co(i),s&&i;)l=co(l),a=fo(a),a._tree.ancestor=e,o=s._tree.prelim+d-i._tree.prelim-u+n(s,i),o>0&&(yo(bo(s,e,r),e,o),u+=o,c+=o),d+=s._tree.mod,u+=i._tree.mod,f+=l._tree.mod,c+=a._tree.mod;s&&!fo(a)&&(a._tree.thread=s,a._tree.mod+=d-c),i&&!co(l)&&(l._tree.thread=i,l._tree.mod+=u-f,r=e)}return r}var l=t.call(this,e,o),u=l[0];vo(u,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),i(u),a(u,-u._tree.prelim);var c=po(u,go),d=po(u,ho),f=po(u,mo),p=c.x-n(c,d)/2,h=d.x+n(d,c)/2,g=f.depth||1;return vo(u,function(e){e.x=(e.x-p)/(h-p)*r[0],e.y=e.depth/g*r[1],delete e._tree}),l}var t=ua.layout.hierarchy().sort(null).value(null),n=uo,r=[1,1];return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(r=t,e):r},Jr(e,t)},ua.layout.pack=function(){function e(e,o){var i=t.call(this,e,o),a=i[0];a.x=0,a.y=0,vo(a,function(e){e.r=Math.sqrt(e.value)}),vo(a,ko);var s=r[0],l=r[1],u=Math.max(2*a.r/s,2*a.r/l);if(n>0){var c=n*u/2;vo(a,function(e){e.r+=c}),vo(a,ko),vo(a,function(e){e.r-=c}),u=Math.max(2*a.r/s,2*a.r/l)}return Co(a,s/2,l/2,1/u),i}var t=ua.layout.hierarchy().sort(wo),n=0,r=[1,1];return e.size=function(t){return arguments.length?(r=t,e):r},e.padding=function(t){return arguments.length?(n=+t,e):n},Jr(e,t)},ua.layout.cluster=function(){function e(e,o){var i,a=t.call(this,e,o),s=a[0],l=0;vo(s,function(e){var t=e.children;t&&t.length?(e.x=Oo(t),e.y=No(t)):(e.x=i?l+=n(e,i):0,e.y=0,i=e)});var u=Do(s),c=Io(s),d=u.x-n(u,c)/2,f=c.x+n(c,u)/2;return vo(s,function(e){e.x=(e.x-d)/(f-d)*r[0],e.y=(1-(s.y?e.y/s.y:1))*r[1]}),a}var t=ua.layout.hierarchy().sort(null).value(null),n=uo,r=[1,1];return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(r=t,e):r},Jr(e,t)},ua.layout.treemap=function(){function e(e,t){for(var n,r,o=-1,i=e.length;i>++o;)r=(n=e[o]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var i=n.children;if(i&&i.length){var a,s,l,u=d(n),c=[],f=i.slice(),h=1/0,g="slice"===p?u.dx:"dice"===p?u.dy:"slice-dice"===p?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(f,u.dx*u.dy/n.value),c.area=0;(l=f.length)>0;)c.push(a=f[l-1]),c.area+=a.area,"squarify"!==p||h>=(s=r(c,g))?(f.pop(),h=s):(c.area-=c.pop().area,o(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,h=1/0);c.length&&(o(c,g,u,!0),c.length=c.area=0),i.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var i,a=d(t),s=r.slice(),l=[];for(e(s,a.dx*a.dy/t.value),l.area=0;i=s.pop();)l.push(i),l.area+=i.area,null!=i.z&&(o(l,i.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,o=0,i=1/0,a=-1,s=e.length;s>++a;)(n=e[a].area)&&(i>n&&(i=n),n>o&&(o=n));return r*=r,t*=t,r?Math.max(t*o*h/r,r/(t*i*h)):1/0}function o(e,t,n,r){var o,i=-1,a=e.length,s=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);a>++i;)o=e[i],o.x=s,o.y=u,o.dy=c,s+=o.dx=Math.min(n.x+n.dx-s,c?l(o.area/c):0);o.z=!0,o.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);a>++i;)o=e[i],o.x=s,o.y=u,o.dx=c,u+=o.dy=Math.min(n.y+n.dy-u,c?l(o.area/c):0);o.z=!1,o.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function i(r){var o=a||s(r),i=o[0];return i.x=0,i.y=0,i.dx=u[0],i.dy=u[1],a&&s.revalue(i),e([i],i.dx*i.dy/i.value),(a?n:t)(i),f&&(a=o),o}var a,s=ua.layout.hierarchy(),l=Math.round,u=[1,1],c=null,d=Lo,f=!1,p="squarify",h=.5*(1+Math.sqrt(5));return i.size=function(e){return arguments.length?(u=e,i):u},i.padding=function(e){function t(t){var n=e.call(i,t,t.depth);return null==n?Lo(t):Ro(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Ro(t,e)}if(!arguments.length)return c;var r;return d=null==(c=e)?Lo:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,i},i.round=function(e){return arguments.length?(l=e?Math.round:Number,i):l!=Number},i.sticky=function(e){return arguments.length?(f=e,a=null,i):f},i.ratio=function(e){return arguments.length?(h=e,i):h},i.mode=function(e){return arguments.length?(p=e+"",i):p},Jr(i,s)},ua.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,o;do n=2*Math.random()-1,r=2*Math.random()-1,o=n*n+r*r;while(!o||o>1);return e+t*n*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(){var e=ua.random.normal.apply(ua,arguments);return function(){return Math.exp(e())}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t/e}}},ua.scale={},ua.scale.linear=function(){return Uo([0,1],[0,1],vr,!1)},ua.scale.log=function(){return Jo(ua.scale.linear().domain([0,Math.LN10]),10,Go,Xo)};var Xs=ua.format(".0e");ua.scale.pow=function(){return Zo(ua.scale.linear(),1)},ua.scale.sqrt=function(){return ua.scale.pow().exponent(.5)},ua.scale.ordinal=function(){return ti([],{t:"range",a:[[]]})},ua.scale.category10=function(){return ua.scale.ordinal().range(Ys)},ua.scale.category20=function(){return ua.scale.ordinal().range(Ks)},ua.scale.category20b=function(){return ua.scale.ordinal().range(Qs)},ua.scale.category20c=function(){return ua.scale.ordinal().range(Zs)};var Ys=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Ks=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Qs=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Zs=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];ua.scale.quantile=function(){return ni([],[])},ua.scale.quantize=function(){return ri(0,1,[0,1])},ua.scale.threshold=function(){return oi([.5],[0,1])},ua.scale.identity=function(){return ii([0,1])},ua.svg.arc=function(){function e(){var e=t.apply(this,arguments),i=n.apply(this,arguments),a=r.apply(this,arguments)+el,s=o.apply(this,arguments)+el,l=(a>s&&(l=a,a=s,s=l),s-a),u=Ba>l?"0":"1",c=Math.cos(a),d=Math.sin(a),f=Math.cos(s),p=Math.sin(s);return l>=tl?e?"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"Z":e?"M"+i*c+","+i*d+"A"+i+","+i+" 0 "+u+",1 "+i*f+","+i*p+"L"+e*f+","+e*p+"A"+e+","+e+" 0 "+u+",0 "+e*c+","+e*d+"Z":"M"+i*c+","+i*d+"A"+i+","+i+" 0 "+u+",1 "+i*f+","+i*p+"L0,0"+"Z"}var t=ai,n=si,r=li,o=ui;return e.innerRadius=function(n){return arguments.length?(t=ut(n),e):t},e.outerRadius=function(t){return arguments.length?(n=ut(t),e):n},e.startAngle=function(t){return arguments.length?(r=ut(t),e):r},e.endAngle=function(t){return arguments.length?(o=ut(t),e):o},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,i=(r.apply(this,arguments)+o.apply(this,arguments))/2+el;return[Math.cos(i)*e,Math.sin(i)*e]},e};var el=-Ba/2,tl=2*Ba-1e-6;ua.svg.line.radial=function(){var e=Dn(ci);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Bn.reverse=Fn,Fn.reverse=Bn,ua.svg.area=function(){return di(ct)},ua.svg.area.radial=function(){var e=di(ci);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},ua.svg.chord=function(){function e(e,s){var l=t(this,i,e,s),u=t(this,a,e,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?o(l.r,l.p1,l.r,l.p0):o(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+o(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,r){var o=t.call(e,n,r),i=s.call(e,o,r),a=l.call(e,o,r)+el,c=u.call(e,o,r)+el;return{r:i,a0:a,a1:c,p0:[i*Math.cos(a),i*Math.sin(a)],p1:[i*Math.cos(c),i*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ba)+",1 "+t}function o(e,t,n,r){return"Q 0,0 "+r}var i=cn,a=dn,s=fi,l=li,u=ui;return e.radius=function(t){return arguments.length?(s=ut(t),e):s},e.source=function(t){return arguments.length?(i=ut(t),e):i},e.target=function(t){return arguments.length?(a=ut(t),e):a},e.startAngle=function(t){return arguments.length?(l=ut(t),e):l},e.endAngle=function(t){return arguments.length?(u=ut(t),e):u},e},ua.svg.diagonal=function(){function e(e,o){var i=t.call(this,e,o),a=n.call(this,e,o),s=(i.y+a.y)/2,l=[i,{x:i.x,y:s},{x:a.x,y:s},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=cn,n=dn,r=pi;return e.source=function(n){return arguments.length?(t=ut(n),e):t},e.target=function(t){return arguments.length?(n=ut(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},ua.svg.diagonal.radial=function(){var e=ua.svg.diagonal(),t=pi,n=e.projection;return e.projection=function(e){return arguments.length?n(hi(t=e)):t},e},ua.svg.symbol=function(){function e(e,r){return(nl.get(t.call(this,e,r))||vi)(n.call(this,e,r))}var t=mi,n=gi;return e.type=function(n){return arguments.length?(t=ut(n),e):t},e.size=function(t){return arguments.length?(n=ut(t),e):n},e};var nl=ua.map({circle:vi,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*il)),n=t*il;return"M0,"+-t+"L"+n+",0"+" 0,"+t+" "+-n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/ol),n=t*ol/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/ol),n=t*ol/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});ua.svg.symbolTypes=nl.keys();var rl,ol=Math.sqrt(3),il=Math.tan(30*ja),al=[],sl=0,ll={ease:kr,delay:0,duration:250};al.call=xa.call,al.empty=xa.empty,al.node=xa.node,ua.transition=function(e){return arguments.length?rl?e.transition():e:Da.transition()},ua.transition.prototype=al,al.select=function(e){var t,n,r,o=this.id,i=[];"function"!=typeof e&&(e=m(e));for(var a=-1,s=this.length;s>++a;){i.push(t=[]);for(var l=this[a],u=-1,c=l.length;c>++u;)(r=l[u])&&(n=e.call(r,r.__data__,u))?("__data__"in r&&(n.__data__=r.__data__),wi(n,u,o,r.__transition__[o]),t.push(n)):t.push(null)}return _i(i,o)},al.selectAll=function(e){var t,n,r,o,i,a=this.id,s=[];"function"!=typeof e&&(e=v(e));for(var l=-1,u=this.length;u>++l;)for(var c=this[l],d=-1,f=c.length;f>++d;)if(r=c[d]){i=r.__transition__[a],n=e.call(r,r.__data__,d),s.push(t=[]);for(var p=-1,h=n.length;h>++p;)wi(o=n[p],p,a,i),t.push(o)}return _i(s,a)},al.filter=function(e){var t,n,r,o=[];"function"!=typeof e&&(e=x(e));for(var i=0,a=this.length;a>i;i++){o.push(t=[]);for(var n=this[i],s=0,l=n.length;l>s;s++)(r=n[s])&&e.call(r,r.__data__,s)&&t.push(r)}return _i(o,this.id,this.time).ease(this.ease())},al.tween=function(e,t){var n=this.id;return 2>arguments.length?this.node().__transition__[n].tween.get(e):I(this,null==t?function(t){t.__transition__[n].tween.remove(e)}:function(r){r.__transition__[n].tween.set(e,t)})},al.attr=function(e,t){function n(){this.removeAttribute(i)}function r(){this.removeAttributeNS(i.space,i.local)}if(2>arguments.length){for(t in e)this.attr(t,e[t]);return this}var o=_r(e),i=ua.ns.qualify(e);return yi(this,"attr."+e,t,function(e){function t(){var t,n=this.getAttribute(i);return n!==e&&(t=o(n,e),function(e){this.setAttribute(i,t(e))})}function a(){var t,n=this.getAttributeNS(i.space,i.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(i.space,i.local,t(e))})}return null==e?i.local?r:n:(e+="",i.local?a:t)})},al.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(o));return r&&function(e){this.setAttribute(o,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(o.space,o.local));return r&&function(e){this.setAttributeNS(o.space,o.local,r(e))}}var o=ua.ns.qualify(e);return this.tween("attr."+e,o.local?r:n)},al.style=function(e,t,n){function r(){this.style.removeProperty(e)}var o=arguments.length;if(3>o){if("string"!=typeof e){2>o&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}var i=_r(e);return yi(this,"style."+e,t,function(t){function o(){var r,o=da.getComputedStyle(this,null).getPropertyValue(e);return o!==t&&(r=i(o,t),function(t){this.style.setProperty(e,r(t),n)})}return null==t?r:(t+="",o)})},al.styleTween=function(e,t,n){return 3>arguments.length&&(n=""),this.tween("style."+e,function(r,o){var i=t.call(this,r,o,da.getComputedStyle(this,null).getPropertyValue(e));return i&&function(t){this.style.setProperty(e,i(t),n)}})},al.text=function(e){return yi(this,"text",e,bi)},al.remove=function(){return this.each("end.transition",function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)})},al.ease=function(e){var t=this.id;return 1>arguments.length?this.node().__transition__[t].ease:("function"!=typeof e&&(e=ua.ease.apply(ua,arguments)),I(this,function(n){n.__transition__[t].ease=e}))},al.delay=function(e){var t=this.id;return I(this,"function"==typeof e?function(n,r,o){n.__transition__[t].delay=0|e.call(n,n.__data__,r,o)}:(e|=0,function(n){n.__transition__[t].delay=e}))},al.duration=function(e){var t=this.id;return I(this,"function"==typeof e?function(n,r,o){n.__transition__[t].duration=Math.max(1,0|e.call(n,n.__data__,r,o))}:(e=Math.max(1,0|e),function(n){n.__transition__[t].duration=e}))},al.each=function(e,t){var n=this.id;if(2>arguments.length){var r=ll,o=rl;rl=n,I(this,function(t,r,o){ll=t.__transition__[n],e.call(t,t.__data__,r,o)}),ll=r,rl=o}else I(this,function(r){r.__transition__[n].event.on(e,t)});return this},al.transition=function(){for(var e,t,n,r,o=this.id,i=++sl,a=[],s=0,l=this.length;l>s;s++){a.push(e=[]);for(var t=this[s],u=0,c=t.length;c>u;u++)(n=t[u])&&(r=Object.create(n.__transition__[o]),r.delay+=r.duration,wi(n,u,i,r)),e.push(n)}return _i(a,i)},ua.svg.axis=function(){function e(e){e.each(function(){var e,d=ua.select(this),f=null==u?n.ticks?n.ticks.apply(n,l):n.domain():u,p=null==t?n.tickFormat?n.tickFormat.apply(n,l):String:t,h=Mi(n,f,c),g=d.selectAll(".tick.minor").data(h,String),m=g.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1e-6),v=ua.transition(g.exit()).style("opacity",1e-6).remove(),_=ua.transition(g).style("opacity",1),y=d.selectAll(".tick.major").data(f,String),b=y.enter().insert("g","path").attr("class","tick major").style("opacity",1e-6),w=ua.transition(y.exit()).style("opacity",1e-6).remove(),S=ua.transition(y).style("opacity",1),T=Bo(n),M=d.selectAll(".domain").data([0]),k=(M.enter().append("path").attr("class","domain"),ua.transition(M)),E=n.copy(),x=this.__chart__||E;this.__chart__=E,b.append("line"),b.append("text");var C=b.select("line"),A=S.select("line"),N=y.select("text").text(p),O=b.select("text"),D=S.select("text");switch(r){case"bottom":e=Si,m.attr("y2",i),_.attr("x2",0).attr("y2",i),C.attr("y2",o),O.attr("y",Math.max(o,0)+s),A.attr("x2",0).attr("y2",o),D.attr("x",0).attr("y",Math.max(o,0)+s),N.attr("dy",".71em").style("text-anchor","middle"),k.attr("d","M"+T[0]+","+a+"V0H"+T[1]+"V"+a);break;case"top":e=Si,m.attr("y2",-i),_.attr("x2",0).attr("y2",-i),C.attr("y2",-o),O.attr("y",-(Math.max(o,0)+s)),A.attr("x2",0).attr("y2",-o),D.attr("x",0).attr("y",-(Math.max(o,0)+s)),N.attr("dy","0em").style("text-anchor","middle"),k.attr("d","M"+T[0]+","+-a+"V0H"+T[1]+"V"+-a);break;case"left":e=Ti,m.attr("x2",-i),_.attr("x2",-i).attr("y2",0),C.attr("x2",-o),O.attr("x",-(Math.max(o,0)+s)),A.attr("x2",-o).attr("y2",0),D.attr("x",-(Math.max(o,0)+s)).attr("y",0),N.attr("dy",".32em").style("text-anchor","end"),k.attr("d","M"+-a+","+T[0]+"H0V"+T[1]+"H"+-a);break;case"right":e=Ti,m.attr("x2",i),_.attr("x2",i).attr("y2",0),C.attr("x2",o),O.attr("x",Math.max(o,0)+s),A.attr("x2",o).attr("y2",0),D.attr("x",Math.max(o,0)+s).attr("y",0),N.attr("dy",".32em").style("text-anchor","start"),k.attr("d","M"+a+","+T[0]+"H0V"+T[1]+"H"+a)}if(n.ticks)b.call(e,x),S.call(e,E),w.call(e,E),m.call(e,x),_.call(e,E),v.call(e,E);else{var I=E.rangeBand()/2,L=function(e){return E(e)+I};b.call(e,L),S.call(e,L)}})}var t,n=ua.scale.linear(),r=ul,o=6,i=6,a=6,s=3,l=[10],u=null,c=0;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in cl?t+"":ul,e):r},e.ticks=function(){return arguments.length?(l=arguments,e):l},e.tickValues=function(t){return arguments.length?(u=t,e):u},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t,n){if(!arguments.length)return o;var r=arguments.length-1;return o=+t,i=r>1?+n:o,a=r>0?+arguments[r]:o,e},e.tickPadding=function(t){return arguments.length?(s=+t,e):s},e.tickSubdivide=function(t){return arguments.length?(c=+t,e):c},e};var ul="bottom",cl={top:1,right:1,bottom:1,left:1};ua.svg.brush=function(){function e(i){i.each(function(){var i,a=ua.select(this),u=a.selectAll(".background").data([0]),d=a.selectAll(".extent").data([0]),f=a.selectAll(".resize").data(c,String);a.style("pointer-events","all").on("mousedown.brush",o).on("touchstart.brush",o),u.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),d.enter().append("rect").attr("class","extent").style("cursor","move"),f.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return dl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),f.style("display",e.empty()?"none":null),f.exit().remove(),s&&(i=Bo(s),u.attr("x",i[0]).attr("width",i[1]-i[0]),n(a)),l&&(i=Bo(l),u.attr("y",i[0]).attr("height",i[1]-i[0]),r(a)),t(a)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+f[+/e$/.test(e)][0]+","+f[+/^s/.test(e)][1]+")"})}function n(e){e.select(".extent").attr("x",f[0][0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1][0]-f[0][0])}function r(e){e.select(".extent").attr("y",f[0][1]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1][1]-f[0][1])}function o(){function o(){var e=ua.event.changedTouches;return e?ua.touches(_,e)[0]:ua.mouse(_)}function c(){32==ua.event.keyCode&&(k||(m=null,E[0]-=f[1][0],E[1]-=f[1][1],k=2),u())}function d(){32==ua.event.keyCode&&2==k&&(E[0]+=f[1][0],E[1]+=f[1][1],k=0,u())}function p(){var e=o(),i=!1;v&&(e[0]+=v[0],e[1]+=v[1]),k||(ua.event.altKey?(m||(m=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2]),E[0]=f[+(e[0]<m[0])][0],E[1]=f[+(e[1]<m[1])][1]):m=null),T&&h(e,s,0)&&(n(w),i=!0),M&&h(e,l,1)&&(r(w),i=!0),i&&(t(w),b({type:"brush",mode:k?"move":"resize"}))}function h(e,t,n){var r,o,a=Bo(t),s=a[0],l=a[1],u=E[n],c=f[1][n]-f[0][n];return k&&(s-=u,l-=c+u),r=Math.max(s,Math.min(l,e[n])),k?o=(r+=u)+c:(m&&(u=Math.max(s,Math.min(l,2*m[n]-r))),r>u?(o=r,r=u):o=u),f[0][n]!==r||f[1][n]!==o?(i=null,f[0][n]=r,f[1][n]=o,!0):void 0}function g(){p(),w.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),ua.select("body").style("cursor",null),x.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),b({type:"brushend"}),u()}var m,v,_=this,y=ua.select(ua.event.target),b=a.of(_,arguments),w=ua.select(_),S=y.datum(),T=!/^(n|s)$/.test(S)&&s,M=!/^(e|w)$/.test(S)&&l,k=y.classed("extent"),E=o(),x=ua.select(da).on("mousemove.brush",p).on("mouseup.brush",g).on("touchmove.brush",p).on("touchend.brush",g).on("keydown.brush",c).on("keyup.brush",d);if(k)E[0]=f[0][0]-E[0],E[1]=f[0][1]-E[1];else if(S){var C=+/w$/.test(S),A=+/^n/.test(S);v=[f[1-C][0]-E[0],f[1-A][1]-E[1]],E[0]=f[C][0],E[1]=f[A][1]}else ua.event.altKey&&(m=E.slice());w.style("pointer-events","none").selectAll(".resize").style("display",null),ua.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),p(),u()}var i,a=d(e,"brushstart","brush","brushend"),s=null,l=null,c=fl[0],f=[[0,0],[0,0]];return e.x=function(t){return arguments.length?(s=t,c=fl[!s<<1|!l],e):s},e.y=function(t){return arguments.length?(l=t,c=fl[!s<<1|!l],e):l},e.extent=function(t){var n,r,o,a,u;return arguments.length?(i=[[0,0],[0,0]],s&&(n=t[0],r=t[1],l&&(n=n[0],r=r[0]),i[0][0]=n,i[1][0]=r,s.invert&&(n=s(n),r=s(r)),n>r&&(u=n,n=r,r=u),f[0][0]=0|n,f[1][0]=0|r),l&&(o=t[0],a=t[1],s&&(o=o[1],a=a[1]),i[0][1]=o,i[1][1]=a,l.invert&&(o=l(o),a=l(a)),o>a&&(u=o,o=a,a=u),f[0][1]=0|o,f[1][1]=0|a),e):(t=i||f,s&&(n=t[0][0],r=t[1][0],i||(n=f[0][0],r=f[1][0],s.invert&&(n=s.invert(n),r=s.invert(r)),n>r&&(u=n,n=r,r=u))),l&&(o=t[0][1],a=t[1][1],i||(o=f[0][1],a=f[1][1],l.invert&&(o=l.invert(o),a=l.invert(a)),o>a&&(u=o,o=a,a=u))),s&&l?[[n,o],[r,a]]:s?[n,r]:l&&[o,a])},e.clear=function(){return i=null,f[0][0]=f[0][1]=f[1][0]=f[1][1]=0,e},e.empty=function(){return s&&f[0][0]===f[1][0]||l&&f[0][1]===f[1][1]},ua.rebind(e,a,"on")};var dl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];ua.time={};var pl=Date,hl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];ki.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){gl.setUTCDate.apply(this._,arguments)},setDay:function(){gl.setUTCDay.apply(this._,arguments)},setFullYear:function(){gl.setUTCFullYear.apply(this._,arguments)},setHours:function(){gl.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){gl.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){gl.setUTCMinutes.apply(this._,arguments)},setMonth:function(){gl.setUTCMonth.apply(this._,arguments)},setSeconds:function(){gl.setUTCSeconds.apply(this._,arguments)},setTime:function(){gl.setTime.apply(this._,arguments)}};var gl=Date.prototype,ml="%a %b %e %X %Y",vl="%m/%d/%Y",_l="%H:%M:%S",yl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],bl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wl=["January","February","March","April","May","June","July","August","September","October","November","December"],Sl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];ua.time.year=Ei(function(e){return e=ua.time.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ua.time.years=ua.time.year.range,ua.time.years.utc=ua.time.year.utc.range,ua.time.day=Ei(function(e){var t=new pl(1970,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ua.time.days=ua.time.day.range,ua.time.days.utc=ua.time.day.utc.range,ua.time.dayOfYear=function(e){var t=ua.time.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},hl.forEach(function(e,t){e=e.toLowerCase(),t=7-t;var n=ua.time[e]=Ei(function(e){return(e=ua.time.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ua.time.year(e).getDay();return Math.floor((ua.time.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ua.time[e+"s"]=n.range,ua.time[e+"s"].utc=n.utc.range,ua.time[e+"OfYear"]=function(e){var n=ua.time.year(e).getDay();return Math.floor((ua.time.dayOfYear(e)+(n+t)%7)/7)}}),ua.time.week=ua.time.sunday,ua.time.weeks=ua.time.sunday.range,ua.time.weeks.utc=ua.time.sunday.utc.range,ua.time.weekOfYear=ua.time.sundayOfYear,ua.time.format=function(e){function t(t){for(var r,o,i,a=[],s=-1,l=0;n>++s;)37===e.charCodeAt(s)&&(a.push(e.substring(l,s)),null!=(o=Al[r=e.charAt(++s)])&&(r=e.charAt(++s)),(i=Nl[r])&&(r=i(t,null==o?"e"===r?" ":"0":o)),a.push(r),l=s+1);
return a.push(e.substring(l,s)),a.join("")}var n=e.length;return t.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},r=Ci(n,e,t,0);if(r!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var o=new pl;return o.setFullYear(n.y,n.m,n.d),o.setHours(n.H,n.M,n.S,n.L),o},t.toString=function(){return e},t};var Tl=Ai(yl),Ml=Ai(bl),kl=Ai(wl),El=Ni(wl),xl=Ai(Sl),Cl=Ni(Sl),Al={"-":"",_:" ",0:"0"},Nl={a:function(e){return bl[e.getDay()]},A:function(e){return yl[e.getDay()]},b:function(e){return Sl[e.getMonth()]},B:function(e){return wl[e.getMonth()]},c:ua.time.format(ml),d:function(e,t){return Oi(e.getDate(),t,2)},e:function(e,t){return Oi(e.getDate(),t,2)},H:function(e,t){return Oi(e.getHours(),t,2)},I:function(e,t){return Oi(e.getHours()%12||12,t,2)},j:function(e,t){return Oi(1+ua.time.dayOfYear(e),t,3)},L:function(e,t){return Oi(e.getMilliseconds(),t,3)},m:function(e,t){return Oi(e.getMonth()+1,t,2)},M:function(e,t){return Oi(e.getMinutes(),t,2)},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e,t){return Oi(e.getSeconds(),t,2)},U:function(e,t){return Oi(ua.time.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Oi(ua.time.mondayOfYear(e),t,2)},x:ua.time.format(vl),X:ua.time.format(_l),y:function(e,t){return Oi(e.getFullYear()%100,t,2)},Y:function(e,t){return Oi(e.getFullYear()%1e4,t,4)},Z:Xi,"%":function(){return"%"}},Ol={a:Di,A:Ii,b:Li,B:Ri,c:Pi,d:$i,e:$i,H:Vi,I:Vi,L:Ji,m:qi,M:zi,p:Gi,S:Wi,x:Bi,X:Fi,y:Hi,Y:ji},Dl=/^\s*\d+/,Il=ua.map({am:0,pm:1});ua.time.format.utc=function(e){function t(e){try{pl=ki;var t=new pl;return t._=e,n(t)}finally{pl=Date}}var n=ua.time.format(e);return t.parse=function(e){try{pl=ki;var t=n.parse(e);return t&&t._}finally{pl=Date}},t.toString=n.toString,t};var Ll=ua.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");ua.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Yi:Ll,Yi.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Yi.toString=Ll.toString,ua.time.second=Ei(function(e){return new pl(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ua.time.seconds=ua.time.second.range,ua.time.seconds.utc=ua.time.second.utc.range,ua.time.minute=Ei(function(e){return new pl(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ua.time.minutes=ua.time.minute.range,ua.time.minutes.utc=ua.time.minute.utc.range,ua.time.hour=Ei(function(e){var t=e.getTimezoneOffset()/60;return new pl(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ua.time.hours=ua.time.hour.range,ua.time.hours.utc=ua.time.hour.utc.range,ua.time.month=Ei(function(e){return e=ua.time.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ua.time.months=ua.time.month.range,ua.time.months.utc=ua.time.month.utc.range;var Rl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Pl=[[ua.time.second,1],[ua.time.second,5],[ua.time.second,15],[ua.time.second,30],[ua.time.minute,1],[ua.time.minute,5],[ua.time.minute,15],[ua.time.minute,30],[ua.time.hour,1],[ua.time.hour,3],[ua.time.hour,6],[ua.time.hour,12],[ua.time.day,1],[ua.time.day,2],[ua.time.week,1],[ua.time.month,1],[ua.time.month,3],[ua.time.year,1]],Bl=[[ua.time.format("%Y"),It],[ua.time.format("%B"),function(e){return e.getMonth()}],[ua.time.format("%b %d"),function(e){return 1!=e.getDate()}],[ua.time.format("%a %d"),function(e){return e.getDay()&&1!=e.getDate()}],[ua.time.format("%I %p"),function(e){return e.getHours()}],[ua.time.format("%I:%M"),function(e){return e.getMinutes()}],[ua.time.format(":%S"),function(e){return e.getSeconds()}],[ua.time.format(".%L"),function(e){return e.getMilliseconds()}]],Fl=ua.scale.linear(),jl=ea(Bl);Pl.year=function(e,t){return Fl.domain(e.map(na)).ticks(t).map(ta)},ua.time.scale=function(){return Ki(ua.scale.linear(),Pl,jl)};var Hl=Pl.map(function(e){return[e[0].utc,e[1]]}),Ul=[[ua.time.format.utc("%Y"),It],[ua.time.format.utc("%B"),function(e){return e.getUTCMonth()}],[ua.time.format.utc("%b %d"),function(e){return 1!=e.getUTCDate()}],[ua.time.format.utc("%a %d"),function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],[ua.time.format.utc("%I %p"),function(e){return e.getUTCHours()}],[ua.time.format.utc("%I:%M"),function(e){return e.getUTCMinutes()}],[ua.time.format.utc(":%S"),function(e){return e.getUTCSeconds()}],[ua.time.format.utc(".%L"),function(e){return e.getUTCMilliseconds()}]],ql=ea(Ul);return Hl.year=function(e,t){return Fl.domain(e.map(oa)).ticks(t).map(ra)},ua.time.scale.utc=function(){return Ki(ua.scale.linear(),Hl,ql)},ua.text=function(){return ua.xhr.apply(ua,arguments).response(ia)},ua.json=function(e,t){return ua.xhr(e,"application/json",t).response(aa)},ua.html=function(e,t){return ua.xhr(e,"text/html",t).response(sa)},ua.xml=function(){return ua.xhr.apply(ua,arguments).response(la)},ua}()}.call(this),function(){Meteor._def_template("audioSoundsTemplate",Handlebars.json_ast_to_func(['<audio id="clickAudioClip" preload="auto" src="/packages/audio-click/audio/click1.wav"></audio>']))}.call(this),function(){Meteor._def_template("mobileDeviceStatus",Handlebars.json_ast_to_func(['<div id="mobileDeviceStatus" class="',["{",[[0,"deviceStatus"]]],'">',["{",[[0,"deviceStatusText"]]],"</p></div>"]))}.call(this),function(){(function(){var e,t;(function(){function n(t){var n=t.factory;return t.exports={},delete t.factory,n(e,t.exports,t),t.exports}var r={},o=[],i={};e=function(e){if(!r[e])throw"module "+e+" not found";if(e in i){var t=o.slice(i[e]).join("->")+"->"+e;throw"Cycle in require graph: "+t}if(r[e].factory)try{return i[e]=o.length,o.push(e),n(r[e])}finally{delete i[e],o.pop()}return r[e].exports},t=function(e,t){if(r[e])throw"module "+e+" already defined";r[e]={id:e,factory:t}},t.remove=function(e){delete r[e]},t.moduleMap=r})(),"object"==typeof module&&"function"==typeof e&&(module.exports.require=e,module.exports.define=t),t("cordova",function(e,n,r){function o(e,t){var n=document.createEvent("Events");if(n.initEvent(e,!1,!1),t)for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}var i=e("cordova/channel");document.addEventListener("DOMContentLoaded",function(){i.onDOMContentLoaded.fire()},!1),("complete"==document.readyState||"interactive"==document.readyState)&&i.onDOMContentLoaded.fire();var a=document.addEventListener,s=document.removeEventListener,l=window.addEventListener,u=window.removeEventListener,c={},d={};document.addEventListener=function(e,t,n){var r=e.toLowerCase();c[r]!==void 0?c[r].subscribe(t):a.call(document,e,t,n)},window.addEventListener=function(e,t,n){var r=e.toLowerCase();d[r]!==void 0?d[r].subscribe(t):l.call(window,e,t,n)},document.removeEventListener=function(e,t,n){var r=e.toLowerCase();c[r]!==void 0?c[r].unsubscribe(t):s.call(document,e,t,n)},window.removeEventListener=function(e,t,n){var r=e.toLowerCase();d[r]!==void 0?d[r].unsubscribe(t):u.call(window,e,t,n)},window.console===void 0&&(window.console={log:function(){}});var f={define:t,require:e,addWindowEventHandler:function(e){return d[e]=i.create(e)},addStickyDocumentEventHandler:function(e){return c[e]=i.createSticky(e)},addDocumentEventHandler:function(e){return c[e]=i.create(e)},removeWindowEventHandler:function(e){delete d[e]},removeDocumentEventHandler:function(e){delete c[e]},getOriginalHandlers:function(){return{document:{addEventListener:a,removeEventListener:s},window:{addEventListener:l,removeEventListener:u}}},fireDocumentEvent:function(e,t,n){var r=o(e,t);c[e]!==void 0?n?c[e].fire(r):setTimeout(function(){c[e].fire(r)},0):document.dispatchEvent(r)},fireWindowEvent:function(e,t){var n=o(e,t);d[e]!==void 0?setTimeout(function(){d[e].fire(n)},0):window.dispatchEvent(n)},callbackId:Math.floor(2e9*Math.random()),callbacks:{},callbackStatus:{NO_RESULT:0,OK:1,CLASS_NOT_FOUND_EXCEPTION:2,ILLEGAL_ACCESS_EXCEPTION:3,INSTANTIATION_EXCEPTION:4,MALFORMED_URL_EXCEPTION:5,IO_EXCEPTION:6,INVALID_ACTION:7,JSON_EXCEPTION:8,ERROR:9},callbackSuccess:function(e,t){try{f.callbackFromNative(e,!0,t.status,t.message,t.keepCallback)}catch(n){console.log("Error in error callback: "+e+" = "+n)}},callbackError:function(e,t){try{f.callbackFromNative(e,!1,t.status,t.message,t.keepCallback)}catch(n){console.log("Error in error callback: "+e+" = "+n)}},callbackFromNative:function(e,t,n,r,o){var i=f.callbacks[e];i&&(t&&n==f.callbackStatus.OK?i.success&&i.success(r):t||i.fail&&i.fail(r),o||delete f.callbacks[e])},addConstructor:function(e){i.onCordovaReady.subscribe(function(){try{e()}catch(t){console.log("Failed to run constructor: "+t)}})}};i.onPause=f.addDocumentEventHandler("pause"),i.onResume=f.addDocumentEventHandler("resume"),i.onDeviceReady=f.addStickyDocumentEventHandler("deviceready"),r.exports=f}),t("cordova/argscheck",function(e,t,n){function r(e,t){return/.*?\((.*?)\)/.exec(e)[1].split(", ")[t]}function o(e,t,n,o){if(s.enableChecks){for(var i,u=null,c=0;e.length>c;++c){var d=e.charAt(c),f=d.toUpperCase(),p=n[c];if("*"!=d&&(i=a.typeName(p),(null!==p&&void 0!==p||d!=f)&&i!=l[f])){u="Expected "+l[f];break}}if(u)throw u+=", but got "+i+".",u='Wrong type for parameter "'+r(o||n.callee,c)+'" of '+t+": "+u,"undefined"==typeof jasmine&&console.error(u),TypeError(u)}}function i(e,t){return void 0===e?t:e}e("cordova/exec");var a=e("cordova/utils"),s=n.exports,l={A:"Array",D:"Date",N:"Number",S:"String",F:"Function",O:"Object"};s.checkArgs=o,s.getValue=i,s.enableChecks=!0}),t("cordova/builder",function(e,t,n){function r(e,t,n){for(var r in e)e.hasOwnProperty(r)&&t.apply(n,[e[r],r])}function o(e,t,n){e[t]=n,e[t]!==n&&l.defineGetter(e,t,function(){return n})}function i(e,t,n,r){r?l.defineGetter(e,t,function(){return console.log(r),delete e[t],o(e,t,n),n}):o(e,t,n)}function a(t,n,o,u){r(n,function(n,r){try{var c=n.path?e(n.path):{};o?(t[r]===void 0?i(t,r,c,n.deprecated):n.path!==void 0&&(u?s(t[r],c):i(t,r,c,n.deprecated)),c=t[r]):t[r]===void 0?i(t,r,c,n.deprecated):c=t[r],n.children&&a(c,n.children,o,u)}catch(d){l.alert("Exception building cordova JS globals: "+d+' for key "'+r+'"')}})}function s(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.prototype&&e.prototype.constructor===e?o(e.prototype,n,t[n]):"object"==typeof t[n]&&"object"==typeof e[n]?s(e[n],t[n]):o(e,n,t[n]))}var l=e("cordova/utils");n.exports={buildIntoButDoNotClobber:function(e,t){a(t,e,!1,!1)},buildIntoAndClobber:function(e,t){a(t,e,!0,!1)},buildIntoAndMerge:function(e,t){a(t,e,!0,!0)},recursiveMerge:s,assignOrWrapInDeprecateGetter:i}}),t("cordova/channel",function(e,t,n){function r(e){if("function"!=typeof e)throw"Function required as first argument!"}var o=e("cordova/utils"),i=1,a=function(e,t){this.type=e,this.handlers={},this.state=t?1:0,this.fireArgs=null,this.numHandlers=0,this.onHasSubscribersChange=null},s={join:function(e,t){for(var n=t.length,r=n,o=function(){--r||e()},i=0;n>i;i++){if(0===t[i].state)throw Error("Can only use join with sticky channels.");t[i].subscribe(o)}n||e()},create:function(e){return s[e]=new a(e,!1)},createSticky:function(e){return s[e]=new a(e,!0)},deviceReadyChannelsArray:[],deviceReadyChannelsMap:{},waitForInitialization:function(e){if(e){var t=s[e]||this.createSticky(e);this.deviceReadyChannelsMap[e]=t,this.deviceReadyChannelsArray.push(t)}},initializationComplete:function(e){var t=this.deviceReadyChannelsMap[e];t&&t.fire()}};a.prototype.subscribe=function(e,t){if(r(e),2==this.state)return e.apply(t||this,this.fireArgs),void 0;var n=e,a=e.observer_guid;"object"==typeof t&&(n=o.close(t,e)),a||(a=""+i++),n.observer_guid=a,e.observer_guid=a,this.handlers[a]||(this.handlers[a]=n,this.numHandlers++,1==this.numHandlers&&this.onHasSubscribersChange&&this.onHasSubscribersChange())},a.prototype.unsubscribe=function(e){r(e);var t=e.observer_guid,n=this.handlers[t];n&&(delete this.handlers[t],this.numHandlers--,0===this.numHandlers&&this.onHasSubscribersChange&&this.onHasSubscribersChange())},a.prototype.fire=function(){var e=Array.prototype.slice.call(arguments);if(1==this.state&&(this.state=2,this.fireArgs=e),this.numHandlers){var t=[];for(var n in this.handlers)t.push(this.handlers[n]);for(var r=0;t.length>r;++r)t[r].apply(this,e);2==this.state&&this.numHandlers&&(this.numHandlers=0,this.handlers={},this.onHasSubscribersChange&&this.onHasSubscribersChange())}},s.createSticky("onDOMContentLoaded"),s.createSticky("onNativeReady"),s.createSticky("onCordovaReady"),s.createSticky("onCordovaInfoReady"),s.createSticky("onCordovaConnectionReady"),s.createSticky("onDeviceReady"),s.create("onResume"),s.create("onPause"),s.createSticky("onDestroy"),s.waitForInitialization("onCordovaReady"),s.waitForInitialization("onCordovaConnectionReady"),n.exports=s}),t("cordova/commandProxy",function(e,t,n){var r={};n.exports={add:function(e,t){return console.log("adding proxy for "+e),r[e]=t,t},remove:function(e){var t=r[e];return delete r[e],r[e]=null,t},get:function(e,t){return r[e]?r[e][t]:null}}}),t("cordova/common",function(e,t,n){n.exports={defaults:{cordova:{path:"cordova",children:{exec:{path:"cordova/exec"},logger:{path:"cordova/plugin/logger"}}},Cordova:{children:{exec:{path:"cordova/exec"}}},open:{path:"cordova/plugin/InAppBrowser"},navigator:{children:{notification:{path:"cordova/plugin/notification"},accelerometer:{path:"cordova/plugin/accelerometer"},battery:{path:"cordova/plugin/battery"},camera:{path:"cordova/plugin/Camera"},compass:{path:"cordova/plugin/compass"},contacts:{path:"cordova/plugin/contacts"},device:{children:{capture:{path:"cordova/plugin/capture"}}},geolocation:{path:"cordova/plugin/geolocation"},globalization:{path:"cordova/plugin/globalization"},network:{children:{connection:{path:"cordova/plugin/network",deprecated:"navigator.network.connection is deprecated. Use navigator.connection instead."}}},splashscreen:{path:"cordova/plugin/splashscreen"}}},Acceleration:{path:"cordova/plugin/Acceleration"},Camera:{path:"cordova/plugin/CameraConstants"},CameraPopoverOptions:{path:"cordova/plugin/CameraPopoverOptions"},CaptureError:{path:"cordova/plugin/CaptureError"},CaptureAudioOptions:{path:"cordova/plugin/CaptureAudioOptions"},CaptureImageOptions:{path:"cordova/plugin/CaptureImageOptions"},CaptureVideoOptions:{path:"cordova/plugin/CaptureVideoOptions"},CompassHeading:{path:"cordova/plugin/CompassHeading"},CompassError:{path:"cordova/plugin/CompassError"},ConfigurationData:{path:"cordova/plugin/ConfigurationData"},Connection:{path:"cordova/plugin/Connection"},Contact:{path:"cordova/plugin/Contact"},ContactAddress:{path:"cordova/plugin/ContactAddress"},ContactError:{path:"cordova/plugin/ContactError"},ContactField:{path:"cordova/plugin/ContactField"},ContactFindOptions:{path:"cordova/plugin/ContactFindOptions"},ContactName:{path:"cordova/plugin/ContactName"},ContactOrganization:{path:"cordova/plugin/ContactOrganization"},Coordinates:{path:"cordova/plugin/Coordinates"},device:{path:"cordova/plugin/device"},GlobalizationError:{path:"cordova/plugin/GlobalizationError"},Media:{path:"cordova/plugin/Media"},MediaError:{path:"cordova/plugin/MediaError"},MediaFile:{path:"cordova/plugin/MediaFile"},MediaFileData:{path:"cordova/plugin/MediaFileData"},Position:{path:"cordova/plugin/Position"},PositionError:{path:"cordova/plugin/PositionError"},ProgressEvent:{path:"cordova/plugin/ProgressEvent"}},clobbers:{navigator:{children:{connection:{path:"cordova/plugin/network"}}}}}}),t("cordova/exec",function(e,t,n){function r(){var e=document.createElement("iframe");return e.style.display="none",document.body.appendChild(e),e}function o(){if(l==p.XHR_WITH_PAYLOAD)return!0;if(l==p.XHR_OPTIONAL_PAYLOAD){for(var e=0,t=0;m.length>t;++t)e+=m[t].length;return 4500>e}return!1}function i(e){var t=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},n=function(e){return window.btoa(t(e))};return e.forEach(function(t,r){"ArrayBuffer"==f.typeName(t)&&(e[r]={CDVType:"ArrayBuffer",data:n(t)})}),e}function a(e){if(e&&e.hasOwnProperty("CDVType")&&"ArrayBuffer"==e.CDVType){var t=function(e){for(var t=new Uint8Array(e.length),n=0;e.length>n;n++)t[n]=e.charCodeAt(n);return t.buffer},n=function(e){return t(atob(e))};e=n(e.data)}return e}function s(){void 0===l&&(l=-1==navigator.userAgent.indexOf(" 4_")?p.XHR_NO_PAYLOAD:p.IFRAME_NAV);var e,t,n,a,f,_,y=null;"string"!=typeof arguments[0]?(e=arguments[0],t=arguments[1],n=arguments[2],a=arguments[3],f=arguments[4],y="INVALID"):(_=arguments[0].split("."),a=_.pop(),n=_.join("."),f=Array.prototype.splice.call(arguments,1)),(e||t)&&(y=n+d.callbackId++,d.callbacks[y]={success:e,fail:t}),f=i(f);var b=[y,n,a,f];m.push(JSON.stringify(b)),v||1!=m.length||(l!=p.IFRAME_NAV?(c&&4!=c.readyState&&(c=null),c=c||new XMLHttpRequest,c.open("HEAD","/!gap_exec?"+ +new Date,!0),g||(g=/.*\((.*)\)/.exec(navigator.userAgent)[1]),c.setRequestHeader("vc",g),c.setRequestHeader("rc",++h),o()&&c.setRequestHeader("cmds",s.nativeFetchMessages()),c.send(null)):(u=u||r(),u.src="gap://ready"))}var l,u,c,d=e("cordova"),f=(e("cordova/channel"),e("cordova/utils")),p={IFRAME_NAV:0,XHR_NO_PAYLOAD:1,XHR_WITH_PAYLOAD:2,XHR_OPTIONAL_PAYLOAD:3},h=0,g=null,m=[],v=0;s.jsToNativeModes=p,s.setJsToNativeBridgeMode=function(e){u&&(u.parentNode.removeChild(u),u=null),l=e},s.nativeFetchMessages=function(){if(!m.length)return"";var e="["+m.join(",")+"]";return m.length=0,e},s.nativeCallback=function(e,t,n,r){return s.nativeEvalAndFetch(function(){var o=0===t||1===t;n=a(n),d.callbackFromNative(e,o,t,n,r)})},s.nativeEvalAndFetch=function(e){v++;try{return e(),s.nativeFetchMessages()}finally{v--}},n.exports=s}),t("cordova/modulemapper",function(e,n){function r(e,t,n,r){if(!(t in l))throw Error("Module "+t+" does not exist.");i.push(e,t,n),r&&(a[n]=r)}function o(e,t){if(!e)return t;for(var n,r=e.split("."),o=t,i=0;n=r[i];++i)o[n]=o[n]||{};return o[r[i-1]]}var i,a,s=e("cordova/builder"),l=t.moduleMap;n.reset=function(){i=[],a={}},n.clobbers=function(e,t,n){r("c",e,t,n)},n.merges=function(e,t,n){r("m",e,t,n)},n.defaults=function(e,t,n){r("d",e,t,n)},n.mapModules=function(t){var n={};t.CDV_origSymbols=n;for(var r=0,l=i.length;l>r;r+=3){var u=i[r],c=i[r+1],d=i[r+2],f=d.lastIndexOf("."),p=d.substr(0,f),h=d.substr(f+1),g=e(c),m=d in a?"Access made to deprecated symbol: "+d+". "+m:null,v=o(p,t),_=v[h];"m"==u&&_?s.recursiveMerge(_,g):("d"==u&&!_||"d"!=u)&&(_&&(n[d]=_),s.assignOrWrapInDeprecateGetter(v,h,g,m))}},n.getOriginalSymbol=function(e,t){var n=e.CDV_origSymbols;if(n&&t in n)return n[t];for(var r=t.split("."),o=e,i=0;r.length>i;++i)o=o&&o[r[i]];return o},n.loadMatchingModules=function(t){for(var n in l)t.exec(n)&&e(n)},n.reset()}),t("cordova/platform",function(e,t,n){n.exports={id:"ios",initialize:function(){var t=e("cordova/modulemapper");t.loadMatchingModules(/cordova.*\/symbols$/),t.mapModules(window)},clobbers:{MediaError:{path:"cordova/plugin/MediaError"},console:{path:"cordova/plugin/ios/console"},open:{path:"cordova/plugin/InAppBrowser"}},merges:{Contact:{path:"cordova/plugin/ios/Contact"},navigator:{children:{notification:{path:"cordova/plugin/ios/notification"},contacts:{path:"cordova/plugin/ios/contacts"},geolocation:{path:"cordova/plugin/geolocation"}}}}};var r=e("cordova/plugin/logger");r.useConsole(!1)}),t("cordova/plugin/Acceleration",function(e,t,n){var r=function(e,t,n,r){this.x=e,this.y=t,this.z=n,this.timestamp=r||(new Date).getTime()};n.exports=r}),t("cordova/plugin/Camera",function(e,t,n){var r=e("cordova/argscheck"),o=e("cordova/exec"),i=e("cordova/plugin/CameraConstants"),a={};for(var s in i)a[s]=i[s];a.getPicture=function(e,t,n){r.checkArgs("fFO","Camera.getPicture",arguments),n=n||{};var a=r.getValue,s=a(n.quality,50),l=a(n.destinationType,i.DestinationType.FILE_URI),u=a(n.sourceType,i.PictureSourceType.CAMERA),c=a(n.targetWidth,-1),d=a(n.targetHeight,-1),f=a(n.encodingType,i.EncodingType.JPEG),p=a(n.mediaType,i.MediaType.PICTURE),h=!!n.allowEdit,g=!!n.correctOrientation,m=!!n.saveToPhotoAlbum,v=a(n.popoverOptions,null),_=[s,l,u,c,d,f,p,h,g,m,v];o(e,t,"Camera","takePicture",_)},a.cleanup=function(e,t){o(e,t,"Camera","cleanup",[])},n.exports=a}),t("cordova/plugin/CameraConstants",function(e,t,n){n.exports={DestinationType:{DATA_URL:0,FILE_URI:1,NATIVE_URI:2},EncodingType:{JPEG:0,PNG:1},MediaType:{PICTURE:0,VIDEO:1,ALLMEDIA:2},PictureSourceType:{PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},PopoverArrowDirection:{ARROW_UP:1,ARROW_DOWN:2,ARROW_LEFT:4,ARROW_RIGHT:8,ARROW_ANY:15}}}),t("cordova/plugin/CameraPopoverOptions",function(e,t,n){var r=e("cordova/plugin/CameraConstants"),o=function(e,t,n,o,i){this.x=e||0,this.y=t||32,this.width=n||320,this.height=o||480,this.arrowDir=i||r.PopoverArrowDirection.ARROW_ANY};n.exports=o}),t("cordova/plugin/CaptureAudioOptions",function(e,t,n){var r=function(){this.limit=1,this.duration=0,this.mode=null};n.exports=r}),t("cordova/plugin/CaptureError",function(e,t,n){var r=function(e){this.code=e||null};r.CAPTURE_INTERNAL_ERR=0,r.CAPTURE_APPLICATION_BUSY=1,r.CAPTURE_INVALID_ARGUMENT=2,r.CAPTURE_NO_MEDIA_FILES=3,r.CAPTURE_NOT_SUPPORTED=20,n.exports=r}),t("cordova/plugin/CaptureImageOptions",function(e,t,n){var r=function(){this.limit=1,this.mode=null};n.exports=r}),t("cordova/plugin/CaptureVideoOptions",function(e,t,n){var r=function(){this.limit=1,this.duration=0,this.mode=null};n.exports=r}),t("cordova/plugin/CompassError",function(e,t,n){var r=function(e){this.code=void 0!==e?e:null};r.COMPASS_INTERNAL_ERR=0,r.COMPASS_NOT_SUPPORTED=20,n.exports=r}),t("cordova/plugin/CompassHeading",function(e,t,n){var r=function(e,t,n,r){this.magneticHeading=e||null,this.trueHeading=t||null,this.headingAccuracy=n||null,this.timestamp=r||(new Date).getTime()};n.exports=r}),t("cordova/plugin/ConfigurationData",function(e,t,n){function r(){this.type=null,this.height=0,this.width=0}n.exports=r}),t("cordova/plugin/Connection",function(e,t,n){n.exports={UNKNOWN:"unknown",ETHERNET:"ethernet",WIFI:"wifi",CELL_2G:"2g",CELL_3G:"3g",CELL_4G:"4g",CELL:"cellular",NONE:"none"}}),t("cordova/plugin/Contact",function(e,t,n){function r(e){var t=e.birthday;try{e.birthday=new Date(parseFloat(t))}catch(n){console.log("Cordova Contact convertIn error: exception creating date.")}return e}function o(e){var t=e.birthday;if(null!==t){if(!l.isDate(t))try{t=new Date(t)}catch(n){t=null}l.isDate(t)&&(t=t.valueOf()),e.birthday=t}return e}var i=e("cordova/argscheck"),a=e("cordova/exec"),s=e("cordova/plugin/ContactError"),l=e("cordova/utils"),u=function(e,t,n,r,o,i,a,s,l,u,c,d,f,p){this.id=e||null,this.rawId=null,this.displayName=t||null,this.name=n||null,this.nickname=r||null,this.phoneNumbers=o||null,this.emails=i||null,this.addresses=a||null,this.ims=s||null,this.organizations=l||null,this.birthday=u||null,this.note=c||null,this.photos=d||null,this.categories=f||null,this.urls=p||null};u.prototype.remove=function(e,t){i.checkArgs("FF","Contact.remove",arguments);var n=t&&function(e){t(new s(e))};null===this.id?n(s.UNKNOWN_ERROR):a(e,n,"Contacts","remove",[this.id])},u.prototype.clone=function(){function e(e){if(e)for(var t=0;e.length>t;++t)e[t].id=null}var t=l.clone(this);return t.id=null,t.rawId=null,e(t.phoneNumbers),e(t.emails),e(t.addresses),e(t.ims),e(t.organizations),e(t.categories),e(t.photos),e(t.urls),t},u.prototype.save=function(t,n){i.checkArgs("FFO","Contact.save",arguments);var u=n&&function(e){n(new s(e))},c=function(n){if(n){if(t){var o=e("cordova/plugin/contacts").create(n);t(r(o))}}else u(s.UNKNOWN_ERROR)},d=o(l.clone(this));a(c,u,"Contacts","save",[d])},n.exports=u}),t("cordova/plugin/ContactAddress",function(e,t,n){var r=function(e,t,n,r,o,i,a,s){this.id=null,this.pref=e!==void 0?e:!1,this.type=t||null,this.formatted=n||null,this.streetAddress=r||null,this.locality=o||null,this.region=i||null,this.postalCode=a||null,this.country=s||null};n.exports=r}),t("cordova/plugin/ContactError",function(e,t,n){var r=function(e){this.code=e!==void 0?e:null};r.UNKNOWN_ERROR=0,r.INVALID_ARGUMENT_ERROR=1,r.TIMEOUT_ERROR=2,r.PENDING_OPERATION_ERROR=3,r.IO_ERROR=4,r.NOT_SUPPORTED_ERROR=5,r.PERMISSION_DENIED_ERROR=20,n.exports=r}),t("cordova/plugin/ContactField",function(e,t,n){var r=function(e,t,n){this.id=null,this.type=e&&""+e||null,this.value=t&&""+t||null,this.pref=n!==void 0?n:!1};n.exports=r}),t("cordova/plugin/ContactFindOptions",function(e,t,n){var r=function(e,t){this.filter=e||"",this.multiple=t!==void 0?t:!1};n.exports=r}),t("cordova/plugin/ContactName",function(e,t,n){var r=function(e,t,n,r,o,i){this.formatted=e||null,this.familyName=t||null,this.givenName=n||null,this.middleName=r||null,this.honorificPrefix=o||null,this.honorificSuffix=i||null};n.exports=r}),t("cordova/plugin/ContactOrganization",function(e,t,n){var r=function(e,t,n,r,o){this.id=null,this.pref=e!==void 0?e:!1,this.type=t||null,this.name=n||null,this.department=r||null,this.title=o||null};n.exports=r}),t("cordova/plugin/Coordinates",function(e,t,n){var r=function(e,t,n,r,o,i,a){this.latitude=e,this.longitude=t,this.accuracy=r,this.altitude=void 0!==n?n:null,this.heading=void 0!==o?o:null,this.speed=void 0!==i?i:null,(0===this.speed||null===this.speed)&&(this.heading=0/0),this.altitudeAccuracy=void 0!==a?a:null};n.exports=r}),t("cordova/plugin/DirectoryEntry",function(e,t,n){var r=e("cordova/argscheck"),o=e("cordova/utils"),i=e("cordova/exec"),a=e("cordova/plugin/Entry"),s=e("cordova/plugin/FileError"),l=e("cordova/plugin/DirectoryReader"),u=function(e,t){u.__super__.constructor.call(this,!1,!0,e,t)};o.extend(u,a),u.prototype.createReader=function(){return new l(this.fullPath)},u.prototype.getDirectory=function(e,t,n,o){r.checkArgs("sOFF","DirectoryEntry.getDirectory",arguments);var a=n&&function(e){var t=new u(e.name,e.fullPath);n(t)},l=o&&function(e){o(new s(e))};i(a,l,"File","getDirectory",[this.fullPath,e,t])},u.prototype.removeRecursively=function(e,t){r.checkArgs("FF","DirectoryEntry.removeRecursively",arguments);var n=t&&function(e){t(new s(e))};i(e,n,"File","removeRecursively",[this.fullPath])},u.prototype.getFile=function(t,n,o,a){r.checkArgs("sOFF","DirectoryEntry.getFile",arguments);var l=o&&function(t){var n=e("cordova/plugin/FileEntry"),r=new n(t.name,t.fullPath);o(r)},u=a&&function(e){a(new s(e))};i(l,u,"File","getFile",[this.fullPath,t,n])},n.exports=u}),t("cordova/plugin/DirectoryReader",function(e,t,n){function r(e){this.path=e||null}var o=e("cordova/exec"),i=e("cordova/plugin/FileError");r.prototype.readEntries=function(t,n){var r="function"!=typeof t?null:function(n){for(var r=[],o=0;n.length>o;o++){var i=null;n[o].isDirectory?i=new(e("cordova/plugin/DirectoryEntry")):n[o].isFile&&(i=new(e("cordova/plugin/FileEntry"))),i.isDirectory=n[o].isDirectory,i.isFile=n[o].isFile,i.name=n[o].name,i.fullPath=n[o].fullPath,r.push(i)}t(r)},a="function"!=typeof n?null:function(e){n(new i(e))};o(r,a,"File","readEntries",[this.path])},n.exports=r}),t("cordova/plugin/Entry",function(e,t,n){function r(e,t,n,r,o){this.isFile=!!e,this.isDirectory=!!t,this.name=n||"",this.fullPath=r||"",this.filesystem=o||null}var o=e("cordova/argscheck"),i=e("cordova/exec"),a=e("cordova/plugin/FileError"),s=e("cordova/plugin/Metadata");r.prototype.getMetadata=function(e,t){o.checkArgs("FF","Entry.getMetadata",arguments);var n=e&&function(t){var n=new s(t);e(n)},r=t&&function(e){t(new a(e))};i(n,r,"File","getMetadata",[this.fullPath])},r.prototype.setMetadata=function(e,t,n){o.checkArgs("FFO","Entry.setMetadata",arguments),i(e,t,"File","setMetadata",[this.fullPath,n])},r.prototype.moveTo=function(t,n,r,s){o.checkArgs("oSFF","Entry.moveTo",arguments);var l=s&&function(e){s(new a(e))},u=this.fullPath,c=n||this.name,d=function(t){if(t){if(r){var n=t.isDirectory?new(e("cordova/plugin/DirectoryEntry"))(t.name,t.fullPath):new(e("cordova/plugin/FileEntry"))(t.name,t.fullPath);r(n)}}else l&&l(a.NOT_FOUND_ERR)};i(d,l,"File","moveTo",[u,t.fullPath,c])},r.prototype.copyTo=function(t,n,r,s){o.checkArgs("oSFF","Entry.copyTo",arguments);var l=s&&function(e){s(new a(e))},u=this.fullPath,c=n||this.name,d=function(t){if(t){if(r){var n=t.isDirectory?new(e("cordova/plugin/DirectoryEntry"))(t.name,t.fullPath):new(e("cordova/plugin/FileEntry"))(t.name,t.fullPath);r(n)}}else l&&l(a.NOT_FOUND_ERR)};i(d,l,"File","copyTo",[u,t.fullPath,c])},r.prototype.toURL=function(){return this.fullPath},r.prototype.toURI=function(){return console.log("DEPRECATED: Update your code to use 'toURL'"),this.toURL()},r.prototype.remove=function(e,t){o.checkArgs("FF","Entry.remove",arguments);var n=t&&function(e){t(new a(e))};i(e,n,"File","remove",[this.fullPath])},r.prototype.getParent=function(t,n){o.checkArgs("FF","Entry.getParent",arguments);var r=t&&function(n){var r=e("cordova/plugin/DirectoryEntry"),o=new r(n.name,n.fullPath);t(o)},s=n&&function(e){n(new a(e))};i(r,s,"File","getParent",[this.fullPath])},n.exports=r}),t("cordova/plugin/File",function(e,t,n){var r=function(e,t,n,r,o){this.name=e||"",this.fullPath=t||null,this.type=n||null,this.lastModifiedDate=r||null,this.size=o||0,this.start=0,this.end=this.size};r.prototype.slice=function(e,t){var n=this.end-this.start,o=0,i=n;arguments.length&&(o=0>e?Math.max(n+e,0):Math.min(n,e)),arguments.length>=2&&(i=0>t?Math.max(n+t,0):Math.min(t,n));var a=new r(this.name,this.fullPath,this.type,this.lastModifiedData,this.size);return a.start=this.start+o,a.end=this.start+i,a},n.exports=r}),t("cordova/plugin/FileEntry",function(e,t,n){var r=e("cordova/utils"),o=e("cordova/exec"),i=e("cordova/plugin/Entry"),a=e("cordova/plugin/FileWriter"),s=e("cordova/plugin/File"),l=e("cordova/plugin/FileError"),u=function(e,t){u.__super__.constructor.apply(this,[!0,!1,e,t])};r.extend(u,i),u.prototype.createWriter=function(e,t){this.file(function(n){var r=new a(n);null===r.fileName||""===r.fileName?t&&t(new l(l.INVALID_STATE_ERR)):e&&e(r)},t)},u.prototype.file=function(e,t){var n=e&&function(t){var n=new s(t.name,t.fullPath,t.type,t.lastModifiedDate,t.size);e(n)},r=t&&function(e){t(new l(e))};o(n,r,"File","getFileMetadata",[this.fullPath])},n.exports=u}),t("cordova/plugin/FileError",function(e,t,n){function r(e){this.code=e||null}r.NOT_FOUND_ERR=1,r.SECURITY_ERR=2,r.ABORT_ERR=3,r.NOT_READABLE_ERR=4,r.ENCODING_ERR=5,r.NO_MODIFICATION_ALLOWED_ERR=6,r.INVALID_STATE_ERR=7,r.SYNTAX_ERR=8,r.INVALID_MODIFICATION_ERR=9,r.QUOTA_EXCEEDED_ERR=10,r.TYPE_MISMATCH_ERR=11,r.PATH_EXISTS_ERR=12,n.exports=r}),t("cordova/plugin/FileReader",function(e,t,n){function r(e){s.defineGetterSetter(d.prototype,e,function(){return this._realReader[e]||null},function(t){this._realReader[e]=t})}function o(e,t){if(e.readyState==d.LOADING)throw new l(l.INVALID_STATE_ERR);if(e._result=null,e._error=null,e._readyState=d.LOADING,"string"==typeof t)console.warning("Using a string argument with FileReader.readAs functions is deprecated."),e._fileName=t;else{if("string"!=typeof t.fullPath)return e._fileName="",!0;e._fileName=t.fullPath}e.onloadstart&&e.onloadstart(new u("loadstart",{target:e}))}var i=e("cordova/exec"),a=e("cordova/modulemapper"),s=e("cordova/utils"),l=(e("cordova/plugin/File"),e("cordova/plugin/FileError")),u=e("cordova/plugin/ProgressEvent"),c=a.getOriginalSymbol(this,"FileReader"),d=function(){this._readyState=0,this._error=null,this._result=null,this._fileName="",this._realReader=c?new c:{}};d.EMPTY=0,d.LOADING=1,d.DONE=2,s.defineGetter(d.prototype,"readyState",function(){return this._fileName?this._readyState:this._realReader.readyState}),s.defineGetter(d.prototype,"error",function(){return this._fileName?this._error:this._realReader.error}),s.defineGetter(d.prototype,"result",function(){return this._fileName?this._result:this._realReader.result}),r("onloadstart"),r("onprogress"),r("onload"),r("onerror"),r("onloadend"),r("onabort"),d.prototype.abort=function(){return c&&!this._fileName?this._realReader.abort():(this._result=null,this._readyState!=d.DONE&&this._readyState!=d.EMPTY&&(this._readyState=d.DONE,"function"==typeof this.onabort&&this.onabort(new u("abort",{target:this})),"function"==typeof this.onloadend&&this.onloadend(new u("loadend",{target:this}))),void 0)},d.prototype.readAsText=function(e,t){if(o(this,e))return this._realReader.readAsText(e,t);
var n=t?t:"UTF-8",r=this,a=[this._fileName,n];e.end<e.size?a.push(e.start,e.end):e.start>0&&a.push(e.start),i(function(e){r._readyState!==d.DONE&&(r._result=e,"function"==typeof r.onload&&r.onload(new u("load",{target:r})),r._readyState=d.DONE,"function"==typeof r.onloadend&&r.onloadend(new u("loadend",{target:r})))},function(e){r._readyState!==d.DONE&&(r._readyState=d.DONE,r._result=null,r._error=new l(e),"function"==typeof r.onerror&&r.onerror(new u("error",{target:r})),"function"==typeof r.onloadend&&r.onloadend(new u("loadend",{target:r})))},"File","readAsText",a)},d.prototype.readAsDataURL=function(e){if(o(this,e))return this._realReader.readAsDataURL(e);var t=this,n=[this._fileName];e.end<e.size?n.push(e.start,e.end):e.start>0&&n.push(e.start),i(function(e){t._readyState!==d.DONE&&(t._readyState=d.DONE,t._result=e,"function"==typeof t.onload&&t.onload(new u("load",{target:t})),"function"==typeof t.onloadend&&t.onloadend(new u("loadend",{target:t})))},function(e){t._readyState!==d.DONE&&(t._readyState=d.DONE,t._result=null,t._error=new l(e),"function"==typeof t.onerror&&t.onerror(new u("error",{target:t})),"function"==typeof t.onloadend&&t.onloadend(new u("loadend",{target:t})))},"File","readAsDataURL",n)},d.prototype.readAsBinaryString=function(e){return o(this,e)?this._realReader.readAsBinaryString(e):(console.log('method "readAsBinaryString" is not supported at this time.'),this.abort(),void 0)},d.prototype.readAsArrayBuffer=function(e){return o(this,e)?this._realReader.readAsArrayBuffer(e):(console.log("This method is not supported at this time."),this.abort(),void 0)},n.exports=d}),t("cordova/plugin/FileSystem",function(e,t,n){var r=e("cordova/plugin/DirectoryEntry"),o=function(e,t){this.name=e||null,t&&(this.root=new r(t.name,t.fullPath))};n.exports=o}),t("cordova/plugin/FileTransfer",function(e,t,n){function r(e){var t=new s;return t.lengthComputable=e.lengthComputable,t.loaded=e.loaded,t.total=e.total,t}var o=e("cordova/argscheck"),i=e("cordova/exec"),a=e("cordova/plugin/FileTransferError"),s=e("cordova/plugin/ProgressEvent"),l=0,u=function(){this._id=++l,this.onprogress=null};u.prototype.upload=function(e,t,n,s,l,u){o.checkArgs("ssFFO*","FileTransfer.upload",arguments);var c=null,d=null,f=null,p=null,h=!0,g=null;l&&(c=l.fileKey,d=l.fileName,f=l.mimeType,g=l.headers,(null!==l.chunkedMode||l.chunkedMode!==void 0)&&(h=l.chunkedMode),p=l.params?l.params:{});var m=s&&function(e){var t=new a(e.code,e.source,e.target,e.http_status);s(t)},v=this,_=function(e){e.lengthComputable!==void 0?v.onprogress&&v.onprogress(r(e)):n&&n(e)};i(_,m,"FileTransfer","upload",[e,t,c,d,f,p,u,h,g,this._id])},u.prototype.download=function(t,n,s,l,u){o.checkArgs("ssFF*","FileTransfer.download",arguments);var c=this,d=function(t){if(t.lengthComputable!==void 0){if(c.onprogress)return c.onprogress(r(t))}else if(s){var n=null;t.isDirectory?n=new(e("cordova/plugin/DirectoryEntry")):t.isFile&&(n=new(e("cordova/plugin/FileEntry"))),n.isDirectory=t.isDirectory,n.isFile=t.isFile,n.name=t.name,n.fullPath=t.fullPath,s(n)}},f=l&&function(e){var t=new a(e.code,e.source,e.target,e.http_status);l(t)};i(d,f,"FileTransfer","download",[t,n,u,this._id])},u.prototype.abort=function(e,t){i(e,t,"FileTransfer","abort",[this._id])},n.exports=u}),t("cordova/plugin/FileTransferError",function(e,t,n){var r=function(e,t,n,r){this.code=e||null,this.source=t||null,this.target=n||null,this.http_status=r||null};r.FILE_NOT_FOUND_ERR=1,r.INVALID_URL_ERR=2,r.CONNECTION_ERR=3,r.ABORT_ERR=4,n.exports=r}),t("cordova/plugin/FileUploadOptions",function(e,t,n){var r=function(e,t,n,r,o){this.fileKey=e||null,this.fileName=t||null,this.mimeType=n||null,this.params=r||null,this.headers=o||null};n.exports=r}),t("cordova/plugin/FileUploadResult",function(e,t,n){var r=function(){this.bytesSent=0,this.responseCode=null,this.response=null};n.exports=r}),t("cordova/plugin/FileWriter",function(e,t,n){var r=e("cordova/exec"),o=e("cordova/plugin/FileError"),i=e("cordova/plugin/ProgressEvent"),a=function(e){this.fileName="",this.length=0,e&&(this.fileName=e.fullPath||e,this.length=e.size||0),this.position=0,this.readyState=0,this.result=null,this.error=null,this.onwritestart=null,this.onprogress=null,this.onwrite=null,this.onwriteend=null,this.onabort=null,this.onerror=null};a.INIT=0,a.WRITING=1,a.DONE=2,a.prototype.abort=function(){if(this.readyState===a.DONE||this.readyState===a.INIT)throw new o(o.INVALID_STATE_ERR);this.error=new o(o.ABORT_ERR),this.readyState=a.DONE,"function"==typeof this.onabort&&this.onabort(new i("abort",{target:this})),"function"==typeof this.onwriteend&&this.onwriteend(new i("writeend",{target:this}))},a.prototype.write=function(e){if(this.readyState===a.WRITING)throw new o(o.INVALID_STATE_ERR);this.readyState=a.WRITING;var t=this;"function"==typeof t.onwritestart&&t.onwritestart(new i("writestart",{target:t})),r(function(e){t.readyState!==a.DONE&&(t.position+=e,t.length=t.position,t.readyState=a.DONE,"function"==typeof t.onwrite&&t.onwrite(new i("write",{target:t})),"function"==typeof t.onwriteend&&t.onwriteend(new i("writeend",{target:t})))},function(e){t.readyState!==a.DONE&&(t.readyState=a.DONE,t.error=new o(e),"function"==typeof t.onerror&&t.onerror(new i("error",{target:t})),"function"==typeof t.onwriteend&&t.onwriteend(new i("writeend",{target:t})))},"File","write",[this.fileName,e,this.position])},a.prototype.seek=function(e){if(this.readyState===a.WRITING)throw new o(o.INVALID_STATE_ERR);(e||0===e)&&(this.position=0>e?Math.max(e+this.length,0):e>this.length?this.length:e)},a.prototype.truncate=function(e){if(this.readyState===a.WRITING)throw new o(o.INVALID_STATE_ERR);this.readyState=a.WRITING;var t=this;"function"==typeof t.onwritestart&&t.onwritestart(new i("writestart",{target:this})),r(function(e){t.readyState!==a.DONE&&(t.readyState=a.DONE,t.length=e,t.position=Math.min(t.position,e),"function"==typeof t.onwrite&&t.onwrite(new i("write",{target:t})),"function"==typeof t.onwriteend&&t.onwriteend(new i("writeend",{target:t})))},function(e){t.readyState!==a.DONE&&(t.readyState=a.DONE,t.error=new o(e),"function"==typeof t.onerror&&t.onerror(new i("error",{target:t})),"function"==typeof t.onwriteend&&t.onwriteend(new i("writeend",{target:t})))},"File","truncate",[this.fileName,e])},n.exports=a}),t("cordova/plugin/Flags",function(e,t,n){function r(e,t){this.create=e||!1,this.exclusive=t||!1}n.exports=r}),t("cordova/plugin/GlobalizationError",function(e,t,n){var r=function(e,t){this.code=e||null,this.message=t||""};r.UNKNOWN_ERROR=0,r.FORMATTING_ERROR=1,r.PARSING_ERROR=2,r.PATTERN_ERROR=3,n.exports=r}),t("cordova/plugin/InAppBrowser",function(e,t,n){function r(){this.channels={loadstart:i.create("loadstart"),loadstop:i.create("loadstop"),exit:i.create("exit")}}var o=e("cordova/exec"),i=e("cordova/channel");r.prototype={_eventHandler:function(e){e.type in this.channels&&this.channels[e.type].fire(e)},close:function(){o(null,null,"InAppBrowser","close",[])},addEventListener:function(e,t){e in this.channels&&this.channels[e].subscribe(t)},removeEventListener:function(e,t){e in this.channels&&this.channels[e].unsubscribe(t)}},n.exports=function(e,t,n){var i=new r,a=function(e){i._eventHandler(e)};return o(a,null,"InAppBrowser","open",[e,t,n]),i},n.exports._orig=window.open}),t("cordova/plugin/LocalFileSystem",function(e,t,n){e("cordova/exec");var r=function(){};r.TEMPORARY=0,r.PERSISTENT=1,n.exports=r}),t("cordova/plugin/Media",function(e,t,n){var r=e("cordova/argscheck"),o=e("cordova/utils"),i=e("cordova/exec"),a={},s=function(e,t,n,s){r.checkArgs("SFFF","Media",arguments),this.id=o.createUUID(),a[this.id]=this,this.src=e,this.successCallback=t,this.errorCallback=n,this.statusCallback=s,this._duration=-1,this._position=-1,i(null,this.errorCallback,"Media","create",[this.id,this.src])};s.MEDIA_STATE=1,s.MEDIA_DURATION=2,s.MEDIA_POSITION=3,s.MEDIA_ERROR=9,s.MEDIA_NONE=0,s.MEDIA_STARTING=1,s.MEDIA_RUNNING=2,s.MEDIA_PAUSED=3,s.MEDIA_STOPPED=4,s.MEDIA_MSG=["None","Starting","Running","Paused","Stopped"],s.get=function(e){return a[e]},s.prototype.play=function(e){i(null,null,"Media","startPlayingAudio",[this.id,this.src,e])},s.prototype.stop=function(){var e=this;i(function(){e._position=0},this.errorCallback,"Media","stopPlayingAudio",[this.id])},s.prototype.seekTo=function(e){var t=this;i(function(e){t._position=e},this.errorCallback,"Media","seekToAudio",[this.id,e])},s.prototype.pause=function(){i(null,this.errorCallback,"Media","pausePlayingAudio",[this.id])},s.prototype.getDuration=function(){return this._duration},s.prototype.getCurrentPosition=function(e,t){var n=this;i(function(t){n._position=t,e(t)},t,"Media","getCurrentPositionAudio",[this.id])},s.prototype.startRecord=function(){i(null,this.errorCallback,"Media","startRecordingAudio",[this.id,this.src])},s.prototype.stopRecord=function(){i(null,this.errorCallback,"Media","stopRecordingAudio",[this.id])},s.prototype.release=function(){i(null,this.errorCallback,"Media","release",[this.id])},s.prototype.setVolume=function(e){i(null,null,"Media","setVolume",[this.id,e])},s.onStatus=function(e,t,n){var r=a[e];if(r)switch(t){case s.MEDIA_STATE:r.statusCallback&&r.statusCallback(n),n==s.MEDIA_STOPPED&&r.successCallback&&r.successCallback();break;case s.MEDIA_DURATION:r._duration=n;break;case s.MEDIA_ERROR:r.errorCallback&&r.errorCallback(n);break;case s.MEDIA_POSITION:r._position=Number(n);break;default:console.error&&console.error("Unhandled Media.onStatus :: "+t)}else console.error&&console.error("Received Media.onStatus callback for unknown media :: "+e)},n.exports=s}),t("cordova/plugin/MediaError",function(e,t,n){var r=window.MediaError;r||(window.MediaError=r=function(e,t){this.code=e!==void 0?e:null,this.message=t||""}),r.MEDIA_ERR_NONE_ACTIVE=r.MEDIA_ERR_NONE_ACTIVE||0,r.MEDIA_ERR_ABORTED=r.MEDIA_ERR_ABORTED||1,r.MEDIA_ERR_NETWORK=r.MEDIA_ERR_NETWORK||2,r.MEDIA_ERR_DECODE=r.MEDIA_ERR_DECODE||3,r.MEDIA_ERR_NONE_SUPPORTED=r.MEDIA_ERR_NONE_SUPPORTED||4,r.MEDIA_ERR_SRC_NOT_SUPPORTED=r.MEDIA_ERR_SRC_NOT_SUPPORTED||4,n.exports=r}),t("cordova/plugin/MediaFile",function(e,t,n){var r=e("cordova/utils"),o=e("cordova/exec"),i=e("cordova/plugin/File"),a=e("cordova/plugin/CaptureError"),s=function(){s.__super__.constructor.apply(this,arguments)};r.extend(s,i),s.prototype.getFormatData=function(e,t){this.fullPath===void 0||null===this.fullPath?t(new a(a.CAPTURE_INVALID_ARGUMENT)):o(e,t,"Capture","getFormatData",[this.fullPath,this.type])},n.exports=s}),t("cordova/plugin/MediaFileData",function(e,t,n){var r=function(e,t,n,r,o){this.codecs=e||null,this.bitrate=t||0,this.height=n||0,this.width=r||0,this.duration=o||0};n.exports=r}),t("cordova/plugin/Metadata",function(e,t,n){var r=function(e){this.modificationTime=e!==void 0?new Date(e):null};n.exports=r}),t("cordova/plugin/Position",function(e,t,n){var r=e("cordova/plugin/Coordinates"),o=function(e,t){this.coords=e?new r(e.latitude,e.longitude,e.altitude,e.accuracy,e.heading,e.velocity,e.altitudeAccuracy):new r,this.timestamp=void 0!==t?t:new Date};n.exports=o}),t("cordova/plugin/PositionError",function(e,t,n){var r=function(e,t){this.code=e||null,this.message=t||""};r.PERMISSION_DENIED=1,r.POSITION_UNAVAILABLE=2,r.TIMEOUT=3,n.exports=r}),t("cordova/plugin/ProgressEvent",function(e,t,n){var r=function(){return function(e,t){this.type=e,this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.lengthComputable=!1,this.loaded=t&&t.loaded?t.loaded:0,this.total=t&&t.total?t.total:0,this.target=t&&t.target?t.target:null}}();n.exports=r}),t("cordova/plugin/accelerometer",function(e,t,n){function r(){u(function(e){var t=p.slice(0);h=new c(e.x,e.y,e.z,e.timestamp);for(var n=0,r=t.length;r>n;n++)t[n].win(h)},function(e){for(var t=p.slice(0),n=0,r=t.length;r>n;n++)t[n].fail(e)},"Accelerometer","start",[]),d=!0}function o(){u(null,null,"Accelerometer","stop",[]),d=!1}function i(e,t){return{win:e,fail:t}}function a(e){var t=p.indexOf(e);t>-1&&(p.splice(t,1),0===p.length&&o())}var s=e("cordova/argscheck"),l=e("cordova/utils"),u=e("cordova/exec"),c=e("cordova/plugin/Acceleration"),d=!1,f={},p=[],h=null,g={getCurrentAcceleration:function(e,t){s.checkArgs("fFO","accelerometer.getCurrentAcceleration",arguments);var n,o=function(t){a(n),e(t)},l=function(e){a(n),t&&t(e)};n=i(o,l),p.push(n),d||r()},watchAcceleration:function(e,t,n){s.checkArgs("fFO","accelerometer.watchAcceleration",arguments);var o=n&&n.frequency&&"number"==typeof n.frequency?n.frequency:1e4,u=l.createUUID(),c=i(function(){},function(e){a(c),t&&t(e)});return p.push(c),f[u]={timer:window.setInterval(function(){h&&e(h)},o),listeners:c},d?h&&e(h):r(),u},clearWatch:function(e){e&&f[e]&&(window.clearInterval(f[e].timer),a(f[e].listeners),delete f[e])}};n.exports=g}),t("cordova/plugin/battery",function(e,t,n){function r(){return s.channels.batterystatus.numHandlers+s.channels.batterylow.numHandlers+s.channels.batterycritical.numHandlers}var o=e("cordova"),i=e("cordova/exec"),a=function(){this._level=null,this._isPlugged=null,this.channels={batterystatus:o.addWindowEventHandler("batterystatus"),batterylow:o.addWindowEventHandler("batterylow"),batterycritical:o.addWindowEventHandler("batterycritical")};for(var e in this.channels)this.channels[e].onHasSubscribersChange=a.onHasSubscribersChange};a.onHasSubscribersChange=function(){1===this.numHandlers&&1===r()?i(s._status,s._error,"Battery","start",[]):0===r()&&i(null,null,"Battery","stop",[])},a.prototype._status=function(e){if(e){var t=s,n=e.level;(t._level!==n||t._isPlugged!==e.isPlugged)&&(o.fireWindowEvent("batterystatus",e),(20===n||5===n)&&(20===n?o.fireWindowEvent("batterylow",e):o.fireWindowEvent("batterycritical",e))),t._level=n,t._isPlugged=e.isPlugged}},a.prototype._error=function(e){console.log("Error initializing Battery: "+e)};var s=new a;n.exports=s}),t("cordova/plugin/capture",function(e,t,n){function r(e,t,n,r){var o=function(e){var n,r=[];for(n=0;e.length>n;n++){var o=new a;o.name=e[n].name,o.fullPath=e[n].fullPath,o.type=e[n].type,o.lastModifiedDate=e[n].lastModifiedDate,o.size=e[n].size,r.push(o)}t(r)};i(o,n,"Capture",e,[r])}function o(){this.supportedAudioModes=[],this.supportedImageModes=[],this.supportedVideoModes=[]}var i=e("cordova/exec"),a=e("cordova/plugin/MediaFile");o.prototype.captureAudio=function(e,t,n){r("captureAudio",e,t,n)},o.prototype.captureImage=function(e,t,n){r("captureImage",e,t,n)},o.prototype.captureVideo=function(e,t,n){r("captureVideo",e,t,n)},n.exports=new o}),t("cordova/plugin/compass",function(e,t,n){var r=e("cordova/argscheck"),o=e("cordova/exec"),i=e("cordova/utils"),a=e("cordova/plugin/CompassHeading"),s=e("cordova/plugin/CompassError"),l={},u={getCurrentHeading:function(e,t,n){r.checkArgs("fFO","compass.getCurrentHeading",arguments);var i=function(t){var n=new a(t.magneticHeading,t.trueHeading,t.headingAccuracy,t.timestamp);e(n)},l=t&&function(e){var n=new s(e);t(n)};o(i,l,"Compass","getHeading",[n])},watchHeading:function(e,t,n){r.checkArgs("fFO","compass.watchHeading",arguments);var o=void 0!==n&&void 0!==n.frequency?n.frequency:100,a=void 0!==n&&void 0!==n.filter?n.filter:0,s=i.createUUID();return a>0?(l[s]="iOS",u.getCurrentHeading(e,t,n)):l[s]=window.setInterval(function(){u.getCurrentHeading(e,t)},o),s},clearWatch:function(e){e&&l[e]&&("iOS"!=l[e]?clearInterval(l[e]):o(null,null,"Compass","stopHeading",[]),delete l[e])}};n.exports=u}),t("cordova/plugin/console-via-logger",function(e,t,n){function r(){}function o(e,t){return function(){var n=[].slice.call(arguments);try{e.apply(l,n)}catch(r){}try{t.apply(s,n)}catch(r){}}}var i=e("cordova/plugin/logger"),a=e("cordova/utils"),s=n.exports,l=window.console,u=!1,c={};s.useLogger=function(e){if(arguments.length&&(u=!!e),u&&i.useConsole())throw Error("console and logger are too intertwingly");return u},s.log=function(){i.useConsole()||i.log.apply(i,[].slice.call(arguments))},s.error=function(){i.useConsole()||i.error.apply(i,[].slice.call(arguments))},s.warn=function(){i.useConsole()||i.warn.apply(i,[].slice.call(arguments))},s.info=function(){i.useConsole()||i.info.apply(i,[].slice.call(arguments))},s.debug=function(){i.useConsole()||i.debug.apply(i,[].slice.call(arguments))},s.assert=function(e){if(!e){var t=a.vformat(arguments[1],[].slice.call(arguments,2));s.log("ASSERT: "+t)}},s.clear=function(){},s.dir=function(e){s.log("%o",e)},s.dirxml=function(e){s.log(e.innerHTML)},s.trace=r,s.group=s.log,s.groupCollapsed=s.log,s.groupEnd=r,s.time=function(e){c[e]=(new Date).valueOf()},s.timeEnd=function(e){var t=c[e];if(!t)return s.warn("unknown timer: "+e),void 0;var n=(new Date).valueOf()-t;s.log(e+": "+n+"ms")},s.timeStamp=r,s.profile=r,s.profileEnd=r,s.count=r,s.exception=s.log,s.table=function(e){s.log("%o",e)};for(var d in s)"function"==typeof l[d]&&(s[d]=o(l[d],s[d]))}),t("cordova/plugin/contacts",function(e,t,n){var r=e("cordova/argscheck"),o=e("cordova/exec"),i=e("cordova/plugin/ContactError"),a=(e("cordova/utils"),e("cordova/plugin/Contact")),s={find:function(e,t,n,a){if(r.checkArgs("afFO","contacts.find",arguments),e.length){var l=function(e){for(var n=[],r=0,o=e.length;o>r;r++)n.push(s.create(e[r]));t(n)};o(l,n,"Contacts","search",[e,a])}else n&&n(new i(i.INVALID_ARGUMENT_ERROR))},create:function(e){r.checkArgs("O","contacts.create",arguments);var t=new a;for(var n in e)t[n]!==void 0&&e.hasOwnProperty(n)&&(t[n]=e[n]);return t}};n.exports=s}),t("cordova/plugin/device",function(e,t,n){function r(){this.available=!1,this.platform=null,this.version=null,this.name=null,this.uuid=null,this.cordova=null,this.model=null;var e=this;i.onCordovaReady.subscribe(function(){e.getInfo(function(t){e.available=!0,e.platform=t.platform,e.version=t.version,e.name=t.name,e.uuid=t.uuid,e.cordova=t.cordova,e.model=t.model,i.onCordovaInfoReady.fire()},function(t){e.available=!1,a.alert("[ERROR] Error initializing Cordova: "+t)})})}var o=e("cordova/argscheck"),i=e("cordova/channel"),a=e("cordova/utils"),s=e("cordova/exec");i.waitForInitialization("onCordovaInfoReady"),r.prototype.getInfo=function(e,t){o.checkArgs("fF","Device.getInfo",arguments),s(e,t,"Device","getDeviceInfo",[])},n.exports=new r}),t("cordova/plugin/echo",function(e,t,n){var r=e("cordova/exec");n.exports=function(e,t,n,o){var i=o?"echoAsync":"echo";o||n.constructor!=ArrayBuffer||(i="echoArrayBuffer"),r(e,t,"Echo",i,[n])}}),t("cordova/plugin/file/symbols",function(e){var t=e("cordova/modulemapper"),n=e("cordova/plugin/file/symbolshelper");n(t.clobbers),t.merges("cordova/plugin/ios/Entry","Entry")}),t("cordova/plugin/file/symbolshelper",function(e,t,n){n.exports=function(e){e("cordova/plugin/DirectoryEntry","DirectoryEntry"),e("cordova/plugin/DirectoryReader","DirectoryReader"),e("cordova/plugin/Entry","Entry"),e("cordova/plugin/File","File"),e("cordova/plugin/FileEntry","FileEntry"),e("cordova/plugin/FileError","FileError"),e("cordova/plugin/FileReader","FileReader"),e("cordova/plugin/FileSystem","FileSystem"),e("cordova/plugin/FileTransfer","FileTransfer"),e("cordova/plugin/FileTransferError","FileTransferError"),e("cordova/plugin/FileUploadOptions","FileUploadOptions"),e("cordova/plugin/FileUploadResult","FileUploadResult"),e("cordova/plugin/FileWriter","FileWriter"),e("cordova/plugin/Flags","Flags"),e("cordova/plugin/LocalFileSystem","LocalFileSystem"),e("cordova/plugin/Metadata","Metadata"),e("cordova/plugin/requestFileSystem","requestFileSystem"),e("cordova/plugin/resolveLocalFileSystemURI","resolveLocalFileSystemURI")}}),t("cordova/plugin/geolocation",function(e,t,n){function r(e){var t={maximumAge:0,enableHighAccuracy:!1,timeout:1/0};return e&&(void 0!==e.maximumAge&&!isNaN(e.maximumAge)&&e.maximumAge>0&&(t.maximumAge=e.maximumAge),void 0!==e.enableHighAccuracy&&(t.enableHighAccuracy=e.enableHighAccuracy),void 0===e.timeout||isNaN(e.timeout)||(t.timeout=0>e.timeout?0:e.timeout)),t}function o(e,t){var n=setTimeout(function(){clearTimeout(n),n=null,e({code:l.TIMEOUT,message:"Position retrieval timed out."})},t);return n}var i=e("cordova/argscheck"),a=e("cordova/utils"),s=e("cordova/exec"),l=e("cordova/plugin/PositionError"),u=e("cordova/plugin/Position"),c={},d={lastPosition:null,getCurrentPosition:function(e,t,n){i.checkArgs("fFO","geolocation.getCurrentPosition",arguments),n=r(n);var a={timer:null},c=function(t){if(clearTimeout(a.timer),a.timer){var n=new u({latitude:t.latitude,longitude:t.longitude,altitude:t.altitude,accuracy:t.accuracy,heading:t.heading,velocity:t.velocity,altitudeAccuracy:t.altitudeAccuracy},void 0===t.timestamp?new Date:t.timestamp instanceof Date?t.timestamp:new Date(t.timestamp));d.lastPosition=n,e(n)}},f=function(e){clearTimeout(a.timer),a.timer=null;var n=new l(e.code,e.message);t&&t(n)};return d.lastPosition&&n.maximumAge&&(new Date).getTime()-d.lastPosition.timestamp.getTime()<=n.maximumAge?e(d.lastPosition):0===n.timeout?f({code:l.TIMEOUT,message:"timeout value in PositionOptions set to 0 and no cached Position object available, or cached Position object's age exceeds provided PositionOptions' maximumAge parameter."}):(a.timer=1/0!==n.timeout?o(f,n.timeout):!0,s(c,f,"Geolocation","getLocation",[n.enableHighAccuracy,n.maximumAge])),a},watchPosition:function(e,t,n){i.checkArgs("fFO","geolocation.getCurrentPosition",arguments),n=r(n);var f=a.createUUID();c[f]=d.getCurrentPosition(e,t,n);var p=function(e){clearTimeout(c[f].timer);var n=new l(e.code,e.message);t&&t(n)},h=function(t){clearTimeout(c[f].timer),1/0!==n.timeout&&(c[f].timer=o(p,n.timeout));var r=new u({latitude:t.latitude,longitude:t.longitude,altitude:t.altitude,accuracy:t.accuracy,heading:t.heading,velocity:t.velocity,altitudeAccuracy:t.altitudeAccuracy},void 0===t.timestamp?new Date:t.timestamp instanceof Date?t.timestamp:new Date(t.timestamp));d.lastPosition=r,e(r)};return s(h,p,"Geolocation","addWatch",[f,n.enableHighAccuracy]),f},clearWatch:function(e){e&&void 0!==c[e]&&(clearTimeout(c[e].timer),c[e].timer=!1,s(null,null,"Geolocation","clearWatch",[e]))}};n.exports=d}),t("cordova/plugin/globalization",function(e,t,n){var r=e("cordova/argscheck"),o=e("cordova/exec");e("cordova/plugin/GlobalizationError");var i={getPreferredLanguage:function(e,t){r.checkArgs("fF","Globalization.getPreferredLanguage",arguments),o(e,t,"Globalization","getPreferredLanguage",[])},getLocaleName:function(e,t){r.checkArgs("fF","Globalization.getLocaleName",arguments),o(e,t,"Globalization","getLocaleName",[])},dateToString:function(e,t,n,i){r.checkArgs("dfFO","Globalization.dateToString",arguments);var a=e.valueOf();o(t,n,"Globalization","dateToString",[{date:a,options:i}])},stringToDate:function(e,t,n,i){r.checkArgs("sfFO","Globalization.stringToDate",arguments),o(t,n,"Globalization","stringToDate",[{dateString:e,options:i}])},getDatePattern:function(e,t,n){r.checkArgs("fFO","Globalization.getDatePattern",arguments),o(e,t,"Globalization","getDatePattern",[{options:n}])},getDateNames:function(e,t,n){r.checkArgs("fFO","Globalization.getDateNames",arguments),o(e,t,"Globalization","getDateNames",[{options:n}])},isDayLightSavingsTime:function(e,t,n){r.checkArgs("dfF","Globalization.isDayLightSavingsTime",arguments);var i=e.valueOf();o(t,n,"Globalization","isDayLightSavingsTime",[{date:i}])},getFirstDayOfWeek:function(e,t){r.checkArgs("fF","Globalization.getFirstDayOfWeek",arguments),o(e,t,"Globalization","getFirstDayOfWeek",[])},numberToString:function(e,t,n,i){r.checkArgs("nfFO","Globalization.numberToString",arguments),o(t,n,"Globalization","numberToString",[{number:e,options:i}])},stringToNumber:function(e,t,n,i){r.checkArgs("sfFO","Globalization.stringToNumber",arguments),o(t,n,"Globalization","stringToNumber",[{numberString:e,options:i}])},getNumberPattern:function(e,t,n){r.checkArgs("fFO","Globalization.getNumberPattern",arguments),o(e,t,"Globalization","getNumberPattern",[{options:n}])},getCurrencyPattern:function(e,t,n){r.checkArgs("sfF","Globalization.getCurrencyPattern",arguments),o(t,n,"Globalization","getCurrencyPattern",[{currencyCode:e}])}};n.exports=i}),t("cordova/plugin/ios/Contact",function(e,t,n){var r=e("cordova/exec"),o=e("cordova/plugin/ContactError");n.exports={display:function(e,t){if(null===this.id){if("function"==typeof e){var n=new o(o.UNKNOWN_ERROR);e(n)}}else r(null,e,"Contacts","displayContact",[this.id,t])}}}),t("cordova/plugin/ios/Entry",function(e,t,n){n.exports={toURL:function(){return"file://localhost"+this.fullPath},toURI:function(){return console.log("DEPRECATED: Update your code to use 'toURL'"),"file://localhost"+this.fullPath}}}),t("cordova/plugin/ios/console",function(e,t,n){function r(e){try{if("object"!=typeof e||!JSON||!JSON.stringify)return""+e;try{return JSON.stringify(e)}catch(t){return"error JSON.stringify()ing argument: "+t}}catch(t){return""+t}}function o(e,t){var n=e[t];return function(o){i(null,null,"Debug Console","log",[r(o),{logLevel:t.toUpperCase()}]),n&&n.apply(e,arguments)}}var i=e("cordova/exec"),a=window.console||{};a.setLevel=function(){},a.logLevel=0;for(var s=["log","debug","info","warn","error"],l=0;s.length>l;l++){var u=s[l];a[u]=o(a,u)}n.exports=a}),t("cordova/plugin/ios/contacts",function(e,t,n){var r=e("cordova/exec");n.exports={newContactUI:function(e){r(e,null,"Contacts","newContact",[])},chooseContact:function(t,n){var o=function(n){var r=e("cordova/plugin/contacts").create(n);t(r.id,r)};r(o,null,"Contacts","chooseContact",[n])}}}),t("cordova/plugin/ios/notification",function(e,t,n){var r=e("cordova/plugin/Media");n.exports={beep:function(){new r("beep.wav").play()}}}),t("cordova/plugin/logger",function(e,t){function n(e,t){t=[e].concat([].slice.call(t)),o.logLevel.apply(o,t)}for(var r,o=t,i=e("cordova/exec"),a=e("cordova/utils"),s=!0,l=[],u=!1,c=["LOG","ERROR","WARN","INFO","DEBUG"],d={},f=0;c.length>f;f++){var p=c[f];d[p]=f,o[p]=p}r=d.WARN,o.level=function(e){if(arguments.length){if(null===d[e])throw Error("invalid logging level: "+e);r=d[e]}return c[r]},o.useConsole=function(e){if(arguments.length&&(s=!!e),s){if("undefined"==typeof console)throw Error("global console object is not defined");if("function"!=typeof console.log)throw Error("global console object does not have a log function");if("function"==typeof console.useLogger&&console.useLogger())throw Error("console and logger are too intertwingly")}return s},o.log=function(){n("LOG",arguments)},o.error=function(){n("ERROR",arguments)},o.warn=function(){n("WARN",arguments)},o.info=function(){n("INFO",arguments)},o.debug=function(){n("DEBUG",arguments)},o.logLevel=function(e,t){var n=[].slice.call(arguments,2);if(t=a.vformat(t,n),null===d[e])throw Error("invalid logging level: "+e);if(!(d[e]>r)){if(!u&&!s)return l.push([e,t]),void 0;if(!s)return i(null,null,"Logger","logLevel",[e,t]),void 0;if(console.__usingCordovaLogger)throw Error("console and logger are too intertwingly");switch(e){case o.LOG:console.log(t);break;case o.ERROR:console.log("ERROR: "+t);break;case o.WARN:console.log("WARN: "+t);break;case o.INFO:console.log("INFO: "+t);break;case o.DEBUG:console.log("DEBUG: "+t)}}},o.__onDeviceReady=function(){if(!u){u=!0;for(var e=0;l.length>e;e++){var t=l[e];o.logLevel(t[0],t[1])}l=null}},document.addEventListener("deviceready",o.__onDeviceReady,!1)}),t("cordova/plugin/network",function(e,t,n){function r(){this.type="unknown"}var o=e("cordova/exec"),i=e("cordova"),a=e("cordova/channel"),s=e("cordova/utils");"undefined"!=typeof navigator&&s.defineGetter(navigator,"onLine",function(){return"none"!=this.connection.type}),r.prototype.getInfo=function(e,t){o(e,t,"NetworkStatus","getConnectionInfo",[])};var l=new r,u=null,c=500;a.onCordovaReady.subscribe(function(){l.getInfo(function(e){l.type=e,"none"===e?u=setTimeout(function(){i.fireDocumentEvent("offline"),u=null},c):(null!==u&&(clearTimeout(u),u=null),i.fireDocumentEvent("online")),2!==a.onCordovaConnectionReady.state&&a.onCordovaConnectionReady.fire()},function(e){2!==a.onCordovaConnectionReady.state&&a.onCordovaConnectionReady.fire(),console.log("Error initializing Network Connection: "+e)})}),n.exports=l}),t("cordova/plugin/notification",function(e,t,n){var r=e("cordova/exec");n.exports={alert:function(e,t,n,o){var i=n||"Alert",a=o||"OK";r(t,null,"Notification","alert",[e,i,a])},confirm:function(e,t,n,o){var i=n||"Confirm",a=o||"OK,Cancel";r(t,null,"Notification","confirm",[e,i,a])},vibrate:function(e){r(null,null,"Notification","vibrate",[e])},beep:function(e){r(null,null,"Notification","beep",[e])}}}),t("cordova/plugin/requestFileSystem",function(e,t,n){var r=e("cordova/argscheck"),o=e("cordova/plugin/FileError"),i=e("cordova/plugin/FileSystem"),a=e("cordova/exec"),s=function(e,t,n,s){r.checkArgs("nnFF","requestFileSystem",arguments);var l=function(e){s&&s(new o(e))};if(0>e||e>3)l(o.SYNTAX_ERR);else{var u=function(e){if(e){if(n){var t=new i(e.name,e.root);n(t)}}else l(o.NOT_FOUND_ERR)};a(u,l,"File","requestFileSystem",[e,t])}};n.exports=s}),t("cordova/plugin/resolveLocalFileSystemURI",function(e,t,n){var r=e("cordova/argscheck"),o=e("cordova/plugin/DirectoryEntry"),i=e("cordova/plugin/FileEntry"),a=e("cordova/plugin/FileError"),s=e("cordova/exec");n.exports=function(e,t,n){r.checkArgs("sFF","resolveLocalFileSystemURI",arguments);var l=function(e){n&&n(new a(e))};if(!e||e.split(":").length>2)return setTimeout(function(){l(a.ENCODING_ERR)},0),void 0;var u=function(e){var n;e?t&&(n=e.isDirectory?new o(e.name,e.fullPath):new i(e.name,e.fullPath),t(n)):l(a.NOT_FOUND_ERR)};s(u,l,"File","resolveLocalFileSystemURI",[e])}}),t("cordova/plugin/splashscreen",function(e,t,n){var r=e("cordova/exec"),o={show:function(){r(null,null,"SplashScreen","show",[])},hide:function(){r(null,null,"SplashScreen","hide",[])}};n.exports=o}),t("cordova/utils",function(e,t){function n(e){for(var t="",n=0;e>n;n++){var r=parseInt(256*Math.random(),10).toString(16);1==r.length&&(r="0"+r),t+=r}return t}function r(e,t){try{switch(t){case"j":case"o":return JSON.stringify(e);case"c":return""}}catch(n){return"error JSON.stringify()ing argument: "+n}return null===e||void 0===e?Object.prototype.toString.call(e):""+e}var o=t;o.defineGetterSetter=function(e,t,n,r){if(Object.defineProperty){var o={get:n,configurable:!0};r&&(o.set=r),Object.defineProperty(e,t,o)}else e.__defineGetter__(t,n),r&&e.__defineSetter__(t,r)},o.defineGetter=o.defineGetterSetter,o.arrayIndexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=e.length,r=0;n>r;++r)if(e[r]==t)return r;return-1},o.arrayRemove=function(e,t){var n=o.arrayIndexOf(e,t);return-1!=n&&e.splice(n,1),-1!=n},o.typeName=function(e){return Object.prototype.toString.call(e).slice(8,-1)},o.isArray=function(e){return"Array"==o.typeName(e)},o.isDate=function(e){return"Date"==o.typeName(e)},o.clone=function(e){if(!e||"function"==typeof e||o.isDate(e)||"object"!=typeof e)return e;var t,n;if(o.isArray(e)){for(t=[],n=0;e.length>n;++n)t.push(o.clone(e[n]));return t}t={};for(n in e)n in t&&t[n]==e[n]||(t[n]=o.clone(e[n]));return t},o.close=function(e,t,n){return n===void 0?function(){return t.apply(e,arguments)}:function(){return t.apply(e,n)}},o.createUUID=function(){return n(4)+"-"+n(2)+"-"+n(2)+"-"+n(2)+"-"+n(6)},o.extend=function(){var e=function(){};return function(t,n){e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t.prototype.constructor=t}}(),o.alert=function(e){window.alert?window.alert(e):console&&console.log&&console.log(e)},o.format=function(e){var t=[].slice.call(arguments,1);return o.vformat(e,t)},o.vformat=function(e,t){if(null===e||void 0===e)return"";if(1==arguments.length)return""+e;if("string"!=typeof e)return""+e;for(var n=/(.*?)%(.)(.*)/,o=e,i=[];t.length;){var a=t.shift(),s=n.exec(o);if(!s)break;o=s[3],i.push(s[1]),"%"!=s[2]?i.push(r(a,s[2])):(i.push("%"),t.unshift(a))}return i.push(o),i.join("")}}),window.cordova=e("cordova"),function(t){if(t.navigator){var n=function(){};n.prototype=t.navigator,t.navigator=new n}var r=e("cordova/channel"),o={boot:function(){r.join(function(){var n=e("cordova/builder"),o=e("cordova/common"),i=e("cordova/platform");n.buildIntoButDoNotClobber(o.defaults,t),n.buildIntoAndClobber(o.clobbers,t),n.buildIntoAndMerge(o.merges,t),n.buildIntoButDoNotClobber(i.defaults,t),n.buildIntoAndClobber(i.clobbers,t),n.buildIntoAndMerge(i.merges,t),i.initialize(),r.onCordovaReady.fire(),r.join(function(){e("cordova").fireDocumentEvent("deviceready")
},r.deviceReadyChannelsArray)},[r.onDOMContentLoaded,r.onNativeReady])}};r.onNativeReady.subscribe(o.boot),window._nativeReady&&r.onNativeReady.fire()}(window)})()}.call(this),function(){app={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",function(){Session.set("deviceready",!0)},!1)}},Session.set("deviceready",!1),Template.mobileDeviceStatus.isDeviceReady=function(){try{return Session.get("deviceready")}catch(e){console.log(e)}},Template.mobileDeviceStatus.deviceStatusText=function(){try{return Session.get("deviceready")?"Device is Ready":"Connecting to Device"}catch(e){console.log(e)}},Template.mobileDeviceStatus.deviceStatus=function(){try{return Session.get("deviceready")?"receiving":"blink listening"}catch(e){console.log(e)}}}.call(this),function(){var e=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,n=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,o=function(e,t){for(e+="",t=t||2;t>e.length;)e="0"+e;return e};return function(i,a,s){var l=e;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(i)||/\d/.test(i)||(a=i,i=void 0),i=i?new Date(i):new Date,isNaN(i))throw SyntaxError("invalid date");a=(l.masks[a]||a||l.masks["default"])+"","UTC:"==a.slice(0,4)&&(a=a.slice(4),s=!0);var u=s?"getUTC":"get",c=i[u+"Date"](),d=i[u+"Day"](),f=i[u+"Month"](),p=i[u+"FullYear"](),h=i[u+"Hours"](),g=i[u+"Minutes"](),m=i[u+"Seconds"](),v=i[u+"Milliseconds"](),_=s?0:i.getTimezoneOffset(),y={d:c,dd:o(c),ddd:l.i18n.dayNames[d],dddd:l.i18n.dayNames[d+7],m:f+1,mm:o(f+1),mmm:l.i18n.monthNames[f],mmmm:l.i18n.monthNames[f+12],yy:(p+"").slice(2),yyyy:p,h:h%12||12,hh:o(h%12||12),H:h,HH:o(h),M:g,MM:o(g),s:m,ss:o(m),l:o(v,3),L:o(v>99?Math.round(v/10):v),t:12>h?"a":"p",tt:12>h?"am":"pm",T:12>h?"A":"P",TT:12>h?"AM":"PM",Z:s?"UTC":((i+"").match(n)||[""]).pop().replace(r,""),o:(_>0?"-":"+")+o(100*Math.floor(Math.abs(_)/60)+Math.abs(_)%60,4),S:["th","st","nd","rd"][c%10>3?0:(10!=c%100-c%10)*c%10]};return a.replace(t,function(e){return e in y?y[e]:e.slice(1,e.length-1)})}}();e.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},e.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(t,n){return e(this,t,n)}}.call(this),function(){Meteor._def_template("hipaaLog",Handlebars.json_ast_to_func(['<div class="row">\n        <ul>\n            ',["#",[[0,"each"],[0,"hipaaAudit"]],["\n            ",[">","hipaaEntry"],"\n            "]],"\n        </ul>\n    </div>"])),Meteor._def_template("hipaaEntry",Handlebars.json_ast_to_func(['<li><span class="darkgray">',["{",[[0,"entry_timestamp"]]],', </span><span class="gray hidden">',["{",[[0,"owner"]]],", </span>",["{",[[0,"text"]]],"\n    </li>"]))}.call(this),function(){Hipaa=new Meteor.Collection("hipaa"),Hipaa.allow({insert:function(){return!0},update:function(){return!1},remove:function(){return!1}}),Meteor.isClient&&(Meteor.subscribe("hipaa"),Template.hipaaLog.hipaaAudit=function(){return Hipaa.find()},Template.hipaaEntry.entry_timestamp=function(){return new Date(this.timestamp).format("yyyy, mmm d, ddd, HH:MM Z")}),Meteor.isServer&&Meteor.publish("hipaa",function(){return Hipaa.find()})}.call(this),function(){var e=!0,t=!0,n="8";LogLevel={Emergency:0,Alert:1,Critical:2,Error:3,Warning:4,Notice:5,Info:6,Debug:7,Trace:8,Hipaa:9,Drawing:10,Signpost:11},parseLogLevel=function(e){switch(e){case 0:return"Emergency-> ";case 1:return"Alert-----> ";case 2:return"Critical--> ";case 3:return"Error-----> ";case 4:return"Warning---> ";case 5:return"Notice----> ";case 6:return"Info------> ";case 7:return"Debug-----> ";case 8:return"Stacktrace> ";case 9:return"Hipaa-----> ";case 10:return"Drawing---> ";case 11:return"Signpost--> "}},log_hipaa_event=function(n,r,o){e&&console.log(o+", LogLevel: "+r+" - "+n),t&&r==LogLevel.Hipaa&&Hipaa.insert({owner:o,loglevel:r,text:n,timestamp:(new Date).getTime()})},log_event=function(t,r){e&&r!=n&&console.log(parseLogLevel(r)+t)},catch_error=function(t,n,r){e&&console.log(parseLogLevel(r)+t+" - "+n)}}.call(this),function(){Meteor._def_template("reactiveOverlaysTemplate",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"isVisible"]],['\n    <div id="overlayMask" class="overlay-mask">\n        <div id="overlayTemplate"  class="',["{",[[0,"isTemplateVisible"]]],' overlay-template"></div>\n\n    </div>\n    <div id="overlayImage" class="',["{",[[0,"isImageVisible"]]],' overlay-image"><img class="with-rounded-corners" src="',["{",[[0,"imageSrc"]]],'"></img></div>\n    ']]]))}.call(this),function(){Session.set("show_reactive_overlay",!1),Session.set("show_overlay_image",!1),Session.set("overlay_image_path","images/placeholder-240x240.gif"),Session.set("show_overlay_template",!1),Session.set("overlay_template_reference_id",null),Template.reactiveOverlaysTemplate.isVisible=function(){return Session.get("show_reactive_overlay")?!0:Session.get("show_overlay_image")?!0:!1},Template.reactiveOverlaysTemplate.isImageVisible=function(){return Session.get("show_overlay_image")?"":"hidden"},Template.reactiveOverlaysTemplate.isTemplateVisible=function(){return null!=Session.get("overlay_template_reference_id")?"":"hidden"},Template.reactiveOverlaysTemplate.imageSrc=function(){return null!=Session.get("overlay_image_path")?Session.get("overlay_image_path"):"images/placeholder-240x240.gif"},Template.reactiveOverlaysTemplate.events({"click .overlay-mask":function(){hideOverlay(),$(Session.get("overlay_template_reference_id")).addClass("hidden")},"click .overlay-image":function(){hideOverlay(),$(Session.get("overlay_template_reference_id")).addClass("hidden")}}),Template.reactiveOverlaysTemplate.rendered=function(){Session.get("show_overlay_image")?($(".overlay-image").css("left",window.innerWidth/2),$(".overlay-image").css("top",window.innerHeight/4)):Session.get("show_overlay_template")&&($("#overlayTemplate").append($(Session.get("overlay_template_reference_id")).html()),$(Session.get("overlay_template_reference_id")).removeClass("hidden"),$(".overlay-template").css("top",window.innerHeight/2))},showImageOverlay=function(e){Session.set("overlay_image_path",$(e).attr("src")),Session.set("show_reactive_overlay",!0),Session.set("show_overlay_image",!0)},showTutorialOverlay=function(e){Session.set("overlay_template_reference_id",e),Session.set("show_reactive_overlay",!0),Session.set("show_overlay_template",!0)},hideOverlay=function(){Session.set("show_overlay_image",!1),Session.set("show_overlay_template",!1),Session.set("show_reactive_overlay",!1)}}.call(this),function(){Meteor._def_template("iconAssetsPageTemplate",Handlebars.json_ast_to_func(['<div id="iconAssetsPage" class="page">\n        <div class="spacer row"></div>\n        <div class="row">\n            <div id="snomed-anatomy-list">\n                <input type="text" class="search" placeholder="filter ',["{",[[0,"snomed_count"]]],' records" />\n                <ul class="anatomy-images list">\n                    ',["#",[[0,"each"],[0,"icon_list"]],["\n                    ",[">","iconAssetTemplate"],"\n                    "]],"\n                </ul>\n            </div>\n        </div>\n    </div>"])),Meteor._def_template("iconAssetTemplate",Handlebars.json_ast_to_func(['<li class="two column icon-item">\n        <div class="hidden icon-name">',["{",[[0,"icon_image"]]],'</div>\n        <img class="panel gray-border with-rounded-corners" src="',["{",[[0,"icon_image"]]],'">\n    </li>']))}.call(this),function(){Meteor._def_template("communityPageTemplate",Handlebars.json_ast_to_func(['<div class="touch-disabled page helveticas" id="communityPage">\n        <div class="hidden">',["{",[[0,"resize"]]],'</div>\n\n        <div class="doesnt-overlap-header">\n            <div class="spacer row"></div>\n            <div class="spacer row hide-for-small"></div>\n                ',[">","communityMembersList"],'\n            <div class="spacer row hide-for-small"></div>\n            <div id="communityInspectionColumn">\n                ',[">","communityInspectionColumn"],"\n            </div>\n        </div>\n    </div>"])),Meteor._def_template("communityInspectionColumn",Handlebars.json_ast_to_func(['<!-- //extract #communityInspectionBlock css styling into .community-inspection-block class -->\n    <!-- //move .community-expection-block class outside of communityInspectionColumnTemplate -->\n    <div id="communityInspectionBlock" class="top-anchored">\n        <!-- //TODO:  extract search input into communitySearchInputTemplate-->\n        <div class="search-container">\n            <input id="communitySearchInput" type="text" class="search ',["{",[[0,"search_text_color"]]],'" value="search community members" />\n        </div>\n        ',["#",[[0,"if"],[0,"showQuickViewPanel"]],["\n            ",[">","userQuickViewCard"],"\n        "],['\n        <div class="itaintrocketscience hide-for-small hidden-on-portrait">\n            <p>You can search by name, barcode, or user ID.  Try copying the barcode and pasting it in the box. (coming soon)</p>\n        </div>\n        ']],"\n    </div>"])),Meteor._def_template("userQuickViewCard",Handlebars.json_ast_to_func(['<div class="spacer row"></div>\n\n    <!-- //TODO: extract #userQuickViewPanel styling to .user-quick-view-panel class -->\n    <!-- //TODO: move .user-quickview-panel class outisde of userQuickViewTemplate -->\n    <div id="userQuickViewPanel" class="card">\n        <div class="card-header rounded-top-right">\n            <span class="white card-meta-data barcode">*',["{",[[0,"user_id"]]],'*</span>\n        </div>\n        <div class="panel user-card-detailed">\n            <img id="userCardImage" class="user-card-image" src="',["{",[[0,"user_avatar"]]],'" />\n\n            <div class="user-card-synopsis fullheight unselectable">\n                <div class="spacer row"></div>\n                <span class="user-card-synopsis-name">',["{",[[0,"user_name"]]],'</span><br>\n                <span class="user-card-synopsis-email">',["{",[[0,"user_email"]]],'</span><br>\n                <span id="broadcastIcon" class="',["{",[[0,"isBroadcastRecipient"]]],' communication-recipient-icon"><span class="pictograph">^ </span>Make Active Collaborator</span>\n            </div>\n        </div>\n    </div>'])),Meteor._def_template("communityMembersList",Handlebars.json_ast_to_func(['<!-- //TODO:  extract #communityMemberList css styling to .community-member-list class-->\n    <!-- //TODO:  move .community-member-list class outside of communityMemberListTemplate -->\n    <div id="communityMembersList">\n        <ul id="communityList" class="list dont-overlap-user-card">\n            ',["#",[[0,"each"],[0,"communityUsers"]],["\n            ",[">","userItemTemplate"],"\n            "]],"\n        </ul>\n    </div>"])),Meteor._def_template("userItemTemplate",Handlebars.json_ast_to_func(['<li class="rounded-corners user-card without-padding">\n        <img class="card-image with gray-border" src="',["{",[[0,"userImage"]]],'" />\n        <div class="card-data">\n            <div class="card-northwest gray card-meta-data without-padding barcode">*',["{",[[0,"_id"]]],'*</div>\n            <div class="card-northwest-secondary user-email bold">',["{",[[0,"userName"]]],"</div>\n        </div>\n    </li>"]))}.call(this),function(){Meteor._def_template("iconAssetsPageTutorialTemplate",Handlebars.json_ast_to_func(['<div id="iconAssetsPageTutorial"  class="tutorial">\n        <div class="itaintrocketscience">This will eventually be a tutorial.</div>\n    </div>']))}.call(this),function(){Meteor._def_template("communityPageTutorialTemplate",Handlebars.json_ast_to_func(['<div id="communityPageTutorial"  class="tutorial">\n        <div class="itaintrocketscience">This will eventually be a tutorial.</div>\n    </div>']))}.call(this),function(){Meteor._def_template("profilePageTutorialTemplate",Handlebars.json_ast_to_func(['<div id="profilePageTutorial"  class="tutorial">\n        <div class="itaintrocketscience">This will eventually be a tutorial.</div>\n    </div>']))}.call(this),function(){Meteor._def_template("sidebarTutorialTemplate",Handlebars.json_ast_to_func(['<div id="sidebarTutorial"  class="tutorial">\n        <div class="itaintrocketscience">This will eventually be a tutorial.</div>\n    </div>']))}.call(this),function(){Meteor._def_template("workqueuesPageTutorialTemplate",Handlebars.json_ast_to_func(['<div id="workqueuesPageTutorial"  class="hidden tutorial">\n        <span class="itaintrocketscience">This will eventually be a tutorial.</span>\n    </div>']))}.call(this),function(){Meteor._def_template("profilePageTemplate",Handlebars.json_ast_to_func(['<div id="profilePage" class="touch-disabled page helveticas">\n        ',["#",[[0,"if"],[0,"receivedNewAlert"]],['\n            <div class="row">\n                ',[">","dropboxAlertTemplate"],"\n            </div>\n        "]],'\n        <div class="spacer row"></div>\n        <div class="row">\n            ',[">","userCardTemplate"],"\n            ",["#",[[0,"if"],[0,"isActiveCollaboratorVisible"]],["\n                ",[">","activeCollaboratorCardTemplate"],"\n            "]],"\n            ",["#",[[0,"if"],[0,"isHipaaAuditLogVisible"]],["\n            ",[">","hipaaAuditLogTemplate"],"\n            "]],"\n        </div>\n    </div>"])),Meteor._def_template("userCardTemplate",Handlebars.json_ast_to_func(['<!--<div class="user-card-block">-->\n        <div class="hidden">',["{",[[0,"resize"]]],'</div>\n\n        <div class="clickable synopsis card-container with-bottom-spacer">\n            <div class="card-header rounded-top-right">\n                <span class="white card-meta-data barcode">*',["{",[[0,"user_id"]]],'*</span>\n            </div>\n            <div class="user-profile-card card-body ">\n                <div class="user-card-detailed">\n                    <img class="user-card-image drop-zone gray-border" id="drop_zone" src="',["{",[[0,"user_image"]]],'" />\n\n                    <div class="user-card-data">\n\n                        <!-- TODO:  remove foundation.css twelve column usage -->\n                        <div class="twelve columns">\n                            <ul id="profileItems" class="profile-items card-data dictionary">\n                                <li>\n                                    <div id="profile-display-name-label" class="dictionary-key hidden-top-row">Name</div>\n                                    ',["#",[[0,"if"],[0,"editing_name"]],['\n                                    <div id="userNameInput" class="edit dictionary-value-editing hidden-top-row">\n                                        <input id="profile-input-name" type="text" placeholder="Jane Doe" value="',["{",[[0,"user_name"]]],'" />\n                                    </div>\n                                    '],['\n                                    <div id="userNameDisplay" class="userNameDisplay display dictionary-value-editing hidden-top-row">\n                                        <span id="profile-display-name" class="dictionary-value hidden-top-row">',["{",[[0,"user_name"]]],"</span>\n                                    </div>\n                                    "]],'\n                                </li>\n\n                                <li >\n                                    <div id="profile-display-birthdate-label" class="dictionary-key">Birthdate</div>\n                                    ',["#",[[0,"if"],[0,"editing_birthdate"]],['\n                                    <div id="userDateOfBirthInput" class="edit dictionary-value-editing">\n                                        <input id="profile-input-birth-date" type="text" placeholder="1969/01/27" value="',["{",[[0,"user_birthdate"]]],'" />\n                                    </div>\n                                    '],['\n                                    <div id="userDateOfBirthDisplay" class="userDateOfBirthDisplay display dictionary-value-editing">\n                                        <span id="profile-display-birth-date" class="dictionary-value">',["{",[[0,"user_birthdate"]]],"</span>\n                                    </div>\n                                    "]],'\n                                </li>\n                                <li>\n                                    <div id="profile-display-avatar-label" class="dictionary-key">Avatar</div>\n                                    ',["#",[[0,"if"],[0,"editing_avatar"]],['\n                                    <div id="userAvatarInput" class="edit dictionary-value-editing">\n                                        <input id="profile-input-avatar" type="text" placeholder="28371d8c-42be-4a67-83aa-27a863fe9060.png" value="',["{",[[0,"user_avatar"]]],'" />\n                                    </div>\n                                    '],['\n                                    <div id="userAvatarDisplay" class="userAvatarDisplay display dictionary-value-editing">\n                                        <span id="profile-display-avatar" class="dictionary-value">',["{",[[0,"user_avatar"]]],"</span>\n                                    </div>\n                                    "]],'\n                                </li>\n                                <li>\n                                    <div id="profile-display-dropbox-label" class="dictionary-key">Dropbox</div>\n                                    <div id="userDropBoxDisplay" class="userAvatarDisplay display dictionary-value-editing">\n                                        <span id="profile-display-dropbox" class="gray dictionary-value">',["{",[[0,"user_dropbox"]]],'</span>\n                                    </div>\n                                </li>\n                                <!--<li>-->\n                                    <!--<div id="profile-display-active-collaborator-label" class="dictionary-key">Collaborator</div>-->\n                                    <!--<div id="userActiveCollaboratorDisplay" class="userAvatarDisplay display dictionary-value-editing">-->\n                                        <!--<span id="profile-display-active-collaborator" class="gray dictionary-value">',["{",[[0,"user_active_collaborator"]]],'</span>-->\n                                    <!--</div>-->\n                                <!--</li>-->\n\n                                <!-- TODO:  move currentPage input to detailedUsersInfoCard -->\n                                <!--<li>-->\n                                <!--<div id="profile-display-lastpage-label" class="dictionary-key">Current Page</div>-->\n                                <!--<div id="userLastPageDisplay" class="userAvatarDisplay display dictionary-value-editing">-->\n                                <!--<span id="profile-display-lastpage" class="gray dictionary-value">','</span>-->\n                                <!--</div>-->\n                                <!--</li>-->\n                            </ul>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n            <div class="card-footer"></div>\n        </div>'])),Meteor._def_template("activeCollaboratorCardTemplate",Handlebars.json_ast_to_func(['<div id="activeCollaboratorProfileCard" class="clickable synopsis card-container with-bottom-spacer">\n        <div class="card-header rounded-top-right">\n            <span class="white card-meta-data">Active Collaborator</span>\n        </div>\n        <div class="user-profile-card card-body">\n            <div class="user-card-detailed">\n                <img class="user-card-image collaborator-image gray-border" id="originImage" src="',["{",[[0,"collaborator_avatar"]]],'" />\n\n                <div class="user-card-data">\n\n                    <!-- TODO:  remove foundation.css twelve column usage -->\n                    <div class="twelve columns">\n                        <ul class="profile-items card-data dictionary">\n                            <li>\n                                <div class="dictionary-key hidden-top-row">Collaborator</div>\n                                <div class="userNameDisplay display dictionary-value-editing hidden-top-row">\n                                    <span class="dictionary-value hidden-top-row">',["{",[[0,"collaborator_name"]]],'</span>\n                                </div>\n                            </li>\n\n                            <li >\n                                <div class="dictionary-key">Birthdate</div>\n                                <div class="userDateOfBirthDisplay display dictionary-value-editing">\n                                    <span class="dictionary-value">',["{",[[0,"collaborator_birthdate"]]],'</span>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n\n\n            </div>\n        </div>\n        <div class="card-footer"></div>\n    </div>'])),Meteor._def_template("hipaaAuditLogTemplate",Handlebars.json_ast_to_func(['<div id="hipaaAuditLog" class="card">\n        <div class="card-header clipped_corner rounded-top-right">\n            <span class="pictograph">j</span> HIPAA Audit Log\n        </div>\n        <div class="panel">\n            ',[">","hipaaLog"],"\n        </div>\n        <div>"]))}.call(this),function(){Meteor._def_template("webBrowserPageTemplate",Handlebars.json_ast_to_func(['<div id="webBrowserPage" class="page">\n        <input type="text" class="search" placeholder="http://www.google.com" />\n        <object type="text/html" data="',["{",[[0,"browser_window_location"]]],'" width="100%">\n            <p>backup content</p>\n        </object>\n    </div>']))}.call(this),function(){Meteor._def_template("workqueuesPageTemplate",Handlebars.json_ast_to_func(['<div id="workqueuesPage" class="page helveticas">\n        ',["#",[[0,"if"],[0,"receivedNewAlert"]],["\n        ",[">","dropboxAlertTemplate"],"\n        "]],'\n\n        <div class="new-task-container">\n            <input id="newTaskInput" type="text" class="search lightgray" value="add new task" />\n        </div>\n        ',[">","workqueueTemplate"],'\n    </div>\n    <div class="hidden resize-trigger">resized: ',["{",[[0,"resized"]]],"</div>"])),Meteor._def_template("workqueueTemplate",Handlebars.json_ast_to_func(['<div id="items-view" class="touch-trigger touch-disabled">\n        <ul id="item-list">\n            ',["#",[[0,"each"],[0,"todos"]],["\n            ",[">","taskItemTemplate"],"\n            "]],"\n        </ul>\n    </div>\n    ",["#",[[0,"if"],[0,"showTaskDetail"]],["\n    ",[">","taskDetailAnchorTemplate"],"\n    "]]])),Meteor._def_template("taskItemTemplate",Handlebars.json_ast_to_func(['<li class="todo ',["{",[[0,"done_class"]]],'">\n        <ul class="inline-list">\n            ',["#",[[0,"if"],[0,"editing"]],['\n            <li class="edit">\n                <input id="todo-input" type="text" value="','" />\n            </li>\n            '],['\n            <li class="display">\n                <span class="largish unselectable ',["{",[[0,"task_complete"]]],' checkmark pictogram">%</span>\n            </li>\n            <li class="display">\n                <span class="largish unselectable ',["{",[[0,"task_star"]]],' task-star pictogram">*</span>\n            </li>\n            <li class="display">\n                <span class="largish unselectable lightgray task-info pictogram hide-for-small">b</span>\n            </li>\n            <li class="display">\n                <span class="largish unselectable lightgray task-delete pictogram hide-for-small">x</span>\n            </li>\n            <li class="display">\n                <span class="todo-text ',["{",[[0,"task_text_complete"]]],'">',["{",[[0,"text"]]],"</span>\n            </li>\n            "]],'\n            <li class="item-tags">\n\n            </li>\n        </ul>\n        ',["#",[[0,"if"],[0,"showDeleteButton"]],['\n            <ul class="horizontal-tags">\n                <li class="delete-button removable_tag tag">\n                    <div class="name">\n                        Delete\n                    </div>\n                </li>\n                <li class="largish addtag pictograph"> </li>\n            </ul>\n        '],['\n            <ul class="horizontal-tags">\n                ',["#",[[0,"each"],[0,"tag_objs"]],['\n                <li class="tag removable_tag">\n                    <div class="name">',["{",[[0,"tag"]]],'<span class="pictographs remove"> X</span></div>\n                </li>\n                ']],"\n                ",["#",[[0,"if"],[0,"adding_tag"]],['\n                <li class="tag edittag">\n                    <input type="text" id="edittag-input" value="" />\n                </li>\n                '],['\n                <li class="largish addtag pictograph">J</li>\n                ']],"\n            </ul>\n        "]],"\n    </li>"])),Meteor._def_template("taskDetailAnchorTemplate",Handlebars.json_ast_to_func(['<div id="taskDetailCard" class="task-detail-container">\n        ',["#",[[0,"if"],[0,"showTaskDetailModalMask"]],['\n        <div class="detailed-task-card-modal-mask-gradient"></div>\n        <div class="detailed-task-card-modal-mask"></div>\n        ']],"\n        ",[">","taskDetailCardTemplate"],'\n    </div>\n    <div class="spacer row"></div>'])),Meteor._def_template("taskDetailCardTemplate",Handlebars.json_ast_to_func(['<div class="card-header rounded-top-right">\n            <span class="white neo-card-meta-data barcode">',["{",[[0,"todo_id"]]],'</span>\n        </div>\n\n        <div class="task-detail-card-body card-body-resize">\n            <div class="task-detail-image-container"><img class="task-detail-card-image-image" src="',["{",[[0,"todo_image"]]],'" /></div>\n            <div class="detailed-task-text">',["{",[[0,"todo_text"]]],'</div>\n\n            <ul class="web-link-controls">\n                <li>\n                    <span class="web-icon pictograph">w</span>\n                    <span class="web-link-text">---------------------------------------------------------------------------------------</span>\n                </li>\n            </ul>\n            <ul class="detailed-task-card-controls">\n                <li class="task-detail-checkmark curved-control-button">\n                    <span class="control-button ',["{",[[0,"detailed_task_complete"]]],' pictograph">%</span>\n                </li>\n                <li class="task-detail-star">\n                    <span class="control-button ',["{",[[0,"detailed_task_star"]]],' pictograph">*</span>\n                </li>\n                <li class="task-detail-send">\n                    <span class="control-button pictograph">o</span>\n                    <span class="sender-name">',["{",[[0,"activeCollaboratorName"]]],'</span>\n                </li>\n                <li class="task-detail-delete">\n                    <span class="control-button pictograph">x</span>\n                </li>\n            </ul>\n        </div>\n\n        <div class="task-detail-tag-footer card-footer-resize">\n            <ul class="lower-horizontal-tags">\n                ',["#",[[0,"each"],[0,"tag_list"]],['\n                <li class="tag removable_tag">\n                    <div class="name">',["{",[[0,"tag"]]],'<span class="pictographs remove"> X</span></div>\n                </li>\n                ']],"\n                ",["#",[[0,"if"],[0,"adding_detailed_tag"]],['\n                <li class="tag edittag">\n                    <input type="text" id="edittagInputDetailed" value="" />\n                </li>\n                '],['\n                <li id="detailedTaskAddTagIcon" class="largish addtag pictograph">J</li>\n                ']],"\n            </ul>\n        </div>"]))}.call(this),function(){Meteor._def_template("guestPageTemplate",Handlebars.json_ast_to_func(['<div id="guestPage" class="doesnt-overlap-header touch-disabled page helveticas">\n        <div class="twelve columns">\n            <div class="row">\n                <div class="twelve columns">\n                    <p class="itaintrocketscience startHere hide-for-small hide-for-medium">start here!</p>\n                    <div class="nine columns">\n                        <div class="row">\n\n                            <div class="clickable synopsis card-container with-bottom-spacer">\n                                <div class="card-header rounded-top-right">\n                                    <span class="white card-meta-data">Synopsis</span>\n                                </div>\n                                <div class="padded card-body">\n                                    <p>Clinical Workqueues is a task management application designed to facilitate workflow in clinical settings.  Initially motivated by the HITECH and Affordable Care Acts, Clinical Workqueues is a mobile task management application, designed from the ground-up with the latest in real-time mobile web technologies, to facilitate ad-hoc accountable care organizations and bed-side computing.  It\'s an application designed to meet the needs of a society dealing with aging Baby Boomers.  </p>\n                                    <!--<pre>-->\n                                        <!--<span>{</span><br>-->\n                                        <!--<span>  inspiration: "Corning Day of Glass Video",</span><br>-->\n                                        <!--<span>  hardware: {</span><br>-->\n                                        <!--<span>    multitouch:   true,</span><br>-->\n                                        <!--<span>    platforms:    [ios, android, web]</span><br>-->\n                                        <!--<span>  }</span><br>-->\n                                        <!--<bspanr>  framework: {</span><br>-->\n                                        <!--<span>    database:   mongodb,</span><br>-->\n                                        <!--<span>    webserver:  node.js,</span><br>-->\n                                        <!--<span>    graphing:   d3.js</span><br>-->\n                                        <!--<span>  }</span><br>-->\n                                        <!--<span>  market: {</span><br>-->\n                                        <!--<span>    consumer:    ["App Stores", "Premium Subscriptions"],</span><br>-->\n                                        <!--<span>    clinical:    "EMR Site Licenses",</span><br>-->\n                                        <!--<span>    insurance:   "Capitated Reimbursement Groups"</span><br>-->\n                                        <!--<span>  }</span><br>-->\n                                        <!--<span>{</span><br>-->\n                                        <!--&lt;!&ndash; //TODO:  convert workqueues description into JSON object &ndash;&gt;-->\n                                    <!--</pre>-->\n                                </div>\n                                <div class="card-footer"></div>\n                            </div>\n\n                            <div class="hidden clickable features card-container with-bottom-spacer">\n                                <div class="card-header rounded-top-right">\n                                    <span class="white card-meta-data">Features</span>\n                                </div>\n                                <!-- //TODO:  add features list from iPad notes -->\n                                <div class="padded card-body">\n                                    <p> Mobile<br>\n                                        Bedside Computing<br>\n                                        Multiuser & Social<br>\n                                        Ad-Hoc Accountable Care Organizations<br>\n                                        Patient Outcome Analysis<br>\n                                        HIPAA Compliant<br>\n                                        Clinician Workflows\n                                    </p>\n                                </div>\n                                <div class="card-footer"></div>\n                            </div>\n\n\n\n                            <div class="hidden clickable accounts card-container with-bottom-spacer">\n                                <div class="card-header rounded-top-right">\n                                    <span class="white card-meta-data">Demo Accounts</span>\n                                </div>\n                                <div class="padded card-body" style="height: 260px;">\n                                    <div class="six columns">\n                                        <span class="bold">Ada Lovelace</span><br>\n                                        <span>username:  ada@test.org</span><br>\n                                        <span>password:  ada</span>\n                                        <br><br>\n                                        <span class="bold">Rosalind Franklin</span><br>\n                                        <span>username:  rosalind@test.org</span><br>\n                                        <span>password:  rosalind</span>\n                                        <br><br>\n                                        <span class="bold">Octavia Butler</span><br>\n                                        <span>username:  octavia@test.org</span><br>\n                                        <span>password:  octavia</span>\n                                        <br><br>\n                                        <span class="bold">Florence Nightingale</span><br>\n                                        <span>username:  florence@test.org</span><br>\n                                        <span>password:  florence</span>\n                                        <br><br>\n\n                                    </div>\n                                    <div class="six columns">\n                                        <span class="bold">Kurt Vonnegut</span><br>\n                                        <span>username:  kurt@test.org</span><br>\n                                        <span>password:  kurt</span>\n                                        <br><br>\n                                        <span class="bold">Alan Turring</span><br>\n                                        <span>username:  alan@test.org</span><br>\n                                        <span>password:  alan</span>\n                                        <br><br>\n                                        <span class="bold">George Washington Carver</span><br>\n                                        <span>username:  carver@test.org</span><br>\n                                        <span>password:  carver</span>\n                                        <br><br>\n                                        <span class="bold">Alexis Carrel</span><br>\n                                        <span>username:  alexis@test.org</span><br>\n                                        <span>password:  alexis</span>\n                                        <br><br>\n\n                                    </div>\n                                </div>\n                                <div class="card-footer"></div>\n                            </div>\n\n\n\n                            <div class="hidden clickable betatest card-container with-bottom-spacer">\n                                <div class="card-header rounded-top-right">\n                                    <span class="white card-meta-data">Beta Testing Program</span>\n                                </div>\n                                <div class="padded card-body">\n                                    <p>The first 100 people to send us the UUID of their iPad can participate in the beta-testing program for Clinical Workqueues and Symptomatic.</p>\n                                    <img rel="#uuid" class="gray moneyShot with-rounded-corners" src="/images/uuid-for-beta-testing-program.png">\n                                </div>\n                                <div class="card-footer"></div>\n                            </div>\n\n\n                            <div id="currentScreenshotContainer" class="vision row with-bottom-spacer">\n                                <img id="currentScreenshot" class="gray clickable panel with-rounded-corners" src="/images/april-screenshot-alpha-launch.jpg">\n                            </div>\n                            <!--<div class="making-this itaintrocketscience hide-for-small hide-for-medium hidden vision">Money shot!  This is what we\'re trying to create!</div>-->\n                            <div id="moneyShotContainer" class="hidden vision row with-bottom-spacer">\n                                <img rel="#moneyShot" class="gray clickable moneyShot panel with-rounded-corners" src="/images/visionStatement/day-of-glass-money-shot.png">\n                            </div>\n                            <!--<div class="making-this itaintrocketscience hide-for-small hide-for-medium hidden vision">The healthcare related stuff begins at 6:23 into the video.</div>-->\n                            <div id="dayOfGlassMedicalVideo" class="hidden vision row with-bottom-spacer">\n                                <iframe class="gray panel with-rounded-corners hidden-on-portrait" width="100%" height="400px" src="http://www.youtube.com/embed/Muv3R_6AXls" frameborder="0" allowfullscreen></iframe>\n                            </div>\n\n                            <div class="notepad panel hipaa-notice with-rounded-corners">\n                                NOTICE:  Clinical Workqueues is currently in <bold class="red">ALPHA</bold>.  It is <bold>not</bold> HIPAA compliant (yet).  Information may be deleted or lost as we migrate to Beta release and move onto our production platform.  You have been warned!  This public demo is made available only for evaulation purposes at the current time.\n                            </div>\n\n\n\n                        </div>\n                    </div>\n\n                    <!-- //TODO:  on portrait layout and mobile, set fixed layout upper-right-hand corner -->\n                    <div class="guestpage-navigation three columns">\n                        <div class="panel with-rounded-corners without-right-padding">\n                            <div class="list ',["{",[[0,"selected"]]],'">\n                                <div class="synopsis-tab sidebar-tab helveticas note">\n                                    SYNOPSIS\n                                </div>\n                                <div class="features-tab sidebar-tab helveticas note">\n                                    FEATURES\n                                </div>\n                                <div class="vision-tab sidebar-tab helveticas note">\n                                    VISION\n                                </div>\n                                <div class="accounts-tab sidebar-tab helveticas note">\n                                    DEMO ACCOUNTS\n                                </div>\n                                <div class="betatest-tab sidebar-tab helveticas note">\n                                    BETA TESTING\n                                </div>\n                                <div class="all-tab sidebar-tab helveticas note">\n                                    ALL\n                                </div>\n                            </div>\n                        </div>\n\n\n                    </div>\n\n                    <img id="day-of-glass-money-shot-34ratio" class="hidden" src="/images/visionStatement/day-of-glass-money-shot-34ratio.png" />\n                    <img id="currentScreenshotImage" class="hidden" src="/images/april-screenshot-alpha-launch.jpg" />\n                </div>\n            </div>\n            <div class="spacer row"></div>\n        </div>\n    </div>']))
}.call(this),function(){Meteor._def_template("appContainerTemplate",Handlebars.json_ast_to_func(['<div class="mainLayoutPaneContainer">\n        ',["#",[[0,"if"],[0,"currentUser"]],['\n        <div id="mainLayoutPane">\n            ',[">","workqueuesPageTemplate"],"\n            ",[">","workqueuesPageTutorialTemplate"],"\n\n            ",[">","profilePageTemplate"],"\n            ",[">","communityPageTemplate"],"\n            ",[">","iconAssetsPageTemplate"],"\n\n            <!-- //TODO:  add dual pane layout structure -->\n            <!-- //TODO:  add toggles to trigger single and dual pane layouts -->\n            <!-- //TODO:  set modal dialogs to display in second pane-->\n            <!-- //TODO:  create triggers to display dual pane layout on sufficient window width-->\n\n            ","\n            ","\n\n        </div>\n        ",[">","sidebarTemplate"],"\n        "],["\n        ",[">","guestPageTemplate"],"\n        "]],"\n    </div>\n    ",[">","reactiveOverlaysTemplate"]])),Meteor._def_template("jsonContentPanelTemplate",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"showJsonPanel"]],['\n    <div id="json-content" class="row panel jsondata notepad">\n        ',["{",[[0,"jsonData"]]],"\n    </div>\n    "]]])),Meteor._def_template("dropboxAlertTemplate",Handlebars.json_ast_to_func(['<div id="dropboxAlertCard" class="alert-card">\n        ',[">","taskDetailCardTemplate"],"\n    </div>"]))}.call(this),function(){Meteor._def_template("sidebarTemplate",Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"sidebarIsVisible"]],['\n    <div class="doesnt-overlap-header fixed-layout hide-for-small helveticas" id="sidebarPane">\n        ',[">","listsTemplate"],"\n\n        ",["#",[[0,"if"],[0,"isWorkqueuesPage"]],["\n        ",[">","workqueuesPageSidebarTemplate"],"\n        "]],"\n\n        ",["#",[[0,"if"],[0,"isProfilePage"]],["\n        ",[">","profilePageSidebarTemplate"],"\n        "]],"\n\n        ",["#",[[0,"if"],[0,"isCommunityPage"]],["\n        ",[">","communityPageSidebarTemplate"],"\n        "]],"\n\n    </div>\n    "]]])),Meteor._def_template("listsTemplate",Handlebars.json_ast_to_func(['<!-- //TODO:  rename listsTemplate to something else? -->\n    <div id="listsTemplate" class="list-tab-container">\n        <!-- //TODO:  create static lists buttons-->\n        <!-- //TODO:  create list of personally owned tasks -->\n        <!-- //TODO:  create list of personally owned, completed tasks -->\n        <!-- //TODO:  create list of personally owned, uncompleted tasks -->\n        <!-- //TODO:  create list of personally owned, starred tasks -->\n\n        ',["#",[[0,"each"],[0,"lists"]],['\n            <div class="list">\n                <div class="',["{",[[0,"selected"]]],' sidebar-tab note">\n                    ',["#",[[0,"if"],[0,"editing"]],['\n                    <div class="edit">\n                        <input class="list-name-input" id="list-name-input" type="text" value="',["{",[[0,"name"]]],'" />\n                    </div>\n                    '],['\n                    <div class="display">\n                        <a class="list-name ',["{",[[0,"name_class"]]],'" href="/',["{",[[0,"_id"]]],'">\n                            ',["{",[[0,"name"]]],"\n                        </a>\n                    </div>\n                    "]],"\n                </div>\n            </div>\n        "]],"\n    </div>"])),Meteor._def_template("workqueuesPageSidebarTemplate",Handlebars.json_ast_to_func([[">","tagFilterTemplate"]])),Meteor._def_template("tagFilterTemplate",Handlebars.json_ast_to_func(['<div id="tagTiles">\n        <hr class="gray-line">\n        <div id="tag-filter" class="tag-list">\n            ',["#",[[0,"each"],[0,"tags"]],['\n            <div class="sidebar-tab ',["{",[[0,"selected"]]],'">\n                ',["{",[[0,"tag_text"]]],' <span class="count">(',["{",[[0,"count"]]],")</span>\n            </div>\n            "]],"\n        </div>\n    </div>"])),Meteor._def_template("communityPageSidebarTemplate",Handlebars.json_ast_to_func(["<!-- //TODO:  create webBrowserSidebarTemplate -->\n    <!-- //TODO:  move buttonTilesTemplate to webBrowserSidebarTemplate -->\n    ",[">","buttonTilesTemplate"]])),Meteor._def_template("buttonTilesTemplate",Handlebars.json_ast_to_func(['<div id="buttonTiles" class="sidebar-tiles column-container">\n        <!-- //TODO:  research default weblinks for each category -->\n        <!-- //TODO:  trigger navigation to webpage on each button -->\n        <hr style="border: 1px solid lightgray;">\n        <div class="column-one-of-two">\n            <img class="sidebar-tile" src="/iconsbw/CT_Scan.png">\n            <img class="sidebar-tile" src="/iconsbw/Blood_Bag.png">\n            <img class="sidebar-tile" src="/iconsbw/Blood_Pressure.png">\n            <img class="sidebar-tile" src="/iconsbw/Prescription.png">\n            <img class="sidebar-tile" src="/iconsbw/Xray.png">\n        </div>\n        <div class="column-two-of-two">\n            <img class="sidebar-tile" src="/iconsbw/Health_Meter.png">\n            <img class="sidebar-tile" src="/iconsbw/Hospital.png">\n            <img class="sidebar-tile" src="/iconsbw/ID_Bracelet.png">\n            <img class="sidebar-tile" src="/iconsbw/Insurance_Plan.png">\n            <img class="sidebar-tile" src="/iconsbw/Labs.png">\n        </div>\n    </div>'])),Meteor._def_template("profilePageSidebarTemplate",Handlebars.json_ast_to_func(['<hr style="border: 1px solid lightgray;">\n    <div class="',["{",[[0,"json_inspector_selected"]]],' unselectable object-inspector-tab sidebar-tab note">\n        <div class="display">\n            <span class="pictograph">(</span>\n            Object Inspector\n        </div>\n    </div>\n    <hr class="gray-line">\n    <div class="',["{",[[0,"colaborators_selected"]]],' collaborators-tab sidebar-tab note">\n        <div class="display">\n            <span class="pictograph">g</span>\n            Collaborators\n        </div>\n    </div>\n    <div class="',["{",[[0,"hipaa_log_selected"]]],' hipaa-audit-tab sidebar-tab note">\n        <div class="display">\n            <span class="pictograph">4</span>\n            HIPAA Audit Log\n        </div>\n    </div>']))}.call(this),function(){Meteor.startup(function(){document.body.appendChild(Spark.render(Meteor._def_template(null,Handlebars.json_ast_to_func([[">","headerBarTemplate"],"\n    ",[">","appContainerTemplate"],"\n    ",[">","footerBarTemplate"]]))))}),Meteor._def_template("headerBarTemplate",Handlebars.json_ast_to_func(['<div data-role="header" data-theme="none" class="header-nav-bar">\n        <ul class="nav-bar header-nav-bar">\n            <li class="pentasyllabicLogoListItem">\n                <img onclick=\'toggleSidebarVisibility();\' class="pentasyllabicLogo" src="/images/pentasyllabic.logo.square.transparent.png">\n            </li>\n            <li><a id="appTitle" onclick=\'showPage("#workqueuesPage");\' href="#">clinical-workqueues.pentasyllabic.com</a></li>\n        </ul>\n        <ul class="nav-bar header-nav-bar-right">\n            <li><a href="#" onclick=\'showPage("#profilePage"); Session.set("json_content", JSON.stringify(Meteor.user()));\'><span class="largish profile-icon pictograph">k  </span></a></li>\n            <li><a href="#">',["{",[[0,"loginButtons"],{align:"right"}]],"</a></li>\n        </ul>\n    </div>"])),Meteor._def_template("footerBarTemplate",Handlebars.json_ast_to_func([[">","jsonContentPanelTemplate"],'\n    <div id="footerActionBar" data-role="footer" data-theme="none" class="nav-bar bottom-anchor">\n        ',["#",[[0,"if"],[0,"currentUser"]],['\n        <ul class="nav-bar footer-nav-bar">\n            <!--<li><a href="#" onclick=\'showPage("#workqueuesPage");\'><span class="pictographs">4  </span>Workqueues</a></li>-->\n\n\n            <!-- //TODO:  extract sort button into workqueuesSortFooterTemplate -->\n            <!-- //TODO:  trigger workqueuesSortFooterTemplate to only display on workqueuesPage -->\n            <li class="sort-completed"><a href="#"><span class="largish ',["{",[[0,"sortCompletedSelected"]]],' pictographs">%</span></a></li>\n            <li class="sort-starred"><a href="#"><span class="largish ',["{",[[0,"sortStarredSelected"]]],' pictographs">*</span></a></li>\n            <li class="sort-alphabetical"><a href="#"><span class="largish ',["{",[[0,"sortAlphabeticallySelected"]]],' pictographs">4</span></a></li>\n\n        </ul>\n        <ul class="nav-bar footer-nav-bar-right">\n            <!-- //TODO:  add webBrowserVisibility icon and appropriate toggles -->\n            <li class="tutorial"><a href="#" onclick=\'\'><span class="largish pictograph">?</span></a></li>\n            <!-- //TODO:  add mobileDeviceStatus icons to listening/connected -->\n            <li>',[">","mobileDeviceStatus"],"</li>\n        </ul>\n        "]],"\n    </div>"]))}.call(this),function(){okCancelEvents=function(e,t){var n=t.ok||function(){},r=t.cancel||function(){},o={};return o["keyup "+e+", keydown "+e+", focusout "+e]=function(e){if("keydown"===e.type&&27===e.which)r.call(this,e);else if("keyup"===e.type&&13===e.which||"focusout"===e.type){var t=(e.target.value||"")+"";t?n.call(this,t,e):r.call(this,e)}},o},activateInput=function(e){e.focus(),e.select()},genericUserDisplayObject={userName:function(){return Meteor.user().profile.name},userAvatar:function(){try{var e="images/placeholder-240x240.gif";return Meteor.user().profile&&(e=$.trim(Meteor.user().profile.avatar)),console.log("profile avatar src: "+e),e}catch(t){console.log(t)}},isAdmin:function(){return"Administrator"===Meteor.user().profile.role?!0:!1}}}.call(this),function(){browser=navigator.appName,version=navigator.appVersion,check=function(e){return e.test(navigator.userAgent.toLowerCase())},isStrict="CSS1Compat"===document.compatMode,isOpera=check(/opera/),isChrome=check(/chrome/),isWebKit=check(/webkit/),isSafari=!isChrome&&check(/safari/),isSafari2=isSafari&&check(/applewebkit\/4/),isSafari3=isSafari&&check(/version\/3/),isSafari4=isSafari&&check(/version\/4/),isIE=!isOpera&&check(/msie/),isIE7=isIE&&check(/msie 7/),isIE8=isIE&&check(/msie 8/),isIE6=isIE&&!isIE7&&!isIE8,isGecko=!isWebKit&&check(/gecko/),isGecko2=isGecko&&check(/rv:1\.8/),isGecko3=isGecko&&check(/rv:1\.9/),isBorderBox=isIE&&!isStrict,isWindows=check(/windows|win32/),isMac=check(/macintosh|mac os x/),isIOS=check(/ios/),isAir=check(/adobeair/),isLinux=check(/linux/),isSecure=/^https/i.test(window.location.protocol),isIE7InIE8=isIE7&&7===document.documentMode,isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)}.call(this),function(){var e=Backbone.Router.extend({routes:{":list_id":"main"},main:function(e){try{"index.html"===e?(Session.set("list_id",null),Session.set("tag_filter",null)):(Session.set("list_id",e),Session.set("tag_filter",null))}catch(t){console.log(t)}},setList:function(e){this.navigate(e,!0)}});Router=new e}.call(this),function(){function e(){console.log("detecting orientation: "+window.orientation),window.onorientationchange!==void 0&&(0===window.orientation?Session.equals("current_page","#communityPage")?n():Session.equals("current_page","#profilePage")?resizeProfilePageForPortrait():Session.equals('current_page,"#workqueuesPage')&&setSidebarVisibility():90===window.orientation?Session.equals("current_page","#communityPage")?t():Session.equals('current_page,"#workqueuesPage')&&setSidebarVisibility():-90===window.orientation?Session.equals("current_page","#communityPage")?t():Session.equals('current_page,"#workqueuesPage')&&setSidebarVisibility():180===window.orientation&&(Session.equals("current_page","#communityPage")?n():Session.equals("current_page","#profilePage")?resizeProfilePageForPortrait():Session.equals('current_page,"#workqueuesPage')&&setSidebarVisibility()))}function t(){$("#communityInspectionBlock").removeClass("fullwidth padded"),$("#communityInspectionBlock").removeClass("bottom-anchored"),$("#communityInspectionColumn").removeClass("fullwidth padded"),$("#communityInspectionBlock").addClass("forty-percent-width"),$("#communityInspectionBlock").addClass("first-column-position")}function n(){$("#communityInspectionBlock").removeClass("forty-percent-width"),$("#communityInspectionBlock").removeClass("first-column-position"),$("#communityInspectionBlock").addClass("fullwidth padded"),$("#communityInspectionBlock").addClass("bottom-anchored"),$("#communityInspectionColumn").addClass("fullwidth padded")}e(),window.onorientationchange=e,Template.appContainerTemplate.rendered=function(){isMobile&&$(".touch-trigger").removeClass("touch-disabled")},Template.jsonContentPanelTemplate.showJsonPanel=function(){return Session.get("show_profile_json_panel")},Template.jsonContentPanelTemplate.jsonData=function(){return Session.get("json_content")},monitorDropbox=function(){try{return!1}catch(e){console.log(e)}},Template.dropboxAlertTemplate.events({"click #dropboxAlertCard":function(){Meteor.users.update(Meteor.userId(),{$unset:{"profile.dropbox":""}},function(){}),Session.set("selected_task_id",Todos.findOne(Meteor.user().profile.dropbox)._id)}}),Template.dropboxAlertTemplate.alert_text=function(){try{return Todos.findOne(Meteor.user().profile.dropbox).text}catch(e){console.log(err)}},Template.dropboxAlertTemplate.alert_image=function(){try{var e=Todos.findOne(Session.get("selected_task_id"));return e.image?e.image:"/images/placeholder-240x240.gif"}catch(t){console.log(err)}},Template.dropboxAlertTemplate.alert_id=function(){try{return Todos.findOne(Meteor.user().profile.dropbox)._id}catch(e){console.log(err)}},Template.dropboxAlertTemplate.alert_tag_list=function(){try{return Todos.findOne(Meteor.user().profile.dropbox).text}catch(e){console.log(err)}},Template.dropboxAlertTemplate.alert_link=function(){try{return Todos.findOne(Meteor.user().profile.dropbox).weblink}catch(e){console.log(err)}}}.call(this),function(){toggleJsonPanel=function(){Session.get("show_profile_json_panel")?Session.set("show_profile_json_panel",!1):Session.set("show_profile_json_panel",!0)},toggleButtonVisibility=function(){Session.get("show_button_tiles")?Session.set("show_button_tiles",!1):Session.set("show_button_tiles",!0)},toggleSession=function(e){Session.get(e)?Session.set(e,!1):Session.set(e,!0)},toggleSidebarVisibility=function(){window.innerWidth>767&&(Session.get("show_sidebar_panel")?(Session.set("show_sidebar_panel",!1),layoutAppWithoutSidebar()):(Session.set("show_sidebar_panel",!0),layoutAppWithSidebar()))},setSidebarVisibility=function(){Session.get("is_sidebar_available")?Session.get("show_sidebar_panel")?layoutAppWithSidebar():layoutAppWithoutSidebar():layoutAppWithoutSidebar()},layoutAppWithSidebar=function(){console.log("layoutAppWithSidebar();"),$("#mainLayoutPane").removeClass("sidebar-hidden-landscape-layout"),$("#mainLayoutPane").addClass("sidebar-shown-landscape-layout"),$("#mainLayoutPane").css("width",window.innerWidth-195)},layoutAppWithoutSidebar=function(){console.log("layoutAppWithoutSidebar();"),$("#mainLayoutPane").removeClass("sidebar-shown-landscape-layout"),$("#mainLayoutPane").addClass("sidebar-hidden-landscape-layout"),$("#mainLayoutPane").css("width",window.innerWidth)},toggleTaskDetailPanel=function(){Session.get("show_task_detail_panel")?(Session.set("show_task_detail_panel",!1),layoutAppWithoutDetailedTask()):(Session.set("show_task_detail_panel",!0),layoutAppWithDetailedTask())},setTaskDetailVisibility=function(){Session.get("show_task_detail_panel")?layoutAppWithDetailedTask():layoutAppWithoutDetailedTask()},layoutAppWithDetailedTask=function(){$("#new-todo-box").removeClass("hidden"),$("#items-view").css("padding-bottom","260px")},layoutAppWithoutDetailedTask=function(){$("#new-todo-box").addClass("hidden"),$("#items-view").css("padding-bottom","0px")}}.call(this),function(){hidePages=function(){try{$(".page").addClass("hidden")}catch(e){console.log(e)}},showPage=function(e){console.log("showPage("+e+");");try{Meteor.userId()?(hidePages(),$(e).removeClass("hidden"),Session.set("current_page",e),isMobile&&detectOrientation()):showPage("#guestPage")}catch(t){console.log(t)}},showHomePage=function(){console.log("showHomePage();");try{Meteor.userId()?showCurrentSessionPage():showPage("#guestPage")}catch(e){console.log(e)}},showCurrentSessionPage=function(){console.log("showCurrentSessionPage();");try{Meteor.userId()?null!==Session.get("current_page")?showPage(Session.get("current_page")):showPage("#workqueuesPage"):showPage("#guestPage")}catch(e){console.log(e)}},parseBreadCrumbs=function(e){try{switch(e){case"#hipaaPage":$("#appTitle").html("HIPAA Audit");break;case"#profilePage":$("#appTitle").html("Profile");break;default:$("#breadCrumbLink").html("clinical-workqueues.herokuapp.com")}}catch(t){console.log(t)}}}.call(this),function(){Template.sidebarTemplate.sidebarIsVisible=function(){try{return Session.get("appWidth")>767?Session.get("show_sidebar_panel"):!1}catch(e){console.log(e)}},Template.sidebarTemplate.showButtonTiles=function(){try{return Session.get("show_button_tiles")?!0:!1}catch(e){console.log(e)}},Template.sidebarTemplate.events({"click .sidebar-tile":function(){alert("this button could be configured to send data to and launch an existing applicatoin in *your* workflow.  Contact pentasyllabic.com to learn more.")},"touchmove #sidebarPane":function(e){e.preventDefault()}}),Template.sidebarTemplate.rendered=function(){try{void 0===Session.get("list_id")&&Session.set("list_id",Lists.findOne()._id)}catch(e){console.log(e)}},Template.sidebarTemplate.isWorkqueuesPage=function(){try{return"#workqueuesPage"===Session.get("current_page")?!0:!1}catch(e){console.log(e)}},Template.sidebarTemplate.isProfilePage=function(){try{return"#profilePage"===Session.get("current_page")?!0:!1}catch(e){console.log(e)}},Template.sidebarTemplate.isCommunityPage=function(){try{return"#communityPage"===Session.get("current_page")?!0:!1}catch(e){console.log(e)}},Template.listsTemplate.lists=function(){try{return Lists.find({},{sort:{name:1}})}catch(e){console.log(e)}},Template.listsTemplate.events({"mousedown .list":function(){Router.setList(this._id),Session.set("list_id",this._id),showPage("#workqueuesPage"),Meteor.flush()},"click .list":function(e){e.preventDefault()},"dblclick .list":function(e,t){Session.set("editing_listname",this._id),Meteor.flush(),activateInput(t.find("#list-name-input"))}}),Template.listsTemplate.events(okCancelEvents("#new-list",{ok:function(e,t){var n=Lists.insert({name:e});Router.setList(n),t.target.value=""}})),Template.listsTemplate.events(okCancelEvents("#list-name-input",{ok:function(e){Lists.update(this._id,{$set:{name:e}}),Session.set("editing_listname",null)},cancel:function(){Session.set("editing_listname",null)}})),Template.listsTemplate.selected=function(){try{return Session.equals("list_id",this._id)?"selected":""}catch(e){console.log(e)}},Template.listsTemplate.name_class=function(){try{return this.name?"":"empty"}catch(e){console.log(e)}},Template.listsTemplate.editing=function(){try{return Session.equals("editing_listname",this._id)}catch(e){console.log(e)}},Template.tagFilterTemplate.tags=function(){var e=[],t=0;return Todos.find({list_id:Session.get("list_id")}).forEach(function(n){_.each(n.tags,function(t){var n=_.find(e,function(e){return e.tag===t});n?n.count++:e.push({tag:t,count:1})}),t++}),e=_.sortBy(e,function(e){return e.tag}),e.unshift({tag:null,count:t}),e},Template.tagFilterTemplate.tag_text=function(){return this.tag||"All items"},Template.tagFilterTemplate.selected=function(){return Session.equals("tag_filter",this.tag)?"selected":""},Template.tagFilterTemplate.events({"mousedown .sidebar-tab":function(){Session.equals("tag_filter",this.tag)?Session.set("tag_filter",null):Session.set("tag_filter",this.tag)}})}.call(this),function(){Template.iconAssetsPageTemplate.icon_list=function(){return CategoryIcons.find()},Template.iconAssetsPageTemplate.snomed_count=function(){return CategoryIcons.find().count()},Template.iconAssetsPageTemplate.events({"click .icon-item":function(){Session.set("is_modal_dialog",!1),Session.set("pre_modal_sidebar_panel_state",null),Session.set("show_sidebar_panel",Session.get("pre_modal_sidebar_panel_state")),Todos.update(Session.get("selected_task_id"),{$set:{image:this.image}}),showPage(Session.get("pre_modal_page"))}}),Template.iconAssetTemplate.icon_image=function(){return this.image}}.call(this),function(){Template.communityPageTemplate.helpers(genericUserDisplayObject),Template.communityInspectionColumn.helpers(genericUserDisplayObject),Template.communityPageTemplate.resize=function(){try{return Session.get("show_sidebar_panel")?($("#communityInspectionBlock").css("width",window.innerWidth-195),$("#communityInspectionBlock").css("left",.05*(window.innerWidth-195))):layoutAppWithoutSidebar(),Session.get("appWidth")}catch(e){console.log(e)}},Template.communityPageTemplate.events({"click .destroy":function(){Meteor.users.update(Meteor.userId(),{$pull:{"profile.collaborators":this}})},"keyup #communitySearchInput":function(){Session.set("community_members_filter",$("#communitySearchInput").val()),Meteor.flush()},"click #communitySearchInput":function(){"search community members"===$("#communitySearchInput").val()&&$("#communitySearchInput").val("")}}),Template.communityInspectionColumn.showQuickViewPanel=function(){try{return console.log("Template.communityPageTemplate.showQuickViewPanel"),Session.get("show_quick_view_panel")}catch(e){console.log(e)}},Template.communityInspectionColumn.rendered=function(){try{console.log("Template.communityInspectionColumn.rendered")}catch(e){console.log(e)}},Template.communityInspectionColumn.search_text_color=function(){try{return null===Session.get("community_members_filter")?"lightgray":""}catch(e){console.log(e)}},Template.userQuickViewCard.user_id=function(){try{var e=Meteor.users.findOne({_id:Session.get("selected_community_member")});return e?e._id:!1}catch(t){console.log(t)}},Template.userQuickViewCard.user_name=function(){try{var e=Meteor.users.findOne({_id:Session.get("selected_community_member")});return e.profile.name}catch(t){console.log(t)}},Template.userQuickViewCard.user_email=function(){try{var e=Meteor.users.findOne({_id:Session.get("selected_community_member")});if(e.emails)return e.emails.address}catch(t){console.log(t)}},Template.userQuickViewCard.user_avatar=function(){try{return Session.get("selected_community_member_avatar_path")}catch(e){console.log(e)}},Template.communityInspectionColumn.isBroadcastRecipient=function(){try{var e=!1;return e?"":"hidden"}catch(t){console.log(t)}},Template.communityInspectionColumn.events({"touchmove #communityList":function(e){e.preventDefault()},"click #userQuickViewPanel":function(){setActiveCollaborator(Session.get("selected_community_member")),showPage("#profilePage")}}),Template.communityMembersList.communityUsers=function(){return Meteor.users.find()},Template.userItemTemplate.events({"dblclick .user-card":function(){Meteor.users.update(Meteor.userId(),{$addToSet:{"profile.carewatch":{_id:this._id,name:this.profile.name}}}),log_hipaa_event("Added "+this.profile.name+" to carewatch list.",LogLevel.Hipaa,Meteor.user()._id),Meteor.users.update(this._id,{$addToSet:{"profile.collaborators":{_id:Meteor.userId(),name:Meteor.user().profile.name}}},function(){Meteor.flush(),hidePages(),showPage("#communityPage")}),log_hipaa_event("Permission granted to view health history belonging to "+Meteor.user().profile.name+".",LogLevel.Hipaa,this._id)},"click .user-card":function(e){e.preventDefault(),Session.set("json_content",JSON.stringify(this)),Session.set("selected_community_member",this._id),Session.set("show_quick_view_panel",!0),this.services&&this.services.facebook?Session.set("selected_community_member_avatar_path","http://graph.facebook.com/"+this.services.facebook.id+"/picture/?type=large"):this.profile?Session.set("selected_community_member_avatar_path",$.trim(this.profile.avatar)):Session.set("selected_community_member_avatar_path","/images/placeholder-240x240.gif"),Meteor.flush()},"click .transfer-icon":function(){setActiveCollaborator(this._id)}}),Template.userItemTemplate.userEmail=function(){try{return console.log("Template.userItemTemplate.userEmail"),this.emails?this.emails.address:"Emails not available."}catch(e){console.log(e)}},Template.userItemTemplate.userName=function(){try{return console.log("Template.userItemTemplate.userName"),this.emails?this.profile.name:"User name not available."}catch(e){console.log(e)}},Template.userItemTemplate.userImage=function(){try{return this.services&&this.services.facebook?"http://graph.facebook.com/"+this.services.facebook.id+"/picture/?type=large":this.profile?$.trim(this.profile.avatar):"/images/placeholder-240x240.gif"}catch(e){console.log(err)}},toInteger=function(e){return Math.round(Number(e))},setActiveCollaborator=function(e){try{Meteor.users.update(Meteor.userId(),{$unset:{"profile.activeCollaborator":""}}),Meteor.users.update(Meteor.userId(),{$set:{"profile.activeCollaborator":e}})}catch(t){console.log(t)}},toggleActiveCollaborator=function(e){try{e===Meteor.user().profile.activeCollaborator?Meteor.users.update(Meteor.userId(),{$unset:{"profile.activeCollaborator":e}}):setActiveCollaborator(e)}catch(t){console.log(t)}},toggleCollaboratorsMembership=function(e){try{e===Meteor.user().profile.activeCollaborator?Meteor.users.update(Meteor.userId(),{$unset:{"profile.activeCollaborator":e}}):(Meteor.users.update(Meteor.userId(),{$unset:{"profile.activeCollaborator":""}}),Meteor.users.update(Meteor.userId(),{$set:{"profile.activeCollaborator":e}}))}catch(t){console.log(t)}},toggleCarewatchMembership=function(){try{selectedUserId===Meteor.user().profile.activeCollaborator?Meteor.users.update(Meteor.userId(),{$unset:{"profile.activeCollaborator":selectedUserId}}):(Meteor.users.update(Meteor.userId(),{$unset:{"profile.activeCollaborator":""}}),Meteor.users.update(Meteor.userId(),{$set:{"profile.activeCollaborator":selectedUserId}}))}catch(e){console.log(e)}}}.call(this),function(){Template.guestPageTemplate.rendered=function(){log_event("Template.guestPageTemplate.rendered",LogLevel.Signpost,this)},Template.guestPageTemplate.events({"click .synopsis-tab":function(){$(".card-container").addClass("hidden"),$(".vision").addClass("hidden"),$(".synopsis").removeClass("hidden"),$("#currentScreenshotContainer").removeClass("hidden")},"click .features-tab":function(){$(".card-container").addClass("hidden"),$(".vision").addClass("hidden"),$(".features").removeClass("hidden")},"click .vision-tab":function(){$(".card-container").addClass("hidden"),$(".vision").removeClass("hidden"),$("#currentScreenshotContainer").addClass("hidden")},"click .roadmap-tab":function(){$(".card-container").addClass("hidden"),$(".vision").addClass("hidden"),$(".roadmap").removeClass("hidden")},"click .accounts-tab":function(){$(".card-container").addClass("hidden"),$(".vision").addClass("hidden"),$(".accounts").removeClass("hidden")},"click .betatest-tab":function(){$(".card-container").addClass("hidden"),$(".vision").addClass("hidden"),$(".betatest").removeClass("hidden")},"click .all-tab":function(){$(".card-container").removeClass("hidden"),$(".vision").removeClass("hidden")},"click .moneyShot":function(){showImageOverlay("#day-of-glass-money-shot-34ratio")},"click #currentScreenshot":function(){showImageOverlay("#currentScreenshotImage")}})}.call(this),function(){Template.profilePageTemplate.rendered=function(){console.log("Template.profilePageTemplate.rendered")},Template.profilePageTemplate.receivedNewAlert=function(){try{return monitorDropbox()}catch(e){console.log(e)}},Template.userCardTemplate.rendered=function(){try{$("#profilePage").css("min-height",window.innerHeight)}catch(e){console.log(e)}},Template.userCardTemplate.resize=function(){try{return Session.get("appWidth")>768?Session.get("show_sidebar_panel")?layoutAppWithSidebar():layoutAppWithoutSidebar():layoutAppWithoutSidebar(),Session.get("appWidth")}catch(e){console.log(e)}},Template.userCardTemplate.editing_email=function(){try{return console.log("Template.profilePageTemplate.editing_email"),Session.equals("editing_profile_email","true")}catch(e){console.log(e)}},Template.userCardTemplate.editing_name=function(){try{return console.log("Template.profilePageTemplate.editing_name"),Session.equals("editing_profile_name","true")}catch(e){console.log(e)}},Template.userCardTemplate.editing_birthdate=function(){try{return console.log("Template.profilePageTemplate.editing_birthdate"),Session.equals("editing_profile_birthdate","true")}catch(e){console.log(e)}},Template.userCardTemplate.editing_avatar=function(){try{return console.log("Template.profilePageTemplate.editing_avatar"),Session.equals("editing_profile_avatar","true")}catch(e){console.log(e)}},Template.userCardTemplate.events(okCancelEvents("#userAvatarInput",{ok:function(e){console.log("userAvatarInput - ok"),Meteor.users.update(Meteor.userId(),{$set:{"profile.avatar":e}}),Session.set("editing_profile_avatar","false"),Meteor.flush()},cancel:function(){console.log("userAvatarInput - cancel"),Session.set("editing_profile_avatar","false")}})),Template.userCardTemplate.events(okCancelEvents("#userDateOfBirthInput",{ok:function(e){console.log("userDateOfBirthInput - ok"),Meteor.users.update(Meteor.userId(),{$set:{"profile.dateOfBirth":e}}),Session.set("editing_profile_birthdate","false"),Meteor.flush()},cancel:function(){console.log("userDateOfBirthInput - cancel"),Session.set("editing_profile_birthdate","false")}})),Template.userCardTemplate.events(okCancelEvents("#userNameInput",{ok:function(e){console.log("userNameInput - ok"),Meteor.users.update(Meteor.userId(),{$set:{"profile.name":e}}),Session.set("editing_profile_name","false"),Meteor.flush()},cancel:function(){console.log("userNameInput - cancel"),Session.set("editing_profile_name","false")}})),Template.userCardTemplate.events(okCancelEvents("#userEmailInput",{ok:function(e){console.log("userEmailInput - cancel"),Meteor.users.update(Meteor.userId(),{$set:{emails:[{address:e}]}}),Session.set("editing_profile_email","false"),Meteor.flush()},cancel:function(){console.log("userEmailInput - cancel"),Session.set("editing_profile_email","false")}})),Template.userCardTemplate.events({"dblclick .userEmailDisplay":function(e,t){Session.set("editing_profile_email","true"),Meteor.flush(),activateInput(t.find("#profile-input-email"))},"click .userNameDisplay":function(e,t){Session.set("editing_profile_name","true"),Meteor.flush(),activateInput(t.find("#profile-input-name"))},"click .userDateOfBirthDisplay":function(e,t){Session.set("editing_profile_birthdate","true"),Meteor.flush(),activateInput(t.find("#profile-input-birth-date"))},"click .userAvatarDisplay":function(e,t){Session.set("editing_profile_avatar","true"),Meteor.flush(),activateInput(t.find("#profile-input-avatar"))},"click .userCollaboratorsDisplay":function(e,t){Session.set("editing_profile_collaborators","true"),Meteor.flush(),activateInput(t.find("#profile-input-collaborator"))}}),Template.userCardTemplate.user_name=function(){try{return Meteor.user().profile?Meteor.user().profile.name:"User profile not created yet."}catch(e){console.log(e)}},Template.userCardTemplate.user_id=function(){try{return Meteor.user()?Meteor.user()._id:"UserId not found."}catch(e){console.log(e)}},Template.userCardTemplate.user_email=function(){try{return Meteor.user().emails?Meteor.user().emails[0].address:"User email address not available right now."}catch(e){console.log(e)}},Template.userCardTemplate.user_birthdate=function(){try{return Meteor.user().profile?Meteor.user().profile.dateOfBirth:"User profile not created yet."}catch(e){console.log(e)}},Template.userCardTemplate.user_avatar=function(){try{return Meteor.user().profile?Meteor.user().profile.avatar:"User profile not created yet."}catch(e){console.log(e)}},Template.userCardTemplate.user_dropbox=function(){try{return Meteor.user().profile.dropbox?Meteor.user().profile.dropbox:"No dropbox item."}catch(e){console.log(e)}},Template.userCardTemplate.user_active_collaborator=function(){try{return Meteor.user().profile.activeCollaborator?Meteor.users.findOne(Meteor.user().profile.activeCollaborator).profile.name:"No active collaborator currently set."
}catch(e){console.log(e)}},Template.userCardTemplate.user_image=function(){try{return"http://graph.facebook.com/"+Meteor.user().services.facebook.id+"/picture/?type=large"}catch(e){console.log(e)}},Template.activeCollaboratorCardTemplate.events({"click #activeCollaboratorProfileCard":function(){showPage("#communityPage")}}),Template.activeCollaboratorCardTemplate.collaborator_avatar=function(){try{return Meteor.user().profile.activeCollaborator?Meteor.users.findOne(Meteor.user().profile.activeCollaborator).profile.avatar:"/images/placeholder-240x240.gif"}catch(e){console.log(e)}},Template.activeCollaboratorCardTemplate.collaborator_birthdate=function(){try{return Meteor.user().profile.birthdate?Meteor.users.findOne(Meteor.user().profile.activeCollaborator).profile.birthdate:"----/--/--"}catch(e){console.log(e)}},Template.activeCollaboratorCardTemplate.collaborator_name=function(){try{return Meteor.user().profile.name?Meteor.users.findOne(Meteor.user().profile.activeCollaborator).profile.name:"System Ghost"}catch(e){console.log(e)}},Template.profilePageSidebarTemplate.events({"click .object-inspector-tab":function(){toggleJsonPanel()},"click .collaborators-tab":function(){Session.get("show_active_collaborator_card")?Session.set("show_active_collaborator_card",!1):Session.set("show_active_collaborator_card",!0)},"click .hipaa-audit-tab":function(){Session.get("show_hipaa_audit_log_card")?Session.set("show_hipaa_audit_log_card",!1):Session.set("show_hipaa_audit_log_card",!0)}}),Template.profilePageSidebarTemplate.json_inspector_selected=function(){try{return Session.get("show_profile_json_panel")?"selected":""}catch(e){console.log(e)}},Template.profilePageSidebarTemplate.colaborators_selected=function(){try{return Session.get("show_active_collaborator_card")?"selected":""}catch(e){console.log(e)}},Template.profilePageSidebarTemplate.hipaa_log_selected=function(){try{return Session.get("show_hipaa_audit_log_card")?"selected":""}catch(e){console.log(e)}},Template.profilePageTemplate.isActiveCollaboratorVisible=function(){try{return Session.get("show_active_collaborator_card")}catch(e){console.log(e)}},Template.profilePageTemplate.isHipaaAuditLogVisible=function(){try{return Session.get("show_active_collaborator_card")}catch(e){console.log(e)}}}.call(this),function(){layoutWorkqueuesPage=function(){console.log("layoutworkquesPage();"),window.innerWidth>767?Session.get("show_sidebar_panel")?($("#mainLayoutPane").css("width",window.innerWidth-195),$(".card-body-resize").css("width",window.innerWidth-235),$(".card-footer-resize").css("width",window.innerWidth-235),$(".web-link-controls").css("width",window.innerWidth-500),$(".detailed-task-card-controls").css("right",217)):($("#mainLayoutPane").css("width",window.innerWidth),$(".card-body-resize").css("width",window.innerWidth-40),$(".card-footer-resize").css("width",window.innerWidth-40),$(".web-link-controls").css("width",window.innerWidth-260),$(".detailed-task-card-controls").css("right",21)):767>window.innerWidth?($("#mainLayoutPane").css("width",window.innerWidth),$(".card-body-resize").css("width",window.innerWidth-40),$(".card-footer-resize").css("width",window.innerWidth-40),$(".web-link-controls").css("width",window.innerWidth-260),$(".detailed-task-card-controls").css("right",21)):480>window.innerWidth&&($("#mainLayoutPane").css("width",window.innerWidth),$(".card-body-resize").css("width",window.innerWidth-40),$(".card-footer-resize").css("width",window.innerWidth-40),$(".web-link-controls").css("width",window.innerWidth-260),$(".detailed-task-card-controls").css("right",21))},Template.workqueuesPageTemplate.rendered=function(){try{console.log("Template.workqueuesPageTemplate.rendered"),layoutWorkqueuesPage()}catch(e){console.log(e)}},Template.workqueuesPageTemplate.resized=function(){try{return setSidebarVisibility(),layoutWorkqueuesPage(),Session.get("resized")}catch(e){console.log(e)}},Template.workqueuesPageTemplate.receivedNewAlert=function(){try{return null==Meteor.user().profile.dropbox?!1:!0}catch(e){console.log(e)}},Template.workqueuesPageTemplate.events({"click #newTaskInput":function(){try{"add new task"===$("#newTaskInput").val()&&($("#newTaskInput").removeClass("lightgray"),$("#newTaskInput").val(""))}catch(e){console.log(e)}}}),Template.workqueuesPageTemplate.events(okCancelEvents("#newTaskInput",{ok:function(e,t){try{console.log("ok called on new todo item");var n=Session.get("tag_filter");console.log("text.length: "+e.length),e.length?(console.log("text: "+e),console.log("list_id: "+Session.get("list_id")),console.log("owner: "+Meteor.userId()),Meteor.call("createNewTask",{text:e,list_id:Session.get("list_id"),done:!1,star:!1,timestamp:(new Date).getTime(),owner:Meteor.userId,tags:n?[n]:[],"public":"public"},function(e,t){console.log("error: "+e),console.log("todo: "+t)})):Session.set("createError","It needs a title and a description, or why bother?"),t.target.value=""}catch(r){console.log(r)}},cancel:function(){$("#newTaskInput").addClass("lightgray"),$("#newTaskInput").val("add new task")}})),Template.workqueueTemplate.any_list_selected=function(){try{return Session.equals("list_id",void 0)?!1:!Session.equals("list_id",null)}catch(e){}},Template.workqueueTemplate.todos=function(){try{var e=Session.get("list_id");if(console.log("list_id:"+Session.get("list_id")),!e)return{};var t={list_id:e},n=Session.get("tag_filter");n&&(t.tags=n);var r={timestamp:1};return Session.get("sort_workqueues_completed")&&(r={done:1}),Session.get("sort_workqueues_starred")&&(r={star:1}),Session.get("sort_workqueues_alphabetically")&&(r={text:1}),Todos.find(t,{sort:r})}catch(o){console.log(o)}},Template.workqueueTemplate.showTaskDetail=function(){try{return Session.get("show_task_detail_panel")}catch(e){console.log(e)}},Template.taskItemTemplate.showDeleteButton=function(){try{return Session.get("selected_task_delete_id")===this._id?!0:!1}catch(e){console.log(e)}},Template.taskItemTemplate.tag_objs=function(){try{var e=this._id;return _.map(this.tags||[],function(t){return{todo_id:e,tag:t}})}catch(t){console.log(t)}},Template.taskItemTemplate.adding_tag=function(){try{return Session.equals("editing_addtag",this._id)}catch(e){console.log(e)}},Template.taskItemTemplate.done_class=function(){try{return this.done?"done":""}catch(e){console.log(e)}},Template.taskItemTemplate.task_complete=function(){try{return this.done?"green":"lightgray"}catch(e){console.log(e)}},Template.taskItemTemplate.task_text_complete=function(){try{return this.done?"strikeout":""}catch(e){console.log(e)}},Template.taskItemTemplate.task_star=function(){try{return this.star?"goldenrod":"lightgray"}catch(e){console.log(e)}},Template.taskItemTemplate.editing=function(){try{return Session.equals("editing_itemname",this._id)}catch(e){console.log(e)}},Template.taskItemTemplate.events({"touchstart .inline-list":function(e){Session.set("json_content",JSON.stringify(this)),Session.set("swipe_start",e.touches[0].pageX),Meteor.flush()},"touchend .inline-list":function(e){null!==Session.get("selected_task_delete_id")?Session.set("selected_task_delete_id",null):200>Math.abs(Session.get("swipe_start")-e.pageX)?Session.set("selected_task_delete_id",this._id):(Session.set("selected_task_delete_id",null),Session.set("selected_task_id",this._id),Session.set("selected_task_done_status",this.done),Session.set("selected_task_text",this.text),Session.set("show_task_detail_panel",!0),setTaskDetailVisibility()),Meteor.flush()},"mousedown .todo":function(){Session.set("json_content",JSON.stringify(this))},"dblclick .todo":function(){Session.set("show_task_detail_panel",!0),Meteor.flush()},"click .checkmark":function(e){Todos.update(this._id,{$set:{done:!this.done}}),e.preventDefault(),Meteor.flush()},"click .task-star":function(e){Todos.update(this._id,{$set:{star:!this.star}}),e.preventDefault(),Meteor.flush()},"click .task-info":function(){Session.get("show_task_detail_panel")?Session.set("show_task_detail_panel",!1):(Session.set("show_task_detail_panel",!0),Session.set("selected_task_id",this._id),Session.set("selected_task_done_status",this.done),Session.set("selected_task_star_status",this.star),Session.set("selected_task_text",this.text)),setTaskDetailVisibility(),Meteor.flush()},"click .task-delete":function(){confirm("Are you sure you want to delete task "+Session.get("selected_task_id")+"?")&&(Todos.remove(this._id),Meteor.flush())},"click .delete-button":function(){Session.set("selected_task_delete_id",null),Todos.remove(this._id),Meteor.flush()},"click .addtag":function(e,t){Session.set("editing_addtag",this._id),Meteor.flush(),activateInput(t.find("#edittag-input"))},"dblclick .display .todo-text":function(e,t){Session.set("editing_itemname",this._id),Meteor.flush(),activateInput(t.find("#todo-input")),Meteor.flush()},"click .remove":function(e){var t=this.tag,n=this.todo_id;e.target.parentNode.style.opacity=0,Meteor.setTimeout(function(){Todos.update({_id:n},{$pull:{tags:t}})},300),Meteor.flush()}}),Template.taskItemTemplate.events(okCancelEvents("#todo-input",{ok:function(e){Todos.update(this._id,{$set:{text:e}}),Session.set("editing_itemname",null)},cancel:function(){Session.set("editing_itemname",null)}})),Template.taskItemTemplate.events(okCancelEvents("#edittag-input",{ok:function(e){Todos.update(this._id,{$addToSet:{tags:e}}),Session.set("editing_addtag",null)},cancel:function(){Session.set("editing_addtag",null)}})),sendToActiveCollaborator=function(){try{Meteor.user().profile?Meteor.users.update(Meteor.user().profile.activeCollaborator,{$set:{"profile.dropbox":Session.get("selected_task_id")}}):console.log("Meteor profile not available.")}catch(e){console.log(e)}},Template.taskDetailCardTemplate.tag_list=function(){try{var e=Todos.findOne(Session.get("selected_task_id"));return _.map(e.tags||[],function(e){return{todo_id:Session.get("selected_task_id"),tag:e}})}catch(t){console.log(t)}},Template.taskDetailCardTemplate.adding_detailed_tag=function(){try{return Session.equals("editing_detailed_addtag",Session.get("selected_task_id"))}catch(e){console.log(e)}},Template.taskDetailCardTemplate.events({"click .task-detail-image-container":function(){Session.set("is_modal_dialog",!0),Session.set("pre_modal_sidebar_panel_state",Session.get("show_sidebar_panel")),Session.set("show_sidebar_panel",!1),Session.set("pre_modal_page","#workqueuesPage"),showPage("#iconAssetsPage")},"click .send-to-collaborator":function(){sendToActiveCollaborator()},"click #detailedTaskAddTagIcon":function(){Session.set("editing_detailed_addtag",Session.get("selected_task_id")),Meteor.flush(),$("#edittagInputDetailed").focus(),$("#edittagInputDetailed").select()},"click .remove":function(e){var t=this.tag,n=this.todo_id;e.target.parentNode.style.opacity=0,Meteor.setTimeout(function(){Todos.update({_id:n},{$pull:{tags:t}})},300)},"click .task-detail-checkmark":function(e){Todos.update(Session.get("selected_task_id"),{$set:{done:!Todos.findOne(Session.get("selected_task_id")).done}}),e.preventDefault(),Meteor.flush()},"click .task-detail-star":function(e){Todos.update(Session.get("selected_task_id"),{$set:{star:!Todos.findOne(Session.get("selected_task_id")).star}}),e.preventDefault(),Meteor.flush()},"click .task-detail-send":function(){sendToActiveCollaborator()},"click .task-detail-delete":function(){confirm("Are you sure you want to delete task "+Session.get("selected_task_id")+"?")&&(Session.set("show_task_detail_panel",!1),setTaskDetailVisibility(),Todos.remove(Session.get("selected_task_id")),Meteor.flush())},"click .card-header":function(){Session.set("show_task_detail_panel",!1),setTaskDetailVisibility(),Meteor.flush()}}),Template.taskDetailCardTemplate.events(okCancelEvents("#edittagInputDetailed",{ok:function(e){Todos.update(Session.get("selected_task_id"),{$addToSet:{tags:e}}),Session.set("editing_detailed_addtag",null)},cancel:function(){Session.set("editing_detailed_addtag",null)}})),Template.taskDetailCardTemplate.rendered=function(){Session.get("show_sidebar_panel")?($("#taskDetailCardBody").css("width",window.innerWidth-240),$("#taskDetailTagFooter").css("width",window.innerWidth-240),$(".card-delete-button").css("right",215)):($("#taskDetailCardBody").css("width",window.innerWidth-40),$("#taskDetailTagFooter").css("width",window.innerWidth-240),$(".card-delete-button").css("right",21)),$("#taskDetailCard").bind("mousemove",function(e){e.preventDefault()}),$("#taskDetailCard").bind("swipeleft",function(){sendToActiveCollaborator()}),$("#taskDetailCard").bind("swiperight",function(){sendToActiveCollaborator()}),$("#taskDetailCard").bind("swipeleftdown swipedown swiperightdown",function(){Session.set("show_task_detail_panel",!1),Meteor.flush()})},Template.taskDetailAnchorTemplate.showTaskDetailModalMask=function(){try{return!0}catch(e){console.log(e)}},Template.taskDetailCardTemplate.todo_id=function(){try{return Session.get("selected_task_id")}catch(e){console.log(e)}},Template.taskDetailCardTemplate.todo_text=function(){try{return Session.get("selected_task_text")}catch(e){console.log(e)}},Template.taskDetailCardTemplate.todo_done=function(){try{return Session.get("selected_task_done_status")?'checked="checked"':""}catch(e){console.log(e)}},Template.taskDetailCardTemplate.detailed_task_complete=function(){try{return Todos.findOne(Session.get("selected_task_id")).done?"green":"dimgray"}catch(e){console.log(e)}},Template.taskDetailCardTemplate.detailed_task_text_complete=function(){try{return Todos.findOne(Session.get("selected_task_id")).done?"strikeout":""}catch(e){console.log(e)}},Template.taskDetailCardTemplate.detailed_task_star=function(){try{return Todos.findOne(Session.get("selected_task_id")).star?"goldenrod":"dimgray"}catch(e){console.log(e)}},Template.taskDetailCardTemplate.activeCollaboratorName=function(){try{return Meteor.user().profile.activeCollaborator?Meteor.users.findOne(Meteor.user().profile.activeCollaborator).profile.name:" "}catch(e){console.log(e)}},Template.taskDetailCardTemplate.todo_image=function(){try{return Todos.findOne(Session.get("selected_task_id")).image?Todos.findOne(Session.get("selected_task_id")).image:"/images/placeholder-240x240.gif"}catch(e){console.log(e)}},Template.taskDetailCardTemplate.tag_objs=function(){try{return _.map(this.tags||[],function(e){return{todo_id:ession.get("selected_task_id"),tag:e}})}catch(e){console.log(e)}},Template.taskDetailCardTemplate.adding_tag=function(){try{return!1}catch(e){console.log(e)}}}.call(this),function(){Session.set("current_page","#workqueuesPage"),Session.set("tag_filter",null),Session.set("is_supported_browser",!1),Session.set("is_sidebar_available",!0),Session.set("show_sidebar_panel",!0),Session.set("show_header_breadcrumbs",!1),Session.set("show_new_task_input",!0),Session.set("show_community_search_input",!0),Session.set("show_task_detail_panel",!1),Session.set("show_profile_json_panel",!1),Session.set("show_active_collaborator_card",!0),Session.set("editing_addtag",null),Session.set("editing_listname",null),Session.set("editing_itemname",null),Session.set("editing_detailed_addtag",null),Session.set("selected_task_id",!1),Session.set("json_content","panel for inspecting data objects"),Session.set("breadcrumb_text",""),Session.set("appWidth",window.innerWidth),Session.set("is_modal_dialog",!1),isWebKit&&Session.set("is_supported_browser",!0),$(window).resize(function(){try{Session.set("resized",new Date),Session.set("appWidth",window.innerWidth),setSidebarAvailability()}catch(e){console.log(e)}}),Meteor.startup(function(){Backbone.history.start({pushState:!0})}),Template.appContainerTemplate.rendered=function(){try{console.log("Template.appContainerTemplate.rendered"),showCurrentSessionPage(),setSidebarAvailability()}catch(e){console.log(e)}},setSidebarAvailability=function(){try{767>window.innerWidth&&Session.set("is_sidebar_available",!1)}catch(e){console.log(e)}},Template.appContainerTemplate.loggedIn=function(){try{return console.log("loggedIn called"),null!=Meteor.userId()?(console.log("Meteor.userId() is null"),!0):(console.log("Meteor.userId(): "+Meteor.userId()),!1)}catch(e){console.log(e)}},Template.footerBarTemplate.events({"click .sort-completed":function(){Session.get("sort_workqueues_completed")?(Session.set("sort_workqueues_completed",!1),Session.set("sort_workqueues_starred",!1),Session.set("sort_workqueues_alphabetically",!1)):(Session.set("sort_workqueues_completed",!0),Session.set("sort_workqueues_starred",!1),Session.set("sort_workqueues_alphabetically",!1)),Meteor.flush()},"click .sort-starred":function(){Session.get("sort_workqueues_starred")?(Session.set("sort_workqueues_completed",!0),Session.set("sort_workqueues_starred",!1),Session.set("sort_workqueues_alphabetically",!1)):(Session.set("sort_workqueues_completed",!1),Session.set("sort_workqueues_starred",!0),Session.set("sort_workqueues_alphabetically",!1)),Meteor.flush()},"click .sort-alphabetical":function(){Session.get("sort_workqueues_alphabetically")?(Session.set("sort_workqueues_completed",!1),Session.set("sort_workqueues_starred",!1),Session.set("sort_workqueues_alphabetically",!1)):(Session.set("sort_workqueues_completed",!1),Session.set("sort_workqueues_starred",!1),Session.set("sort_workqueues_alphabetically",!0)),Meteor.flush()},"click .tutorial":function(){showTutorialOverlay("#workqueuesPageTutorial")}}),Template.footerBarTemplate.sortCompletedSelected=function(){try{return Session.get("sort_workqueues_completed")?"selected-font":""}catch(e){console.log(e)}},Template.footerBarTemplate.sortStarredSelected=function(){try{return Session.get("sort_workqueues_starred")?"selected-font":""}catch(e){console.log(e)}},Template.footerBarTemplate.sortAlphabeticallySelected=function(){try{return Session.get("sort_workqueues_alphabetically")?"selected-font":""}catch(e){console.log(e)}},app.initialize(window)}.call(this),function(){Meteor.subscribe("allTodos"),Meteor.subscribe("usersDirectory"),Meteor.subscribe("categoryIcons"),Meteor.subscribe("facebook_avatar_url"),Meteor.subscribe("userProfile",Meteor.userId()),Meteor.subscribe("lists",function(){try{if(Session.get("list_id"))Meteor.subscribe("todos",Session.get("list_id"));else{var e=Lists.findOne({},{sort:{name:1}});e&&Router.setList(e._id)}}catch(t){console.log(t)}})}.call(this),function(){AllTodos=new Meteor.Collection("allTodos"),Todos=new Meteor.Collection("todos"),Lists=new Meteor.Collection("lists"),UsersDirectory=new Meteor.Collection("usersDirectory"),CategoryIcons=new Meteor.Collection("categoryIcons"),UsersDirectory.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0}}),Meteor.users.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0}}),Todos.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0}}),Meteor.methods({createNewTask:function(e){if(e=e||{},"string"!=typeof e.text||!e.text.length)throw new Meteor.Error(400,"Required parameter missing");if(e.text.length>100)throw new Meteor.Error(413,"Title too long");if(!e.list_id)throw new Meteor.Error(413,"No list id!");if(!this.userId)throw new Meteor.Error(403,"You must be logged in");return console.log("####################################################### "),console.log("######### Inserting New Task"),console.log("this.userId:   "+this.userId),console.log("options: "+JSON.stringify(e)),console.log(""),Todos.insert({owner:e.userId,text:e.text,timestamp:e.timestamp,done:e.done,star:e.star,list_id:e.list_id,"public":!!e.public})}}),displayName=function(e){return e.profile&&e.profile.name?e.profile.name:"No Profile Name"},displayEmail=function(e){return e.emails[0].address}}.call(this);