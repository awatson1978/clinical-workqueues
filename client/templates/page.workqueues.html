<!-- TODO:  add workqueue sorting buttons to footer bar;  date, completed, alphabetical/name, id, etc -->

<template name="workqueuesPageTemplate">
    <div id="workqueuesPage" class="page helveticas">
        <div class="new-task-container">
            <input id="newTaskInput" type="text" class="search lightgray" value="add new task" />
        </div>
        {{> workqueueTemplate}}
    </div>
    <div class="hidden resize-trigger">resized: {{resized}}</div>
</template>


<template name="workqueueTemplate">
    <div>
        {{#if receivedNewAlert }}
        <div class="padded">
            {{> dropboxAlert}}
        </div>
        {{/if }}
    </div>
    <div id="items-view" class="touch-trigger touch-disabled">
        <ul id="item-list">
            {{#each todos}}
            {{> taskItemTemplate}}
            {{/each}}
        </ul>
    </div>
    {{> taskDetailCardTemplate }}
</template>

<template name="taskItemTemplate">
    <li class="todo {{done_class}}">
        <ul class="inline-list">
            {{#if editing}}
            <li class="edit">
                <input id="todo-input" type="text" value="{{!text}}" />
            </li>
            {{else}}
            <li class="display">
                <span class="largish unselectable {{task_complete}} checkmark pictogram">%</span>
            </li>
            <li class="display">
                <span class="largish unselectable {{task_star}} task-star pictogram">*</span>
            </li>
            <li class="display">
                <span class="largish unselectable lightgray task-info pictogram hide-for-small">b</span>
            </li>
            <!--<li class="display">-->
                <!--<span class="largish lightgray {{task_delete}} task-send pictogram">o</span>-->
            <!--</li>-->
            <li class="display">
                <span class="largish unselectable lightgray task-delete pictogram hide-for-small">x</span>
            </li>
            <li class="display">
                <span class="todo-text {{task_text_complete}}">{{text}}</span>
            </li>
            {{/if}}
            <li class="item-tags">

            </li>
        </ul>
        {{#if showDeleteButton}}
            <ul class="horizontal-tags">
                <li class="delete-button removable_tag tag">
                    <div class="name">
                        Delete
                    </div>
                </li>
                <li class="largish addtag pictograph"> </li>
            </ul>
        {{else}}
            <ul class="horizontal-tags">
                {{#each tag_objs}}
                <li class="tag removable_tag">
                    <div class="name">{{tag}}<span class="pictographs remove"> X</span></div>
                </li>
                {{/each}}
                {{#if adding_tag}}
                <li class="tag edittag">
                    <input type="text" id="edittag-input" value="" />
                </li>
                {{else}}
                <li class="largish addtag pictograph">J</li>
                {{/if}}
            </ul>
        {{/if }}
    </li>
</template>



<!-- TODO: select better name for taskDetailCardTemplate  -->
<template name="taskDetailCardTemplate">
    <!-- TODO: Extract showTaskDetail to outside of taskDetailCardTemplate  -->
    {{#if showTaskDetail}}
    <div class="spacer row"></div>
    <div id="taskDetailCard" class="task-detail-container">
        {{#if showTaskDetailModalMask }}
            <div class="detailed-task-card-modal-mask-gradient"></div>
            <div class="detailed-task-card-modal-mask"></div>
        {{/if }}

        <div class="card-header rounded-top-right">
            <span class="white card-meta-data barcode">{{todo_id}}</span>
            <span class="pictograph close-task-card hide-on-mobile">u</span>
        </div>

        <div class="task-detail-card-body card-body-resize">
            <div class="task-detail-image-container"><img class="task-detail-card-image-image" src="{{todo_image}}" /></div>
            <div class="detailed-task-text">{{ todo_text }}</div>
            <div class="card-delete-button largish pictograph">x</div>
        </div>

        <div class="task-detail-tag-footer card-footer-resize">
            <ul class="lower-horizontal-tags">
                {{#each tag_list}}
                <li class="tag removable_tag">
                    <div class="name">{{tag}}<span class="pictographs remove"> X</span></div>
                </li>
                {{/each}}
                {{#if adding_detailed_tag}}
                <li class="tag edittag">
                    <input type="text" id="edittagInputDetailed" value="" />
                </li>
                {{else}}
                <li id="detailedTaskAddTagIcon" class="largish addtag pictograph">J</li>
                {{/if}}
            </ul>
        </div>
        <div class="spacer row"></div>
    </div>
    {{/if}}
</template>
